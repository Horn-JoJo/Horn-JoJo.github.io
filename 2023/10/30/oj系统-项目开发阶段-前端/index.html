<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>kuroko's blog | kuroko's blog</title><meta name="author" content="Horn JoJo"><meta name="copyright" content="Horn JoJo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1.Vue前端项目介绍实验介绍本次实验首先会安装 Volar 插件，然后下载前端项目的代码并运行，接着展示项目文件结构并对文件的作用进行解释，最后给出项目后续的模块图。 前端项目只是在简单学习 Vue 的情况下写的，如果看见不对或不足之处，请大家指出，谢谢！ 知识点 Volar npm Vue 项目文件结构  项目介绍本次项目使用 Vue3 + Vite + ElementUI。 Vue 官网：h">
<meta property="og:type" content="article">
<meta property="og:title" content="kuroko&#39;s blog">
<meta property="og:url" content="http://kuroko.love/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/index.html">
<meta property="og:site_name" content="kuroko&#39;s blog">
<meta property="og:description" content="1.Vue前端项目介绍实验介绍本次实验首先会安装 Volar 插件，然后下载前端项目的代码并运行，接着展示项目文件结构并对文件的作用进行解释，最后给出项目后续的模块图。 前端项目只是在简单学习 Vue 的情况下写的，如果看见不对或不足之处，请大家指出，谢谢！ 知识点 Volar npm Vue 项目文件结构  项目介绍本次项目使用 Vue3 + Vite + ElementUI。 Vue 官网：h">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picbed.kuroko.love/blog_background/%E6%B3%AA%E7%88%B7and%E5%88%9D%E6%98%A5.jpg">
<meta property="article:published_time" content="2023-10-30T07:51:18.000Z">
<meta property="article:modified_time" content="2023-10-30T08:37:41.908Z">
<meta property="article:author" content="Horn JoJo">
<meta property="article:tag" content="记录,电影,生活,学习,爱好">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picbed.kuroko.love/blog_background/%E6%B3%AA%E7%88%B7and%E5%88%9D%E6%98%A5.jpg"><link rel="shortcut icon" href="/asserts/kuroko.png"><link rel="canonical" href="http://kuroko.love/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'kuroko\'s blog',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-30 16:37:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/asserts/kuroko.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-HOME"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-HOME"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-guidang"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang"></use></svg><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao-"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinlehe">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-film-full">                   </use></svg><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-TIFFANYSROOM_huaban"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-TIFFANYSROOM_huaban"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-feijifenxianglianjie"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-feijifenxianglianjie"></use></svg><span> 友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-xihuan"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xihuan"></use></svg><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://picbed.kuroko.love/blog_background/%E6%B3%AA%E7%88%B7and%E5%88%9D%E6%98%A5.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="kuroko's blog"><span class="site-name">kuroko's blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-HOME"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-HOME"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-guidang"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guidang"></use></svg><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> 标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-liebiao-"></use></svg><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yinlehe">                   </use></svg><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-film-full">                   </use></svg><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-TIFFANYSROOM_huaban"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-TIFFANYSROOM_huaban"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-feijifenxianglianjie"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-feijifenxianglianjie"></use></svg><span> 友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-xihuan"></i><svg class="menu_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xihuan"></use></svg><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-30T07:51:18.000Z" title="发表于 2023-10-30 15:51:18">2023-10-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-30T08:37:41.908Z" title="更新于 2023-10-30 16:37:41">2023-10-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">28.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>153分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Vue前端项目介绍"><a href="#1-Vue前端项目介绍" class="headerlink" title="1.Vue前端项目介绍"></a>1.Vue前端项目介绍</h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验首先会安装 Volar 插件，然后下载前端项目的代码并运行，接着展示项目文件结构并对文件的作用进行解释，最后给出项目后续的模块图。</p>
<p>前端项目只是在简单学习 Vue 的情况下写的，如果看见不对或不足之处，请大家指出，谢谢！</p>
<h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>Volar</li>
<li>npm</li>
<li>Vue 项目文件结构</li>
</ul>
<h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p>本次项目使用 Vue3 + Vite + ElementUI。</p>
<p>Vue 官网：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></p>
<p>Element 官网：<a target="_blank" rel="noopener" href="https://element-plus.gitee.io/zh-CN/">https://element-plus.gitee.io/zh-CN/</a></p>
<h4 id="更换插件"><a href="#更换插件" class="headerlink" title="更换插件"></a>更换插件</h4><p>下载插件 Volar：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/21d707883883da9ddf1d0c8ba58594e0-0" alt="图片描述"></p>
<p>卸载插件 Vetur, 不然很多代码会报错。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/b31d531ddad4579522b74cffa0383d6a-0" alt="图片描述"></p>
<p><strong>注意：如果还有代码报错，这不是代码问题，这是插件并未启动。</strong></p>
<h4 id="确保前端环境初始化"><a href="#确保前端环境初始化" class="headerlink" title="确保前端环境初始化"></a>确保前端环境初始化</h4><p>如果你点击 <code>Web 服务</code> 能够访问到页面，这是没有关闭 nginx 服务器（编写后端时，为了检测后端效果，运行的完整前端项目），首先执行下面命令，关闭 nginx 服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭 nginx 服务</span></span><br><span class="line">sudo service nginx stop</span><br></pre></td></tr></table></figure>
<p>此时我们再次点击 <code>web 服务</code> 查看，还可以看到页面，我们需要点击 F5 刷新，如果为如下图，则将环境初始化。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/2fc8f1e1eab64a05c32b88c7c706c145-0" alt="图片描述"></p>
<h4 id="下载代码并运行"><a href="#下载代码并运行" class="headerlink" title="下载代码并运行"></a>下载代码并运行</h4><p>执行下面命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code21.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./XDOJFE code21.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> XDOJFE</span><br><span class="line"><span class="comment"># 安装依赖包</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment"># 安装monaco-editor的依赖包</span></span><br><span class="line">cnpm install --save-dev vite-plugin-monaco-editor@1.0.10</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试，如下图则说明成功。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9c72d16efde8205c92807bb51d478c1b-0" alt="图片描述"></p>
<h2 id="分析代码"><a href="#分析代码" class="headerlink" title="分析代码"></a>分析代码</h2><p>打开项目代码，即可看到下面的项目文件结构：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|-- node_modules          <span class="comment"># 通过 npm install 下载安装的项目依赖包</span></span><br><span class="line">|-- public                <span class="comment"># 存放静态资源公共资源，不会被压缩合并</span></span><br><span class="line">|-- src                   <span class="comment"># 项目开发主要文件夹</span></span><br><span class="line">    |-- assest            <span class="comment"># 静态文件</span></span><br><span class="line">    |-- axios             <span class="comment"># 存放axios配置，实现对后端发送请求</span></span><br><span class="line">    |-- components        <span class="comment"># 存放组件</span></span><br><span class="line">    |-- pages             <span class="comment"># 界面组件</span></span><br><span class="line">    |-- router            <span class="comment"># 存放路由配置，实现界面跳转</span></span><br><span class="line">    |-- store             <span class="comment"># 存放vuex配置，实现</span></span><br><span class="line">    |-- App.vue           <span class="comment"># 根组件</span></span><br><span class="line">    |-- main.js           <span class="comment"># 入口文件</span></span><br><span class="line">    |-- index.html        <span class="comment"># 首页入口.html文件</span></span><br><span class="line">    |-- package.json      <span class="comment"># 项目配置和包管理文件（项目依赖和技术）</span></span><br><span class="line">    |-- vite.config.json  <span class="comment"># 项目配置信息：跨域proxy代理</span></span><br></pre></td></tr></table></figure>
<ol>
<li>axios 文件夹中的 index.js 文件是对 axios 进行配置，因为后端传入的 ID 是 int64 类型，如果不进行大数处理会导致前端收到的数据存在错误。（axios 会将 int64 类型的后两位数字变为 0）</li>
<li>components 文件夹全部存放组件的 vue 文件。</li>
<li>pages 文件夹全部存放关于界面组件的 vue 文件。</li>
<li>router 文件夹中的 index.js 文件是对路由的配置，通过路由可以跳转到其它页面。主要看 routes 配置，同时该文件也实现了路由跳转时的进度条。</li>
<li>store 文件夹中的 index.js 文件是对 vuex 的配置，vuex 可以进行全局的状态管理（类似于全局变量），vuex 可以存放变量以及函数。</li>
<li>App.vue 是主组件，是页面入口文件，是 vue 页面资源的首加载项。其中 <code>&lt;router-view&gt;</code> 最为关键，当路由跳转时，就会通过此标签渲染路由匹配到的组件。</li>
<li>main.js 主要作用是初始化 vue 实例并使用需要的插件。</li>
<li>index.html 是一个总的入口文件，vue 是单页面应用，挂在 id 为 app 的 div 下然后动态渲染路由模板。里面的 link 使用了 katex 公式的 CDN 引入。</li>
<li>package.json 它列出了项目使用的所有依赖项(项目所依赖的外部代码)。</li>
<li>vite.config.json 对项目的配置，主要是 server 对项目配置了代理服务器，解决跨域问题。</li>
</ol>
<p>项目加载的过程是 index.html -&gt; main.js -&gt; App.vue -&gt; helloworld.vue</p>
<p><strong>后续将会从如下几个模块实现本项目：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/0732d5a9fc139b62f62a27306f83c0031c-0" alt="图片描述"></p>
<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p>
<ol>
<li>安装 Volar 插件，卸载 Vetur 插件。</li>
<li>下载并运行项目。</li>
<li>解释项目的文件的作用。</li>
<li>给出项目加载的过程。</li>
</ol>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code21.zip</span><br></pre></td></tr></table></figure>
<h1 id="2-用户模块实现"><a href="#2-用户模块实现" class="headerlink" title="2.用户模块实现"></a>2.用户模块实现</h1><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/fb936f2e765e8fa72af80a03c08c4063-0" alt="图片描述"></p>
<p>实现了通过 Token 自动登录功能。</p>
<h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>实现用户模块</li>
<li>ECharts 库</li>
<li>请求拦截器和响应拦截器</li>
</ul>
<h2 id="实现用户饼图组件"><a href="#实现用户饼图组件" class="headerlink" title="实现用户饼图组件"></a>实现用户饼图组件</h2><p>该组件主要使用 ECharts 组件库，官方链接：</p>
<p><a target="_blank" rel="noopener" href="https://echarts.apache.org/handbook/zh/how-to/chart-types/pie/basic-pie/">https://echarts.apache.org/handbook/zh/how-to/chart-types/pie/basic-pie/</a></p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/ce443ec176587510d3a49811dc916871-0" alt="图片描述"></p>
<p>将 components -&gt; Chart -&gt; UserPieChart.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;main&quot; style=&quot;height:300px;width:300px&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line">let myChart;</span><br><span class="line">const options = reactive(&#123;</span><br><span class="line">  tooltip: &#123;&#125;,</span><br><span class="line">  legend: &#123;</span><br><span class="line">    orient: &quot;horizontal&quot;,</span><br><span class="line">    x: &quot;center&quot;,</span><br><span class="line">    y: &quot;bottom&quot;,</span><br><span class="line">    data: [&quot;Submit&quot;, &quot;AC&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &quot;pie&quot;,</span><br><span class="line">      stillShowZeroSum: false,</span><br><span class="line">      data: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;Submit&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;AC&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      radius: &quot;45%&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function SetDataInfo(info) &#123;</span><br><span class="line">  options.series[0].data[0].value = info.SubmitNum;</span><br><span class="line">  options.series[0].data[1].value = info.ACNum;</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function EchartsInit() &#123;</span><br><span class="line">  // 基于准备好的dom，初始化echarts实例</span><br><span class="line">  myChart = echarts.init(document.getElementById(&quot;main&quot;));</span><br><span class="line">  // 绘制图表</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetDataInfo,</span><br><span class="line">&#125;);</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  EchartsInit();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现登录对话框"><a href="#实现登录对话框" class="headerlink" title="实现登录对话框"></a>实现登录对话框</h2><p>实现：通过 Element 组件库的 Dialog 组件实现对话框，然后通过 Element 组件库的 Form 组件获取登录信息，最后通过 axios 将信息发送至后端请求登录。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/1972c4edbf82185dd7ff5e22a0393d20-0" alt="图片描述"></p>
<p>将 components -&gt; Dialog -&gt; Login.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;dialogFormVisible&quot; title=&quot;登录&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;账号&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.account&quot; maxlength=&quot;20&quot; autocomplete=&quot;off&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.password&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">      &lt;span class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;SubmitInfo&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 对话框是否关闭</span><br><span class="line">const dialogFormVisible = ref(false);</span><br><span class="line">// 输入框的长度</span><br><span class="line">const formLabelWidth = &quot;200px&quot;;</span><br><span class="line">// 信息</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  account: &quot;&quot;,</span><br><span class="line">  password: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line">// 打开对话框</span><br><span class="line">function open() &#123;</span><br><span class="line">  dialogFormVisible.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交表单</span><br><span class="line">function SubmitInfo() &#123;</span><br><span class="line">  //判断必填字段是否为空</span><br><span class="line">  if (!form.account || !form.password) &#123;</span><br><span class="line">    pointmessage.value = &quot;必填字段不能为空！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户长度</span><br><span class="line">  if (form.account.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;账号长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查密码长度</span><br><span class="line">  if (form.password.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">        功能：登录用户</span><br><span class="line">        传入：Json(Account,PassWord)</span><br><span class="line">        传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span><br><span class="line">    */</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/login`, &#123;</span><br><span class="line">      Account: form.account,</span><br><span class="line">      PassWord: form.password,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;登录成功！！！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          dialogFormVisible.value = false;</span><br><span class="line"></span><br><span class="line">          store.commit(&quot;Login&quot;, response.data.Info);</span><br><span class="line">          router.push(&#123; name: &quot;HomePage&quot; &#125;);</span><br><span class="line">          return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  open,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现注册对话框"><a href="#实现注册对话框" class="headerlink" title="实现注册对话框"></a>实现注册对话框</h2><p>实现：通过 Element 组件库的 Dialog 组件实现对话框，然后通过 Element 组件库的 Form 组件获取注册信息，最后通过 axios 将信息发送至后端请求注册，注册需要注意检测注册信息是否合法。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/64f37bbaeeed6fea19bc4967b5bdc85f-0" alt="图片描述"></p>
<p>将 components -&gt; Dialog -&gt; Register.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;dialogFormVisible&quot; title=&quot;注册&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;昵称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.nickname&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于2个字符的昵称 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;账号&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.account&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于6个字符的账号 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.password&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于6个字符的密码 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;确认密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.confirmpassword&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;确认密码 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;学校&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.school&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的学校名称 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;专业&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.major&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的专业名称 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;个人简介&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.personalprofile&quot;</span><br><span class="line">          maxlength=&quot;25&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的个人简介 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">      &lt;span class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;SubmitInfo&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 对话框是否关闭</span><br><span class="line">const dialogFormVisible = ref(false);</span><br><span class="line">// 输入框的长度</span><br><span class="line">const formLabelWidth = &quot;200px&quot;;</span><br><span class="line"></span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  nickname: &quot;&quot;,</span><br><span class="line">  account: &quot;&quot;,</span><br><span class="line">  password: &quot;&quot;,</span><br><span class="line">  confirmpassword: &quot;&quot;,</span><br><span class="line">  personalprofile: &quot;&quot;,</span><br><span class="line">  school: &quot;&quot;,</span><br><span class="line">  major: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line">// 打开对话框</span><br><span class="line">function open() &#123;</span><br><span class="line">  dialogFormVisible.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交表单</span><br><span class="line">function SubmitInfo() &#123;</span><br><span class="line">  //判断必填字段是否为空</span><br><span class="line">  if (</span><br><span class="line">    !form.nickname ||</span><br><span class="line">    !form.account ||</span><br><span class="line">    !form.password ||</span><br><span class="line">    !form.confirmpassword</span><br><span class="line">  ) &#123;</span><br><span class="line">    pointmessage.value = &quot;必填字段不能为空！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查昵称长度</span><br><span class="line">  if (form.nickname.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;昵称长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户长度</span><br><span class="line">  if (form.account.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;账户长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查密码长度</span><br><span class="line">  if (form.password.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查确认密码长度</span><br><span class="line">  if (form.confirmpassword.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;确认密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查昵称是否符合规范（是否全为空格）</span><br><span class="line">  if (form.nickname.match(/^\s+$/)) &#123;</span><br><span class="line">    pointmessage.value = &quot;昵称不符合规范！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户是否符合</span><br><span class="line">  if (!checkstr(form.account)) &#123;</span><br><span class="line">    pointmessage.value = &quot;账户只能包含字母和数字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (!checkstr(form.password)) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码只能包含字母和数字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 判断两次密码是否一致</span><br><span class="line">  if (form.password != form.confirmpassword) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码和确认密码不一致！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">        功能：注册用户</span><br><span class="line">        传入：Json(NickName,Account,PassWord,PersonalProfile,School,Major)</span><br><span class="line">        传出：Json(Result,Reason)</span><br><span class="line">    */</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/register`, &#123;</span><br><span class="line">      NickName: form.nickname,</span><br><span class="line">      Account: form.account,</span><br><span class="line">      PassWord: form.password,</span><br><span class="line">      PersonalProfile: form.personalprofile,</span><br><span class="line">      School: form.school,</span><br><span class="line">      Major: form.major,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;恭喜你！注册成功！成为XDOJ的一员！！！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          dialogFormVisible.value = false;</span><br><span class="line">          // 本地保存账号和密码</span><br><span class="line">          localStorage.setItem(&quot;Account&quot;, form.account);</span><br><span class="line">          localStorage.setItem(&quot;PassWord&quot;, form.password);</span><br><span class="line">          return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 正则判断字符串是否只包含字母和数字</span><br><span class="line">function checkstr(value: string) &#123;</span><br><span class="line">  var Regx = /^[0-9A-Z]+$/i;</span><br><span class="line">  if (Regx.test(value)) &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  open,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现用户主页页面"><a href="#实现用户主页页面" class="headerlink" title="实现用户主页页面"></a>实现用户主页页面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/7939e4cdf6ecf933ef6496604acbcf65-0" alt="图片描述"></p>
<p>将 pages -&gt; UserHome.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; NickName &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-avatar :size=&quot;170&quot; :src=&quot;Avatar&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;14&quot;&gt;</span><br><span class="line">        个性签名：&#123;&#123; PersonalProfile &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        学校：&#123;&#123; School &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        专业：&#123;&#123; Major &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        解题数量：&#123;&#123; ACNum &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        提交次数：&#123;&#123; SubmitNum &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        加入时间：&#123;&#123; JoinTime &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;UserPieChart ref=&quot;userpiechart&quot;&gt;&lt;/UserPieChart&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import UserPieChart from &quot;../components/Chart/UserPieChart.vue&quot;;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const userpiechart = ref();</span><br><span class="line">const router = useRouter();</span><br><span class="line">const userid = router.currentRoute.value.query.UserId;</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const NickName = ref(&quot;&quot;);</span><br><span class="line">const Avatar = ref(&quot;&quot;);</span><br><span class="line">const PersonalProfile = ref(&quot;&quot;);</span><br><span class="line">const School = ref(&quot;&quot;);</span><br><span class="line">const Major = ref(&quot;&quot;);</span><br><span class="line">const JoinTime = ref(&quot;&quot;);</span><br><span class="line">const ACNum = ref(0);</span><br><span class="line">const Solves = reactive(&#123; array: [] &#125;);</span><br><span class="line">const SubmitNum = ref();</span><br><span class="line"></span><br><span class="line">function GetInfo() &#123;</span><br><span class="line">  console.log(&quot;调用函数&quot;);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/home`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: userid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          setinfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function setinfo(info) &#123;</span><br><span class="line">  NickName.value = info.NickName;</span><br><span class="line">  Avatar.value = info.Avatar;</span><br><span class="line">  PersonalProfile.value = info.PersonalProfile;</span><br><span class="line">  School.value = info.School;</span><br><span class="line">  Major.value = info.Major;</span><br><span class="line">  JoinTime.value = info.JoinTime;</span><br><span class="line">  ACNum.value = info.ACNum;</span><br><span class="line">  Solves.array = info.Solves;</span><br><span class="line">  SubmitNum.value = info.SubmitNum;</span><br><span class="line"></span><br><span class="line">  let tmpinfo = &#123; ACNum: info.ACNum, SubmitNum: info.SubmitNum &#125;;</span><br><span class="line">  userpiechart.value.SetDataInfo(tmpinfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 调用函数</span><br><span class="line">  GetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.h1 &#123;</span><br><span class="line">  font-size: 50px;</span><br><span class="line">  margin-left: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现用户设置界面"><a href="#实现用户设置界面" class="headerlink" title="实现用户设置界面"></a>实现用户设置界面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/53f2aec84cfcee84bf5a3df35108737b-0" alt="图片描述"></p>
<p>将 pages -&gt; UserSetting.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;修改个人信息&lt;/h1&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot; label-width=&quot;120px&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;头像&quot;&gt;</span><br><span class="line">        &lt;el-avatar :size=&quot;100&quot; :src=&quot;form.Avatar&quot; /&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.Avatar&quot; /&gt;</span><br><span class="line">        &lt;el-text class=&quot;mx-1&quot;</span><br><span class="line">          &gt;Tip：大家可以通过网上获取图片地址链接更改头像&lt;/el-text</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;个性签名&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.PersonalProfile&quot;</span><br><span class="line">          maxlength=&quot;25&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;学校&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.School&quot; maxlength=&quot;15&quot; show-word-limit /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;专业&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.Major&quot; maxlength=&quot;15&quot; show-word-limit /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=&quot;onCancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">const userid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  Avatar: &quot;&quot;,</span><br><span class="line">  PersonalProfile: &quot;&quot;,</span><br><span class="line">  School: &quot;&quot;,</span><br><span class="line">  Major: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const onSubmit = () =&gt; &#123;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/update`, &#123;</span><br><span class="line">      UserId: userid.value,</span><br><span class="line">      Avatar: form.Avatar,</span><br><span class="line">      School: form.School,</span><br><span class="line">      Major: form.Major,</span><br><span class="line">      PersonalProfile: form.PersonalProfile,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          // 如果是本人修改则修改头像</span><br><span class="line">          if (store.state.UserId == userid.value)</span><br><span class="line">            store.state.Avatar = form.Avatar;</span><br><span class="line"></span><br><span class="line">          pointmessage.value = &quot;修改成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(&quot;submit!&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const onCancel = () =&gt; &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;;</span><br><span class="line">// 获取用户信息</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/updateinfo`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: userid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;请求信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          setdatainfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 设置信息</span><br><span class="line">function setdatainfo(info: any) &#123;</span><br><span class="line">  form.Avatar = info.Avatar;</span><br><span class="line">  form.Major = info.Major;</span><br><span class="line">  form.PersonalProfile = info.PersonalProfile;</span><br><span class="line">  form.School = info.School;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  userid.value = String(route.query.UserId);</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现用户排名界面"><a href="#实现用户排名界面" class="headerlink" title="实现用户排名界面"></a>实现用户排名界面</h2><p>实现：主要利用 Element 组件库的 Table 组件、 Carousel 走马灯组件和 Pagination 分页组件。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/b23d973e5656188f4ba11ee26850ef58-0" alt="图片描述"></p>
<p>将 pages -&gt; UserRank.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-carousel :interval=&quot;4000&quot; type=&quot;card&quot; height=&quot;300px&quot;&gt;</span><br><span class="line">      &lt;el-carousel-item</span><br><span class="line">        v-for=&quot;(item, index) in carouseldata.array&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;center&gt;</span><br><span class="line">          &lt;h1&gt;&#123;&#123; item.rank &#125;&#125;&lt;/h1&gt;</span><br><span class="line">          &lt;el-avatar :size=&quot;100&quot; :src=&quot;item.avatar&quot; /&gt;</span><br><span class="line">          &lt;h1&gt;&#123;&#123; item.nickname &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;/center&gt;</span><br><span class="line">      &lt;/el-carousel-item&gt;</span><br><span class="line">    &lt;/el-carousel&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data=&quot;userrankdata.array&quot;</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">      @cell-click=&quot;</span><br><span class="line">        (row, column, cell, event) =&gt; rankclick(row, column, cell, event)</span><br><span class="line">      &quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Rank&quot; label=&quot;排名&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Avatar&quot; label=&quot;&quot; width=&quot;100&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-avatar :size=&quot;50&quot; :src=&quot;scope.row.Avatar&quot; /&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;NickName&quot; label=&quot;NickName&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop=&quot;PersonalProfile&quot;</span><br><span class="line">        label=&quot;PersonalProfile&quot;</span><br><span class="line">        width=&quot;700&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;ACNum&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;SubmitNum&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">        v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">        v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">        :page-sizes=&quot;[15, 30, 50]&quot;</span><br><span class="line">        :small=&quot;small&quot;</span><br><span class="line">        :disabled=&quot;disabled&quot;</span><br><span class="line">        :background=&quot;background&quot;</span><br><span class="line">        layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">        :total=&quot;TotalNum&quot;</span><br><span class="line">        @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">        @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 用户排名信息列表</span><br><span class="line">let userrankdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">let carouseldata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">    功能：获取用户的Rank排名</span><br><span class="line">    传入：Json(Page,PageSize)</span><br><span class="line">    传出：Json(ArrayInfo[_id,Rank,Avatar,NickName,PersonalProfile,SubmitNum,ACNum],TotalNum)</span><br><span class="line">*/</span><br><span class="line">function GetUserRank() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/rank`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          userrankdata.array = response.data.ArrayInfo;</span><br><span class="line">          TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">          if (currentPage.value == 1) &#123;</span><br><span class="line">            setCarousel(response.data.ArrayInfo);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function setCarousel(Info) &#123;</span><br><span class="line">  let size = Info.length &gt;= 3 ? 3 : Info.length;</span><br><span class="line">  for (var i = 0; i &lt; size; i++) &#123;</span><br><span class="line">    let info = &#123;</span><br><span class="line">      rank: Info[i].Rank,</span><br><span class="line">      nickname: Info[i].NickName,</span><br><span class="line">      avatar: Info[i].Avatar,</span><br><span class="line">    &#125;;</span><br><span class="line">    carouseldata.array.push(info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function rankclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123; name: &quot;UserHome&quot;, query: &#123; UserId: row._id &#125; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item h3 &#123;</span><br><span class="line">  color: #475669;</span><br><span class="line">  opacity: 0.75;</span><br><span class="line">  line-height: 200px;</span><br><span class="line">  margin: 0;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item:nth-child(2n) &#123;</span><br><span class="line">  background-color: #99a9bf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item:nth-child(2n + 1) &#123;</span><br><span class="line">  background-color: #d3dce6;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现用户管理页面"><a href="#实现用户管理页面" class="headerlink" title="实现用户管理页面"></a>实现用户管理页面</h2><p>实现：主要利用 Element 组件库的 Table 组件和 Pagination 分页组件。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/a4877f15251505fd16a223c5377755d9-0" alt="图片描述"></p>
<p>将 pages -&gt; Admin -&gt; AdminUser.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;用户&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;usersetdata.array&quot; border style=&quot;width: 100%&quot;&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;NickName&quot; label=&quot;昵称&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;PersonalProfile&quot; label=&quot;个人简介&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;School&quot; label=&quot;学校&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Major&quot; label=&quot;专业&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;JoinTime&quot; label=&quot;加入时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[20, 40, 60]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(20); // 当前页的数量</span><br><span class="line">let totalsize = ref(20);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// --------------------------------------</span><br><span class="line">// 查看用户</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;UserHome&quot;,</span><br><span class="line">    query: &#123; UserId: row._id &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑用户</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;编辑用户&quot;, row._id);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;UserSetting&quot;,</span><br><span class="line">    query: &#123; UserId: row._id &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除用户</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/user`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// -------------------------------------------------------</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">// 用户信息列表</span><br><span class="line">let usersetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetUserSetInfo(m_page, m_pagesize) &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/userlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: m_page,</span><br><span class="line">        PageSize: m_pagesize,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">          usersetdata.array = response.data.ArrayInfo;</span><br><span class="line">          totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="必要配置"><a href="#必要配置" class="headerlink" title="必要配置"></a>必要配置</h2><p>向 axios 文件夹 index.js 中添加如下代码：</p>
<p>配置设置请求拦截器（每次请求携带 token）、响应拦截器（对错误状态码进行错误处理）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器，每次请求都会先执行这里的代码</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 请求头携带localStorage里面的token</span></span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器，每次响应都会先执行这里的代码</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// 检测到未登录或登录信息过期</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;暂无权限！请查看是否登录！&quot;</span>);</span><br><span class="line">      <span class="comment">// 将用户进行退出（删除Token）</span></span><br><span class="line">      store.<span class="title function_">commit</span>(<span class="string">&quot;Logout&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="comment">// 参数有误</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;请求参数有误！&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">500</span>) &#123;</span><br><span class="line">      <span class="comment">// 服务器出错</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;服务器出错啦！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"><span class="comment">// 发送错误消息</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ErrorMessage</span> = (<span class="params">msg</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">message</span>: msg,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>向 store 文件夹中 mutations 配置项添加如下函数：</p>
<p>Login 函数：将 userinfo 的数据保存在 state 中，主要用于登录时，保存后端返回的数据。</p>
<p>SaveUserInfo 函数：将 userinfo 的数据保存在 state 中，主要用于使用 token 登录时，保存后端返回的数据。</p>
<p>Logout 函数：当退出登录时，需要重置 state 的数据以及清除浏览器存储中的 token。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Login</span>(state,userinfo)&#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, userinfo.<span class="property">Token</span>)</span><br><span class="line">    state.<span class="property">UserId</span> = userinfo.<span class="property">_id</span></span><br><span class="line">    state.<span class="property">NickName</span> = userinfo.<span class="property">NickName</span></span><br><span class="line">    state.<span class="property">Avatar</span> = userinfo.<span class="property">Avatar</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = userinfo.<span class="property">CommentLikes</span></span><br><span class="line">    state.<span class="property">Solves</span> = userinfo.<span class="property">Solves</span></span><br><span class="line">    state.<span class="property">Authority</span> = userinfo.<span class="property">Authority</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>(state.<span class="property">Authority</span>==<span class="number">5</span>)</span><br><span class="line">        state.<span class="property">IsAdmin</span>=<span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title class_">SaveUserInfo</span>(state,userinfo)&#123;</span><br><span class="line">    state.<span class="property">UserId</span> = userinfo.<span class="property">_id</span></span><br><span class="line">    state.<span class="property">NickName</span> = userinfo.<span class="property">NickName</span></span><br><span class="line">    state.<span class="property">Avatar</span> = userinfo.<span class="property">Avatar</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = userinfo.<span class="property">CommentLikes</span></span><br><span class="line">    state.<span class="property">Solves</span> = userinfo.<span class="property">Solves</span></span><br><span class="line">    state.<span class="property">Authority</span> = userinfo.<span class="property">Authority</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>(state.<span class="property">Authority</span>==<span class="number">5</span>)</span><br><span class="line">        state.<span class="property">IsAdmin</span>=<span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title class_">Logout</span>(state)&#123;</span><br><span class="line">    state.<span class="property">UserId</span> = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    state.<span class="property">NickName</span> = <span class="string">&#x27;未登录&#x27;</span></span><br><span class="line">    state.<span class="property">Avatar</span> = <span class="string">&#x27;http://127.0.0.1:8081/image/1&#x27;</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = []</span><br><span class="line">    state.<span class="property">Solves</span> = []</span><br><span class="line">    state.<span class="property">Authority</span> = <span class="number">1</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">false</span></span><br><span class="line">    state.<span class="property">IsAdmin</span> = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// 移除浏览器中token</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>向 App.vue 文件中添加如下代码（根据注释添加）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// openlogindialog 函数</span></span><br><span class="line">logindialog.<span class="property">value</span>.<span class="title function_">open</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// openregisterdialog 函数</span></span><br><span class="line">registerdialog.<span class="property">value</span>.<span class="title function_">open</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command == &quot;userhome&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;UserHome&quot;</span>, <span class="attr">query</span>: &#123; <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command == &quot;usersetting&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;UserSetting&quot;</span>, <span class="attr">query</span>: &#123; <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command = &quot;logout&quot;</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&quot;Logout&quot;</span>);</span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;HomePage&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>
<p>向 main.js 文件中 createApp 函数前面添加如下代码：</p>
<p>该代码主要是检测浏览器存储中是否有 token，如果有就向后端发送请求获取用户信息。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取本地用户信息</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&quot;./axios&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"><span class="comment">// 如果获取到Token则进行登录</span></span><br><span class="line"><span class="keyword">if</span> (token) &#123;</span><br><span class="line">  service.<span class="title function_">get</span>(<span class="string">`/api/user/tokenlogin`</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">Result</span> == <span class="string">&quot;Success&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 登录成功</span></span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&quot;SaveUserInfo&quot;</span>, response.<span class="property">data</span>.<span class="property">Info</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 登录失败</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error.<span class="property">data</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>执行如下代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了用户模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code22.zip</span><br></pre></td></tr></table></figure>
<h1 id="3-通用模块实现"><a href="#3-通用模块实现" class="headerlink" title="3.通用模块实现"></a>3.通用模块实现</h1><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/833502b96666bcb5041b39741699849f-0" alt="图片描述"></p>
<h4 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>评论组件</li>
<li>Markdown 编辑器组件</li>
<li>undraw-ui 组件库</li>
<li>Naive UI 组件库</li>
</ul>
<h2 id="实现评论组件"><a href="#实现评论组件" class="headerlink" title="实现评论组件"></a>实现评论组件</h2><p>实现：使用了 undraw-ui 组件库的 Comment 评论组件以及 Naive UI 组件库的 Pagination 分页组件。</p>
<p>注：评论组件和 Element 组件库的分页组件搭配会出现错误。</p>
<p>undraw-ui 官网：<a target="_blank" rel="noopener" href="https://undraw.gitee.io/undraw-ui/">https://undraw.gitee.io/undraw-ui/</a></p>
<p>Navie UI 官网： <a target="_blank" rel="noopener" href="https://www.naiveui.com/zh-CN/os-theme">https://www.naiveui.com/zh-CN/os-theme</a></p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9c8f7a7b4dc8c1ea06586a812b8c4f8d-0" alt="图片描述"></p>
<p>将 components -&gt; Comment.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;comment-view&quot;&gt;</span><br><span class="line">    &lt;u-comment</span><br><span class="line">      :config=&quot;config&quot;</span><br><span class="line">      :show-size=&quot;3&quot;</span><br><span class="line">      page</span><br><span class="line">      @submit=&quot;submit&quot;</span><br><span class="line">      @like=&quot;like&quot;</span><br><span class="line">      @remove=&quot;remove&quot;</span><br><span class="line">      @report=&quot;report&quot;</span><br><span class="line">      @reply-page=&quot;replyPage&quot;</span><br><span class="line">    &gt;&lt;/u-comment&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;n-pagination</span><br><span class="line">      v-model:page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :item-count=&quot;TotalNum&quot;</span><br><span class="line">      show-size-picker</span><br><span class="line">      :page-sizes=&quot;pageSizes&quot;</span><br><span class="line">      @update:page=&quot;handlepage&quot;</span><br><span class="line">      @update:page-size=&quot;handlpagesize&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; NPagination &#125; from &quot;naive-ui&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  UToast,</span><br><span class="line">  ConfigApi,</span><br><span class="line">  CommentApi,</span><br><span class="line">  ReplyPageParam,</span><br><span class="line">  CommentSubmitParam,</span><br><span class="line">  ReplyApi,</span><br><span class="line">&#125; from &quot;undraw-ui&quot;;</span><br><span class="line">// 下载表情包资源emoji.zip https://gitee.com/undraw/undraw-ui/releases</span><br><span class="line">// static文件放在public下,引入emoji.ts文件可以移动到自定义位置</span><br><span class="line">import emoji from &quot;../../public/emoji&quot;;</span><br><span class="line">// 父亲ID（讨论ID或者题解ID）</span><br><span class="line">const props = defineProps([&quot;ParentId&quot;, &quot;ArticleType&quot;]);</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const currentPage = ref(1); // 当前页数</span><br><span class="line">const pageSize = ref(5); // 当前页的数量</span><br><span class="line">const TotalNum = ref(0); // 总数</span><br><span class="line">const pageSizes = [</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;5 每页&quot;,</span><br><span class="line">    value: 5,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;10 每页&quot;,</span><br><span class="line">    value: 10,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;15 每页&quot;,</span><br><span class="line">    value: 15,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">// 获取父评论信息</span><br><span class="line">function getCommentInfo(ParentId: string) &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Type: &quot;Father&quot;,</span><br><span class="line">        ParentId: ParentId,</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">        SonNum: 5,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        TotalNum.value = response.data.TotalNum;</span><br><span class="line">        setCommentInfo(response.data.ArryInfo);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 本人的信息 id，name，头像，点赞的</span><br><span class="line">const config = reactive&lt;ConfigApi&gt;(&#123;</span><br><span class="line">  user: &#123;</span><br><span class="line">    id: store.state.UserId,</span><br><span class="line">    username: store.state.NickName,</span><br><span class="line">    avatar: store.state.Avatar,</span><br><span class="line">    // 评论id数组 建议:存储方式用户id和文章id和评论id组成关系,根据用户id和文章id来获取对应点赞评论id,然后加入到数组中返回</span><br><span class="line">    likeIds: store.state.CommentLikes,</span><br><span class="line">  &#125;,</span><br><span class="line">  emoji: emoji,</span><br><span class="line">  comments: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function setCommentInfo(Info) &#123;</span><br><span class="line">  // 将原数组清空</span><br><span class="line">  config.comments = [];</span><br><span class="line">  // 循环获取父评论</span><br><span class="line">  for (var i in Info) &#123;</span><br><span class="line">    let fatherinfo = Info[i];</span><br><span class="line">    // 获取父评论</span><br><span class="line">    let Father: CommentApi = &#123;</span><br><span class="line">      id: String(fatherinfo[&quot;_id&quot;]),</span><br><span class="line">      parentId: fatherinfo[&quot;ParentId&quot;],</span><br><span class="line">      uid: String(fatherinfo[&quot;User&quot;][0][&quot;_id&quot;]),</span><br><span class="line">      address: &quot;&quot;,</span><br><span class="line">      content: fatherinfo[&quot;Content&quot;],</span><br><span class="line">      likes: fatherinfo[&quot;Likes&quot;],</span><br><span class="line">      createTime: fatherinfo[&quot;CreateTime&quot;],</span><br><span class="line">      user: &#123;</span><br><span class="line">        username: fatherinfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">        avatar: fatherinfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">        level: 0,</span><br><span class="line">        homeLink: &quot;&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      reply: null,</span><br><span class="line">    &#125;;</span><br><span class="line">    // 判断是否有子评论</span><br><span class="line">    if (fatherinfo[&quot;Child_Total&quot;] &gt; 0) &#123;</span><br><span class="line">      let Son: ReplyApi = &#123;</span><br><span class="line">        total: fatherinfo[&quot;Child_Total&quot;],</span><br><span class="line">        list: [],</span><br><span class="line">      &#125;;</span><br><span class="line">      // 循环获取子评论</span><br><span class="line">      for (var j in fatherinfo[&quot;Child_Comments&quot;]) &#123;</span><br><span class="line">        let soninfo = fatherinfo[&quot;Child_Comments&quot;][j];</span><br><span class="line">        let info = &#123;</span><br><span class="line">          id: soninfo[&quot;_id&quot;],</span><br><span class="line">          parentId: String(fatherinfo[&quot;ParentId&quot;]),</span><br><span class="line">          uid: String(soninfo[&quot;User&quot;][0][&quot;_id&quot;]),</span><br><span class="line">          address: &quot;&quot;,</span><br><span class="line">          content: soninfo[&quot;Content&quot;],</span><br><span class="line">          likes: soninfo[&quot;Likes&quot;],</span><br><span class="line">          createTime: soninfo[&quot;CreateTime&quot;],</span><br><span class="line">          user: &#123;</span><br><span class="line">            username: soninfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">            avatar: soninfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">            level: 0,</span><br><span class="line">            homeLink: &quot;&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">        Son.list.push(info);</span><br><span class="line">      &#125;</span><br><span class="line">      Father.reply = Son;</span><br><span class="line">    &#125;</span><br><span class="line">    config.comments.push(Father);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交评论事件</span><br><span class="line">const submit = (&#123; content, parentId, files, finish &#125;: CommentSubmitParam) =&gt; &#123;</span><br><span class="line">  if (Number(config.user.id) == 0) &#123;</span><br><span class="line">    pointmessage.value = &quot;请先登录！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&quot;提交评论: &quot; + content, parentId, files);</span><br><span class="line">  let info = &#123;&#125;;</span><br><span class="line">  if (parentId == null) &#123;</span><br><span class="line">    // 父评论</span><br><span class="line">    info = &#123;</span><br><span class="line">      Type: &quot;Father&quot;,</span><br><span class="line">      ArticleType: props.ArticleType,</span><br><span class="line">      ArticleId: props.ParentId,</span><br><span class="line">      ParentId: props.ParentId,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: config.user.id,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // 子评论</span><br><span class="line">    info = &#123;</span><br><span class="line">      Type: &quot;Son&quot;,</span><br><span class="line">      ArticleType: props.ArticleType,</span><br><span class="line">      ArticleId: props.ParentId,</span><br><span class="line">      ParentId: parentId,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: config.user.id,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Type:Father,ParentId:props.ParentId,</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/comment/insert`, &#123;</span><br><span class="line">      Info: info,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line"></span><br><span class="line">        let comment: CommentApi = &#123;</span><br><span class="line">          id: String(response.data._id),</span><br><span class="line">          parentId: parentId,</span><br><span class="line">          uid: config.user.id,</span><br><span class="line">          address: &quot;&quot;,</span><br><span class="line">          content: content,</span><br><span class="line">          likes: 0,</span><br><span class="line">          createTime: response.data.CreateTime,</span><br><span class="line">          contentImg: &quot;&quot;,</span><br><span class="line">          user: &#123;</span><br><span class="line">            username: config.user.username,</span><br><span class="line">            avatar: config.user.avatar,</span><br><span class="line">            level: 0,</span><br><span class="line">            homeLink: ``,</span><br><span class="line">          &#125;,</span><br><span class="line">          reply: null,</span><br><span class="line">        &#125;;</span><br><span class="line">        finish(comment);</span><br><span class="line">        UToast(&#123; message: &quot;评论成功!&quot;, type: &quot;info&quot; &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 删除评论</span><br><span class="line">const remove = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ArticleId: props.ParentId,</span><br><span class="line">        CommentId: id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        finish();</span><br><span class="line">        alert(`删除成功: $&#123;id&#125;`);</span><br><span class="line">        router.go(0);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//举报用户</span><br><span class="line">const report = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  console.log(id);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    finish();</span><br><span class="line">    alert(`举报成功: $&#123;id&#125;`);</span><br><span class="line">  &#125;, 200);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 点赞按钮事件 TOOD:暂时不能做，因为涉及到删除评论时，用户的数据也要删除</span><br><span class="line">const like = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  console.log(id);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    finish();</span><br><span class="line">  &#125;, 200);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//子评论回复分页</span><br><span class="line">const replyPage = (&#123; parentId, pageNum, pageSize, finish &#125;: ReplyPageParam) =&gt; &#123;</span><br><span class="line">  let childcommentinfo = reactive(&#123; array: [] &#125;);</span><br><span class="line">  let childcommentnum = ref(0);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Type: &quot;Son&quot;,</span><br><span class="line">        ParentId: parentId,</span><br><span class="line">        Page: pageNum,</span><br><span class="line">        PageSize: pageSize,</span><br><span class="line">        Skip: (pageNum - 1) * pageSize,</span><br><span class="line">        Limit: pageSize,</span><br><span class="line">        SonNum: 5,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        childcommentinfo.array = response.data.Child_Comments;</span><br><span class="line">        childcommentnum.value = response.data.Child_Total;</span><br><span class="line">        let tmp: ReplyApi = &#123;</span><br><span class="line">          total: childcommentnum.value,</span><br><span class="line">          list: [],</span><br><span class="line">        &#125;;</span><br><span class="line">        for (var tmpindex in childcommentinfo.array) &#123;</span><br><span class="line">          let tmpinfo = childcommentinfo.array[tmpindex];</span><br><span class="line">          let info = &#123;</span><br><span class="line">            id: tmpinfo[&quot;_id&quot;],</span><br><span class="line">            parentId: String(parentId),</span><br><span class="line">            uid: tmpinfo[&quot;User&quot;][0][&quot;_id&quot;],</span><br><span class="line">            address: &quot;&quot;,</span><br><span class="line">            content: tmpinfo[&quot;Content&quot;],</span><br><span class="line">            likes: tmpinfo[&quot;Likes&quot;],</span><br><span class="line">            createTime: tmpinfo[&quot;CreateTime&quot;],</span><br><span class="line">            user: &#123;</span><br><span class="line">              username: tmpinfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">              avatar: tmpinfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">              level: 0,</span><br><span class="line">              homeLink: &quot;&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;;</span><br><span class="line">          tmp.list.push(info);</span><br><span class="line">        &#125;</span><br><span class="line">        finish(tmp);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(&quot;回复分页&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 处理页数发生改变</span><br><span class="line">function handlepage(page: number) &#123;</span><br><span class="line">  console.log(&quot;handlenext&quot;, page);</span><br><span class="line">  currentPage.value = page;</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 处理每页数量发送改变</span><br><span class="line">function handlpagesize(pagesize: number) &#123;</span><br><span class="line">  console.log(&quot;handlpagesize&quot;, pagesize);</span><br><span class="line">  pageSize.value = pagesize;</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 调用函数</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.comment-view &#123;</span><br><span class="line">  margin-top: 2rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc ul &#123;</span><br><span class="line">  list-style: none !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc ul,</span><br><span class="line">.vp-doc ol &#123;</span><br><span class="line">  padding-left: 0 !important;</span><br><span class="line">  margin: 0 !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc li + li &#123;</span><br><span class="line">  margin-top: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现-Markdown-编辑器组件"><a href="#实现-Markdown-编辑器组件" class="headerlink" title="实现 Markdown 编辑器组件"></a>实现 Markdown 编辑器组件</h2><p>实现：使用了 Markdown 编辑器组件，并且添加了提示信息插件、emoji 插件、Katex 插件、快速复制代码插件，下面代码就是重新封装 v-md-editor 组件将工具栏添加更多选项。</p>
<p>官网：<a target="_blank" rel="noopener" href="http://ckang1229.gitee.io/vue-markdown-editor/zh/">http://ckang1229.gitee.io/vue-markdown-editor/zh/</a></p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/123d8a731a333ebbd2723b8e4bce3474-0" alt="图片描述"></p>
<p>将 components -&gt; MarkDownEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;v-md-editor</span><br><span class="line">      v-model=&quot;content&quot;</span><br><span class="line">      height=&quot;500px&quot;</span><br><span class="line">      left-toolbar=&quot;undo redo clear | h bold italic strikethrough quote | tip emoji | ul ol table hr | link image code | save &quot;</span><br><span class="line">    &gt;&lt;/v-md-editor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">function GetContent() &#123;</span><br><span class="line">  return content.value;</span><br><span class="line">&#125;</span><br><span class="line">function SetContent(value) &#123;</span><br><span class="line">  content.value = value;</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetContent,</span><br><span class="line">  SetContent,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现评论管理页面"><a href="#实现评论管理页面" class="headerlink" title="实现评论管理页面"></a>实现评论管理页面</h2><p>实现：使用 Element 组件库的 Table 表格组件并使用树形数据的功能将评论用树形展示。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/8a2c0aa76640e8c432f4cb20444d1fff-0" alt="图片描述"></p>
<p>将 pages -&gt; Admin -&gt; AdminComment.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;评论&lt;/h1&gt;</span><br><span class="line">  &lt;el-table</span><br><span class="line">    :data=&quot;TableData&quot;</span><br><span class="line">    style=&quot;width: 100%; margin-bottom: 20px&quot;</span><br><span class="line">    row-key=&quot;id&quot;</span><br><span class="line">    border</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;content&quot; label=&quot;内容&quot; sortable /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;createtime&quot; label=&quot;创建时间&quot; sortable /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 15, 20]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// 评论接口</span><br><span class="line">interface Comment &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  parentid: number;</span><br><span class="line">  parenttype: string;</span><br><span class="line">  content: string;</span><br><span class="line">  createtime: string;</span><br><span class="line">  hasChildren?: boolean;</span><br><span class="line">  children?: Comment[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let TableData: Comment[] = reactive([]);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/commentlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        SetInfo(response.data.ArrayInfo);</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置数据</span><br><span class="line">function SetInfo(ServerInfo) &#123;</span><br><span class="line">  // 设置数据为空</span><br><span class="line">  TableData = [];</span><br><span class="line">  console.log(&quot;serverinfo&quot;, ServerInfo);</span><br><span class="line">  for (var i in ServerInfo) &#123;</span><br><span class="line">    let Info = ServerInfo[i];</span><br><span class="line">    let fatherinfo: Comment = &#123;</span><br><span class="line">      id: Info[&quot;_id&quot;],</span><br><span class="line">      parentid: Info[&quot;ParentId&quot;],</span><br><span class="line">      parenttype: Info[&quot;ParentType&quot;],</span><br><span class="line">      content: Info[&quot;Content&quot;],</span><br><span class="line">      createtime: Info[&quot;CreateTime&quot;],</span><br><span class="line">      children: [],</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    for (var j in Info[&quot;Child_Comments&quot;]) &#123;</span><br><span class="line">      let SonInfo = Info[&quot;Child_Comments&quot;][j];</span><br><span class="line">      let soninfo: Comment = &#123;</span><br><span class="line">        id: SonInfo[&quot;_id&quot;],</span><br><span class="line">        parentid: Info[&quot;ParentId&quot;],</span><br><span class="line">        parenttype: Info[&quot;ParentType&quot;],</span><br><span class="line">        content: SonInfo[&quot;Content&quot;],</span><br><span class="line">        createtime: SonInfo[&quot;CreateTime&quot;],</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      fatherinfo.children?.push(soninfo);</span><br><span class="line">    &#125;</span><br><span class="line">    TableData.push(fatherinfo);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ArticleId: row.parentid,</span><br><span class="line">        CommentId: row.id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实验总结-2"><a href="#实验总结-2" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验使用 undraw-ui 组件库、Naive UI 组件库、实现了评论组件，使用 v-md-editor 组件，使用 Element 组件库的 Table 组件实现评论的树形展示。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code23.zip</span><br></pre></td></tr></table></figure>
<h1 id="4-公告模块实现"><a href="#4-公告模块实现" class="headerlink" title="4.公告模块实现"></a>4.公告模块实现</h1><h2 id="实验介绍-3"><a href="#实验介绍-3" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/f6b9811c721066bb2c533d9cc1ed1b24-0" alt="图片描述"></p>
<h4 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>实现公告模块</li>
<li>Element 组件库 Card 组件</li>
<li>Markdown 文本的预览组件</li>
</ul>
<h2 id="实现公告列表组件"><a href="#实现公告列表组件" class="headerlink" title="实现公告列表组件"></a>实现公告列表组件</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/6f73dc909ae5b35579a1a20b8c69e5a8-0" alt="图片描述"></p>
<p>将 components -&gt; HomePage -&gt; AnnouncementList.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;announcementcard&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-icon size=&quot;40&quot;&gt;&lt;ChatDotSquare /&gt;&lt;/el-icon&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-row&gt;</span><br><span class="line">          &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">            &lt;router-link</span><br><span class="line">              :to=&quot;&#123;</span><br><span class="line">                name: &#x27;Announcement&#x27;,</span><br><span class="line">                query: &#123; AnnouncementId: data._id &#125;,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">          &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">        &lt;el-row&gt;</span><br><span class="line">          &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">            &#123;&#123; data.CreateTime &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">          &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[5, 10, 15]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(5); // 当前页的数量</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcementlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求Announcement成功&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          serverdata.array = response.data.ArrayInfo;</span><br><span class="line">          TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 获取信息</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#announcementcard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现首页"><a href="#实现首页" class="headerlink" title="实现首页"></a>实现首页</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/2144999c7125736a47006873ff7edf06-0" alt="图片描述"></p>
<p>将 Pages -&gt; HomePage.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">      &lt;div class=&quot;card-header&quot;&gt;</span><br><span class="line">        &lt;span id=&quot;homepagetitle&quot;&gt;欢迎来到XDOJ&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;AnnouncementList&gt;&lt;/AnnouncementList&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import AnnouncementList from &quot;../components/HomePage/AnnouncementList.vue&quot;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#homepagetitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 30px;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card-header &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现公告页面"><a href="#实现公告页面" class="headerlink" title="实现公告页面"></a>实现公告页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/5f318e6259dc32f0e5d847ebc2f9ff74-0" alt="图片描述"></p>
<p>将 Pages -&gt; Announcement.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt; &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;Comment</span><br><span class="line">          :ParentId=&quot;$route.query.AnnouncementId&quot;</span><br><span class="line">          ArticleType=&quot;Announcement&quot;</span><br><span class="line">        &gt;&lt;/Comment&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt; &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const announcementid = ref(0);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const createtime = ref(&quot;&quot;);</span><br><span class="line">const updatetime = ref(&quot;&quot;);</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcement`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: announcementid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;请求失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  createtime.value = data.CreateTime;</span><br><span class="line">  updatetime.value = data.UpdateTime;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  announcementid.value = route.query.AnnouncementId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现公告编辑页面"><a href="#实现公告编辑页面" class="headerlink" title="实现公告编辑页面"></a>实现公告编辑页面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/68a7b85018970e96d35fcbe779ec040b-0" alt="图片描述"></p>
<p>将 Pages -&gt; Editor -&gt; AnnouncementEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;公告编辑器&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;title&quot;</span><br><span class="line">      placeholder=&quot;请输入标题！&quot;</span><br><span class="line">      maxlength=&quot;50&quot;</span><br><span class="line">      show-word-limit</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h4&gt;Tip:重要等级1-5，等级越高越靠前&lt;/h4&gt;</span><br><span class="line">    &lt;el-input-number v-model=&quot;level&quot; :min=&quot;1&quot; :max=&quot;5&quot; /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const announcementid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const level = ref(1);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  console.log(&quot;InsertArticle&quot;);</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (level.value &lt; 1 || level.value &gt; 5) &#123;</span><br><span class="line">    pointmessage.value = &quot;Level范围1~5！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/announcement/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      Level: level.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (level.value &lt; 1 || level.value &gt; 5) &#123;</span><br><span class="line">    pointmessage.value = &quot;Level范围1~5！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/announcement/update`, &#123;</span><br><span class="line">      AnnouncementId: announcementid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      Level: level.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcement/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: announcementid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  level.value = data.Level;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  announcementid.value = route.query.AnnouncementId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现公告管理页面"><a href="#实现公告管理页面" class="headerlink" title="实现公告管理页面"></a>实现公告管理页面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/2c21a86b92da59f81ebae335d48559b2-0" alt="图片描述"></p>
<p>将 Pages -&gt; Admin -&gt; AdminAnnouncement.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;公告&lt;/h1&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;AddAnnouncement&quot;&gt;添加公告&lt;/el-button&gt;</span><br><span class="line">  &lt;el-table :data=&quot;serverdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 增加公告</span><br><span class="line">function AddAnnouncement() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;AnnouncementEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      AnnouncementId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查看公告</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Announcement&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      AnnouncementId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑公告</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;AnnouncementEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      AnnouncementId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除公告</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/announcement`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcementlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><p>执行如下代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-3"><a href="#实验总结-3" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了公告模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code24.zip</span><br></pre></td></tr></table></figure>
<h1 id="5-讨论模块实现"><a href="#5-讨论模块实现" class="headerlink" title="5.讨论模块实现"></a>5.讨论模块实现</h1><h2 id="实验介绍-4"><a href="#实验介绍-4" class="headerlink" title="实验介绍"></a>实验介绍</h2><h2 id="实现讨论列表页面"><a href="#实现讨论列表页面" class="headerlink" title="实现讨论列表页面"></a>实现讨论列表页面</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p>
<p>实现效果如下所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/714bddce0f2d2a896be228fe300bc5d7-0" alt="图片描述"></p>
<p>将 Pages -&gt; DiscussList.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;讨论&lt;/h1&gt;</span><br><span class="line">          &lt;div id=&quot;addbutton&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              @click=&quot;AddDiscussion&quot;</span><br><span class="line">              type=&quot;success&quot;</span><br><span class="line">              v-show=&quot;addbuttonshow&quot;</span><br><span class="line">              :disabled=&quot;addbuttondisabled&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              写讨论</span><br><span class="line">            &lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;discusscard&quot;&gt;</span><br><span class="line">          &lt;el-row&gt;</span><br><span class="line">            &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">              &lt;el-avatar :size=&quot;70&quot; :src=&quot;data.User[0].Avatar&quot; /&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;22&quot;&gt;</span><br><span class="line">              &lt;router-link</span><br><span class="line">                :to=&quot;&#123; name: &#x27;Discuss&#x27;, query: &#123; DiscussId: data._id &#125; &#125;&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;span id=&quot;discusstitle&quot;&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &#123;&#123; data.User[0].NickName &#125;&#125; &amp;nbsp &#123;&#123; data.CreateTime &#125;&#125; &amp;nbsp</span><br><span class="line">              &lt;div class=&quot;iconright&quot;&gt;</span><br><span class="line">                &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125; &amp;nbsp</span><br><span class="line">                &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 15, 25]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;TotalNum&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter, useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const addbuttonshow = ref(true);</span><br><span class="line">const addbuttondisabled = ref(false);</span><br><span class="line">// 上层id 默认为 0</span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ParentId: &quot;0&quot;,</span><br><span class="line">  UserId: &quot;0&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 请求服务器获取信息</span><br><span class="line">function GetServerInfo(ParentId, UserId) &#123;</span><br><span class="line">  if (ParentId != null) &#123;</span><br><span class="line">    searchinfo.ParentId = ParentId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.ParentId = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.UserId = 0;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discusslist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.ArrayInfo == null) serverdata.array = [];</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function cellclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Discuss&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function AddDiscussion() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      ParentId: searchinfo.ParentId,</span><br><span class="line">      DiscussId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 路由更改前</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  GetServerInfo(to.query.ParentId, to.query.UserId);</span><br><span class="line">  if (to.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo(route.query.ParentId, route.query.UserId);</span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) addbuttondisabled.value = true;</span><br><span class="line"></span><br><span class="line">  if (route.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#addbutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">.iconright &#123;</span><br><span class="line">  float: right;</span><br><span class="line">&#125;</span><br><span class="line">#discusstitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line">#discusscard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现讨论页面"><a href="#实现讨论页面" class="headerlink" title="实现讨论页面"></a>实现讨论页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p>
<p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/d99b7724353e2eb3c6dab52f1340b619-0" alt="图片描述"></p>
<p>将 Pages -&gt; Discuss.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;top&quot;&gt;</span><br><span class="line">      &lt;el-avatar :size=&quot;50&quot; :src=&quot;useravatar&quot; /&gt; &amp;nbsp</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;twobutton&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;UpdateArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;修改&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;DeleteArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;删除&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Comment</span><br><span class="line">            :ParentId=&quot;$route.query.DiscussId&quot;</span><br><span class="line">            ArticleType=&quot;Discuss&quot;</span><br><span class="line">          &gt;&lt;/Comment&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const discussid = ref(0);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line">const useravatar = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line">const buttonshow = ref(false);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  usernickname.value = data.User[0].NickName;</span><br><span class="line">  useravatar.value = data.User[0].Avatar;</span><br><span class="line">  authorid.value = data.User[0]._id;</span><br><span class="line">  if (Number(data.User[0]._id) == Number(store.state.UserId))</span><br><span class="line">    buttonshow.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      DiscussId: discussid.value,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function DeleteArticle() &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: authorid.value,</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        router.go(-1);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  discussid.value = route.query.DiscussId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#twobutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">#top &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现讨论编辑页面"><a href="#实现讨论编辑页面" class="headerlink" title="实现讨论编辑页面"></a>实现讨论编辑页面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9d7965e880ef66bca89e2ebc88229464-0" alt="图片描述"></p>
<p>将 Pages -&gt; Editor -&gt; DiscussEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;讨论编辑器&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;common-layout&quot;&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-header&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;title&quot;</span><br><span class="line">            placeholder=&quot;请输入标题！&quot;</span><br><span class="line">            maxlength=&quot;50&quot;</span><br><span class="line">            show-word-limit</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-header&gt;</span><br><span class="line">        &lt;el-main&gt;</span><br><span class="line">          &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">        &lt;/el-main&gt;</span><br><span class="line">        &lt;el-footer&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-footer&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const parentid = ref(0);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const discussid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  console.log(&quot;InsertArticle&quot;);</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/discuss/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      ParentId: parentid.value,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/discuss/update`, &#123;</span><br><span class="line">      UserId: authorid.value,</span><br><span class="line">      DiscussId: discussid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discuss/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  authorid.value = data.UserId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  discussid.value = route.query.DiscussId;</span><br><span class="line">  parentid.value = route.query.ParentId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现讨论管理页面"><a href="#实现讨论管理页面" class="headerlink" title="实现讨论管理页面"></a>实现讨论管理页面</h2><p>实现效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/57706cdf0c0fb6c715efe156257879ac-0" alt="图片描述"></p>
<p>将 Pages -&gt; Admin -&gt; AdminDiscuss.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;讨论&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;discussdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;User[0].NickName&quot; label=&quot;作者&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let discussdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 查看讨论</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Discuss&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑讨论</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;点击编辑&quot;, row);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除讨论</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row.UserId,</span><br><span class="line">        DiscussId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetDiscussInfo(m_page, m_pagesize) &#123;</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discusslist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: m_page,</span><br><span class="line">        PageSize: m_pagesize,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        discussdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 获取信息</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运行-2"><a href="#运行-2" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;discuss&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;DiscussList&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-4"><a href="#实验总结-4" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了讨论模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code25.zip</span><br></pre></td></tr></table></figure>
<h1 id="6-题解模块实现"><a href="#6-题解模块实现" class="headerlink" title="6.题解模块实现"></a>6.题解模块实现</h1><h2 id="实验介绍-5"><a href="#实验介绍-5" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/a530089c45c2d996f9413b8ec2e59d72-0" alt="图片描述"></p>
<h4 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>实现题解模块</li>
<li>Element 组件库 Card 组件</li>
<li>Markdown 文本的预览组件</li>
</ul>
<h2 id="实现题解列表页面"><a href="#实现题解列表页面" class="headerlink" title="实现题解列表页面"></a>实现题解列表页面</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/611ca3700ba2bf41246e1386e58f5acb-0" alt="图片描述"></p>
<p>将 Pages -&gt; SolutionList.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;题解&lt;/h1&gt;</span><br><span class="line">          &lt;div id=&quot;addbutton&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              type=&quot;success&quot;</span><br><span class="line">              @click=&quot;AddSolution&quot;</span><br><span class="line">              v-show=&quot;addbuttonshow&quot;</span><br><span class="line">              :disabled=&quot;addbuttondisabled&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              写题解</span><br><span class="line">            &lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;solutioncard&quot;&gt;</span><br><span class="line">          &lt;el-row&gt;</span><br><span class="line">            &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">              &lt;el-avatar :size=&quot;70&quot; :src=&quot;data.User[0].Avatar&quot; /&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;22&quot;&gt;</span><br><span class="line">              &lt;router-link</span><br><span class="line">                :to=&quot;&#123; name: &#x27;Solution&#x27;, query: &#123; SolutionId: data._id &#125; &#125;&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;span id=&quot;solutiontitle&quot;&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &#123;&#123; data.User[0].NickName &#125;&#125; &amp;nbsp &#123;&#123; data.CreateTime &#125;&#125; &amp;nbsp</span><br><span class="line">              &lt;div class=&quot;iconright&quot;&gt;</span><br><span class="line">                &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125; &amp;nbsp</span><br><span class="line">                &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 15, 25]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;TotalNum&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter, useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const addbuttonshow = ref(true);</span><br><span class="line">const addbuttondisabled = ref(false);</span><br><span class="line"></span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ParentId: &quot;0&quot;,</span><br><span class="line">  UserId: &quot;0&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 请求服务器获取信息</span><br><span class="line">function GetServerInfo(ParentId, UserId) &#123;</span><br><span class="line">  if (ParentId != null) &#123;</span><br><span class="line">    searchinfo.ParentId = ParentId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.ParentId = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.UserId = 0;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solutionlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.ArrayInfo == null) serverdata.array = [];</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function cellclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Solution&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function AddSolution() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      ParentId: searchinfo.ParentId,</span><br><span class="line">      SolutionId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 路由更改前</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  GetServerInfo(to.query.ParentId, to.query.UserId);</span><br><span class="line">  if (to.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo(route.query.ParentId, route.query.UserId);</span><br><span class="line"></span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) addbuttondisabled.value = true;</span><br><span class="line"></span><br><span class="line">  if (route.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#addbutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">.iconright &#123;</span><br><span class="line">  float: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#solutiontitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line">#solutioncard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题解页面"><a href="#实现题解页面" class="headerlink" title="实现题解页面"></a>实现题解页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/219f60549af04f995b808264350028e9-0" alt="图片描述"></p>
<p>将 Pages -&gt; Solution.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;top&quot;&gt;</span><br><span class="line">      &lt;el-avatar :size=&quot;50&quot; :src=&quot;useravatar&quot; /&gt; &amp;nbsp</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;twobutton&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;UpdateArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;修改&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;DeleteArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;删除&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Comment</span><br><span class="line">            :ParentId=&quot;$route.query.SolutionId&quot;</span><br><span class="line">            ArticleType=&quot;Solution&quot;</span><br><span class="line">          &gt;&lt;/Comment&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const solutionid = ref(0);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line">const useravatar = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const buttonshow = ref(false);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  usernickname.value = data.User[0].NickName;</span><br><span class="line">  useravatar.value = data.User[0].Avatar;</span><br><span class="line">  authorid.value = data.User[0]._id;</span><br><span class="line">  if (Number(data.User[0]._id) == Number(store.state.UserId))</span><br><span class="line">    buttonshow.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      SolutionId: solutionid.value,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function DeleteArticle() &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: authorid.value,</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        router.go(-1);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  solutionid.value = route.query.SolutionId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#twobutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">#top &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题解编辑页面"><a href="#实现题解编辑页面" class="headerlink" title="实现题解编辑页面"></a>实现题解编辑页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/471fa6a89f67d74b5e60c3280dc1d862-0" alt="图片描述"></p>
<p>将 Pages -&gt; Editor -&gt; SolutionEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;题解编辑器&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;common-layout&quot;&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-header&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;title&quot;</span><br><span class="line">            placeholder=&quot;请输入标题！&quot;</span><br><span class="line">            maxlength=&quot;50&quot;</span><br><span class="line">            show-word-limit</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-header&gt;</span><br><span class="line">        &lt;el-main&gt;</span><br><span class="line">          &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">        &lt;/el-main&gt;</span><br><span class="line">        &lt;el-footer&gt;</span><br><span class="line">          &lt;el-switch v-model=&quot;ispublic&quot; /&gt;是否公开</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-footer&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const parentid = ref(0);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const solutionid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const ispublic = ref(true);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/solution/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      ParentId: parentid.value,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      Public: ispublic.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/solution/update`, &#123;</span><br><span class="line">      UserId: authorid.value,</span><br><span class="line">      SolutionId: solutionid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      Public: ispublic.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solution/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  ispublic.value = data.Public;</span><br><span class="line">  authorid.value = data.UserId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  solutionid.value = route.query.SolutionId;</span><br><span class="line">  parentid.value = route.query.ParentId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题解管理页面"><a href="#实现题解管理页面" class="headerlink" title="实现题解管理页面"></a>实现题解管理页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/8583a7efe3c8c76d82abfa69134f3ff4-0" alt="图片描述"></p>
<p>将 Pages -&gt; Admin -&gt; AdminSolution.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;题解&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;serverdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 查看题解</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Solution&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑题解</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除题解</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row.UserId,</span><br><span class="line">        SolutionId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solutionlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运行-3"><a href="#运行-3" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;solution&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;SolutionList&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-5"><a href="#实验总结-5" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了题解模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code26.zip</span><br></pre></td></tr></table></figure>
<h1 id="7-状态记录模块实现"><a href="#7-状态记录模块实现" class="headerlink" title="7.状态记录模块实现"></a>7.状态记录模块实现</h1><h2 id="实验介绍-6"><a href="#实验介绍-6" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/2724b2bc2ac710122815662e7e15db87-0" alt="图片描述"></p>
<h4 id="知识点-5"><a href="#知识点-5" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>实现状态记录模块</li>
<li>Monaco Editor</li>
</ul>
<h2 id="实现代码查看器组件"><a href="#实现代码查看器组件" class="headerlink" title="实现代码查看器组件"></a>实现代码查看器组件</h2><p>实现：Monaco Editor 是微软开源的基于 VS Code 的代码编辑器，运行在浏览器环境中，代码查看器通过将 Monaco Editor 代码编辑器组件设置为只读来实现。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://microsoft.github.io/monaco-editor/">https://microsoft.github.io/monaco-editor/</a></p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/11946e032bcc39f00d825df88ff64b14-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt; MonacoView.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;codeEdit&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted, toRaw &#125; from &quot;vue&quot;;</span><br><span class="line">import * as monaco from &quot;monaco-editor&quot;;</span><br><span class="line">const editor = ref(null);</span><br><span class="line">// 初始化代码编辑器</span><br><span class="line">function initEditor() &#123;</span><br><span class="line">  editor.value = monaco.editor.create(document.getElementById(&quot;codeEdit&quot;), &#123;</span><br><span class="line">    value: &quot;&quot;, // 代码</span><br><span class="line">    language: &quot;cpp&quot;, // 语言</span><br><span class="line">    theme: &quot;vs&quot;, // 主题</span><br><span class="line">    selectOnLineNumbers: true, //显示行号</span><br><span class="line">    foldingStrategy: &quot;indentation&quot;, // 代码可分小段折叠</span><br><span class="line">    tabSize: 4, // tab 缩进长度</span><br><span class="line">    roundedSelection: false,</span><br><span class="line">    readOnly: true, // 只读</span><br><span class="line">    cursorStyle: &quot;line&quot;, //光标样式</span><br><span class="line">    automaticLayout: true, //自动布局</span><br><span class="line">    glyphMargin: true, //字形边缘</span><br><span class="line">    useTabStops: false,</span><br><span class="line">    fontSize: 15, //字体大小</span><br><span class="line">    autoIndent: true, //自动布局</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function SetData(Info) &#123;</span><br><span class="line">  let language = &quot;cpp&quot;;</span><br><span class="line">  if (Info.Language == &quot;C++&quot;) &#123;</span><br><span class="line">    language = &quot;cpp&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;C&quot;) &#123;</span><br><span class="line">    language = &quot;c&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;Go&quot;) &#123;</span><br><span class="line">    language = &quot;go&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;Java&quot;) &#123;</span><br><span class="line">    language = &quot;java&quot;;</span><br><span class="line">  &#125; else if (Info.language == &quot;Python2&quot; || Info.language == &quot;Python3&quot;) &#123;</span><br><span class="line">    language = &quot;python&quot;;</span><br><span class="line">  &#125; else if (Info.language == &quot;JavaScript&quot;) &#123;</span><br><span class="line">    language = &quot;javascript&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  let code = Info.Code;</span><br><span class="line">  const curmodel = toRaw(editor.value).getModel();</span><br><span class="line">  const model = monaco.editor.createModel(code, language);</span><br><span class="line">  toRaw(editor.value).setModel(model);</span><br><span class="line">  curmodel.dispose();</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initEditor();</span><br><span class="line">&#125;);</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetData,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#codeEdit &#123;</span><br><span class="line">  width: 700px;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.wrapper &#123;</span><br><span class="line">  width: 700px;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现状态记录对话框"><a href="#实现状态记录对话框" class="headerlink" title="实现状态记录对话框"></a>实现状态记录对话框</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/1eaf50e5a81393fccf6689776c11a6df-0" alt="图片描述"></p>
<p>将 components -&gt; Dialog -&gt; ViewStatus.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog</span><br><span class="line">    id=&quot;dialog&quot;</span><br><span class="line">    v-model=&quot;dialogVisible&quot;</span><br><span class="line">    title=&quot;测评详情&quot;</span><br><span class="line">    :before-close=&quot;closedialog&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-alert</span><br><span class="line">      :title=&quot;alerttitle&quot;</span><br><span class="line">      :type=&quot;alerttype&quot;</span><br><span class="line">      :description=&quot;alertdescription&quot;</span><br><span class="line">      :closable=&quot;false&quot;</span><br><span class="line">      show-icon</span><br><span class="line">      :show-close=&quot;false&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-alert&gt;</span><br><span class="line">    &lt;MonacoView ref=&quot;monacoview&quot;&gt;&lt;/MonacoView&gt;</span><br><span class="line">    &lt;el-collapse&gt;</span><br><span class="line">      &lt;el-collapse-item</span><br><span class="line">        v-for=&quot;(info, index) in testinfo.array&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">        :class=&quot;ChangeStatusToCollapseClass(info.Status)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #title&gt;</span><br><span class="line">          #Test&#123;&#123; index + 1 &#125;&#125; &#123;&#123; ChangeStatusToTitle(info.Status) &#125;&#125;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          标准输入：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.StandardInput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          标准输出：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.StandardOutput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          你的输出：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.PersonalOutput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          运行时间：&#123;&#123; info.RunTime &#125;&#125; 运行内存：&#123;&#123; info.RunMemory &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-collapse-item&gt;</span><br><span class="line">    &lt;/el-collapse&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import MonacoView from &quot;../Problem/MonacoView.vue&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">// 是否打开</span><br><span class="line">const dialogVisible = ref(false);</span><br><span class="line"></span><br><span class="line">const monacoview = ref();</span><br><span class="line"></span><br><span class="line">const alerttype = ref(&quot;success&quot;);</span><br><span class="line">const alerttitle = ref(&quot;&quot;);</span><br><span class="line">const alertdescription = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const testinfo = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function opendialog(submitid) &#123;</span><br><span class="line">  dialogVisible.value = true;</span><br><span class="line">  console.log(&quot;submitid&quot;, submitid);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/statusrecord`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SubmitId: submitid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">        SetDataInfo(response.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetDataInfo(statusinfo) &#123;</span><br><span class="line">  testinfo.array = statusinfo.TestInfo;</span><br><span class="line">  alertdescription.value = statusinfo.ComplierInfo;</span><br><span class="line">  // 显示代码</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Code: statusinfo.Code,</span><br><span class="line">    Language: statusinfo.Language,</span><br><span class="line">  &#125;;</span><br><span class="line">  monacoview.value.SetData(Info);</span><br><span class="line">  if (statusinfo.Status == 2) alerttype.value = &quot;success&quot;;</span><br><span class="line">  else if (statusinfo.Status == 3) alerttype.value = &quot;error&quot;;</span><br><span class="line">  else alerttype.value = &quot;warning&quot;;</span><br><span class="line"></span><br><span class="line">  alerttitle.value = ChangeStatusToTitle(statusinfo.Status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closedialog() &#123;</span><br><span class="line">  alerttitle.value = &quot;&quot;;</span><br><span class="line">  alertdescription.value = &quot;&quot;;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Code: &quot;&quot;,</span><br><span class="line">    Language: &quot;C++&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">  monacoview.value.SetData(Info);</span><br><span class="line">  testinfo.array = [];</span><br><span class="line"></span><br><span class="line">  dialogVisible.value = false;</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToTitle(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;Pending &amp; Judging&quot;;</span><br><span class="line">  else if (status == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (status == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (status == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (status == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (status == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToCollapseClass(status) &#123;</span><br><span class="line">  if (status == 2) return &quot;el-collapse-success&quot;;</span><br><span class="line">  else if (status == 3) return &quot;el-collapse-error&quot;;</span><br><span class="line">  else return &quot;el-collapse-warning&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  opendialog,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#dialog &#123;</span><br><span class="line">  width: 800px;</span><br><span class="line">&#125;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-error &#123;</span><br><span class="line">  background-color: #fef0f0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-success &#123;</span><br><span class="line">  background-color: #f0f9eb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-warning &#123;</span><br><span class="line">  background-color: #fdf6ec;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现状态记录搜索组件"><a href="#实现状态记录搜索组件" class="headerlink" title="实现状态记录搜索组件"></a>实现状态记录搜索组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/f9b9b29652f197d56fd52effcc2bac0b-0" alt="图片描述"></p>
<p>将 components -&gt; StatusRecord -&gt; StatusRecordSearch.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-4&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;10&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;searchproblemid&quot;</span><br><span class="line">          placeholder=&quot;题目ID&quot;</span><br><span class="line">          maxlength=&quot;5&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchproblemtitle&quot; placeholder=&quot;题目标题&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">        状态:&amp;nbsp&amp;nbsp</span><br><span class="line">        &lt;el-select v-model=&quot;searchstatue&quot; class=&quot;m-2&quot; placeholder=&quot;状态&quot;&gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in statusoptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">        语言:&amp;nbsp&amp;nbsp</span><br><span class="line">        &lt;el-select v-model=&quot;searchlanguage&quot; class=&quot;m-2&quot; placeholder=&quot;语言&quot;&gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in languageoptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; :icon=&quot;Search&quot; @click=&quot;searchbutton&quot;</span><br><span class="line">          &gt;搜索&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; Search &#125; from &quot;@element-plus/icons-vue&quot;;</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const searchproblemid = ref(&quot;&quot;);</span><br><span class="line">const searchproblemtitle = ref(&quot;&quot;);</span><br><span class="line">const searchstatue = ref(&quot;&quot;);</span><br><span class="line">const searchlanguage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const statusoptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">    label: &quot;ALL&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;0&quot;,</span><br><span class="line">    label: &quot;Pending &amp; Judging&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;1&quot;,</span><br><span class="line">    label: &quot;Compile Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;2&quot;,</span><br><span class="line">    label: &quot;Accepted&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;3&quot;,</span><br><span class="line">    label: &quot;Wrong Answer&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;4&quot;,</span><br><span class="line">    label: &quot;Runtime Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;5&quot;,</span><br><span class="line">    label: &quot;Time Limit Exceeded&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;6&quot;,</span><br><span class="line">    label: &quot;Memory Limit Exceeded&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;7&quot;,</span><br><span class="line">    label: &quot;System Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">const languageoptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">    label: &quot;ALL&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;C&quot;,</span><br><span class="line">    label: &quot;C&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;C++&quot;,</span><br><span class="line">    label: &quot;C++&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Go&quot;,</span><br><span class="line">    label: &quot;Go&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Java&quot;,</span><br><span class="line">    label: &quot;Java&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Python2&quot;,</span><br><span class="line">    label: &quot;Python2&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Python3&quot;,</span><br><span class="line">    label: &quot;Python3&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;JavaScript&quot;,</span><br><span class="line">    label: &quot;JavaScript&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">const props = defineProps([&quot;SearchStatusRecordList&quot;]);</span><br><span class="line">function GetSearchInfo() &#123;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    ProblemId: searchproblemid.value,</span><br><span class="line">    ProblemTitle: searchproblemtitle.value,</span><br><span class="line">    Status: searchstatue.value,</span><br><span class="line">    Language: searchlanguage.value,</span><br><span class="line">  &#125;;</span><br><span class="line">  return Info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function searchbutton() &#123;</span><br><span class="line">  props.SearchStatusRecordList();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetSearchInfo,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现状态记录列表页面"><a href="#实现状态记录列表页面" class="headerlink" title="实现状态记录列表页面"></a>实现状态记录列表页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/100fe3ebf0d30a502edf0e0a977068aa-0" alt="图片描述"></p>
<p>将 Pages -&gt; StatusRecord.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;StatusRecordSearch</span><br><span class="line">        ref=&quot;statusrecordsearch&quot;</span><br><span class="line">        :SearchStatusRecordList=&quot;SearchStatusRecordList&quot;</span><br><span class="line">        v-show=&quot;searchshow&quot;</span><br><span class="line">        id=&quot;statusrecordsearch&quot;</span><br><span class="line">      &gt;&lt;/StatusRecordSearch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data=&quot;statusrecorddata.array&quot;</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">      @cell-click=&quot;</span><br><span class="line">        (row, column, cell, event) =&gt;</span><br><span class="line">          statusrecordclick(row, column, cell, event)</span><br><span class="line">      &quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;UserNickName&quot; label=&quot;User&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;ProblemTitle&quot; label=&quot;Title&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Status&quot; label=&quot;Status&quot; width=&quot;200&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-tag</span><br><span class="line">            size=&quot;medium&quot;</span><br><span class="line">            :type=&quot;ChangeStatusToType(scope.row.Status)&quot;</span><br><span class="line">            disable-transitions</span><br><span class="line">            hit</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;&#123; ChangeStatusToTitle(scope.row.Status) &#125;&#125;</span><br><span class="line">          &lt;/el-tag&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Language&quot; label=&quot;语言&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;RunTime&quot; label=&quot;RunTime&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;RunMemory&quot; label=&quot;Memory&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Length&quot; label=&quot;Length&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;SubmitTime&quot; label=&quot;SubmitTime&quot; /&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;ViewStatus ref=&quot;viewstatusdialog&quot;&gt;&lt;/ViewStatus&gt;</span><br><span class="line">    &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">        v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">        v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">        :page-sizes=&quot;[15, 20, 30, 40]&quot;</span><br><span class="line">        :small=&quot;small&quot;</span><br><span class="line">        :disabled=&quot;disabled&quot;</span><br><span class="line">        :background=&quot;background&quot;</span><br><span class="line">        layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">        :total=&quot;totalsize&quot;</span><br><span class="line">        @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">        @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">import ViewStatus from &quot;../components/Dialog/ViewStatus.vue&quot;;</span><br><span class="line">import StatusRecordSearch from &quot;../components/StatusRecord/StatusRecordSearch.vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const viewstatusdialog = ref();</span><br><span class="line">const statusrecordsearch = ref();</span><br><span class="line">const searchshow = ref(true);</span><br><span class="line"></span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ProblemId: &quot;&quot;,</span><br><span class="line">  UserId: &quot;&quot;,</span><br><span class="line">  ProblemTitle: &quot;&quot;,</span><br><span class="line">  Status: &quot;&quot;,</span><br><span class="line">  Language: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 题目信息列表</span><br><span class="line">let statusrecorddata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetStatusRecordInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/statusrecordlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        statusrecorddata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SearchStatusRecordList() &#123;</span><br><span class="line">  let Info = statusrecordsearch.value.GetSearchInfo();</span><br><span class="line">  searchinfo.ProblemId = Info.ProblemId;</span><br><span class="line">  searchinfo.ProblemTitle = Info.ProblemTitle;</span><br><span class="line">  searchinfo.Status = Info.Status;</span><br><span class="line">  searchinfo.Language = Info.Language;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToType(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;info&quot;;</span><br><span class="line">  else if (status == 2) return &quot;success&quot;;</span><br><span class="line">  else if (status == 3) return &quot;error&quot;;</span><br><span class="line">  else return &quot;warning&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function ChangeStatusToTitle(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;Pending&quot;;</span><br><span class="line">  else if (status == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (status == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (status == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (status == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (status == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">// 点击单元格</span><br><span class="line">function statusrecordclick(row, column, cell, event) &#123;</span><br><span class="line">  viewstatusdialog.value.opendialog(row._id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function InitSearchInfo(ProblemId, UserId) &#123;</span><br><span class="line">  searchinfo.ProblemId = &quot;&quot;;</span><br><span class="line">  searchinfo.ProblemTitle = &quot;&quot;;</span><br><span class="line">  searchinfo.Status = &quot;&quot;;</span><br><span class="line">  searchinfo.UserId = &quot;&quot;;</span><br><span class="line">  searchinfo.Language = &quot;&quot;;</span><br><span class="line">  searchshow.value = true;</span><br><span class="line">  if (ProblemId != null) &#123;</span><br><span class="line">    searchinfo.ProblemId = ProblemId;</span><br><span class="line">    searchshow.value = false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">    searchshow.value = false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 检测组件是否更新</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  InitSearchInfo(to.query.ProblemId, to.query.UserId);</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  InitSearchInfo(route.query.ProblemId, route.query.UserId);</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#statusrecordsearch &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运行-4"><a href="#运行-4" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;statusrecord&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;StatusRecord&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-6"><a href="#实验总结-6" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了状态记录模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code27.zip</span><br></pre></td></tr></table></figure>
<h1 id="8-题目模块实现"><a href="#8-题目模块实现" class="headerlink" title="8.题目模块实现"></a>8.题目模块实现</h1><h2 id="实验介绍-7"><a href="#实验介绍-7" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/8079b1788a0abfa47950693e75b99fb6-0" alt="图片描述"></p>
<h4 id="知识点-6"><a href="#知识点-6" class="headerlink" title="知识点"></a>知识点</h4><ul>
<li>实现题目模块</li>
<li>ECharts</li>
<li>Monaco Editor</li>
</ul>
<h2 id="实现代码编辑器组件"><a href="#实现代码编辑器组件" class="headerlink" title="实现代码编辑器组件"></a>实现代码编辑器组件</h2><p>实现：Monaco Editor 是微软开源的基于 VS Code 的代码编辑器，运行在浏览器环境中。直接使用 Monaco Editor 代码编辑器组件即可。代码编辑器实现了自动保存代码功能，当初始化组件时，自动读取浏览器本地存储获取代码并显示，当更换语言时，会自动获取代码进行保存到浏览器本地存储。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://microsoft.github.io/monaco-editor/">https://microsoft.github.io/monaco-editor/</a></p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9c0dd89454b3a346c885e27c595530f6-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt; MonacoEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :offset=&quot;2&quot; :span=&quot;10&quot;&gt;</span><br><span class="line">        语言：</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;language&quot;</span><br><span class="line">          placeholder=&quot;选择语言&quot;</span><br><span class="line">          @change=&quot;handleLanguage&quot;</span><br><span class="line">          ref=&quot;languageselect&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in languageOptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :offset=&quot;2&quot; :span=&quot;10&quot;&gt;</span><br><span class="line">        主题：</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;editorTheme&quot;</span><br><span class="line">          placeholder=&quot;设置主题&quot;</span><br><span class="line">          @change=&quot;handleTheme&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;Visual Studio Dark&quot; value=&quot;vs-dark&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;Visual Studio&quot; value=&quot;vs&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;High Contrast Dark&quot; value=&quot;hc-black&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;&lt;div id=&quot;codeEdit&quot;&gt;&lt;/div&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted, toRaw, onUnmounted &#125; from &quot;vue&quot;;</span><br><span class="line">import * as monaco from &quot;monaco-editor&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line"></span><br><span class="line">const props = defineProps([&quot;ProblemId&quot;]);</span><br><span class="line">const editor = ref(null);</span><br><span class="line">const languageselect = ref(null);</span><br><span class="line"></span><br><span class="line">const language = ref(&quot;cpp&quot;);</span><br><span class="line">const editorTheme = ref(&quot;vs&quot;);</span><br><span class="line">const fontSize = ref(15);</span><br><span class="line"></span><br><span class="line">const languageOptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;c&quot;,</span><br><span class="line">    label: &quot;C&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;cpp&quot;,</span><br><span class="line">    label: &quot;C++&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;go&quot;,</span><br><span class="line">    label: &quot;Go&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;java&quot;,</span><br><span class="line">    label: &quot;Java&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;python2&quot;,</span><br><span class="line">    label: &quot;Python2&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;python3&quot;,</span><br><span class="line">    label: &quot;Python3&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;javascript&quot;,</span><br><span class="line">    label: &quot;JavaScript&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">// 初始化代码编辑器</span><br><span class="line">function initEditor() &#123;</span><br><span class="line">  editor.value = monaco.editor.create(document.getElementById(&quot;codeEdit&quot;), &#123;</span><br><span class="line">    value: &quot;&quot;, // 代码</span><br><span class="line">    language: language.value, // 语言</span><br><span class="line">    theme: editorTheme.value, // 主题</span><br><span class="line">    selectOnLineNumbers: true, //显示行号</span><br><span class="line">    foldingStrategy: &quot;indentation&quot;, // 代码可分小段折叠</span><br><span class="line">    tabSize: 4, // tab 缩进长度</span><br><span class="line">    roundedSelection: false,</span><br><span class="line">    readOnly: false, // 只读</span><br><span class="line">    cursorStyle: &quot;line&quot;, //光标样式</span><br><span class="line">    automaticLayout: true, //自动布局</span><br><span class="line">    glyphMargin: true, //字形边缘</span><br><span class="line">    useTabStops: false,</span><br><span class="line">    fontSize: fontSize.value, //字体大小</span><br><span class="line">    autoIndent: true, //自动布局</span><br><span class="line">    quickSuggestionsDelay: 100, //代码提示延时</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 更换主题</span><br><span class="line">const handleTheme = () =&gt; &#123;</span><br><span class="line">  monaco.editor.setTheme(editorTheme.value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const handleLanguage = (item) =&gt; &#123;</span><br><span class="line">  // 保存代码</span><br><span class="line">  SetLocalStorage(GetCode(), languageselect.value.selected.value);</span><br><span class="line">  language.value = item;</span><br><span class="line">  SetCodeAndLanguage();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function GetCode() &#123;</span><br><span class="line">  return toRaw(editor.value).getValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetLanguage() &#123;</span><br><span class="line">  if (language.value == &quot;c&quot;) &#123;</span><br><span class="line">    return &quot;C&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;cpp&quot;) &#123;</span><br><span class="line">    return &quot;C++&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;go&quot;) &#123;</span><br><span class="line">    return &quot;Go&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;java&quot;) &#123;</span><br><span class="line">    return &quot;Java&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;python2&quot;) &#123;</span><br><span class="line">    return &quot;Python2&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;python3&quot;) &#123;</span><br><span class="line">    return &quot;Python3&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;javascript&quot;) &#123;</span><br><span class="line">    return &quot;JavaScript&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取浏览器本地存储</span><br><span class="line">function GetLocalStorage() &#123;</span><br><span class="line">  // 1-1234-cpp</span><br><span class="line">  var getstr =</span><br><span class="line">    String(props.ProblemId) +</span><br><span class="line">    &quot;-&quot; +</span><br><span class="line">    String(store.state.UserId) +</span><br><span class="line">    &quot;-&quot; +</span><br><span class="line">    language.value;</span><br><span class="line">  console.log(&quot;getstr&quot;, getstr);</span><br><span class="line">  if (localStorage.getItem(getstr) == null) return &quot;&quot;;</span><br><span class="line">  else return localStorage.getItem(getstr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置浏览器本地存储</span><br><span class="line">function SetLocalStorage(code, language) &#123;</span><br><span class="line">  var setstr =</span><br><span class="line">    String(props.ProblemId) + &quot;-&quot; + String(store.state.UserId) + &quot;-&quot; + language;</span><br><span class="line">  console.log(&quot;setstr&quot;, setstr);</span><br><span class="line">  localStorage.setItem(setstr, code);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 通过浏览器本地存储设置代码和语言</span><br><span class="line">function SetCodeAndLanguage() &#123;</span><br><span class="line">  let code = GetLocalStorage();</span><br><span class="line">  const curmodel = toRaw(editor.value).getModel();</span><br><span class="line">  const model = monaco.editor.createModel(code, language.value);</span><br><span class="line">  toRaw(editor.value).setModel(model);</span><br><span class="line">  curmodel.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initEditor();</span><br><span class="line">  if (store.state.UserId != 0) &#123;</span><br><span class="line">    SetCodeAndLanguage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  SetLocalStorage(GetCode(), language.value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetLanguage,</span><br><span class="line">  GetCode,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#codeEdit &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">  height: 450px;</span><br><span class="line">&#125;</span><br><span class="line">.wrapper &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">  height: 550px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题目搜索组件"><a href="#实现题目搜索组件" class="headerlink" title="实现题目搜索组件"></a>实现题目搜索组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/dd5290596d1f334fbf19143d30699155-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt; ProblemSearch.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-4&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;10&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchid&quot; placeholder=&quot;ID&quot; maxlength=&quot;5&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchtitle&quot; placeholder=&quot;标题&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;selectvalue&quot;</span><br><span class="line">          multiple</span><br><span class="line">          placeholder=&quot;标签&quot;</span><br><span class="line">          style=&quot;width: 480px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in options.array&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; :icon=&quot;Search&quot; @click=&quot;searchbutton&quot;</span><br><span class="line">          &gt;搜索&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; Search &#125; from &quot;@element-plus/icons-vue&quot;;</span><br><span class="line"></span><br><span class="line">// 保存搜索的标签内容</span><br><span class="line">const options = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const selectvalue = ref([]);</span><br><span class="line"></span><br><span class="line">const searchid = ref(&quot;&quot;);</span><br><span class="line">const searchtitle = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const props = defineProps([&quot;SearchProblemSet&quot;]);</span><br><span class="line">function GetSearchInfo() &#123;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Id: searchid.value,</span><br><span class="line">    Title: searchtitle.value,</span><br><span class="line">    Tags: selectvalue.value,</span><br><span class="line">  &#125;;</span><br><span class="line">  return Info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function searchbutton() &#123;</span><br><span class="line">  props.SearchProblemSet();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetTags() &#123;</span><br><span class="line">  options.array.splice(0);</span><br><span class="line">  for (var i = 0; i &lt; store.state.ProblemTags.length; i++) &#123;</span><br><span class="line">    options.array.push(&#123;</span><br><span class="line">      value: store.state.ProblemTags[i],</span><br><span class="line">      label: store.state.ProblemTags[i],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  SetTags();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetSearchInfo,</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现获取题目标签组件"><a href="#实现获取题目标签组件" class="headerlink" title="实现获取题目标签组件"></a>实现获取题目标签组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/439cc75e3fc9c9594fe6d6a0fff7d40d-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt; ProblemTags.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-tag</span><br><span class="line">    v-for=&quot;tag in dynamicTags&quot;</span><br><span class="line">    :key=&quot;tag&quot;</span><br><span class="line">    class=&quot;mx-1&quot;</span><br><span class="line">    closable</span><br><span class="line">    :disable-transitions=&quot;false&quot;</span><br><span class="line">    @close=&quot;handleClose(tag)&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; tag &#125;&#125;</span><br><span class="line">  &lt;/el-tag&gt;</span><br><span class="line">  &lt;el-input</span><br><span class="line">    v-if=&quot;inputVisible&quot;</span><br><span class="line">    ref=&quot;InputRef&quot;</span><br><span class="line">    v-model=&quot;inputValue&quot;</span><br><span class="line">    class=&quot;ml-1 w-20&quot;</span><br><span class="line">    size=&quot;small&quot;</span><br><span class="line">    @keyup.enter=&quot;handleInputConfirm&quot;</span><br><span class="line">    @blur=&quot;handleInputConfirm&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;el-button v-else class=&quot;button-new-tag ml-1&quot; size=&quot;small&quot; @click=&quot;showInput&quot;&gt;</span><br><span class="line">    + New Tag</span><br><span class="line">  &lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; nextTick, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElInput &#125; from &quot;element-plus&quot;;</span><br><span class="line"></span><br><span class="line">const inputValue = ref(&quot;&quot;);</span><br><span class="line">const dynamicTags = ref([&quot;默认&quot;]);</span><br><span class="line">const inputVisible = ref(false);</span><br><span class="line">const InputRef = ref&lt;InstanceType&lt;typeof ElInput&gt;&gt;();</span><br><span class="line"></span><br><span class="line">// --------------接口---------------------</span><br><span class="line">// 返回数据</span><br><span class="line">function GetTagsData() &#123;</span><br><span class="line">  return dynamicTags.value;</span><br><span class="line">&#125;</span><br><span class="line">// 设置数据</span><br><span class="line">function SetTagsData(Info: Array&lt;string&gt;) &#123;</span><br><span class="line">  dynamicTags.value.splice(0);</span><br><span class="line">  for (var i = 0; i &lt; Info.length; i++) &#123;</span><br><span class="line">    dynamicTags.value.push(Info[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// -----------------------------------</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetTagsData,</span><br><span class="line">  SetTagsData,</span><br><span class="line">&#125;);</span><br><span class="line">const handleClose = (tag: string) =&gt; &#123;</span><br><span class="line">  dynamicTags.value.splice(dynamicTags.value.indexOf(tag), 1);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const showInput = () =&gt; &#123;</span><br><span class="line">  inputVisible.value = true;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    InputRef.value!.input!.focus();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const handleInputConfirm = () =&gt; &#123;</span><br><span class="line">  if (inputValue.value) &#123;</span><br><span class="line">    dynamicTags.value.push(inputValue.value);</span><br><span class="line">  &#125;</span><br><span class="line">  inputVisible.value = false;</span><br><span class="line">  inputValue.value = &quot;&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现展示标签组件"><a href="#实现展示标签组件" class="headerlink" title="实现展示标签组件"></a>实现展示标签组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/706a8b7430566a1fe758d008e8923b32-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt;TagsButton.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;标签：&lt;/h2&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">      v-for=&quot;(name, index) in store.state.ProblemTags&quot;</span><br><span class="line">      :key=&quot;index&quot;</span><br><span class="line">      type=&quot;default&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#123; name &#125;&#125;&lt;/el-button</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现获取题目测试用例组件"><a href="#实现获取题目测试用例组件" class="headerlink" title="实现获取题目测试用例组件"></a>实现获取题目测试用例组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/6368157a10db80a7aa3601ff621390e4-0" alt="图片描述"></p>
<p>将 components -&gt; Problem -&gt; TestDataForm.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-form</span><br><span class="line">    ref=&quot;formRef&quot;</span><br><span class="line">    :model=&quot;dynamicValidateForm&quot;</span><br><span class="line">    label-width=&quot;120px&quot;</span><br><span class="line">    class=&quot;demo-dynamic&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-form-item</span><br><span class="line">      v-for=&quot;(domain, index) in dynamicValidateForm.domains&quot;</span><br><span class="line">      :key=&quot;domain.key&quot;</span><br><span class="line">      :label=&quot;&#x27;测试点&#x27; + (index + 1)&quot;</span><br><span class="line">      :prop=&quot;&#x27;domains.&#x27; + index + &#x27;.value&#x27;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-input</span><br><span class="line">        v-model=&quot;domain.value&quot;</span><br><span class="line">        type=&quot;textarea&quot;</span><br><span class="line">        :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;el-button class=&quot;mt-2&quot; @click.prevent=&quot;removeDomain(domain)&quot;</span><br><span class="line">        &gt;删除&lt;/el-button</span><br><span class="line">      &gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button @click=&quot;addDomain&quot;&gt;增加新测试点&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const dynamicValidateForm = reactive&lt;&#123;</span><br><span class="line">  domains: DomainItem[];</span><br><span class="line">&#125;&gt;(&#123;</span><br><span class="line">  domains: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">interface DomainItem &#123;</span><br><span class="line">  key: number;</span><br><span class="line">  value: string;</span><br><span class="line">&#125;</span><br><span class="line">// --------------接口-----------------------</span><br><span class="line">// 提交表单</span><br><span class="line">const submitForm = () =&gt; &#123;</span><br><span class="line">  return dynamicValidateForm.domains;</span><br><span class="line">&#125;;</span><br><span class="line">// 设置表单</span><br><span class="line">function setForm(info: Array&lt;string&gt;) &#123;</span><br><span class="line">  for (var i = 0; i &lt; info.length; i++) &#123;</span><br><span class="line">    dynamicValidateForm.domains.push(&#123;</span><br><span class="line">      key: Date.now(),</span><br><span class="line">      value: info[i],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  submitForm,</span><br><span class="line">  setForm,</span><br><span class="line">&#125;);</span><br><span class="line">// -------------------------------------------</span><br><span class="line">// 删除某一项</span><br><span class="line">const removeDomain = (item: DomainItem) =&gt; &#123;</span><br><span class="line">  const index = dynamicValidateForm.domains.indexOf(item);</span><br><span class="line">  if (index !== -1) &#123;</span><br><span class="line">    dynamicValidateForm.domains.splice(index, 1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 添加某一项</span><br><span class="line">const addDomain = () =&gt; &#123;</span><br><span class="line">  dynamicValidateForm.domains.push(&#123;</span><br><span class="line">    key: Date.now(),</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现饼图组件"><a href="#实现饼图组件" class="headerlink" title="实现饼图组件"></a>实现饼图组件</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/32ffecad8cfb2093c8d19a616ef5930d-0" alt="图片描述"></p>
<p>将 components -&gt; Chart -&gt; PieChart.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;center&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/center&gt;</span><br><span class="line">  &lt;div id=&quot;main&quot; style=&quot;height:300px;width:300px&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line">let myChart;</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const options = reactive(&#123;</span><br><span class="line">  tooltip: &#123;&#125;,</span><br><span class="line">  legend: &#123;</span><br><span class="line">    orient: &quot;horizontal&quot;,</span><br><span class="line">    x: &quot;center&quot;,</span><br><span class="line">    y: &quot;bottom&quot;,</span><br><span class="line">    data: [&quot;CE&quot;, &quot;AC&quot;, &quot;WA&quot;, &quot;RE&quot;, &quot;TLE&quot;, &quot;MLE&quot;, &quot;SE&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &quot;pie&quot;,</span><br><span class="line">      stillShowZeroSum: false,</span><br><span class="line">      data: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;CE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;AC&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;WA&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;RE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;TLE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;MLE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;SE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      radius: &quot;45%&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function SetDataInfo(info) &#123;</span><br><span class="line">  options.series[0].data[0].value = info.CENum;</span><br><span class="line">  options.series[0].data[1].value = info.ACNum;</span><br><span class="line">  options.series[0].data[2].value = info.WANum;</span><br><span class="line">  options.series[0].data[3].value = info.RENum;</span><br><span class="line">  options.series[0].data[4].value = info.TLENum;</span><br><span class="line">  options.series[0].data[5].value = info.MLENum;</span><br><span class="line">  options.series[0].data[6].value = info.SENum;</span><br><span class="line">  title.value = info.Title;</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function EchartsInit() &#123;</span><br><span class="line">  // 基于准备好的dom，初始化echarts实例</span><br><span class="line">  myChart = echarts.init(document.getElementById(&quot;main&quot;));</span><br><span class="line">  // 绘制图表</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetDataInfo,</span><br><span class="line">&#125;);</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  EchartsInit();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题库页面"><a href="#实现题库页面" class="headerlink" title="实现题库页面"></a>实现题库页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9ff9de73972367ab1793d8962c6ddb32-0" alt="图片描述"></p>
<p>将 Pages -&gt; ProblemList.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row&gt;</span><br><span class="line">    &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;ProblemSearch</span><br><span class="line">          ref=&quot;problemsearch&quot;</span><br><span class="line">          :SearchProblemSet=&quot;SearchProblemSet&quot;</span><br><span class="line">          id=&quot;problemsearch&quot;</span><br><span class="line">        &gt;&lt;/ProblemSearch&gt;</span><br><span class="line">        &lt;el-table</span><br><span class="line">          :data=&quot;problemsetdata.array&quot;</span><br><span class="line">          @cell-click=&quot;problemclick&quot;</span><br><span class="line">          @cell-mouse-enter=&quot;changepiechart&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-table-column label=&quot;状态&quot; width=&quot;100&quot;&gt;</span><br><span class="line">            &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;el-icon v-if=&quot;store.state.Solves.includes(scope.row.ProblemId)&quot;&gt;</span><br><span class="line">                &lt;Check /&gt;</span><br><span class="line">              &lt;/el-icon&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;ProblemId&quot; label=&quot;ID&quot; width=&quot;50&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;Title&quot; label=&quot;题目&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;Tags&quot; label=&quot;标签&quot; width=&quot;400&quot;&gt;</span><br><span class="line">            &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;el-tag</span><br><span class="line">                v-for=&quot;(name, index) in scope.row.Tags&quot;</span><br><span class="line">                :key=&quot;index&quot;</span><br><span class="line">                disable-transitions</span><br><span class="line">                size=&quot;medium&quot;</span><br><span class="line">                &gt;&#123;&#123; name &#125;&#125;&lt;/el-tag</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;通过次数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;提交次数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[15, 20, 30, 40]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;totalsize&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;PieChart ref=&quot;piechart&quot;&gt;&lt;/PieChart&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;TagsButton&gt;&lt;/TagsButton&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import PieChart from &quot;../components/Chart/PieChart.vue&quot;;</span><br><span class="line">import ProblemSearch from &quot;../components/Problem/ProblemSearch.vue&quot;;</span><br><span class="line">import TagsButton from &quot;../components/Problem/TagsButton.vue&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line">const piechart = ref();</span><br><span class="line">const problemsearch = ref();</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  Id: &quot;&quot;,</span><br><span class="line">  Title: &quot;&quot;,</span><br><span class="line">  Tags: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 题目信息列表</span><br><span class="line">let problemsetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetProblemSetInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problemlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        problemsetdata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 子组件的搜索按钮调用父组件的方法</span><br><span class="line">function SearchProblemSet() &#123;</span><br><span class="line">  let Info = problemsearch.value.GetSearchInfo();</span><br><span class="line">  searchinfo.Id = Info.Id;</span><br><span class="line">  searchinfo.Title = Info.Title;</span><br><span class="line">  searchinfo.Tags = Info.Tags;</span><br><span class="line"></span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;</span><br><span class="line">// 跳转函数</span><br><span class="line">function problemclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Problem&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function changepiechart(row, column, cell, event) &#123;</span><br><span class="line">  let info = &#123;</span><br><span class="line">    CENum: row.CENum,</span><br><span class="line">    ACNum: row.ACNum,</span><br><span class="line">    WANum: row.WANum,</span><br><span class="line">    RENum: row.RENum,</span><br><span class="line">    TLENum: row.TLENum,</span><br><span class="line">    MLENum: row.MLENum,</span><br><span class="line">    SENum: row.SENum,</span><br><span class="line">    Title: row.Title,</span><br><span class="line">  &#125;;</span><br><span class="line">  piechart.value.SetDataInfo(info);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#problemsearch &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题目页面"><a href="#实现题目页面" class="headerlink" title="实现题目页面"></a>实现题目页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p>
<p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/2e13096e3fab21609ec8275662e713f6-0" alt="图片描述"></p>
<p>将 Pages -&gt; Problem.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123; data.problemid &#125;&#125;.&#123;&#123; data.title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;data.content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div :style=&quot;&#123; boxShadow: `var(--el-box-shadow)` &#125;&quot;&gt;</span><br><span class="line">          &lt;MonacoEditor</span><br><span class="line">            ref=&quot;monacoeditor&quot;</span><br><span class="line">            :ProblemId=&quot;$route.query.ProblemId&quot;</span><br><span class="line">          &gt;&lt;/MonacoEditor&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          @click=&quot;SubmitCode()&quot;</span><br><span class="line">          :disabled=&quot;submitbutton&quot;</span><br><span class="line">          :loading=&quot;submitloading&quot;</span><br><span class="line">          &gt;提交&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;div id=&quot;resultdiv&quot;&gt;</span><br><span class="line">          &lt;h4&gt;代码运行状态： &#123;&#123; ResultMsg() &#125;&#125;&lt;/h4&gt;</span><br><span class="line">          &lt;h4&gt;错误提示： &#123;&#123; reason &#125;&#125;&lt;/h4&gt;</span><br><span class="line">          &lt;h3&gt;Tip：可以通过查看测评记录查看每个测试点详细信息&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;demo-collapse&quot;&gt;</span><br><span class="line">          &lt;el-collapse v-model=&quot;activeNames&quot; @change=&quot;handleChange&quot;&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;作者&quot; name=&quot;1&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &#123;&#123; data.nickname &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;时间限制&quot; name=&quot;2&quot;&gt;</span><br><span class="line">              &lt;div&gt;&#123;&#123; data.timelimit &#125;&#125; MS&lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;空间限制&quot; name=&quot;3&quot;&gt;</span><br><span class="line">              &lt;div&gt;&#123;&#123; data.memorylimit &#125;&#125; MB&lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;标签&quot; name=&quot;4&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;el-tag v-for=&quot;(tag, index) in data.tags&quot; :key=&quot;index&quot;&gt;&#123;&#123;</span><br><span class="line">                  tag</span><br><span class="line">                &#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">          &lt;/el-collapse&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickStatusRecord&quot;</span><br><span class="line">          &gt;提交记录&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickSolution&quot;&gt;题解&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickDiscuss&quot;&gt;讨论&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import MonacoEditor from &quot;../components/Problem/MonacoEditor.vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; ref, onMounted, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import &#123; useRoute, useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">let submitbutton = ref(false);</span><br><span class="line">let submitloading = ref(false);</span><br><span class="line"></span><br><span class="line">const monacoeditor = ref();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const router = useRouter();</span><br><span class="line">// 创建题目描述，是否显示，获取题目数据</span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">  problemid: &quot;&quot;,</span><br><span class="line">  title: &quot;&quot;,</span><br><span class="line">  content: &quot;&quot;,</span><br><span class="line">  timelimit: 0,</span><br><span class="line">  memorylimit: 0,</span><br><span class="line">  judgenum: 0,</span><br><span class="line">  submitnum: 0,</span><br><span class="line">  acnum: 0,</span><br><span class="line">  nickname: &quot;&quot;,</span><br><span class="line">  tags: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let result = ref(-1);</span><br><span class="line">let reason = ref(&quot;&quot;);</span><br><span class="line">// 请求当前题目详情</span><br><span class="line">function GetProblem() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problem`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: data.problemid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">          SetDataInfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;出错啦！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetDataInfo(Info) &#123;</span><br><span class="line">  data.title = Info.Title;</span><br><span class="line">  data.content = Info.Description;</span><br><span class="line">  data.timelimit = Info.TimeLimit;</span><br><span class="line">  data.memorylimit = Info.MemoryLimit;</span><br><span class="line">  data.judgenum = Info.JudgeNum;</span><br><span class="line">  data.submitnum = Info.SubmitNum;</span><br><span class="line">  data.acnum = Info.ACNum;</span><br><span class="line">  data.nickname = Info.UserNickName;</span><br><span class="line">  data.tags = Info.Tags;</span><br><span class="line">&#125;</span><br><span class="line">// 提交代码</span><br><span class="line">function SubmitCode() &#123;</span><br><span class="line">  submitloading.value = true;</span><br><span class="line">  result.value = 0;</span><br><span class="line"></span><br><span class="line">  service</span><br><span class="line">    .post(`/api/problemcode`, &#123;</span><br><span class="line">      ProblemId: data.problemid,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      UserNickName: store.state.NickName,</span><br><span class="line">      Code: monacoeditor.value.GetCode(),</span><br><span class="line">      Language: monacoeditor.value.GetLanguage(),</span><br><span class="line">      TimeLimit: data.timelimit,</span><br><span class="line">      MemoryLimit: data.memorylimit,</span><br><span class="line">      JudgeNum: data.judgenum,</span><br><span class="line">      ProblemTitle: data.title,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        submitloading.value = false;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">          result.value = Number(response.data.Status);</span><br><span class="line">          reason.value = response.data.ComplierInfo;</span><br><span class="line">          // 如果第一次AC</span><br><span class="line">          if (response.data.IsFirstAC) &#123;</span><br><span class="line">            store.state.Solves.push(data.problemid);</span><br><span class="line">            console.log(&quot;solves:&quot;, store.state.Solves);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;提交失败&quot;, response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        submitloading.value = false;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function ResultMsg() &#123;</span><br><span class="line">  if (result.value == -1) return &quot;&quot;;</span><br><span class="line">  else if (result.value == 0) return &quot;Pending&quot;;</span><br><span class="line">  else if (result.value == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (result.value == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (result.value == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (result.value == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (result.value == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (result.value == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (result.value == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function ClickStatusRecord() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;StatusRecord&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ProblemId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function ClickSolution() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionList&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ParentId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function ClickDiscuss() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussList&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ParentId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  data.problemid = route.query.ProblemId;</span><br><span class="line">  GetProblem();</span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) submitbutton.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.content &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题目编辑页面"><a href="#实现题目编辑页面" class="headerlink" title="实现题目编辑页面"></a>实现题目编辑页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/9fc6d9681be47caaa71b38b8b72bc6f1-0" alt="图片描述"></p>
<p>将 Pages -&gt; Editor -&gt; ProblemEditor.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;</span><br><span class="line">        &lt;h5&gt;标题：&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;title&quot; placeholder=&quot;标题&quot; /&gt;</span><br><span class="line">        &lt;h5&gt;题目描述（可全屏编辑）&lt;/h5&gt;</span><br><span class="line">        &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">        &lt;h7&gt;输入&lt;/h7&gt;</span><br><span class="line">        &lt;TestDataFrom ref=&quot;intestdatafrom&quot;&gt;&lt;/TestDataFrom&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">        &lt;h7&gt;输出&lt;/h7&gt;</span><br><span class="line">        &lt;TestDataFrom ref=&quot;outtestdatafrom&quot;&gt;&lt;/TestDataFrom&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;</span><br><span class="line">        &lt;h5&gt;SPJ文件（如果要启用请设置开关开启）&lt;/h5&gt;</span><br><span class="line">        &lt;el-switch v-model=&quot;isspj&quot; /&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;spjdata&quot;</span><br><span class="line">          placeholder=&quot;spj文件&quot;</span><br><span class="line">          type=&quot;textarea&quot;</span><br><span class="line">          :autosize=&quot;&#123; minRows: 10, maxRows: 30 &#125;&quot;</span><br><span class="line">        /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;时间复杂度：单位MS&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;timelimit&quot; placeholder=&quot;时间复杂度&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;空间复杂度：单位MB&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;memorylimit&quot; placeholder=&quot;空间复杂度&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;标签&lt;/h5&gt;</span><br><span class="line">        &lt;ProblemTags ref=&quot;problemtags&quot;&gt;&lt;/ProblemTags&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;作者：&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;usernickname&quot; placeholder=&quot;作者&quot; disabled /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;Submit()&quot;&gt;提交&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import TestDataFrom from &quot;../../components/Problem/TestDataFrom.vue&quot;;</span><br><span class="line">import ProblemTags from &quot;../../components/Problem/ProblemTags.vue&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">// 组件</span><br><span class="line">const intestdatafrom = ref();</span><br><span class="line">const outtestdatafrom = ref();</span><br><span class="line">const problemtags = ref();</span><br><span class="line">// 提示信息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 传递的信息</span><br><span class="line">const problemid = ref(&quot;&quot;);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const spjdata = ref(`#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;fstream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    FILE *f_out = fopen(argv[2], &quot;r&quot;);  // 测试输出</span><br><span class="line">    FILE *f_user = fopen(argv[3], &quot;r&quot;); // 用户输出</span><br><span class="line">    int ret = 0;                        // AC=0, WA=1</span><br><span class="line"></span><br><span class="line">    int a, b;</span><br><span class="line">    // 获取输入输出</span><br><span class="line">    fscanf(f_out, &quot;%d&quot;, &amp;a);</span><br><span class="line">    fscanf(f_user, &quot;%d&quot;, &amp;b);</span><br><span class="line">    // 比较答案</span><br><span class="line">    if (a == b)</span><br><span class="line">        ret = 0;</span><br><span class="line">    else</span><br><span class="line">        ret = 1;</span><br><span class="line"></span><br><span class="line">    fclose(f_out);</span><br><span class="line">    fclose(f_user);</span><br><span class="line"></span><br><span class="line">    return ret; // 返回结果，返回值为0时，答案正确，为1时，答案错误</span><br><span class="line">&#125;`);</span><br><span class="line">const isspj = ref(false);</span><br><span class="line">const timelimit = ref(2000);</span><br><span class="line">const memorylimit = ref(128);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">interface TestInfo &#123;</span><br><span class="line">  in: string;</span><br><span class="line">  out: string;</span><br><span class="line">&#125;</span><br><span class="line">interface ProblemData &#123;</span><br><span class="line">  ProblemId: string;</span><br><span class="line">  EditType: string;</span><br><span class="line">  Title: string;</span><br><span class="line">  Description: string;</span><br><span class="line">  JudgeNum: number;</span><br><span class="line">  IsSPJ: boolean;</span><br><span class="line">  SPJ: string;</span><br><span class="line">  UserNickName: string;</span><br><span class="line">  TimeLimit: number;</span><br><span class="line">  MemoryLimit: number;</span><br><span class="line">  Tags: Array&lt;string&gt;;</span><br><span class="line">  TestInfo: Array&lt;TestInfo&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Submit() &#123;</span><br><span class="line">  let indata = intestdatafrom.value.submitForm();</span><br><span class="line">  let outdata = outtestdatafrom.value.submitForm();</span><br><span class="line">  let tags = problemtags.value.GetTagsData();</span><br><span class="line">  if (title.value.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;题目标题太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (indata.length != outdata.length) &#123;</span><br><span class="line">    pointmessage.value = &quot;输入输出数据的数量不一致！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  let testinfo = &lt;Array&lt;TestInfo&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; indata.length; i++) &#123;</span><br><span class="line">    const info = &lt;TestInfo&gt;&#123;&#125;;</span><br><span class="line">    info.in = indata[i].value;</span><br><span class="line">    info.out = outdata[i].value;</span><br><span class="line">    testinfo.push(info);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let tagsinfo = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; tags.length; i++) &#123;</span><br><span class="line">    tagsinfo.push(tags[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const data = &lt;ProblemData&gt;&#123;&#125;;</span><br><span class="line">  data.EditType = edittype.value;</span><br><span class="line">  data.ProblemId = problemid.value;</span><br><span class="line">  data.Title = title.value;</span><br><span class="line">  data.Description = markdowneditor.value.GetContent();</span><br><span class="line">  data.JudgeNum = indata.length;</span><br><span class="line">  data.IsSPJ = isspj.value;</span><br><span class="line">  data.SPJ = spjdata.value;</span><br><span class="line">  data.UserNickName = usernickname.value;</span><br><span class="line">  data.TimeLimit = timelimit.value;</span><br><span class="line">  data.MemoryLimit = memorylimit.value;</span><br><span class="line">  data.Tags = tagsinfo;</span><br><span class="line">  data.TestInfo = testinfo;</span><br><span class="line"></span><br><span class="line">  service</span><br><span class="line">    .post(`/api/problem/edit`, &#123;</span><br><span class="line">      datainfo: data,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;题目插入成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problem/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: problemid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;题目获取成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          handledata(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">//Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,IsSPJ,JudgeNum,Tags,TestInfo[&#123;in,out&#125;])</span><br><span class="line">function handledata(Info: any) &#123;</span><br><span class="line">  title.value = Info.Title;</span><br><span class="line">  markdowneditor.value.SetContent(Info.Description);</span><br><span class="line">  timelimit.value = Number(Info.TimeLimit);</span><br><span class="line">  memorylimit.value = Number(Info.MemoryLimit);</span><br><span class="line">  isspj.value = Info.IsSPJ;</span><br><span class="line">  if (isspj.value) spjdata.value = Info.SPJ;</span><br><span class="line">  usernickname.value = Info.UserNickName;</span><br><span class="line">  let tagsinfo = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; Info.Tags.length; i++) &#123;</span><br><span class="line">    tagsinfo.push(Info.Tags[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  problemtags.value.SetTagsData(tagsinfo);</span><br><span class="line"></span><br><span class="line">  let testdatain = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  let testdataout = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; Number(Info.JudgeNum); i++) &#123;</span><br><span class="line">    testdatain.push(Info.TestInfo[i].in);</span><br><span class="line">    testdataout.push(Info.TestInfo[i].out);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  intestdatafrom.value.setForm(testdatain);</span><br><span class="line">  outtestdatafrom.value.setForm(testdataout);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  problemid.value = String(route.query.ProblemId);</span><br><span class="line">  edittype.value = String(route.query.edittype);</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    // 如果是更新，需要向服务器获取数据,并更新数据</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    // 否则是添加</span><br><span class="line">    usernickname.value = store.state.NickName;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.el-row &#123;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line">.el-row:last-child &#123;</span><br><span class="line">  margin-bottom: 0;</span><br><span class="line">&#125;</span><br><span class="line">.el-col &#123;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.grid-content &#123;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  min-height: 36px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="实现题目管理页面"><a href="#实现题目管理页面" class="headerlink" title="实现题目管理页面"></a>实现题目管理页面</h2><p>实现效果如下图所示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://doc.shiyanlou.com/courses/20638/1611178/bf3198c016f20ef0d33bbfe0478e85c1-0" alt="图片描述"></p>
<p>将 Pages -&gt; Admin -&gt; AdminProblem.vue 替换为如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;题目&lt;/h1&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;AddProblem&quot;&gt;添加题目&lt;/el-button&gt;</span><br><span class="line">  &lt;el-table :data=&quot;problemsetdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;ProblemId&quot; label=&quot;ID&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;Title&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;提交次数&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;通过次数&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[20, 40, 60]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(20); // 当前页的数量</span><br><span class="line">let totalsize = ref(20);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// --------------------------------------</span><br><span class="line">// 添加题目</span><br><span class="line">function AddProblem() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;ProblemEditor&quot;,</span><br><span class="line">    query: &#123; ProblemId: &quot;0&quot;, edittype: &quot;Insert&quot; &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 查看题目</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Problem&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑题目</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;点击编辑&quot;, row);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;ProblemEditor&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId, edittype: &quot;Update&quot; &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除题目</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/problem`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: row.ProblemId,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// -------------------------------------------------------</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">// 题目信息列表</span><br><span class="line">let problemsetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetProblemSetInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problemlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        problemsetdata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="运行-5"><a href="#运行-5" class="headerlink" title="运行"></a>运行</h2><p>将 store 文件夹中的 index.js 中的 mutations 添加如下函数：</p>
<p>此函数用于向后端请求标签数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&#x27;../axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">GetProblemTags</span>(state)&#123;</span><br><span class="line">    service</span><br><span class="line">    .<span class="title function_">get</span>(<span class="string">`/api/tags`</span>, &#123;</span><br><span class="line">        <span class="attr">params</span>:&#123;</span><br><span class="line">            <span class="title class_">TagType</span>:<span class="string">&quot;Problem&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            state.<span class="property">ProblemTags</span> = response.<span class="property">data</span>.<span class="property">Tags</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将 main.js 中 createApp 函数前添加如下代码：</p>
<p>当加载前端页面时，执行请求获取标签数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取题目标签</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&quot;GetProblemTags&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>点击右侧 Web 服务进行测试。</p>
<h2 id="实验总结-7"><a href="#实验总结-7" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了题目模块的全部功能。</p>
<p>获取本章节的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code28.zip</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h></h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://kuroko.love/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/">http://kuroko.love/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>Horn JoJo</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2023-10-30</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2023-10-30</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="LOVE BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">LOVE BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://picbed.kuroko.love/blog_background/%E6%B3%AA%E7%88%B7and%E5%88%9D%E6%98%A5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E9%98%B6%E6%AE%B5/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picbed.kuroko.love/blog_background/%E9%A3%9F%E8%9C%82%E6%93%8D%E7%A5%882.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2023/10/26/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%90%8E%E7%AB%AF2/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picbed.kuroko.love/blog_background/%E4%B8%BB%E8%A7%92%E5%9B%A2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/asserts/kuroko.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Horn JoJo</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://Horn-JoJo.github.io"><i class="fab fa-github"></i><span>kuroko的小家</span></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Horn-JoJo/" target="_blank" title="Github"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-Gitshezhi"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://leetcode.cn/u/jann_horn/" target="_blank" title="Leetcode"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-leetcode"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://b23.tv/aqCcTQk" target="_blank" title="Blibili"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://res.abeim.cn/api/qq/?qq=1494484196" target="_blank" title="QQ"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a><a class="social-icon faa-parent animated-hover" href="mailto:1494484196@qq.com" target="_blank" title="邮件"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youjian"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><a class="faa-parent animated-hover"><svg class="faa-tada icon" style="height:25px;width:25px;fill:currentColor;position:relative;top:5px" aria-hidden="true"><use xlink:href="#icon-gonggao"></use></svg></a><span>公告栏</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Vue%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.Vue前端项目介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">项目介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2%E6%8F%92%E4%BB%B6"><span class="toc-text">更换插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E4%BF%9D%E5%89%8D%E7%AB%AF%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">确保前端环境初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81%E5%B9%B6%E8%BF%90%E8%A1%8C"><span class="toc-text">下载代码并运行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E4%BB%A3%E7%A0%81"><span class="toc-text">分析代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.用户模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-1"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E9%A5%BC%E5%9B%BE%E7%BB%84%E4%BB%B6"><span class="toc-text">实现用户饼图组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-text">实现登录对话框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-text">实现注册对话框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E4%B8%BB%E9%A1%B5%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现用户主页页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2"><span class="toc-text">实现用户设置界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E6%8E%92%E5%90%8D%E7%95%8C%E9%9D%A2"><span class="toc-text">实现用户排名界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现用户管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%85%E8%A6%81%E9%85%8D%E7%BD%AE"><span class="toc-text">必要配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-1"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E9%80%9A%E7%94%A8%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.通用模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-2"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AF%84%E8%AE%BA%E7%BB%84%E4%BB%B6"><span class="toc-text">实现评论组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-Markdown-%E7%BC%96%E8%BE%91%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">实现 Markdown 编辑器组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现评论管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-2"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%85%AC%E5%91%8A%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">4.公告模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-3"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-3"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%85%AC%E5%91%8A%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">实现公告列表组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A6%96%E9%A1%B5"><span class="toc-text">实现首页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%85%AC%E5%91%8A%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现公告页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%85%AC%E5%91%8A%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现公告编辑页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%85%AC%E5%91%8A%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现公告管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-1"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-3"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E8%AE%A8%E8%AE%BA%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.讨论模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-4"><span class="toc-text">实验介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AE%A8%E8%AE%BA%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现讨论列表页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AE%A8%E8%AE%BA%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现讨论页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AE%A8%E8%AE%BA%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现讨论编辑页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%AE%A8%E8%AE%BA%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现讨论管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-2"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-4"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E9%A2%98%E8%A7%A3%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.题解模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-5"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-4"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E8%A7%A3%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题解列表页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E8%A7%A3%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题解页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E8%A7%A3%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题解编辑页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E8%A7%A3%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题解管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-3"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-5"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E7%8A%B6%E6%80%81%E8%AE%B0%E5%BD%95%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">7.状态记录模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-6"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-5"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E6%9F%A5%E7%9C%8B%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">实现代码查看器组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%8A%B6%E6%80%81%E8%AE%B0%E5%BD%95%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-text">实现状态记录对话框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%8A%B6%E6%80%81%E8%AE%B0%E5%BD%95%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6"><span class="toc-text">实现状态记录搜索组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%8A%B6%E6%80%81%E8%AE%B0%E5%BD%95%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现状态记录列表页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-4"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-6"><span class="toc-text">实验总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E9%A2%98%E7%9B%AE%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0"><span class="toc-text">8.题目模块实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BB%8B%E7%BB%8D-7"><span class="toc-text">实验介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-6"><span class="toc-text">知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">实现代码编辑器组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E7%9B%AE%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6"><span class="toc-text">实现题目搜索组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%8E%B7%E5%8F%96%E9%A2%98%E7%9B%AE%E6%A0%87%E7%AD%BE%E7%BB%84%E4%BB%B6"><span class="toc-text">实现获取题目标签组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B1%95%E7%A4%BA%E6%A0%87%E7%AD%BE%E7%BB%84%E4%BB%B6"><span class="toc-text">实现展示标签组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%8E%B7%E5%8F%96%E9%A2%98%E7%9B%AE%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%BB%84%E4%BB%B6"><span class="toc-text">实现获取题目测试用例组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A5%BC%E5%9B%BE%E7%BB%84%E4%BB%B6"><span class="toc-text">实现饼图组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E5%BA%93%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题库页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E7%9B%AE%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题目页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E7%9B%AE%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题目编辑页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A2%98%E7%9B%AE%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-text">实现题目管理页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C-5"><span class="toc-text">运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93-7"><span class="toc-text">实验总结</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By Horn JoJo</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//at.alicdn.com/t/c/font_4183657_j03j2wub0ye.js"></script><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script><script defer src="/js/toggleImage.js"></script><script defer src="/js/life.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="http://kuroko.love/categories/C/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 C++学习 (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="http://kuroko.love/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #69e8f2}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'true';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.3.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.9.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/08/16/目标清单/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://picbed.kuroko.love/blog_background/%E4%B8%BB%E8%A7%92%E5%9B%A22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-08-16</span><a class="blog-slider__title" href="2023/08/16/目标清单/" alt="">成长日记</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/08/16/目标清单/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__bounceInDown');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '2');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('pagination');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__lightSpeedInRight');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.kuroko.love/api?Horn-JoJo",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'Horn-JoJo')
    }
  </script><!-- hexo injector body_end end --></body></html>