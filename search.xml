<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E9%98%B6%E6%AE%B5/"/>
      <url>/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E9%98%B6%E6%AE%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a><strong>前端部署</strong></h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验将会对前端项目进行打包并部署到服务器上。</p><p>注意：请使用本章节的默认环境！默认环境升级了内存，不会存在打包内存不足。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>前端项目打包</li><li>Nginx 服务器</li></ul><h2 id="打包并部署"><a href="#打包并部署" class="headerlink" title="打包并部署"></a>打包并部署</h2><h2 id="下载前端代码并打包"><a href="#下载前端代码并打包" class="headerlink" title="下载前端代码并打包"></a>下载前端代码并打包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code28.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./code28 ./code28.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> code28</span><br><span class="line"><span class="comment"># 安装依赖包</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment"># 安装monaco-editor的依赖包</span></span><br><span class="line">cnpm install --save-dev vite-plugin-monaco-editor@1.0.10</span><br><span class="line"><span class="comment"># 打包</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>如果生成 dist 文件夹，说明打包成功！</p><p>将整个 dist 文件夹放在服务器上，即可访问前端页面。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5a20388bf4ab1e7955d98d752db90c32-0" alt="图片描述"></p><h4 id="配置-Nginx-服务"><a href="#配置-Nginx-服务" class="headerlink" title="配置 Nginx 服务"></a>配置 Nginx 服务</h4><p>打开 nginx 的配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>注意下面的 root 配置是 dist 文件夹路径，我们可以将 dist 文件夹放置根目录 /home/project/ 下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /home/project/code28/dist /home/project</span><br></pre></td></tr></table></figure><p>在 http 模块中添加如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen 8080;</span><br><span class="line">    server_name 127.0.0.1;  <span class="comment"># 此处填写你的域名或IP</span></span><br><span class="line">    root /home/project/dist;   <span class="comment"># 此处填写你的网页根目录</span></span><br><span class="line">    location /api &#123;  <span class="comment"># 将API重定向到后台服务器（如果你修改了前端中的代理配置，这里需要对应&gt;的修改）</span></span><br><span class="line">        rewrite ^.*api/?(.*)$ /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">        proxy_pass http://127.0.0.1:8081; <span class="comment"># 填写你的后端地址和端口</span></span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;  <span class="comment"># 路由重定向以适应Vue中的路由</span></span><br><span class="line">        index index.html;</span><br><span class="line">        try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后开启 nginx 服务（启动前端）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启 nginx 服务</span></span><br><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure><p>这是我们可以点击右侧 Web 服务，直接访问前端页面。</p><h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验通过前端打包和配置 Nginx 服务器实现前端部署。</p><p>获取打包好的 dist 文件夹：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/dist.zip</span><br></pre></td></tr></table></figure><h1 id="后端部署"><a href="#后端部署" class="headerlink" title="后端部署"></a>后端部署</h1><h2 id="下载代码并运行"><a href="#下载代码并运行" class="headerlink" title="下载代码并运行"></a>下载代码并运行</h2><p>下载 mongodb 的初始化脚本文件并执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据库初始化脚本</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/init.mongodb</span><br></pre></td></tr></table></figure><p>创建 problemdata 文件夹（problemdata 文件夹与后端文件夹处于同一级目录）。</p><p>执行下面命令，配置语言的运行环境：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 python2 的环境</span></span><br><span class="line">sudo apt install python2 <span class="comment"># 默认没有，请安装</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 go 的 sudo 环境</span></span><br><span class="line">sudo vim /etc/sudoers <span class="comment"># 打开配置文件</span></span><br><span class="line"></span><br><span class="line">:/usr/local/go/bin <span class="comment"># 在secure_path后加入</span></span><br><span class="line"></span><br><span class="line">:wq! <span class="comment"># 强制保存并退出</span></span><br></pre></td></tr></table></figure><p>执行下面命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code20.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./XDOJ ./code20.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> XDOJ</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">sudo ./xdoj</span><br></pre></td></tr></table></figure><h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p><ol><li>搭建 MongoDB 数据库环境</li><li>搭建 Redis 数据库环境</li><li>初始化 MongoDB 数据库</li><li>创建 problemdata 文件夹</li><li>下载并运行后端项目</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/"/>
      <url>/2023/10/30/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%89%8D%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Vue前端项目介绍"><a href="#1-Vue前端项目介绍" class="headerlink" title="1.Vue前端项目介绍"></a>1.Vue前端项目介绍</h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验首先会安装 Volar 插件，然后下载前端项目的代码并运行，接着展示项目文件结构并对文件的作用进行解释，最后给出项目后续的模块图。</p><p>前端项目只是在简单学习 Vue 的情况下写的，如果看见不对或不足之处，请大家指出，谢谢！</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>Volar</li><li>npm</li><li>Vue 项目文件结构</li></ul><h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p>本次项目使用 Vue3 + Vite + ElementUI。</p><p>Vue 官网：<a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></p><p>Element 官网：<a href="https://element-plus.gitee.io/zh-CN/">https://element-plus.gitee.io/zh-CN/</a></p><h4 id="更换插件"><a href="#更换插件" class="headerlink" title="更换插件"></a>更换插件</h4><p>下载插件 Volar：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/21d707883883da9ddf1d0c8ba58594e0-0" alt="图片描述"></p><p>卸载插件 Vetur, 不然很多代码会报错。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b31d531ddad4579522b74cffa0383d6a-0" alt="图片描述"></p><p><strong>注意：如果还有代码报错，这不是代码问题，这是插件并未启动。</strong></p><h4 id="确保前端环境初始化"><a href="#确保前端环境初始化" class="headerlink" title="确保前端环境初始化"></a>确保前端环境初始化</h4><p>如果你点击 <code>Web 服务</code> 能够访问到页面，这是没有关闭 nginx 服务器（编写后端时，为了检测后端效果，运行的完整前端项目），首先执行下面命令，关闭 nginx 服务。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭 nginx 服务</span></span><br><span class="line">sudo service nginx stop</span><br></pre></td></tr></table></figure><p>此时我们再次点击 <code>web 服务</code> 查看，还可以看到页面，我们需要点击 F5 刷新，如果为如下图，则将环境初始化。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2fc8f1e1eab64a05c32b88c7c706c145-0" alt="图片描述"></p><h4 id="下载代码并运行"><a href="#下载代码并运行" class="headerlink" title="下载代码并运行"></a>下载代码并运行</h4><p>执行下面命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code21.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./XDOJFE code21.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> XDOJFE</span><br><span class="line"><span class="comment"># 安装依赖包</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment"># 安装monaco-editor的依赖包</span></span><br><span class="line">cnpm install --save-dev vite-plugin-monaco-editor@1.0.10</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试，如下图则说明成功。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9c72d16efde8205c92807bb51d478c1b-0" alt="图片描述"></p><h2 id="分析代码"><a href="#分析代码" class="headerlink" title="分析代码"></a>分析代码</h2><p>打开项目代码，即可看到下面的项目文件结构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|-- node_modules          <span class="comment"># 通过 npm install 下载安装的项目依赖包</span></span><br><span class="line">|-- public                <span class="comment"># 存放静态资源公共资源，不会被压缩合并</span></span><br><span class="line">|-- src                   <span class="comment"># 项目开发主要文件夹</span></span><br><span class="line">    |-- assest            <span class="comment"># 静态文件</span></span><br><span class="line">    |-- axios             <span class="comment"># 存放axios配置，实现对后端发送请求</span></span><br><span class="line">    |-- components        <span class="comment"># 存放组件</span></span><br><span class="line">    |-- pages             <span class="comment"># 界面组件</span></span><br><span class="line">    |-- router            <span class="comment"># 存放路由配置，实现界面跳转</span></span><br><span class="line">    |-- store             <span class="comment"># 存放vuex配置，实现</span></span><br><span class="line">    |-- App.vue           <span class="comment"># 根组件</span></span><br><span class="line">    |-- main.js           <span class="comment"># 入口文件</span></span><br><span class="line">    |-- index.html        <span class="comment"># 首页入口.html文件</span></span><br><span class="line">    |-- package.json      <span class="comment"># 项目配置和包管理文件（项目依赖和技术）</span></span><br><span class="line">    |-- vite.config.json  <span class="comment"># 项目配置信息：跨域proxy代理</span></span><br></pre></td></tr></table></figure><ol><li>axios 文件夹中的 index.js 文件是对 axios 进行配置，因为后端传入的 ID 是 int64 类型，如果不进行大数处理会导致前端收到的数据存在错误。（axios 会将 int64 类型的后两位数字变为 0）</li><li>components 文件夹全部存放组件的 vue 文件。</li><li>pages 文件夹全部存放关于界面组件的 vue 文件。</li><li>router 文件夹中的 index.js 文件是对路由的配置，通过路由可以跳转到其它页面。主要看 routes 配置，同时该文件也实现了路由跳转时的进度条。</li><li>store 文件夹中的 index.js 文件是对 vuex 的配置，vuex 可以进行全局的状态管理（类似于全局变量），vuex 可以存放变量以及函数。</li><li>App.vue 是主组件，是页面入口文件，是 vue 页面资源的首加载项。其中 <code>&lt;router-view&gt;</code> 最为关键，当路由跳转时，就会通过此标签渲染路由匹配到的组件。</li><li>main.js 主要作用是初始化 vue 实例并使用需要的插件。</li><li>index.html 是一个总的入口文件，vue 是单页面应用，挂在 id 为 app 的 div 下然后动态渲染路由模板。里面的 link 使用了 katex 公式的 CDN 引入。</li><li>package.json 它列出了项目使用的所有依赖项(项目所依赖的外部代码)。</li><li>vite.config.json 对项目的配置，主要是 server 对项目配置了代理服务器，解决跨域问题。</li></ol><p>项目加载的过程是 index.html -&gt; main.js -&gt; App.vue -&gt; helloworld.vue</p><p><strong>后续将会从如下几个模块实现本项目：</strong></p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/0732d5a9fc139b62f62a27306f83c0031c-0" alt="图片描述"></p><h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p><ol><li>安装 Volar 插件，卸载 Vetur 插件。</li><li>下载并运行项目。</li><li>解释项目的文件的作用。</li><li>给出项目加载的过程。</li></ol><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code21.zip</span><br></pre></td></tr></table></figure><h1 id="2-用户模块实现"><a href="#2-用户模块实现" class="headerlink" title="2.用户模块实现"></a>2.用户模块实现</h1><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/fb936f2e765e8fa72af80a03c08c4063-0" alt="图片描述"></p><p>实现了通过 Token 自动登录功能。</p><h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现用户模块</li><li>ECharts 库</li><li>请求拦截器和响应拦截器</li></ul><h2 id="实现用户饼图组件"><a href="#实现用户饼图组件" class="headerlink" title="实现用户饼图组件"></a>实现用户饼图组件</h2><p>该组件主要使用 ECharts 组件库，官方链接：</p><p><a href="https://echarts.apache.org/handbook/zh/how-to/chart-types/pie/basic-pie/">https://echarts.apache.org/handbook/zh/how-to/chart-types/pie/basic-pie/</a></p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/ce443ec176587510d3a49811dc916871-0" alt="图片描述"></p><p>将 components -&gt; Chart -&gt; UserPieChart.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;main&quot; style=&quot;height:300px;width:300px&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line">let myChart;</span><br><span class="line">const options = reactive(&#123;</span><br><span class="line">  tooltip: &#123;&#125;,</span><br><span class="line">  legend: &#123;</span><br><span class="line">    orient: &quot;horizontal&quot;,</span><br><span class="line">    x: &quot;center&quot;,</span><br><span class="line">    y: &quot;bottom&quot;,</span><br><span class="line">    data: [&quot;Submit&quot;, &quot;AC&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &quot;pie&quot;,</span><br><span class="line">      stillShowZeroSum: false,</span><br><span class="line">      data: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;Submit&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;AC&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      radius: &quot;45%&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function SetDataInfo(info) &#123;</span><br><span class="line">  options.series[0].data[0].value = info.SubmitNum;</span><br><span class="line">  options.series[0].data[1].value = info.ACNum;</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function EchartsInit() &#123;</span><br><span class="line">  // 基于准备好的dom，初始化echarts实例</span><br><span class="line">  myChart = echarts.init(document.getElementById(&quot;main&quot;));</span><br><span class="line">  // 绘制图表</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetDataInfo,</span><br><span class="line">&#125;);</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  EchartsInit();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现登录对话框"><a href="#实现登录对话框" class="headerlink" title="实现登录对话框"></a>实现登录对话框</h2><p>实现：通过 Element 组件库的 Dialog 组件实现对话框，然后通过 Element 组件库的 Form 组件获取登录信息，最后通过 axios 将信息发送至后端请求登录。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/1972c4edbf82185dd7ff5e22a0393d20-0" alt="图片描述"></p><p>将 components -&gt; Dialog -&gt; Login.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;dialogFormVisible&quot; title=&quot;登录&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;账号&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.account&quot; maxlength=&quot;20&quot; autocomplete=&quot;off&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.password&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">      &lt;span class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;SubmitInfo&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 对话框是否关闭</span><br><span class="line">const dialogFormVisible = ref(false);</span><br><span class="line">// 输入框的长度</span><br><span class="line">const formLabelWidth = &quot;200px&quot;;</span><br><span class="line">// 信息</span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  account: &quot;&quot;,</span><br><span class="line">  password: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line">// 打开对话框</span><br><span class="line">function open() &#123;</span><br><span class="line">  dialogFormVisible.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交表单</span><br><span class="line">function SubmitInfo() &#123;</span><br><span class="line">  //判断必填字段是否为空</span><br><span class="line">  if (!form.account || !form.password) &#123;</span><br><span class="line">    pointmessage.value = &quot;必填字段不能为空！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户长度</span><br><span class="line">  if (form.account.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;账号长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查密码长度</span><br><span class="line">  if (form.password.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">        功能：登录用户</span><br><span class="line">        传入：Json(Account,PassWord)</span><br><span class="line">        传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span><br><span class="line">    */</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/login`, &#123;</span><br><span class="line">      Account: form.account,</span><br><span class="line">      PassWord: form.password,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;登录成功！！！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          dialogFormVisible.value = false;</span><br><span class="line"></span><br><span class="line">          store.commit(&quot;Login&quot;, response.data.Info);</span><br><span class="line">          router.push(&#123; name: &quot;HomePage&quot; &#125;);</span><br><span class="line">          return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  open,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现注册对话框"><a href="#实现注册对话框" class="headerlink" title="实现注册对话框"></a>实现注册对话框</h2><p>实现：通过 Element 组件库的 Dialog 组件实现对话框，然后通过 Element 组件库的 Form 组件获取注册信息，最后通过 axios 将信息发送至后端请求注册，注册需要注意检测注册信息是否合法。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/64f37bbaeeed6fea19bc4967b5bdc85f-0" alt="图片描述"></p><p>将 components -&gt; Dialog -&gt; Register.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog v-model=&quot;dialogFormVisible&quot; title=&quot;注册&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;昵称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.nickname&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于2个字符的昵称 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;账号&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.account&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于6个字符的账号 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.password&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;不少于6个字符的密码 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;确认密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.confirmpassword&quot;</span><br><span class="line">          maxlength=&quot;20&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          show-password=&quot;true&quot;</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;确认密码 【必填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;学校&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.school&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的学校名称 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;专业&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.major&quot;</span><br><span class="line">          maxlength=&quot;15&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的专业名称 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;个人简介&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.personalprofile&quot;</span><br><span class="line">          maxlength=&quot;25&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">          autocomplete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;你的个人简介 【选填】&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">      &lt;span class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;SubmitInfo&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 对话框是否关闭</span><br><span class="line">const dialogFormVisible = ref(false);</span><br><span class="line">// 输入框的长度</span><br><span class="line">const formLabelWidth = &quot;200px&quot;;</span><br><span class="line"></span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  nickname: &quot;&quot;,</span><br><span class="line">  account: &quot;&quot;,</span><br><span class="line">  password: &quot;&quot;,</span><br><span class="line">  confirmpassword: &quot;&quot;,</span><br><span class="line">  personalprofile: &quot;&quot;,</span><br><span class="line">  school: &quot;&quot;,</span><br><span class="line">  major: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line">// 打开对话框</span><br><span class="line">function open() &#123;</span><br><span class="line">  dialogFormVisible.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交表单</span><br><span class="line">function SubmitInfo() &#123;</span><br><span class="line">  //判断必填字段是否为空</span><br><span class="line">  if (</span><br><span class="line">    !form.nickname ||</span><br><span class="line">    !form.account ||</span><br><span class="line">    !form.password ||</span><br><span class="line">    !form.confirmpassword</span><br><span class="line">  ) &#123;</span><br><span class="line">    pointmessage.value = &quot;必填字段不能为空！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查昵称长度</span><br><span class="line">  if (form.nickname.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;昵称长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户长度</span><br><span class="line">  if (form.account.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;账户长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查密码长度</span><br><span class="line">  if (form.password.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查确认密码长度</span><br><span class="line">  if (form.confirmpassword.length &lt; 6) &#123;</span><br><span class="line">    pointmessage.value = &quot;确认密码长度太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查昵称是否符合规范（是否全为空格）</span><br><span class="line">  if (form.nickname.match(/^\s+$/)) &#123;</span><br><span class="line">    pointmessage.value = &quot;昵称不符合规范！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 检查账户是否符合</span><br><span class="line">  if (!checkstr(form.account)) &#123;</span><br><span class="line">    pointmessage.value = &quot;账户只能包含字母和数字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (!checkstr(form.password)) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码只能包含字母和数字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  // 判断两次密码是否一致</span><br><span class="line">  if (form.password != form.confirmpassword) &#123;</span><br><span class="line">    pointmessage.value = &quot;密码和确认密码不一致！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  /*</span><br><span class="line">        功能：注册用户</span><br><span class="line">        传入：Json(NickName,Account,PassWord,PersonalProfile,School,Major)</span><br><span class="line">        传出：Json(Result,Reason)</span><br><span class="line">    */</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/register`, &#123;</span><br><span class="line">      NickName: form.nickname,</span><br><span class="line">      Account: form.account,</span><br><span class="line">      PassWord: form.password,</span><br><span class="line">      PersonalProfile: form.personalprofile,</span><br><span class="line">      School: form.school,</span><br><span class="line">      Major: form.major,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;恭喜你！注册成功！成为XDOJ的一员！！！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          dialogFormVisible.value = false;</span><br><span class="line">          // 本地保存账号和密码</span><br><span class="line">          localStorage.setItem(&quot;Account&quot;, form.account);</span><br><span class="line">          localStorage.setItem(&quot;PassWord&quot;, form.password);</span><br><span class="line">          return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 正则判断字符串是否只包含字母和数字</span><br><span class="line">function checkstr(value: string) &#123;</span><br><span class="line">  var Regx = /^[0-9A-Z]+$/i;</span><br><span class="line">  if (Regx.test(value)) &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  open,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现用户主页页面"><a href="#实现用户主页页面" class="headerlink" title="实现用户主页页面"></a>实现用户主页页面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7939e4cdf6ecf933ef6496604acbcf65-0" alt="图片描述"></p><p>将 pages -&gt; UserHome.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; NickName &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-avatar :size=&quot;170&quot; :src=&quot;Avatar&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;14&quot;&gt;</span><br><span class="line">        个性签名：&#123;&#123; PersonalProfile &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        学校：&#123;&#123; School &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        专业：&#123;&#123; Major &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        解题数量：&#123;&#123; ACNum &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        提交次数：&#123;&#123; SubmitNum &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">        加入时间：&#123;&#123; JoinTime &#125;&#125;</span><br><span class="line">        &lt;el-divider /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;UserPieChart ref=&quot;userpiechart&quot;&gt;&lt;/UserPieChart&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import UserPieChart from &quot;../components/Chart/UserPieChart.vue&quot;;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const userpiechart = ref();</span><br><span class="line">const router = useRouter();</span><br><span class="line">const userid = router.currentRoute.value.query.UserId;</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const NickName = ref(&quot;&quot;);</span><br><span class="line">const Avatar = ref(&quot;&quot;);</span><br><span class="line">const PersonalProfile = ref(&quot;&quot;);</span><br><span class="line">const School = ref(&quot;&quot;);</span><br><span class="line">const Major = ref(&quot;&quot;);</span><br><span class="line">const JoinTime = ref(&quot;&quot;);</span><br><span class="line">const ACNum = ref(0);</span><br><span class="line">const Solves = reactive(&#123; array: [] &#125;);</span><br><span class="line">const SubmitNum = ref();</span><br><span class="line"></span><br><span class="line">function GetInfo() &#123;</span><br><span class="line">  console.log(&quot;调用函数&quot;);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/home`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: userid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          setinfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function setinfo(info) &#123;</span><br><span class="line">  NickName.value = info.NickName;</span><br><span class="line">  Avatar.value = info.Avatar;</span><br><span class="line">  PersonalProfile.value = info.PersonalProfile;</span><br><span class="line">  School.value = info.School;</span><br><span class="line">  Major.value = info.Major;</span><br><span class="line">  JoinTime.value = info.JoinTime;</span><br><span class="line">  ACNum.value = info.ACNum;</span><br><span class="line">  Solves.array = info.Solves;</span><br><span class="line">  SubmitNum.value = info.SubmitNum;</span><br><span class="line"></span><br><span class="line">  let tmpinfo = &#123; ACNum: info.ACNum, SubmitNum: info.SubmitNum &#125;;</span><br><span class="line">  userpiechart.value.SetDataInfo(tmpinfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 调用函数</span><br><span class="line">  GetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.h1 &#123;</span><br><span class="line">  font-size: 50px;</span><br><span class="line">  margin-left: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现用户设置界面"><a href="#实现用户设置界面" class="headerlink" title="实现用户设置界面"></a>实现用户设置界面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/53f2aec84cfcee84bf5a3df35108737b-0" alt="图片描述"></p><p>将 pages -&gt; UserSetting.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;修改个人信息&lt;/h1&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot; label-width=&quot;120px&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;头像&quot;&gt;</span><br><span class="line">        &lt;el-avatar :size=&quot;100&quot; :src=&quot;form.Avatar&quot; /&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.Avatar&quot; /&gt;</span><br><span class="line">        &lt;el-text class=&quot;mx-1&quot;</span><br><span class="line">          &gt;Tip：大家可以通过网上获取图片地址链接更改头像&lt;/el-text</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;个性签名&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;form.PersonalProfile&quot;</span><br><span class="line">          maxlength=&quot;25&quot;</span><br><span class="line">          show-word-limit</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;学校&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.School&quot; maxlength=&quot;15&quot; show-word-limit /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;专业&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;form.Major&quot; maxlength=&quot;15&quot; show-word-limit /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;确认&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=&quot;onCancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">const userid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const form = reactive(&#123;</span><br><span class="line">  Avatar: &quot;&quot;,</span><br><span class="line">  PersonalProfile: &quot;&quot;,</span><br><span class="line">  School: &quot;&quot;,</span><br><span class="line">  Major: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const onSubmit = () =&gt; &#123;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/user/update`, &#123;</span><br><span class="line">      UserId: userid.value,</span><br><span class="line">      Avatar: form.Avatar,</span><br><span class="line">      School: form.School,</span><br><span class="line">      Major: form.Major,</span><br><span class="line">      PersonalProfile: form.PersonalProfile,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          // 如果是本人修改则修改头像</span><br><span class="line">          if (store.state.UserId == userid.value)</span><br><span class="line">            store.state.Avatar = form.Avatar;</span><br><span class="line"></span><br><span class="line">          pointmessage.value = &quot;修改成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(&quot;submit!&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const onCancel = () =&gt; &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;;</span><br><span class="line">// 获取用户信息</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/updateinfo`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: userid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;请求信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          setdatainfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 设置信息</span><br><span class="line">function setdatainfo(info: any) &#123;</span><br><span class="line">  form.Avatar = info.Avatar;</span><br><span class="line">  form.Major = info.Major;</span><br><span class="line">  form.PersonalProfile = info.PersonalProfile;</span><br><span class="line">  form.School = info.School;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  userid.value = String(route.query.UserId);</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现用户排名界面"><a href="#实现用户排名界面" class="headerlink" title="实现用户排名界面"></a>实现用户排名界面</h2><p>实现：主要利用 Element 组件库的 Table 组件、 Carousel 走马灯组件和 Pagination 分页组件。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b23d973e5656188f4ba11ee26850ef58-0" alt="图片描述"></p><p>将 pages -&gt; UserRank.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-carousel :interval=&quot;4000&quot; type=&quot;card&quot; height=&quot;300px&quot;&gt;</span><br><span class="line">      &lt;el-carousel-item</span><br><span class="line">        v-for=&quot;(item, index) in carouseldata.array&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;center&gt;</span><br><span class="line">          &lt;h1&gt;&#123;&#123; item.rank &#125;&#125;&lt;/h1&gt;</span><br><span class="line">          &lt;el-avatar :size=&quot;100&quot; :src=&quot;item.avatar&quot; /&gt;</span><br><span class="line">          &lt;h1&gt;&#123;&#123; item.nickname &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;/center&gt;</span><br><span class="line">      &lt;/el-carousel-item&gt;</span><br><span class="line">    &lt;/el-carousel&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data=&quot;userrankdata.array&quot;</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">      @cell-click=&quot;</span><br><span class="line">        (row, column, cell, event) =&gt; rankclick(row, column, cell, event)</span><br><span class="line">      &quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Rank&quot; label=&quot;排名&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Avatar&quot; label=&quot;&quot; width=&quot;100&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-avatar :size=&quot;50&quot; :src=&quot;scope.row.Avatar&quot; /&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;NickName&quot; label=&quot;NickName&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop=&quot;PersonalProfile&quot;</span><br><span class="line">        label=&quot;PersonalProfile&quot;</span><br><span class="line">        width=&quot;700&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;ACNum&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;SubmitNum&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">        v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">        v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">        :page-sizes=&quot;[15, 30, 50]&quot;</span><br><span class="line">        :small=&quot;small&quot;</span><br><span class="line">        :disabled=&quot;disabled&quot;</span><br><span class="line">        :background=&quot;background&quot;</span><br><span class="line">        layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">        :total=&quot;TotalNum&quot;</span><br><span class="line">        @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">        @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 用户排名信息列表</span><br><span class="line">let userrankdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">let carouseldata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">    功能：获取用户的Rank排名</span><br><span class="line">    传入：Json(Page,PageSize)</span><br><span class="line">    传出：Json(ArrayInfo[_id,Rank,Avatar,NickName,PersonalProfile,SubmitNum,ACNum],TotalNum)</span><br><span class="line">*/</span><br><span class="line">function GetUserRank() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/user/rank`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          userrankdata.array = response.data.ArrayInfo;</span><br><span class="line">          TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">          if (currentPage.value == 1) &#123;</span><br><span class="line">            setCarousel(response.data.ArrayInfo);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络似乎出现了问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function setCarousel(Info) &#123;</span><br><span class="line">  let size = Info.length &gt;= 3 ? 3 : Info.length;</span><br><span class="line">  for (var i = 0; i &lt; size; i++) &#123;</span><br><span class="line">    let info = &#123;</span><br><span class="line">      rank: Info[i].Rank,</span><br><span class="line">      nickname: Info[i].NickName,</span><br><span class="line">      avatar: Info[i].Avatar,</span><br><span class="line">    &#125;;</span><br><span class="line">    carouseldata.array.push(info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function rankclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123; name: &quot;UserHome&quot;, query: &#123; UserId: row._id &#125; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetUserRank();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item h3 &#123;</span><br><span class="line">  color: #475669;</span><br><span class="line">  opacity: 0.75;</span><br><span class="line">  line-height: 200px;</span><br><span class="line">  margin: 0;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item:nth-child(2n) &#123;</span><br><span class="line">  background-color: #99a9bf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-carousel__item:nth-child(2n + 1) &#123;</span><br><span class="line">  background-color: #d3dce6;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现用户管理页面"><a href="#实现用户管理页面" class="headerlink" title="实现用户管理页面"></a>实现用户管理页面</h2><p>实现：主要利用 Element 组件库的 Table 组件和 Pagination 分页组件。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/a4877f15251505fd16a223c5377755d9-0" alt="图片描述"></p><p>将 pages -&gt; Admin -&gt; AdminUser.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;用户&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;usersetdata.array&quot; border style=&quot;width: 100%&quot;&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;NickName&quot; label=&quot;昵称&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;PersonalProfile&quot; label=&quot;个人简介&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;School&quot; label=&quot;学校&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Major&quot; label=&quot;专业&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;JoinTime&quot; label=&quot;加入时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[20, 40, 60]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(20); // 当前页的数量</span><br><span class="line">let totalsize = ref(20);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// --------------------------------------</span><br><span class="line">// 查看用户</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;UserHome&quot;,</span><br><span class="line">    query: &#123; UserId: row._id &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑用户</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;编辑用户&quot;, row._id);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;UserSetting&quot;,</span><br><span class="line">    query: &#123; UserId: row._id &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除用户</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/user`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// -------------------------------------------------------</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">// 用户信息列表</span><br><span class="line">let usersetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetUserSetInfo(m_page, m_pagesize) &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/userlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: m_page,</span><br><span class="line">        PageSize: m_pagesize,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">          usersetdata.array = response.data.ArrayInfo;</span><br><span class="line">          totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetUserSetInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="必要配置"><a href="#必要配置" class="headerlink" title="必要配置"></a>必要配置</h2><p>向 axios 文件夹 index.js 中添加如下代码：</p><p>配置设置请求拦截器（每次请求携带 token）、响应拦截器（对错误状态码进行错误处理）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器，每次请求都会先执行这里的代码</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// 请求头携带localStorage里面的token</span></span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器，每次响应都会先执行这里的代码</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 对响应错误做点什么</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// 检测到未登录或登录信息过期</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;暂无权限！请查看是否登录！&quot;</span>);</span><br><span class="line">      <span class="comment">// 将用户进行退出（删除Token）</span></span><br><span class="line">      store.<span class="title function_">commit</span>(<span class="string">&quot;Logout&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="comment">// 参数有误</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;请求参数有误！&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> == <span class="number">500</span>) &#123;</span><br><span class="line">      <span class="comment">// 服务器出错</span></span><br><span class="line">      <span class="comment">// 进行提示</span></span><br><span class="line">      <span class="title class_">ErrorMessage</span>(<span class="string">&quot;服务器出错啦！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"><span class="comment">// 发送错误消息</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ErrorMessage</span> = (<span class="params">msg</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessage</span>(&#123;</span><br><span class="line">    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">message</span>: msg,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>向 store 文件夹中 mutations 配置项添加如下函数：</p><p>Login 函数：将 userinfo 的数据保存在 state 中，主要用于登录时，保存后端返回的数据。</p><p>SaveUserInfo 函数：将 userinfo 的数据保存在 state 中，主要用于使用 token 登录时，保存后端返回的数据。</p><p>Logout 函数：当退出登录时，需要重置 state 的数据以及清除浏览器存储中的 token。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Login</span>(state,userinfo)&#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, userinfo.<span class="property">Token</span>)</span><br><span class="line">    state.<span class="property">UserId</span> = userinfo.<span class="property">_id</span></span><br><span class="line">    state.<span class="property">NickName</span> = userinfo.<span class="property">NickName</span></span><br><span class="line">    state.<span class="property">Avatar</span> = userinfo.<span class="property">Avatar</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = userinfo.<span class="property">CommentLikes</span></span><br><span class="line">    state.<span class="property">Solves</span> = userinfo.<span class="property">Solves</span></span><br><span class="line">    state.<span class="property">Authority</span> = userinfo.<span class="property">Authority</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>(state.<span class="property">Authority</span>==<span class="number">5</span>)</span><br><span class="line">        state.<span class="property">IsAdmin</span>=<span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title class_">SaveUserInfo</span>(state,userinfo)&#123;</span><br><span class="line">    state.<span class="property">UserId</span> = userinfo.<span class="property">_id</span></span><br><span class="line">    state.<span class="property">NickName</span> = userinfo.<span class="property">NickName</span></span><br><span class="line">    state.<span class="property">Avatar</span> = userinfo.<span class="property">Avatar</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = userinfo.<span class="property">CommentLikes</span></span><br><span class="line">    state.<span class="property">Solves</span> = userinfo.<span class="property">Solves</span></span><br><span class="line">    state.<span class="property">Authority</span> = userinfo.<span class="property">Authority</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>(state.<span class="property">Authority</span>==<span class="number">5</span>)</span><br><span class="line">        state.<span class="property">IsAdmin</span>=<span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="title class_">Logout</span>(state)&#123;</span><br><span class="line">    state.<span class="property">UserId</span> = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    state.<span class="property">NickName</span> = <span class="string">&#x27;未登录&#x27;</span></span><br><span class="line">    state.<span class="property">Avatar</span> = <span class="string">&#x27;http://127.0.0.1:8081/image/1&#x27;</span></span><br><span class="line">    state.<span class="property">CommentLikes</span> = []</span><br><span class="line">    state.<span class="property">Solves</span> = []</span><br><span class="line">    state.<span class="property">Authority</span> = <span class="number">1</span></span><br><span class="line">    state.<span class="property">IsLogin</span> = <span class="literal">false</span></span><br><span class="line">    state.<span class="property">IsAdmin</span> = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// 移除浏览器中token</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>向 App.vue 文件中添加如下代码（根据注释添加）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// openlogindialog 函数</span></span><br><span class="line">logindialog.<span class="property">value</span>.<span class="title function_">open</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// openregisterdialog 函数</span></span><br><span class="line">registerdialog.<span class="property">value</span>.<span class="title function_">open</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command == &quot;userhome&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;UserHome&quot;</span>, <span class="attr">query</span>: &#123; <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command == &quot;usersetting&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;UserSetting&quot;</span>, <span class="attr">query</span>: &#123; <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// handleCommand 函数 command = &quot;logout&quot;</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&quot;Logout&quot;</span>);</span><br><span class="line">router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;HomePage&quot;</span> &#125;);</span><br></pre></td></tr></table></figure><p>向 main.js 文件中 createApp 函数前面添加如下代码：</p><p>该代码主要是检测浏览器存储中是否有 token，如果有就向后端发送请求获取用户信息。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取本地用户信息</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&quot;./axios&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"><span class="comment">// 如果获取到Token则进行登录</span></span><br><span class="line"><span class="keyword">if</span> (token) &#123;</span><br><span class="line">  service.<span class="title function_">get</span>(<span class="string">`/api/user/tokenlogin`</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">Result</span> == <span class="string">&quot;Success&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 登录成功</span></span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&quot;SaveUserInfo&quot;</span>, response.<span class="property">data</span>.<span class="property">Info</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 登录失败</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error.<span class="property">data</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>执行如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了用户模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code22.zip</span><br></pre></td></tr></table></figure><h1 id="3-通用模块实现"><a href="#3-通用模块实现" class="headerlink" title="3.通用模块实现"></a>3.通用模块实现</h1><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/833502b96666bcb5041b39741699849f-0" alt="图片描述"></p><h4 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h4><ul><li>评论组件</li><li>Markdown 编辑器组件</li><li>undraw-ui 组件库</li><li>Naive UI 组件库</li></ul><h2 id="实现评论组件"><a href="#实现评论组件" class="headerlink" title="实现评论组件"></a>实现评论组件</h2><p>实现：使用了 undraw-ui 组件库的 Comment 评论组件以及 Naive UI 组件库的 Pagination 分页组件。</p><p>注：评论组件和 Element 组件库的分页组件搭配会出现错误。</p><p>undraw-ui 官网：<a href="https://undraw.gitee.io/undraw-ui/">https://undraw.gitee.io/undraw-ui/</a></p><p>Navie UI 官网： <a href="https://www.naiveui.com/zh-CN/os-theme">https://www.naiveui.com/zh-CN/os-theme</a></p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9c8f7a7b4dc8c1ea06586a812b8c4f8d-0" alt="图片描述"></p><p>将 components -&gt; Comment.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;comment-view&quot;&gt;</span><br><span class="line">    &lt;u-comment</span><br><span class="line">      :config=&quot;config&quot;</span><br><span class="line">      :show-size=&quot;3&quot;</span><br><span class="line">      page</span><br><span class="line">      @submit=&quot;submit&quot;</span><br><span class="line">      @like=&quot;like&quot;</span><br><span class="line">      @remove=&quot;remove&quot;</span><br><span class="line">      @report=&quot;report&quot;</span><br><span class="line">      @reply-page=&quot;replyPage&quot;</span><br><span class="line">    &gt;&lt;/u-comment&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;n-pagination</span><br><span class="line">      v-model:page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :item-count=&quot;TotalNum&quot;</span><br><span class="line">      show-size-picker</span><br><span class="line">      :page-sizes=&quot;pageSizes&quot;</span><br><span class="line">      @update:page=&quot;handlepage&quot;</span><br><span class="line">      @update:page-size=&quot;handlpagesize&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; NPagination &#125; from &quot;naive-ui&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  UToast,</span><br><span class="line">  ConfigApi,</span><br><span class="line">  CommentApi,</span><br><span class="line">  ReplyPageParam,</span><br><span class="line">  CommentSubmitParam,</span><br><span class="line">  ReplyApi,</span><br><span class="line">&#125; from &quot;undraw-ui&quot;;</span><br><span class="line">// 下载表情包资源emoji.zip https://gitee.com/undraw/undraw-ui/releases</span><br><span class="line">// static文件放在public下,引入emoji.ts文件可以移动到自定义位置</span><br><span class="line">import emoji from &quot;../../public/emoji&quot;;</span><br><span class="line">// 父亲ID（讨论ID或者题解ID）</span><br><span class="line">const props = defineProps([&quot;ParentId&quot;, &quot;ArticleType&quot;]);</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const currentPage = ref(1); // 当前页数</span><br><span class="line">const pageSize = ref(5); // 当前页的数量</span><br><span class="line">const TotalNum = ref(0); // 总数</span><br><span class="line">const pageSizes = [</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;5 每页&quot;,</span><br><span class="line">    value: 5,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;10 每页&quot;,</span><br><span class="line">    value: 10,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    label: &quot;15 每页&quot;,</span><br><span class="line">    value: 15,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">// 获取父评论信息</span><br><span class="line">function getCommentInfo(ParentId: string) &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Type: &quot;Father&quot;,</span><br><span class="line">        ParentId: ParentId,</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">        SonNum: 5,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        TotalNum.value = response.data.TotalNum;</span><br><span class="line">        setCommentInfo(response.data.ArryInfo);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 本人的信息 id，name，头像，点赞的</span><br><span class="line">const config = reactive&lt;ConfigApi&gt;(&#123;</span><br><span class="line">  user: &#123;</span><br><span class="line">    id: store.state.UserId,</span><br><span class="line">    username: store.state.NickName,</span><br><span class="line">    avatar: store.state.Avatar,</span><br><span class="line">    // 评论id数组 建议:存储方式用户id和文章id和评论id组成关系,根据用户id和文章id来获取对应点赞评论id,然后加入到数组中返回</span><br><span class="line">    likeIds: store.state.CommentLikes,</span><br><span class="line">  &#125;,</span><br><span class="line">  emoji: emoji,</span><br><span class="line">  comments: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function setCommentInfo(Info) &#123;</span><br><span class="line">  // 将原数组清空</span><br><span class="line">  config.comments = [];</span><br><span class="line">  // 循环获取父评论</span><br><span class="line">  for (var i in Info) &#123;</span><br><span class="line">    let fatherinfo = Info[i];</span><br><span class="line">    // 获取父评论</span><br><span class="line">    let Father: CommentApi = &#123;</span><br><span class="line">      id: String(fatherinfo[&quot;_id&quot;]),</span><br><span class="line">      parentId: fatherinfo[&quot;ParentId&quot;],</span><br><span class="line">      uid: String(fatherinfo[&quot;User&quot;][0][&quot;_id&quot;]),</span><br><span class="line">      address: &quot;&quot;,</span><br><span class="line">      content: fatherinfo[&quot;Content&quot;],</span><br><span class="line">      likes: fatherinfo[&quot;Likes&quot;],</span><br><span class="line">      createTime: fatherinfo[&quot;CreateTime&quot;],</span><br><span class="line">      user: &#123;</span><br><span class="line">        username: fatherinfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">        avatar: fatherinfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">        level: 0,</span><br><span class="line">        homeLink: &quot;&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">      reply: null,</span><br><span class="line">    &#125;;</span><br><span class="line">    // 判断是否有子评论</span><br><span class="line">    if (fatherinfo[&quot;Child_Total&quot;] &gt; 0) &#123;</span><br><span class="line">      let Son: ReplyApi = &#123;</span><br><span class="line">        total: fatherinfo[&quot;Child_Total&quot;],</span><br><span class="line">        list: [],</span><br><span class="line">      &#125;;</span><br><span class="line">      // 循环获取子评论</span><br><span class="line">      for (var j in fatherinfo[&quot;Child_Comments&quot;]) &#123;</span><br><span class="line">        let soninfo = fatherinfo[&quot;Child_Comments&quot;][j];</span><br><span class="line">        let info = &#123;</span><br><span class="line">          id: soninfo[&quot;_id&quot;],</span><br><span class="line">          parentId: String(fatherinfo[&quot;ParentId&quot;]),</span><br><span class="line">          uid: String(soninfo[&quot;User&quot;][0][&quot;_id&quot;]),</span><br><span class="line">          address: &quot;&quot;,</span><br><span class="line">          content: soninfo[&quot;Content&quot;],</span><br><span class="line">          likes: soninfo[&quot;Likes&quot;],</span><br><span class="line">          createTime: soninfo[&quot;CreateTime&quot;],</span><br><span class="line">          user: &#123;</span><br><span class="line">            username: soninfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">            avatar: soninfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">            level: 0,</span><br><span class="line">            homeLink: &quot;&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">        Son.list.push(info);</span><br><span class="line">      &#125;</span><br><span class="line">      Father.reply = Son;</span><br><span class="line">    &#125;</span><br><span class="line">    config.comments.push(Father);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提交评论事件</span><br><span class="line">const submit = (&#123; content, parentId, files, finish &#125;: CommentSubmitParam) =&gt; &#123;</span><br><span class="line">  if (Number(config.user.id) == 0) &#123;</span><br><span class="line">    pointmessage.value = &quot;请先登录！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&quot;提交评论: &quot; + content, parentId, files);</span><br><span class="line">  let info = &#123;&#125;;</span><br><span class="line">  if (parentId == null) &#123;</span><br><span class="line">    // 父评论</span><br><span class="line">    info = &#123;</span><br><span class="line">      Type: &quot;Father&quot;,</span><br><span class="line">      ArticleType: props.ArticleType,</span><br><span class="line">      ArticleId: props.ParentId,</span><br><span class="line">      ParentId: props.ParentId,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: config.user.id,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    // 子评论</span><br><span class="line">    info = &#123;</span><br><span class="line">      Type: &quot;Son&quot;,</span><br><span class="line">      ArticleType: props.ArticleType,</span><br><span class="line">      ArticleId: props.ParentId,</span><br><span class="line">      ParentId: parentId,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: config.user.id,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Type:Father,ParentId:props.ParentId,</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/comment/insert`, &#123;</span><br><span class="line">      Info: info,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line"></span><br><span class="line">        let comment: CommentApi = &#123;</span><br><span class="line">          id: String(response.data._id),</span><br><span class="line">          parentId: parentId,</span><br><span class="line">          uid: config.user.id,</span><br><span class="line">          address: &quot;&quot;,</span><br><span class="line">          content: content,</span><br><span class="line">          likes: 0,</span><br><span class="line">          createTime: response.data.CreateTime,</span><br><span class="line">          contentImg: &quot;&quot;,</span><br><span class="line">          user: &#123;</span><br><span class="line">            username: config.user.username,</span><br><span class="line">            avatar: config.user.avatar,</span><br><span class="line">            level: 0,</span><br><span class="line">            homeLink: ``,</span><br><span class="line">          &#125;,</span><br><span class="line">          reply: null,</span><br><span class="line">        &#125;;</span><br><span class="line">        finish(comment);</span><br><span class="line">        UToast(&#123; message: &quot;评论成功!&quot;, type: &quot;info&quot; &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 删除评论</span><br><span class="line">const remove = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ArticleId: props.ParentId,</span><br><span class="line">        CommentId: id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        finish();</span><br><span class="line">        alert(`删除成功: $&#123;id&#125;`);</span><br><span class="line">        router.go(0);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//举报用户</span><br><span class="line">const report = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  console.log(id);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    finish();</span><br><span class="line">    alert(`举报成功: $&#123;id&#125;`);</span><br><span class="line">  &#125;, 200);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 点赞按钮事件 TOOD:暂时不能做，因为涉及到删除评论时，用户的数据也要删除</span><br><span class="line">const like = (id: number, finish: () =&gt; void) =&gt; &#123;</span><br><span class="line">  console.log(id);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    finish();</span><br><span class="line">  &#125;, 200);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//子评论回复分页</span><br><span class="line">const replyPage = (&#123; parentId, pageNum, pageSize, finish &#125;: ReplyPageParam) =&gt; &#123;</span><br><span class="line">  let childcommentinfo = reactive(&#123; array: [] &#125;);</span><br><span class="line">  let childcommentnum = ref(0);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Type: &quot;Son&quot;,</span><br><span class="line">        ParentId: parentId,</span><br><span class="line">        Page: pageNum,</span><br><span class="line">        PageSize: pageSize,</span><br><span class="line">        Skip: (pageNum - 1) * pageSize,</span><br><span class="line">        Limit: pageSize,</span><br><span class="line">        SonNum: 5,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        childcommentinfo.array = response.data.Child_Comments;</span><br><span class="line">        childcommentnum.value = response.data.Child_Total;</span><br><span class="line">        let tmp: ReplyApi = &#123;</span><br><span class="line">          total: childcommentnum.value,</span><br><span class="line">          list: [],</span><br><span class="line">        &#125;;</span><br><span class="line">        for (var tmpindex in childcommentinfo.array) &#123;</span><br><span class="line">          let tmpinfo = childcommentinfo.array[tmpindex];</span><br><span class="line">          let info = &#123;</span><br><span class="line">            id: tmpinfo[&quot;_id&quot;],</span><br><span class="line">            parentId: String(parentId),</span><br><span class="line">            uid: tmpinfo[&quot;User&quot;][0][&quot;_id&quot;],</span><br><span class="line">            address: &quot;&quot;,</span><br><span class="line">            content: tmpinfo[&quot;Content&quot;],</span><br><span class="line">            likes: tmpinfo[&quot;Likes&quot;],</span><br><span class="line">            createTime: tmpinfo[&quot;CreateTime&quot;],</span><br><span class="line">            user: &#123;</span><br><span class="line">              username: tmpinfo[&quot;User&quot;][0][&quot;NickName&quot;],</span><br><span class="line">              avatar: tmpinfo[&quot;User&quot;][0][&quot;Avatar&quot;],</span><br><span class="line">              level: 0,</span><br><span class="line">              homeLink: &quot;&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;;</span><br><span class="line">          tmp.list.push(info);</span><br><span class="line">        &#125;</span><br><span class="line">        finish(tmp);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(&quot;回复分页&quot;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 处理页数发生改变</span><br><span class="line">function handlepage(page: number) &#123;</span><br><span class="line">  console.log(&quot;handlenext&quot;, page);</span><br><span class="line">  currentPage.value = page;</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 处理每页数量发送改变</span><br><span class="line">function handlpagesize(pagesize: number) &#123;</span><br><span class="line">  console.log(&quot;handlpagesize&quot;, pagesize);</span><br><span class="line">  pageSize.value = pagesize;</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 调用函数</span><br><span class="line">  getCommentInfo(props.ParentId);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.comment-view &#123;</span><br><span class="line">  margin-top: 2rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc ul &#123;</span><br><span class="line">  list-style: none !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc ul,</span><br><span class="line">.vp-doc ol &#123;</span><br><span class="line">  padding-left: 0 !important;</span><br><span class="line">  margin: 0 !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.vp-doc li + li &#123;</span><br><span class="line">  margin-top: 0px !important;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现-Markdown-编辑器组件"><a href="#实现-Markdown-编辑器组件" class="headerlink" title="实现 Markdown 编辑器组件"></a>实现 Markdown 编辑器组件</h2><p>实现：使用了 Markdown 编辑器组件，并且添加了提示信息插件、emoji 插件、Katex 插件、快速复制代码插件，下面代码就是重新封装 v-md-editor 组件将工具栏添加更多选项。</p><p>官网：<a href="http://ckang1229.gitee.io/vue-markdown-editor/zh/">http://ckang1229.gitee.io/vue-markdown-editor/zh/</a></p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/123d8a731a333ebbd2723b8e4bce3474-0" alt="图片描述"></p><p>将 components -&gt; MarkDownEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;v-md-editor</span><br><span class="line">      v-model=&quot;content&quot;</span><br><span class="line">      height=&quot;500px&quot;</span><br><span class="line">      left-toolbar=&quot;undo redo clear | h bold italic strikethrough quote | tip emoji | ul ol table hr | link image code | save &quot;</span><br><span class="line">    &gt;&lt;/v-md-editor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">function GetContent() &#123;</span><br><span class="line">  return content.value;</span><br><span class="line">&#125;</span><br><span class="line">function SetContent(value) &#123;</span><br><span class="line">  content.value = value;</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetContent,</span><br><span class="line">  SetContent,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现评论管理页面"><a href="#实现评论管理页面" class="headerlink" title="实现评论管理页面"></a>实现评论管理页面</h2><p>实现：使用 Element 组件库的 Table 表格组件并使用树形数据的功能将评论用树形展示。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/8a2c0aa76640e8c432f4cb20444d1fff-0" alt="图片描述"></p><p>将 pages -&gt; Admin -&gt; AdminComment.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;评论&lt;/h1&gt;</span><br><span class="line">  &lt;el-table</span><br><span class="line">    :data=&quot;TableData&quot;</span><br><span class="line">    style=&quot;width: 100%; margin-bottom: 20px&quot;</span><br><span class="line">    row-key=&quot;id&quot;</span><br><span class="line">    border</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;content&quot; label=&quot;内容&quot; sortable /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;createtime&quot; label=&quot;创建时间&quot; sortable /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 15, 20]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// 评论接口</span><br><span class="line">interface Comment &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  parentid: number;</span><br><span class="line">  parenttype: string;</span><br><span class="line">  content: string;</span><br><span class="line">  createtime: string;</span><br><span class="line">  hasChildren?: boolean;</span><br><span class="line">  children?: Comment[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let TableData: Comment[] = reactive([]);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/commentlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        SetInfo(response.data.ArrayInfo);</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置数据</span><br><span class="line">function SetInfo(ServerInfo) &#123;</span><br><span class="line">  // 设置数据为空</span><br><span class="line">  TableData = [];</span><br><span class="line">  console.log(&quot;serverinfo&quot;, ServerInfo);</span><br><span class="line">  for (var i in ServerInfo) &#123;</span><br><span class="line">    let Info = ServerInfo[i];</span><br><span class="line">    let fatherinfo: Comment = &#123;</span><br><span class="line">      id: Info[&quot;_id&quot;],</span><br><span class="line">      parentid: Info[&quot;ParentId&quot;],</span><br><span class="line">      parenttype: Info[&quot;ParentType&quot;],</span><br><span class="line">      content: Info[&quot;Content&quot;],</span><br><span class="line">      createtime: Info[&quot;CreateTime&quot;],</span><br><span class="line">      children: [],</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    for (var j in Info[&quot;Child_Comments&quot;]) &#123;</span><br><span class="line">      let SonInfo = Info[&quot;Child_Comments&quot;][j];</span><br><span class="line">      let soninfo: Comment = &#123;</span><br><span class="line">        id: SonInfo[&quot;_id&quot;],</span><br><span class="line">        parentid: Info[&quot;ParentId&quot;],</span><br><span class="line">        parenttype: Info[&quot;ParentType&quot;],</span><br><span class="line">        content: SonInfo[&quot;Content&quot;],</span><br><span class="line">        createtime: SonInfo[&quot;CreateTime&quot;],</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      fatherinfo.children?.push(soninfo);</span><br><span class="line">    &#125;</span><br><span class="line">    TableData.push(fatherinfo);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/comment`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ArticleId: row.parentid,</span><br><span class="line">        CommentId: row.id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实验总结-2"><a href="#实验总结-2" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验使用 undraw-ui 组件库、Naive UI 组件库、实现了评论组件，使用 v-md-editor 组件，使用 Element 组件库的 Table 组件实现评论的树形展示。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code23.zip</span><br></pre></td></tr></table></figure><h1 id="4-公告模块实现"><a href="#4-公告模块实现" class="headerlink" title="4.公告模块实现"></a>4.公告模块实现</h1><h2 id="实验介绍-3"><a href="#实验介绍-3" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f6b9811c721066bb2c533d9cc1ed1b24-0" alt="图片描述"></p><h4 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现公告模块</li><li>Element 组件库 Card 组件</li><li>Markdown 文本的预览组件</li></ul><h2 id="实现公告列表组件"><a href="#实现公告列表组件" class="headerlink" title="实现公告列表组件"></a>实现公告列表组件</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/6f73dc909ae5b35579a1a20b8c69e5a8-0" alt="图片描述"></p><p>将 components -&gt; HomePage -&gt; AnnouncementList.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;announcementcard&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-icon size=&quot;40&quot;&gt;&lt;ChatDotSquare /&gt;&lt;/el-icon&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;el-row&gt;</span><br><span class="line">          &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">            &lt;router-link</span><br><span class="line">              :to=&quot;&#123;</span><br><span class="line">                name: &#x27;Announcement&#x27;,</span><br><span class="line">                query: &#123; AnnouncementId: data._id &#125;,</span><br><span class="line">              &#125;&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">          &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">        &lt;el-row&gt;</span><br><span class="line">          &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">            &#123;&#123; data.CreateTime &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">          &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[5, 10, 15]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(5); // 当前页的数量</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcementlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求Announcement成功&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          serverdata.array = response.data.ArrayInfo;</span><br><span class="line">          TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 获取信息</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#announcementcard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现首页"><a href="#实现首页" class="headerlink" title="实现首页"></a>实现首页</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2144999c7125736a47006873ff7edf06-0" alt="图片描述"></p><p>将 Pages -&gt; HomePage.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">      &lt;div class=&quot;card-header&quot;&gt;</span><br><span class="line">        &lt;span id=&quot;homepagetitle&quot;&gt;欢迎来到XDOJ&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;AnnouncementList&gt;&lt;/AnnouncementList&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import AnnouncementList from &quot;../components/HomePage/AnnouncementList.vue&quot;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#homepagetitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 30px;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card-header &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现公告页面"><a href="#实现公告页面" class="headerlink" title="实现公告页面"></a>实现公告页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5f318e6259dc32f0e5d847ebc2f9ff74-0" alt="图片描述"></p><p>将 Pages -&gt; Announcement.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt; &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;Comment</span><br><span class="line">          :ParentId=&quot;$route.query.AnnouncementId&quot;</span><br><span class="line">          ArticleType=&quot;Announcement&quot;</span><br><span class="line">        &gt;&lt;/Comment&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt; &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const announcementid = ref(0);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const createtime = ref(&quot;&quot;);</span><br><span class="line">const updatetime = ref(&quot;&quot;);</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcement`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: announcementid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;请求失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  createtime.value = data.CreateTime;</span><br><span class="line">  updatetime.value = data.UpdateTime;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  announcementid.value = route.query.AnnouncementId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现公告编辑页面"><a href="#实现公告编辑页面" class="headerlink" title="实现公告编辑页面"></a>实现公告编辑页面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/68a7b85018970e96d35fcbe779ec040b-0" alt="图片描述"></p><p>将 Pages -&gt; Editor -&gt; AnnouncementEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;公告编辑器&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-input</span><br><span class="line">      v-model=&quot;title&quot;</span><br><span class="line">      placeholder=&quot;请输入标题！&quot;</span><br><span class="line">      maxlength=&quot;50&quot;</span><br><span class="line">      show-word-limit</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h4&gt;Tip:重要等级1-5，等级越高越靠前&lt;/h4&gt;</span><br><span class="line">    &lt;el-input-number v-model=&quot;level&quot; :min=&quot;1&quot; :max=&quot;5&quot; /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const announcementid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const level = ref(1);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  console.log(&quot;InsertArticle&quot;);</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (level.value &lt; 1 || level.value &gt; 5) &#123;</span><br><span class="line">    pointmessage.value = &quot;Level范围1~5！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/announcement/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      Level: level.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (level.value &lt; 1 || level.value &gt; 5) &#123;</span><br><span class="line">    pointmessage.value = &quot;Level范围1~5！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/announcement/update`, &#123;</span><br><span class="line">      AnnouncementId: announcementid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      Level: level.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcement/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: announcementid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  level.value = data.Level;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  announcementid.value = route.query.AnnouncementId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现公告管理页面"><a href="#实现公告管理页面" class="headerlink" title="实现公告管理页面"></a>实现公告管理页面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2c21a86b92da59f81ebae335d48559b2-0" alt="图片描述"></p><p>将 Pages -&gt; Admin -&gt; AdminAnnouncement.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;公告&lt;/h1&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;AddAnnouncement&quot;&gt;添加公告&lt;/el-button&gt;</span><br><span class="line">  &lt;el-table :data=&quot;serverdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 增加公告</span><br><span class="line">function AddAnnouncement() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;AnnouncementEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      AnnouncementId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查看公告</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Announcement&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      AnnouncementId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑公告</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;AnnouncementEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      AnnouncementId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除公告</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/announcement`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        AnnouncementId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/announcementlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><p>执行如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-3"><a href="#实验总结-3" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了公告模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code24.zip</span><br></pre></td></tr></table></figure><h1 id="5-讨论模块实现"><a href="#5-讨论模块实现" class="headerlink" title="5.讨论模块实现"></a>5.讨论模块实现</h1><h2 id="实验介绍-4"><a href="#实验介绍-4" class="headerlink" title="实验介绍"></a>实验介绍</h2><h2 id="实现讨论列表页面"><a href="#实现讨论列表页面" class="headerlink" title="实现讨论列表页面"></a>实现讨论列表页面</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p><p>实现效果如下所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/714bddce0f2d2a896be228fe300bc5d7-0" alt="图片描述"></p><p>将 Pages -&gt; DiscussList.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;讨论&lt;/h1&gt;</span><br><span class="line">          &lt;div id=&quot;addbutton&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              @click=&quot;AddDiscussion&quot;</span><br><span class="line">              type=&quot;success&quot;</span><br><span class="line">              v-show=&quot;addbuttonshow&quot;</span><br><span class="line">              :disabled=&quot;addbuttondisabled&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              写讨论</span><br><span class="line">            &lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;discusscard&quot;&gt;</span><br><span class="line">          &lt;el-row&gt;</span><br><span class="line">            &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">              &lt;el-avatar :size=&quot;70&quot; :src=&quot;data.User[0].Avatar&quot; /&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;22&quot;&gt;</span><br><span class="line">              &lt;router-link</span><br><span class="line">                :to=&quot;&#123; name: &#x27;Discuss&#x27;, query: &#123; DiscussId: data._id &#125; &#125;&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;span id=&quot;discusstitle&quot;&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &#123;&#123; data.User[0].NickName &#125;&#125; &amp;nbsp &#123;&#123; data.CreateTime &#125;&#125; &amp;nbsp</span><br><span class="line">              &lt;div class=&quot;iconright&quot;&gt;</span><br><span class="line">                &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125; &amp;nbsp</span><br><span class="line">                &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 15, 25]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;TotalNum&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter, useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const addbuttonshow = ref(true);</span><br><span class="line">const addbuttondisabled = ref(false);</span><br><span class="line">// 上层id 默认为 0</span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ParentId: &quot;0&quot;,</span><br><span class="line">  UserId: &quot;0&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 请求服务器获取信息</span><br><span class="line">function GetServerInfo(ParentId, UserId) &#123;</span><br><span class="line">  if (ParentId != null) &#123;</span><br><span class="line">    searchinfo.ParentId = ParentId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.ParentId = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.UserId = 0;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discusslist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.ArrayInfo == null) serverdata.array = [];</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function cellclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Discuss&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function AddDiscussion() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      ParentId: searchinfo.ParentId,</span><br><span class="line">      DiscussId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 路由更改前</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  GetServerInfo(to.query.ParentId, to.query.UserId);</span><br><span class="line">  if (to.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo(route.query.ParentId, route.query.UserId);</span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) addbuttondisabled.value = true;</span><br><span class="line"></span><br><span class="line">  if (route.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#addbutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">.iconright &#123;</span><br><span class="line">  float: right;</span><br><span class="line">&#125;</span><br><span class="line">#discusstitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line">#discusscard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现讨论页面"><a href="#实现讨论页面" class="headerlink" title="实现讨论页面"></a>实现讨论页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d99b7724353e2eb3c6dab52f1340b619-0" alt="图片描述"></p><p>将 Pages -&gt; Discuss.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;top&quot;&gt;</span><br><span class="line">      &lt;el-avatar :size=&quot;50&quot; :src=&quot;useravatar&quot; /&gt; &amp;nbsp</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;twobutton&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;UpdateArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;修改&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;DeleteArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;删除&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Comment</span><br><span class="line">            :ParentId=&quot;$route.query.DiscussId&quot;</span><br><span class="line">            ArticleType=&quot;Discuss&quot;</span><br><span class="line">          &gt;&lt;/Comment&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const discussid = ref(0);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line">const useravatar = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line">const buttonshow = ref(false);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  usernickname.value = data.User[0].NickName;</span><br><span class="line">  useravatar.value = data.User[0].Avatar;</span><br><span class="line">  authorid.value = data.User[0]._id;</span><br><span class="line">  if (Number(data.User[0]._id) == Number(store.state.UserId))</span><br><span class="line">    buttonshow.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      DiscussId: discussid.value,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function DeleteArticle() &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: authorid.value,</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        router.go(-1);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  discussid.value = route.query.DiscussId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#twobutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">#top &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现讨论编辑页面"><a href="#实现讨论编辑页面" class="headerlink" title="实现讨论编辑页面"></a>实现讨论编辑页面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9d7965e880ef66bca89e2ebc88229464-0" alt="图片描述"></p><p>将 Pages -&gt; Editor -&gt; DiscussEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;讨论编辑器&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;common-layout&quot;&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-header&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;title&quot;</span><br><span class="line">            placeholder=&quot;请输入标题！&quot;</span><br><span class="line">            maxlength=&quot;50&quot;</span><br><span class="line">            show-word-limit</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-header&gt;</span><br><span class="line">        &lt;el-main&gt;</span><br><span class="line">          &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">        &lt;/el-main&gt;</span><br><span class="line">        &lt;el-footer&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-footer&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const parentid = ref(0);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const discussid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  console.log(&quot;InsertArticle&quot;);</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/discuss/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      ParentId: parentid.value,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/discuss/update`, &#123;</span><br><span class="line">      UserId: authorid.value,</span><br><span class="line">      DiscussId: discussid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discuss/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        DiscussId: discussid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  authorid.value = data.UserId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  discussid.value = route.query.DiscussId;</span><br><span class="line">  parentid.value = route.query.ParentId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现讨论管理页面"><a href="#实现讨论管理页面" class="headerlink" title="实现讨论管理页面"></a>实现讨论管理页面</h2><p>实现效果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/57706cdf0c0fb6c715efe156257879ac-0" alt="图片描述"></p><p>将 Pages -&gt; Admin -&gt; AdminDiscuss.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;讨论&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;discussdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;User[0].NickName&quot; label=&quot;作者&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let discussdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 查看讨论</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Discuss&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑讨论</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;点击编辑&quot;, row);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      DiscussId: row._id,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除讨论</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/discuss`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row.UserId,</span><br><span class="line">        DiscussId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetDiscussInfo(m_page, m_pagesize) &#123;</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/discusslist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: m_page,</span><br><span class="line">        PageSize: m_pagesize,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        discussdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  console.log(m_page, m_pagesize);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 获取信息</span><br><span class="line">  GetDiscussInfo(currentPage.value, pageSize.value);</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="运行-2"><a href="#运行-2" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;discuss&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;DiscussList&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-4"><a href="#实验总结-4" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了讨论模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code25.zip</span><br></pre></td></tr></table></figure><h1 id="6-题解模块实现"><a href="#6-题解模块实现" class="headerlink" title="6.题解模块实现"></a>6.题解模块实现</h1><h2 id="实验介绍-5"><a href="#实验介绍-5" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/a530089c45c2d996f9413b8ec2e59d72-0" alt="图片描述"></p><h4 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现题解模块</li><li>Element 组件库 Card 组件</li><li>Markdown 文本的预览组件</li></ul><h2 id="实现题解列表页面"><a href="#实现题解列表页面" class="headerlink" title="实现题解列表页面"></a>实现题解列表页面</h2><p>实现：使用 Element 组件库的 Card 卡片组件作为容器，使用 v-for 循环创建卡片组件形成列表并使用 Element 组件库的 Pagination 分页组件进行分页。</p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/611ca3700ba2bf41246e1386e58f5acb-0" alt="图片描述"></p><p>将 Pages -&gt; SolutionList.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;题解&lt;/h1&gt;</span><br><span class="line">          &lt;div id=&quot;addbutton&quot;&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              type=&quot;success&quot;</span><br><span class="line">              @click=&quot;AddSolution&quot;</span><br><span class="line">              v-show=&quot;addbuttonshow&quot;</span><br><span class="line">              :disabled=&quot;addbuttondisabled&quot;</span><br><span class="line">            &gt;</span><br><span class="line">              写题解</span><br><span class="line">            &lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-card v-for=&quot;(data, index) in serverdata.array&quot; id=&quot;solutioncard&quot;&gt;</span><br><span class="line">          &lt;el-row&gt;</span><br><span class="line">            &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">              &lt;el-avatar :size=&quot;70&quot; :src=&quot;data.User[0].Avatar&quot; /&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;22&quot;&gt;</span><br><span class="line">              &lt;router-link</span><br><span class="line">                :to=&quot;&#123; name: &#x27;Solution&#x27;, query: &#123; SolutionId: data._id &#125; &#125;&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;span id=&quot;solutiontitle&quot;&gt;&#123;&#123; data.Title &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &lt;br /&gt;</span><br><span class="line">              &#123;&#123; data.User[0].NickName &#125;&#125; &amp;nbsp &#123;&#123; data.CreateTime &#125;&#125; &amp;nbsp</span><br><span class="line">              &lt;div class=&quot;iconright&quot;&gt;</span><br><span class="line">                &lt;el-icon&gt;&lt;View /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Views &#125;&#125; &amp;nbsp</span><br><span class="line">                &lt;el-icon&gt;&lt;ChatRound /&gt;&lt;/el-icon&gt; &amp;nbsp &#123;&#123; data.Comments &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 15, 25]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;TotalNum&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; useRouter, useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const addbuttonshow = ref(true);</span><br><span class="line">const addbuttondisabled = ref(false);</span><br><span class="line"></span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ParentId: &quot;0&quot;,</span><br><span class="line">  UserId: &quot;0&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 请求服务器获取信息</span><br><span class="line">function GetServerInfo(ParentId, UserId) &#123;</span><br><span class="line">  if (ParentId != null) &#123;</span><br><span class="line">    searchinfo.ParentId = ParentId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.ParentId = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchinfo.UserId = 0;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solutionlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.ArrayInfo == null) serverdata.array = [];</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function cellclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Solution&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function AddSolution() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Insert&quot;,</span><br><span class="line">      ParentId: searchinfo.ParentId,</span><br><span class="line">      SolutionId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo(searchinfo.ParentId, searchinfo.UserId);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 路由更改前</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  GetServerInfo(to.query.ParentId, to.query.UserId);</span><br><span class="line">  if (to.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo(route.query.ParentId, route.query.UserId);</span><br><span class="line"></span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) addbuttondisabled.value = true;</span><br><span class="line"></span><br><span class="line">  if (route.query.UserId != null) addbuttonshow.value = false;</span><br><span class="line">  else addbuttonshow.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#addbutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">.iconright &#123;</span><br><span class="line">  float: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#solutiontitle &#123;</span><br><span class="line">  font-family: Arial;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line">#solutioncard &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题解页面"><a href="#实现题解页面" class="headerlink" title="实现题解页面"></a>实现题解页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/219f60549af04f995b808264350028e9-0" alt="图片描述"></p><p>将 Pages -&gt; Solution.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;top&quot;&gt;</span><br><span class="line">      &lt;el-avatar :size=&quot;50&quot; :src=&quot;useravatar&quot; /&gt; &amp;nbsp</span><br><span class="line">      &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;twobutton&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;UpdateArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;修改&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;DeleteArticle&quot; v-show=&quot;buttonshow&quot;</span><br><span class="line">            &gt;删除&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Comment</span><br><span class="line">            :ParentId=&quot;$route.query.SolutionId&quot;</span><br><span class="line">            ArticleType=&quot;Solution&quot;</span><br><span class="line">          &gt;&lt;/Comment&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Comment from &quot;../components/Comment.vue&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const solutionid = ref(0);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const content = ref(&quot;&quot;);</span><br><span class="line">const views = ref(0);</span><br><span class="line">const comments = ref(0);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line">const useravatar = ref(&quot;&quot;);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const buttonshow = ref(false);</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  content.value = data.Content;</span><br><span class="line">  views.value = data.Views;</span><br><span class="line">  comments.value = data.Comments;</span><br><span class="line">  usernickname.value = data.User[0].NickName;</span><br><span class="line">  useravatar.value = data.User[0].Avatar;</span><br><span class="line">  authorid.value = data.User[0]._id;</span><br><span class="line">  if (Number(data.User[0]._id) == Number(store.state.UserId))</span><br><span class="line">    buttonshow.value = true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      SolutionId: solutionid.value,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function DeleteArticle() &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: authorid.value,</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">        router.go(-1);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  solutionid.value = route.query.SolutionId;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#twobutton &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">&#125;</span><br><span class="line">#top &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题解编辑页面"><a href="#实现题解编辑页面" class="headerlink" title="实现题解编辑页面"></a>实现题解编辑页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/471fa6a89f67d74b5e60c3280dc1d862-0" alt="图片描述"></p><p>将 Pages -&gt; Editor -&gt; SolutionEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;h1&gt;题解编辑器&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;common-layout&quot;&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        &lt;el-header&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;title&quot;</span><br><span class="line">            placeholder=&quot;请输入标题！&quot;</span><br><span class="line">            maxlength=&quot;50&quot;</span><br><span class="line">            show-word-limit</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-header&gt;</span><br><span class="line">        &lt;el-main&gt;</span><br><span class="line">          &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">        &lt;/el-main&gt;</span><br><span class="line">        &lt;el-footer&gt;</span><br><span class="line">          &lt;el-switch v-model=&quot;ispublic&quot; /&gt;是否公开</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Affirm&quot;&gt;发布&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;Cancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-footer&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">const parentid = ref(0);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line">const solutionid = ref(&quot;&quot;);</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const ispublic = ref(true);</span><br><span class="line">const authorid = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 提示消息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line">// 确认提交</span><br><span class="line">function Affirm() &#123;</span><br><span class="line">  if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    InsertArticle();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    UpdateArticle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function InsertArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/solution/insert`, &#123;</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      ParentId: parentid.value,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      Public: ispublic.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;发布成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;发布失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;发布失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function UpdateArticle() &#123;</span><br><span class="line">  let content = markdowneditor.value.GetContent();</span><br><span class="line">  if (title.value.length &lt; 1) &#123;</span><br><span class="line">    pointmessage.value = &quot;请输入标题！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (content.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;内容不能少于两个字！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  service</span><br><span class="line">    .post(`/api/solution/update`, &#123;</span><br><span class="line">      UserId: authorid.value,</span><br><span class="line">      SolutionId: solutionid.value,</span><br><span class="line">      Title: title.value,</span><br><span class="line">      Content: content,</span><br><span class="line">      Public: ispublic.value,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;修改成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;修改失败，系统可能出现问题！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">        pointmessage.value = &quot;修改失败，网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 取消提交</span><br><span class="line">function Cancel() &#123;</span><br><span class="line">  router.go(-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solution/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SolutionId: solutionid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          SetServerData(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = &quot;获取信息失败！&quot;;</span><br><span class="line">          ErrorMessage();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        pointmessage.value = &quot;网络可能出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetServerData(data) &#123;</span><br><span class="line">  title.value = data.Title;</span><br><span class="line">  markdowneditor.value.SetContent(data.Content);</span><br><span class="line">  ispublic.value = data.Public;</span><br><span class="line">  authorid.value = data.UserId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  edittype.value = route.query.EditType;</span><br><span class="line">  solutionid.value = route.query.SolutionId;</span><br><span class="line">  parentid.value = route.query.ParentId;</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题解管理页面"><a href="#实现题解管理页面" class="headerlink" title="实现题解管理页面"></a>实现题解管理页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/8583a7efe3c8c76d82abfa69134f3ff4-0" alt="图片描述"></p><p>将 Pages -&gt; Admin -&gt; AdminSolution.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;题解&lt;/h1&gt;</span><br><span class="line">  &lt;el-table :data=&quot;serverdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;标题&quot; width=&quot;400&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Comments&quot; label=&quot;评论数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Views&quot; label=&quot;浏览量&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;CreateTime&quot; label=&quot;创建时间&quot; width=&quot;200&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;TotalNum&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let serverdata = reactive(&#123; array: [] &#125;);</span><br><span class="line">let TotalNum = ref(0);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(10); // 当前页的数量</span><br><span class="line"></span><br><span class="line">// 查看题解</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Solution&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑题解</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionEditor&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      EditType: &quot;Update&quot;,</span><br><span class="line">      SolutionId: row._id,</span><br><span class="line">      ParentId: &quot;0&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除题解</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/solution`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        UserId: row.UserId,</span><br><span class="line">        SolutionId: row._id,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/solutionlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        serverdata.array = response.data.ArrayInfo;</span><br><span class="line">        TotalNum.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetDiscussInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetServerInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="运行-3"><a href="#运行-3" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;solution&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;SolutionList&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-5"><a href="#实验总结-5" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了题解模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code26.zip</span><br></pre></td></tr></table></figure><h1 id="7-状态记录模块实现"><a href="#7-状态记录模块实现" class="headerlink" title="7.状态记录模块实现"></a>7.状态记录模块实现</h1><h2 id="实验介绍-6"><a href="#实验介绍-6" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2724b2bc2ac710122815662e7e15db87-0" alt="图片描述"></p><h4 id="知识点-5"><a href="#知识点-5" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现状态记录模块</li><li>Monaco Editor</li></ul><h2 id="实现代码查看器组件"><a href="#实现代码查看器组件" class="headerlink" title="实现代码查看器组件"></a>实现代码查看器组件</h2><p>实现：Monaco Editor 是微软开源的基于 VS Code 的代码编辑器，运行在浏览器环境中，代码查看器通过将 Monaco Editor 代码编辑器组件设置为只读来实现。</p><p>官网：<a href="https://microsoft.github.io/monaco-editor/">https://microsoft.github.io/monaco-editor/</a></p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/11946e032bcc39f00d825df88ff64b14-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt; MonacoView.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;codeEdit&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted, toRaw &#125; from &quot;vue&quot;;</span><br><span class="line">import * as monaco from &quot;monaco-editor&quot;;</span><br><span class="line">const editor = ref(null);</span><br><span class="line">// 初始化代码编辑器</span><br><span class="line">function initEditor() &#123;</span><br><span class="line">  editor.value = monaco.editor.create(document.getElementById(&quot;codeEdit&quot;), &#123;</span><br><span class="line">    value: &quot;&quot;, // 代码</span><br><span class="line">    language: &quot;cpp&quot;, // 语言</span><br><span class="line">    theme: &quot;vs&quot;, // 主题</span><br><span class="line">    selectOnLineNumbers: true, //显示行号</span><br><span class="line">    foldingStrategy: &quot;indentation&quot;, // 代码可分小段折叠</span><br><span class="line">    tabSize: 4, // tab 缩进长度</span><br><span class="line">    roundedSelection: false,</span><br><span class="line">    readOnly: true, // 只读</span><br><span class="line">    cursorStyle: &quot;line&quot;, //光标样式</span><br><span class="line">    automaticLayout: true, //自动布局</span><br><span class="line">    glyphMargin: true, //字形边缘</span><br><span class="line">    useTabStops: false,</span><br><span class="line">    fontSize: 15, //字体大小</span><br><span class="line">    autoIndent: true, //自动布局</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function SetData(Info) &#123;</span><br><span class="line">  let language = &quot;cpp&quot;;</span><br><span class="line">  if (Info.Language == &quot;C++&quot;) &#123;</span><br><span class="line">    language = &quot;cpp&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;C&quot;) &#123;</span><br><span class="line">    language = &quot;c&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;Go&quot;) &#123;</span><br><span class="line">    language = &quot;go&quot;;</span><br><span class="line">  &#125; else if (Info.Language == &quot;Java&quot;) &#123;</span><br><span class="line">    language = &quot;java&quot;;</span><br><span class="line">  &#125; else if (Info.language == &quot;Python2&quot; || Info.language == &quot;Python3&quot;) &#123;</span><br><span class="line">    language = &quot;python&quot;;</span><br><span class="line">  &#125; else if (Info.language == &quot;JavaScript&quot;) &#123;</span><br><span class="line">    language = &quot;javascript&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  let code = Info.Code;</span><br><span class="line">  const curmodel = toRaw(editor.value).getModel();</span><br><span class="line">  const model = monaco.editor.createModel(code, language);</span><br><span class="line">  toRaw(editor.value).setModel(model);</span><br><span class="line">  curmodel.dispose();</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initEditor();</span><br><span class="line">&#125;);</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetData,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#codeEdit &#123;</span><br><span class="line">  width: 700px;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.wrapper &#123;</span><br><span class="line">  width: 700px;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现状态记录对话框"><a href="#实现状态记录对话框" class="headerlink" title="实现状态记录对话框"></a>实现状态记录对话框</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/1eaf50e5a81393fccf6689776c11a6df-0" alt="图片描述"></p><p>将 components -&gt; Dialog -&gt; ViewStatus.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog</span><br><span class="line">    id=&quot;dialog&quot;</span><br><span class="line">    v-model=&quot;dialogVisible&quot;</span><br><span class="line">    title=&quot;测评详情&quot;</span><br><span class="line">    :before-close=&quot;closedialog&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-alert</span><br><span class="line">      :title=&quot;alerttitle&quot;</span><br><span class="line">      :type=&quot;alerttype&quot;</span><br><span class="line">      :description=&quot;alertdescription&quot;</span><br><span class="line">      :closable=&quot;false&quot;</span><br><span class="line">      show-icon</span><br><span class="line">      :show-close=&quot;false&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-alert&gt;</span><br><span class="line">    &lt;MonacoView ref=&quot;monacoview&quot;&gt;&lt;/MonacoView&gt;</span><br><span class="line">    &lt;el-collapse&gt;</span><br><span class="line">      &lt;el-collapse-item</span><br><span class="line">        v-for=&quot;(info, index) in testinfo.array&quot;</span><br><span class="line">        :key=&quot;index&quot;</span><br><span class="line">        :class=&quot;ChangeStatusToCollapseClass(info.Status)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #title&gt;</span><br><span class="line">          #Test&#123;&#123; index + 1 &#125;&#125; &#123;&#123; ChangeStatusToTitle(info.Status) &#125;&#125;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          标准输入：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.StandardInput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          标准输出：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.StandardOutput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          你的输出：</span><br><span class="line">          &lt;el-input</span><br><span class="line">            v-model=&quot;info.PersonalOutput&quot;</span><br><span class="line">            type=&quot;textarea&quot;</span><br><span class="line">            placeholder=&quot;Please input&quot;</span><br><span class="line">            :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          运行时间：&#123;&#123; info.RunTime &#125;&#125; 运行内存：&#123;&#123; info.RunMemory &#125;&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-collapse-item&gt;</span><br><span class="line">    &lt;/el-collapse&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import MonacoView from &quot;../Problem/MonacoView.vue&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">// 是否打开</span><br><span class="line">const dialogVisible = ref(false);</span><br><span class="line"></span><br><span class="line">const monacoview = ref();</span><br><span class="line"></span><br><span class="line">const alerttype = ref(&quot;success&quot;);</span><br><span class="line">const alerttitle = ref(&quot;&quot;);</span><br><span class="line">const alertdescription = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const testinfo = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function opendialog(submitid) &#123;</span><br><span class="line">  dialogVisible.value = true;</span><br><span class="line">  console.log(&quot;submitid&quot;, submitid);</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/statusrecord`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SubmitId: submitid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(response.data);</span><br><span class="line">        SetDataInfo(response.data);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetDataInfo(statusinfo) &#123;</span><br><span class="line">  testinfo.array = statusinfo.TestInfo;</span><br><span class="line">  alertdescription.value = statusinfo.ComplierInfo;</span><br><span class="line">  // 显示代码</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Code: statusinfo.Code,</span><br><span class="line">    Language: statusinfo.Language,</span><br><span class="line">  &#125;;</span><br><span class="line">  monacoview.value.SetData(Info);</span><br><span class="line">  if (statusinfo.Status == 2) alerttype.value = &quot;success&quot;;</span><br><span class="line">  else if (statusinfo.Status == 3) alerttype.value = &quot;error&quot;;</span><br><span class="line">  else alerttype.value = &quot;warning&quot;;</span><br><span class="line"></span><br><span class="line">  alerttitle.value = ChangeStatusToTitle(statusinfo.Status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function closedialog() &#123;</span><br><span class="line">  alerttitle.value = &quot;&quot;;</span><br><span class="line">  alertdescription.value = &quot;&quot;;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Code: &quot;&quot;,</span><br><span class="line">    Language: &quot;C++&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">  monacoview.value.SetData(Info);</span><br><span class="line">  testinfo.array = [];</span><br><span class="line"></span><br><span class="line">  dialogVisible.value = false;</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToTitle(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;Pending &amp; Judging&quot;;</span><br><span class="line">  else if (status == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (status == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (status == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (status == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (status == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToCollapseClass(status) &#123;</span><br><span class="line">  if (status == 2) return &quot;el-collapse-success&quot;;</span><br><span class="line">  else if (status == 3) return &quot;el-collapse-error&quot;;</span><br><span class="line">  else return &quot;el-collapse-warning&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  opendialog,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#dialog &#123;</span><br><span class="line">  width: 800px;</span><br><span class="line">&#125;</span><br><span class="line">.el-button--text &#123;</span><br><span class="line">  margin-right: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.el-select &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.el-input &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.dialog-footer button:first-child &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-error &#123;</span><br><span class="line">  background-color: #fef0f0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-success &#123;</span><br><span class="line">  background-color: #f0f9eb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.el-collapse-warning &#123;</span><br><span class="line">  background-color: #fdf6ec;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现状态记录搜索组件"><a href="#实现状态记录搜索组件" class="headerlink" title="实现状态记录搜索组件"></a>实现状态记录搜索组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f9b9b29652f197d56fd52effcc2bac0b-0" alt="图片描述"></p><p>将 components -&gt; StatusRecord -&gt; StatusRecordSearch.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-4&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;10&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;searchproblemid&quot;</span><br><span class="line">          placeholder=&quot;题目ID&quot;</span><br><span class="line">          maxlength=&quot;5&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchproblemtitle&quot; placeholder=&quot;题目标题&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">        状态:&amp;nbsp&amp;nbsp</span><br><span class="line">        &lt;el-select v-model=&quot;searchstatue&quot; class=&quot;m-2&quot; placeholder=&quot;状态&quot;&gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in statusoptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;5&quot;&gt;</span><br><span class="line">        语言:&amp;nbsp&amp;nbsp</span><br><span class="line">        &lt;el-select v-model=&quot;searchlanguage&quot; class=&quot;m-2&quot; placeholder=&quot;语言&quot;&gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in languageoptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; :icon=&quot;Search&quot; @click=&quot;searchbutton&quot;</span><br><span class="line">          &gt;搜索&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; Search &#125; from &quot;@element-plus/icons-vue&quot;;</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const searchproblemid = ref(&quot;&quot;);</span><br><span class="line">const searchproblemtitle = ref(&quot;&quot;);</span><br><span class="line">const searchstatue = ref(&quot;&quot;);</span><br><span class="line">const searchlanguage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const statusoptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">    label: &quot;ALL&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;0&quot;,</span><br><span class="line">    label: &quot;Pending &amp; Judging&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;1&quot;,</span><br><span class="line">    label: &quot;Compile Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;2&quot;,</span><br><span class="line">    label: &quot;Accepted&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;3&quot;,</span><br><span class="line">    label: &quot;Wrong Answer&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;4&quot;,</span><br><span class="line">    label: &quot;Runtime Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;5&quot;,</span><br><span class="line">    label: &quot;Time Limit Exceeded&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;6&quot;,</span><br><span class="line">    label: &quot;Memory Limit Exceeded&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;7&quot;,</span><br><span class="line">    label: &quot;System Error&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">const languageoptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">    label: &quot;ALL&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;C&quot;,</span><br><span class="line">    label: &quot;C&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;C++&quot;,</span><br><span class="line">    label: &quot;C++&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Go&quot;,</span><br><span class="line">    label: &quot;Go&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Java&quot;,</span><br><span class="line">    label: &quot;Java&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Python2&quot;,</span><br><span class="line">    label: &quot;Python2&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;Python3&quot;,</span><br><span class="line">    label: &quot;Python3&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;JavaScript&quot;,</span><br><span class="line">    label: &quot;JavaScript&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">const props = defineProps([&quot;SearchStatusRecordList&quot;]);</span><br><span class="line">function GetSearchInfo() &#123;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    ProblemId: searchproblemid.value,</span><br><span class="line">    ProblemTitle: searchproblemtitle.value,</span><br><span class="line">    Status: searchstatue.value,</span><br><span class="line">    Language: searchlanguage.value,</span><br><span class="line">  &#125;;</span><br><span class="line">  return Info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function searchbutton() &#123;</span><br><span class="line">  props.SearchStatusRecordList();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetSearchInfo,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现状态记录列表页面"><a href="#实现状态记录列表页面" class="headerlink" title="实现状态记录列表页面"></a>实现状态记录列表页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/100fe3ebf0d30a502edf0e0a977068aa-0" alt="图片描述"></p><p>将 Pages -&gt; StatusRecord.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;StatusRecordSearch</span><br><span class="line">        ref=&quot;statusrecordsearch&quot;</span><br><span class="line">        :SearchStatusRecordList=&quot;SearchStatusRecordList&quot;</span><br><span class="line">        v-show=&quot;searchshow&quot;</span><br><span class="line">        id=&quot;statusrecordsearch&quot;</span><br><span class="line">      &gt;&lt;/StatusRecordSearch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data=&quot;statusrecorddata.array&quot;</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">      @cell-click=&quot;</span><br><span class="line">        (row, column, cell, event) =&gt;</span><br><span class="line">          statusrecordclick(row, column, cell, event)</span><br><span class="line">      &quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;_id&quot; label=&quot;ID&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;UserNickName&quot; label=&quot;User&quot; width=&quot;150&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;ProblemTitle&quot; label=&quot;Title&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Status&quot; label=&quot;Status&quot; width=&quot;200&quot;&gt;</span><br><span class="line">        &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-tag</span><br><span class="line">            size=&quot;medium&quot;</span><br><span class="line">            :type=&quot;ChangeStatusToType(scope.row.Status)&quot;</span><br><span class="line">            disable-transitions</span><br><span class="line">            hit</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;&#123; ChangeStatusToTitle(scope.row.Status) &#125;&#125;</span><br><span class="line">          &lt;/el-tag&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Language&quot; label=&quot;语言&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;RunTime&quot; label=&quot;RunTime&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;RunMemory&quot; label=&quot;Memory&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;Length&quot; label=&quot;Length&quot; width=&quot;120&quot; /&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;SubmitTime&quot; label=&quot;SubmitTime&quot; /&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;ViewStatus ref=&quot;viewstatusdialog&quot;&gt;&lt;/ViewStatus&gt;</span><br><span class="line">    &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">        v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">        v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">        :page-sizes=&quot;[15, 20, 30, 40]&quot;</span><br><span class="line">        :small=&quot;small&quot;</span><br><span class="line">        :disabled=&quot;disabled&quot;</span><br><span class="line">        :background=&quot;background&quot;</span><br><span class="line">        layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">        :total=&quot;totalsize&quot;</span><br><span class="line">        @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">        @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRoute, onBeforeRouteUpdate &#125; from &quot;vue-router&quot;;</span><br><span class="line">import ViewStatus from &quot;../components/Dialog/ViewStatus.vue&quot;;</span><br><span class="line">import StatusRecordSearch from &quot;../components/StatusRecord/StatusRecordSearch.vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line"></span><br><span class="line">const route = useRoute();</span><br><span class="line"></span><br><span class="line">const viewstatusdialog = ref();</span><br><span class="line">const statusrecordsearch = ref();</span><br><span class="line">const searchshow = ref(true);</span><br><span class="line"></span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  ProblemId: &quot;&quot;,</span><br><span class="line">  UserId: &quot;&quot;,</span><br><span class="line">  ProblemTitle: &quot;&quot;,</span><br><span class="line">  Status: &quot;&quot;,</span><br><span class="line">  Language: &quot;&quot;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 题目信息列表</span><br><span class="line">let statusrecorddata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetStatusRecordInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/statusrecordlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        statusrecorddata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SearchStatusRecordList() &#123;</span><br><span class="line">  let Info = statusrecordsearch.value.GetSearchInfo();</span><br><span class="line">  searchinfo.ProblemId = Info.ProblemId;</span><br><span class="line">  searchinfo.ProblemTitle = Info.ProblemTitle;</span><br><span class="line">  searchinfo.Status = Info.Status;</span><br><span class="line">  searchinfo.Language = Info.Language;</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;</span><br><span class="line">function ChangeStatusToType(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;info&quot;;</span><br><span class="line">  else if (status == 2) return &quot;success&quot;;</span><br><span class="line">  else if (status == 3) return &quot;error&quot;;</span><br><span class="line">  else return &quot;warning&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function ChangeStatusToTitle(status) &#123;</span><br><span class="line">  if (status == 0) return &quot;Pending&quot;;</span><br><span class="line">  else if (status == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (status == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (status == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (status == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (status == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (status == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">// 点击单元格</span><br><span class="line">function statusrecordclick(row, column, cell, event) &#123;</span><br><span class="line">  viewstatusdialog.value.opendialog(row._id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function InitSearchInfo(ProblemId, UserId) &#123;</span><br><span class="line">  searchinfo.ProblemId = &quot;&quot;;</span><br><span class="line">  searchinfo.ProblemTitle = &quot;&quot;;</span><br><span class="line">  searchinfo.Status = &quot;&quot;;</span><br><span class="line">  searchinfo.UserId = &quot;&quot;;</span><br><span class="line">  searchinfo.Language = &quot;&quot;;</span><br><span class="line">  searchshow.value = true;</span><br><span class="line">  if (ProblemId != null) &#123;</span><br><span class="line">    searchinfo.ProblemId = ProblemId;</span><br><span class="line">    searchshow.value = false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (UserId != null) &#123;</span><br><span class="line">    searchinfo.UserId = UserId;</span><br><span class="line">    searchshow.value = false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 检测组件是否更新</span><br><span class="line">onBeforeRouteUpdate((to) =&gt; &#123;</span><br><span class="line">  InitSearchInfo(to.query.ProblemId, to.query.UserId);</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 组件初始化</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  InitSearchInfo(route.query.ProblemId, route.query.UserId);</span><br><span class="line">  GetStatusRecordInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#statusrecordsearch &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="运行-4"><a href="#运行-4" class="headerlink" title="运行"></a>运行</h2><p>在 App.vue 文件中的 handleCommand 函数添加如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// command == &quot;statusrecord&quot;</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;StatusRecord&quot;</span>,</span><br><span class="line">  <span class="attr">query</span>: &#123;</span><br><span class="line">    <span class="title class_">UserId</span>: store.<span class="property">state</span>.<span class="property">UserId</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-6"><a href="#实验总结-6" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了状态记录模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code27.zip</span><br></pre></td></tr></table></figure><h1 id="8-题目模块实现"><a href="#8-题目模块实现" class="headerlink" title="8.题目模块实现"></a>8.题目模块实现</h1><h2 id="实验介绍-7"><a href="#实验介绍-7" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现的组件和页面如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/8079b1788a0abfa47950693e75b99fb6-0" alt="图片描述"></p><h4 id="知识点-6"><a href="#知识点-6" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现题目模块</li><li>ECharts</li><li>Monaco Editor</li></ul><h2 id="实现代码编辑器组件"><a href="#实现代码编辑器组件" class="headerlink" title="实现代码编辑器组件"></a>实现代码编辑器组件</h2><p>实现：Monaco Editor 是微软开源的基于 VS Code 的代码编辑器，运行在浏览器环境中。直接使用 Monaco Editor 代码编辑器组件即可。代码编辑器实现了自动保存代码功能，当初始化组件时，自动读取浏览器本地存储获取代码并显示，当更换语言时，会自动获取代码进行保存到浏览器本地存储。</p><p>官网：<a href="https://microsoft.github.io/monaco-editor/">https://microsoft.github.io/monaco-editor/</a></p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9c0dd89454b3a346c885e27c595530f6-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt; MonacoEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :offset=&quot;2&quot; :span=&quot;10&quot;&gt;</span><br><span class="line">        语言：</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;language&quot;</span><br><span class="line">          placeholder=&quot;选择语言&quot;</span><br><span class="line">          @change=&quot;handleLanguage&quot;</span><br><span class="line">          ref=&quot;languageselect&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in languageOptions&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :offset=&quot;2&quot; :span=&quot;10&quot;&gt;</span><br><span class="line">        主题：</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;editorTheme&quot;</span><br><span class="line">          placeholder=&quot;设置主题&quot;</span><br><span class="line">          @change=&quot;handleTheme&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;Visual Studio Dark&quot; value=&quot;vs-dark&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;Visual Studio&quot; value=&quot;vs&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;High Contrast Dark&quot; value=&quot;hc-black&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;&lt;div id=&quot;codeEdit&quot;&gt;&lt;/div&gt;&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted, toRaw, onUnmounted &#125; from &quot;vue&quot;;</span><br><span class="line">import * as monaco from &quot;monaco-editor&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line"></span><br><span class="line">const props = defineProps([&quot;ProblemId&quot;]);</span><br><span class="line">const editor = ref(null);</span><br><span class="line">const languageselect = ref(null);</span><br><span class="line"></span><br><span class="line">const language = ref(&quot;cpp&quot;);</span><br><span class="line">const editorTheme = ref(&quot;vs&quot;);</span><br><span class="line">const fontSize = ref(15);</span><br><span class="line"></span><br><span class="line">const languageOptions = [</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;c&quot;,</span><br><span class="line">    label: &quot;C&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;cpp&quot;,</span><br><span class="line">    label: &quot;C++&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;go&quot;,</span><br><span class="line">    label: &quot;Go&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;java&quot;,</span><br><span class="line">    label: &quot;Java&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;python2&quot;,</span><br><span class="line">    label: &quot;Python2&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;python3&quot;,</span><br><span class="line">    label: &quot;Python3&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;javascript&quot;,</span><br><span class="line">    label: &quot;JavaScript&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">// 初始化代码编辑器</span><br><span class="line">function initEditor() &#123;</span><br><span class="line">  editor.value = monaco.editor.create(document.getElementById(&quot;codeEdit&quot;), &#123;</span><br><span class="line">    value: &quot;&quot;, // 代码</span><br><span class="line">    language: language.value, // 语言</span><br><span class="line">    theme: editorTheme.value, // 主题</span><br><span class="line">    selectOnLineNumbers: true, //显示行号</span><br><span class="line">    foldingStrategy: &quot;indentation&quot;, // 代码可分小段折叠</span><br><span class="line">    tabSize: 4, // tab 缩进长度</span><br><span class="line">    roundedSelection: false,</span><br><span class="line">    readOnly: false, // 只读</span><br><span class="line">    cursorStyle: &quot;line&quot;, //光标样式</span><br><span class="line">    automaticLayout: true, //自动布局</span><br><span class="line">    glyphMargin: true, //字形边缘</span><br><span class="line">    useTabStops: false,</span><br><span class="line">    fontSize: fontSize.value, //字体大小</span><br><span class="line">    autoIndent: true, //自动布局</span><br><span class="line">    quickSuggestionsDelay: 100, //代码提示延时</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 更换主题</span><br><span class="line">const handleTheme = () =&gt; &#123;</span><br><span class="line">  monaco.editor.setTheme(editorTheme.value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const handleLanguage = (item) =&gt; &#123;</span><br><span class="line">  // 保存代码</span><br><span class="line">  SetLocalStorage(GetCode(), languageselect.value.selected.value);</span><br><span class="line">  language.value = item;</span><br><span class="line">  SetCodeAndLanguage();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function GetCode() &#123;</span><br><span class="line">  return toRaw(editor.value).getValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function GetLanguage() &#123;</span><br><span class="line">  if (language.value == &quot;c&quot;) &#123;</span><br><span class="line">    return &quot;C&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;cpp&quot;) &#123;</span><br><span class="line">    return &quot;C++&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;go&quot;) &#123;</span><br><span class="line">    return &quot;Go&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;java&quot;) &#123;</span><br><span class="line">    return &quot;Java&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;python2&quot;) &#123;</span><br><span class="line">    return &quot;Python2&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;python3&quot;) &#123;</span><br><span class="line">    return &quot;Python3&quot;;</span><br><span class="line">  &#125; else if (language.value == &quot;javascript&quot;) &#123;</span><br><span class="line">    return &quot;JavaScript&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取浏览器本地存储</span><br><span class="line">function GetLocalStorage() &#123;</span><br><span class="line">  // 1-1234-cpp</span><br><span class="line">  var getstr =</span><br><span class="line">    String(props.ProblemId) +</span><br><span class="line">    &quot;-&quot; +</span><br><span class="line">    String(store.state.UserId) +</span><br><span class="line">    &quot;-&quot; +</span><br><span class="line">    language.value;</span><br><span class="line">  console.log(&quot;getstr&quot;, getstr);</span><br><span class="line">  if (localStorage.getItem(getstr) == null) return &quot;&quot;;</span><br><span class="line">  else return localStorage.getItem(getstr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 设置浏览器本地存储</span><br><span class="line">function SetLocalStorage(code, language) &#123;</span><br><span class="line">  var setstr =</span><br><span class="line">    String(props.ProblemId) + &quot;-&quot; + String(store.state.UserId) + &quot;-&quot; + language;</span><br><span class="line">  console.log(&quot;setstr&quot;, setstr);</span><br><span class="line">  localStorage.setItem(setstr, code);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 通过浏览器本地存储设置代码和语言</span><br><span class="line">function SetCodeAndLanguage() &#123;</span><br><span class="line">  let code = GetLocalStorage();</span><br><span class="line">  const curmodel = toRaw(editor.value).getModel();</span><br><span class="line">  const model = monaco.editor.createModel(code, language.value);</span><br><span class="line">  toRaw(editor.value).setModel(model);</span><br><span class="line">  curmodel.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  initEditor();</span><br><span class="line">  if (store.state.UserId != 0) &#123;</span><br><span class="line">    SetCodeAndLanguage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  SetLocalStorage(GetCode(), language.value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetLanguage,</span><br><span class="line">  GetCode,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#codeEdit &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">  height: 450px;</span><br><span class="line">&#125;</span><br><span class="line">.wrapper &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">  height: 550px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题目搜索组件"><a href="#实现题目搜索组件" class="headerlink" title="实现题目搜索组件"></a>实现题目搜索组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/dd5290596d1f334fbf19143d30699155-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt; ProblemSearch.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-4&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;10&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchid&quot; placeholder=&quot;ID&quot; maxlength=&quot;5&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;7&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;searchtitle&quot; placeholder=&quot;标题&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;11&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;selectvalue&quot;</span><br><span class="line">          multiple</span><br><span class="line">          placeholder=&quot;标签&quot;</span><br><span class="line">          style=&quot;width: 480px&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option</span><br><span class="line">            v-for=&quot;item in options.array&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;2&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; :icon=&quot;Search&quot; @click=&quot;searchbutton&quot;</span><br><span class="line">          &gt;搜索&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import &#123; Search &#125; from &quot;@element-plus/icons-vue&quot;;</span><br><span class="line"></span><br><span class="line">// 保存搜索的标签内容</span><br><span class="line">const options = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const selectvalue = ref([]);</span><br><span class="line"></span><br><span class="line">const searchid = ref(&quot;&quot;);</span><br><span class="line">const searchtitle = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const props = defineProps([&quot;SearchProblemSet&quot;]);</span><br><span class="line">function GetSearchInfo() &#123;</span><br><span class="line">  let Info = &#123;</span><br><span class="line">    Id: searchid.value,</span><br><span class="line">    Title: searchtitle.value,</span><br><span class="line">    Tags: selectvalue.value,</span><br><span class="line">  &#125;;</span><br><span class="line">  return Info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function searchbutton() &#123;</span><br><span class="line">  props.SearchProblemSet();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function SetTags() &#123;</span><br><span class="line">  options.array.splice(0);</span><br><span class="line">  for (var i = 0; i &lt; store.state.ProblemTags.length; i++) &#123;</span><br><span class="line">    options.array.push(&#123;</span><br><span class="line">      value: store.state.ProblemTags[i],</span><br><span class="line">      label: store.state.ProblemTags[i],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  SetTags();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetSearchInfo,</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现获取题目标签组件"><a href="#实现获取题目标签组件" class="headerlink" title="实现获取题目标签组件"></a>实现获取题目标签组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/439cc75e3fc9c9594fe6d6a0fff7d40d-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt; ProblemTags.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-tag</span><br><span class="line">    v-for=&quot;tag in dynamicTags&quot;</span><br><span class="line">    :key=&quot;tag&quot;</span><br><span class="line">    class=&quot;mx-1&quot;</span><br><span class="line">    closable</span><br><span class="line">    :disable-transitions=&quot;false&quot;</span><br><span class="line">    @close=&quot;handleClose(tag)&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; tag &#125;&#125;</span><br><span class="line">  &lt;/el-tag&gt;</span><br><span class="line">  &lt;el-input</span><br><span class="line">    v-if=&quot;inputVisible&quot;</span><br><span class="line">    ref=&quot;InputRef&quot;</span><br><span class="line">    v-model=&quot;inputValue&quot;</span><br><span class="line">    class=&quot;ml-1 w-20&quot;</span><br><span class="line">    size=&quot;small&quot;</span><br><span class="line">    @keyup.enter=&quot;handleInputConfirm&quot;</span><br><span class="line">    @blur=&quot;handleInputConfirm&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;el-button v-else class=&quot;button-new-tag ml-1&quot; size=&quot;small&quot; @click=&quot;showInput&quot;&gt;</span><br><span class="line">    + New Tag</span><br><span class="line">  &lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; nextTick, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; ElInput &#125; from &quot;element-plus&quot;;</span><br><span class="line"></span><br><span class="line">const inputValue = ref(&quot;&quot;);</span><br><span class="line">const dynamicTags = ref([&quot;默认&quot;]);</span><br><span class="line">const inputVisible = ref(false);</span><br><span class="line">const InputRef = ref&lt;InstanceType&lt;typeof ElInput&gt;&gt;();</span><br><span class="line"></span><br><span class="line">// --------------接口---------------------</span><br><span class="line">// 返回数据</span><br><span class="line">function GetTagsData() &#123;</span><br><span class="line">  return dynamicTags.value;</span><br><span class="line">&#125;</span><br><span class="line">// 设置数据</span><br><span class="line">function SetTagsData(Info: Array&lt;string&gt;) &#123;</span><br><span class="line">  dynamicTags.value.splice(0);</span><br><span class="line">  for (var i = 0; i &lt; Info.length; i++) &#123;</span><br><span class="line">    dynamicTags.value.push(Info[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// -----------------------------------</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  GetTagsData,</span><br><span class="line">  SetTagsData,</span><br><span class="line">&#125;);</span><br><span class="line">const handleClose = (tag: string) =&gt; &#123;</span><br><span class="line">  dynamicTags.value.splice(dynamicTags.value.indexOf(tag), 1);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const showInput = () =&gt; &#123;</span><br><span class="line">  inputVisible.value = true;</span><br><span class="line">  nextTick(() =&gt; &#123;</span><br><span class="line">    InputRef.value!.input!.focus();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const handleInputConfirm = () =&gt; &#123;</span><br><span class="line">  if (inputValue.value) &#123;</span><br><span class="line">    dynamicTags.value.push(inputValue.value);</span><br><span class="line">  &#125;</span><br><span class="line">  inputVisible.value = false;</span><br><span class="line">  inputValue.value = &quot;&quot;;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现展示标签组件"><a href="#实现展示标签组件" class="headerlink" title="实现展示标签组件"></a>实现展示标签组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/706a8b7430566a1fe758d008e8923b32-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt;TagsButton.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;标签：&lt;/h2&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">      v-for=&quot;(name, index) in store.state.ProblemTags&quot;</span><br><span class="line">      :key=&quot;index&quot;</span><br><span class="line">      type=&quot;default&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#123; name &#125;&#125;&lt;/el-button</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现获取题目测试用例组件"><a href="#实现获取题目测试用例组件" class="headerlink" title="实现获取题目测试用例组件"></a>实现获取题目测试用例组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/6368157a10db80a7aa3601ff621390e4-0" alt="图片描述"></p><p>将 components -&gt; Problem -&gt; TestDataForm.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-form</span><br><span class="line">    ref=&quot;formRef&quot;</span><br><span class="line">    :model=&quot;dynamicValidateForm&quot;</span><br><span class="line">    label-width=&quot;120px&quot;</span><br><span class="line">    class=&quot;demo-dynamic&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-form-item</span><br><span class="line">      v-for=&quot;(domain, index) in dynamicValidateForm.domains&quot;</span><br><span class="line">      :key=&quot;domain.key&quot;</span><br><span class="line">      :label=&quot;&#x27;测试点&#x27; + (index + 1)&quot;</span><br><span class="line">      :prop=&quot;&#x27;domains.&#x27; + index + &#x27;.value&#x27;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-input</span><br><span class="line">        v-model=&quot;domain.value&quot;</span><br><span class="line">        type=&quot;textarea&quot;</span><br><span class="line">        :autosize=&quot;&#123; minRows: 1, maxRows: 10 &#125;&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;el-button class=&quot;mt-2&quot; @click.prevent=&quot;removeDomain(domain)&quot;</span><br><span class="line">        &gt;删除&lt;/el-button</span><br><span class="line">      &gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button @click=&quot;addDomain&quot;&gt;增加新测试点&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const dynamicValidateForm = reactive&lt;&#123;</span><br><span class="line">  domains: DomainItem[];</span><br><span class="line">&#125;&gt;(&#123;</span><br><span class="line">  domains: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">interface DomainItem &#123;</span><br><span class="line">  key: number;</span><br><span class="line">  value: string;</span><br><span class="line">&#125;</span><br><span class="line">// --------------接口-----------------------</span><br><span class="line">// 提交表单</span><br><span class="line">const submitForm = () =&gt; &#123;</span><br><span class="line">  return dynamicValidateForm.domains;</span><br><span class="line">&#125;;</span><br><span class="line">// 设置表单</span><br><span class="line">function setForm(info: Array&lt;string&gt;) &#123;</span><br><span class="line">  for (var i = 0; i &lt; info.length; i++) &#123;</span><br><span class="line">    dynamicValidateForm.domains.push(&#123;</span><br><span class="line">      key: Date.now(),</span><br><span class="line">      value: info[i],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  submitForm,</span><br><span class="line">  setForm,</span><br><span class="line">&#125;);</span><br><span class="line">// -------------------------------------------</span><br><span class="line">// 删除某一项</span><br><span class="line">const removeDomain = (item: DomainItem) =&gt; &#123;</span><br><span class="line">  const index = dynamicValidateForm.domains.indexOf(item);</span><br><span class="line">  if (index !== -1) &#123;</span><br><span class="line">    dynamicValidateForm.domains.splice(index, 1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 添加某一项</span><br><span class="line">const addDomain = () =&gt; &#123;</span><br><span class="line">  dynamicValidateForm.domains.push(&#123;</span><br><span class="line">    key: Date.now(),</span><br><span class="line">    value: &quot;&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现饼图组件"><a href="#实现饼图组件" class="headerlink" title="实现饼图组件"></a>实现饼图组件</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/32ffecad8cfb2093c8d19a616ef5930d-0" alt="图片描述"></p><p>将 components -&gt; Chart -&gt; PieChart.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;center&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/center&gt;</span><br><span class="line">  &lt;div id=&quot;main&quot; style=&quot;height:300px;width:300px&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, reactive, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line">let myChart;</span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line">const options = reactive(&#123;</span><br><span class="line">  tooltip: &#123;&#125;,</span><br><span class="line">  legend: &#123;</span><br><span class="line">    orient: &quot;horizontal&quot;,</span><br><span class="line">    x: &quot;center&quot;,</span><br><span class="line">    y: &quot;bottom&quot;,</span><br><span class="line">    data: [&quot;CE&quot;, &quot;AC&quot;, &quot;WA&quot;, &quot;RE&quot;, &quot;TLE&quot;, &quot;MLE&quot;, &quot;SE&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: &quot;pie&quot;,</span><br><span class="line">      stillShowZeroSum: false,</span><br><span class="line">      data: [</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;CE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;AC&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;WA&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;RE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;TLE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;MLE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          value: 0,</span><br><span class="line">          name: &quot;SE&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      radius: &quot;45%&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function SetDataInfo(info) &#123;</span><br><span class="line">  options.series[0].data[0].value = info.CENum;</span><br><span class="line">  options.series[0].data[1].value = info.ACNum;</span><br><span class="line">  options.series[0].data[2].value = info.WANum;</span><br><span class="line">  options.series[0].data[3].value = info.RENum;</span><br><span class="line">  options.series[0].data[4].value = info.TLENum;</span><br><span class="line">  options.series[0].data[5].value = info.MLENum;</span><br><span class="line">  options.series[0].data[6].value = info.SENum;</span><br><span class="line">  title.value = info.Title;</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function EchartsInit() &#123;</span><br><span class="line">  // 基于准备好的dom，初始化echarts实例</span><br><span class="line">  myChart = echarts.init(document.getElementById(&quot;main&quot;));</span><br><span class="line">  // 绘制图表</span><br><span class="line">  myChart.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  SetDataInfo,</span><br><span class="line">&#125;);</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  EchartsInit();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题库页面"><a href="#实现题库页面" class="headerlink" title="实现题库页面"></a>实现题库页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9ff9de73972367ab1793d8962c6ddb32-0" alt="图片描述"></p><p>将 Pages -&gt; ProblemList.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row&gt;</span><br><span class="line">    &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;ProblemSearch</span><br><span class="line">          ref=&quot;problemsearch&quot;</span><br><span class="line">          :SearchProblemSet=&quot;SearchProblemSet&quot;</span><br><span class="line">          id=&quot;problemsearch&quot;</span><br><span class="line">        &gt;&lt;/ProblemSearch&gt;</span><br><span class="line">        &lt;el-table</span><br><span class="line">          :data=&quot;problemsetdata.array&quot;</span><br><span class="line">          @cell-click=&quot;problemclick&quot;</span><br><span class="line">          @cell-mouse-enter=&quot;changepiechart&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-table-column label=&quot;状态&quot; width=&quot;100&quot;&gt;</span><br><span class="line">            &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;el-icon v-if=&quot;store.state.Solves.includes(scope.row.ProblemId)&quot;&gt;</span><br><span class="line">                &lt;Check /&gt;</span><br><span class="line">              &lt;/el-icon&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;ProblemId&quot; label=&quot;ID&quot; width=&quot;50&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;Title&quot; label=&quot;题目&quot; width=&quot;300&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;Tags&quot; label=&quot;标签&quot; width=&quot;400&quot;&gt;</span><br><span class="line">            &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;el-tag</span><br><span class="line">                v-for=&quot;(name, index) in scope.row.Tags&quot;</span><br><span class="line">                :key=&quot;index&quot;</span><br><span class="line">                disable-transitions</span><br><span class="line">                size=&quot;medium&quot;</span><br><span class="line">                &gt;&#123;&#123; name &#125;&#125;&lt;/el-tag</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;通过次数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;提交次数&quot; width=&quot;100&quot; /&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">            v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">            :page-sizes=&quot;[15, 20, 30, 40]&quot;</span><br><span class="line">            :small=&quot;small&quot;</span><br><span class="line">            :disabled=&quot;disabled&quot;</span><br><span class="line">            :background=&quot;background&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;totalsize&quot;</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;PieChart ref=&quot;piechart&quot;&gt;&lt;/PieChart&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">      &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">        &lt;TagsButton&gt;&lt;/TagsButton&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import PieChart from &quot;../components/Chart/PieChart.vue&quot;;</span><br><span class="line">import ProblemSearch from &quot;../components/Problem/ProblemSearch.vue&quot;;</span><br><span class="line">import TagsButton from &quot;../components/Problem/TagsButton.vue&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line">const piechart = ref();</span><br><span class="line">const problemsearch = ref();</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(15); // 当前页的数量</span><br><span class="line">let totalsize = ref(0);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line">const searchinfo = reactive(&#123;</span><br><span class="line">  Id: &quot;&quot;,</span><br><span class="line">  Title: &quot;&quot;,</span><br><span class="line">  Tags: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 题目信息列表</span><br><span class="line">let problemsetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetProblemSetInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problemlist`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        SearchInfo: JSON.stringify(searchinfo),</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        problemsetdata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// 子组件的搜索按钮调用父组件的方法</span><br><span class="line">function SearchProblemSet() &#123;</span><br><span class="line">  let Info = problemsearch.value.GetSearchInfo();</span><br><span class="line">  searchinfo.Id = Info.Id;</span><br><span class="line">  searchinfo.Title = Info.Title;</span><br><span class="line">  searchinfo.Tags = Info.Tags;</span><br><span class="line"></span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;</span><br><span class="line">// 跳转函数</span><br><span class="line">function problemclick(row, column, cell, event) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Problem&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function changepiechart(row, column, cell, event) &#123;</span><br><span class="line">  let info = &#123;</span><br><span class="line">    CENum: row.CENum,</span><br><span class="line">    ACNum: row.ACNum,</span><br><span class="line">    WANum: row.WANum,</span><br><span class="line">    RENum: row.RENum,</span><br><span class="line">    TLENum: row.TLENum,</span><br><span class="line">    MLENum: row.MLENum,</span><br><span class="line">    SENum: row.SENum,</span><br><span class="line">    Title: row.Title,</span><br><span class="line">  &#125;;</span><br><span class="line">  piechart.value.SetDataInfo(info);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#problemsearch &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题目页面"><a href="#实现题目页面" class="headerlink" title="实现题目页面"></a>实现题目页面</h2><p>实现：通过 v-md-preview 组件实现对 Markdown 文本的预览。</p><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2e13096e3fab21609ec8275662e713f6-0" alt="图片描述"></p><p>将 Pages -&gt; Problem.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123; data.problemid &#125;&#125;.&#123;&#123; data.title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;20&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">          &lt;v-md-preview :text=&quot;data.content&quot;&gt;&lt;/v-md-preview&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div :style=&quot;&#123; boxShadow: `var(--el-box-shadow)` &#125;&quot;&gt;</span><br><span class="line">          &lt;MonacoEditor</span><br><span class="line">            ref=&quot;monacoeditor&quot;</span><br><span class="line">            :ProblemId=&quot;$route.query.ProblemId&quot;</span><br><span class="line">          &gt;&lt;/MonacoEditor&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          @click=&quot;SubmitCode()&quot;</span><br><span class="line">          :disabled=&quot;submitbutton&quot;</span><br><span class="line">          :loading=&quot;submitloading&quot;</span><br><span class="line">          &gt;提交&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;div id=&quot;resultdiv&quot;&gt;</span><br><span class="line">          &lt;h4&gt;代码运行状态： &#123;&#123; ResultMsg() &#125;&#125;&lt;/h4&gt;</span><br><span class="line">          &lt;h4&gt;错误提示： &#123;&#123; reason &#125;&#125;&lt;/h4&gt;</span><br><span class="line">          &lt;h3&gt;Tip：可以通过查看测评记录查看每个测试点详细信息&lt;/h3&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;demo-collapse&quot;&gt;</span><br><span class="line">          &lt;el-collapse v-model=&quot;activeNames&quot; @change=&quot;handleChange&quot;&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;作者&quot; name=&quot;1&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &#123;&#123; data.nickname &#125;&#125;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;时间限制&quot; name=&quot;2&quot;&gt;</span><br><span class="line">              &lt;div&gt;&#123;&#123; data.timelimit &#125;&#125; MS&lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;空间限制&quot; name=&quot;3&quot;&gt;</span><br><span class="line">              &lt;div&gt;&#123;&#123; data.memorylimit &#125;&#125; MB&lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">            &lt;el-collapse-item title=&quot;标签&quot; name=&quot;4&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;el-tag v-for=&quot;(tag, index) in data.tags&quot; :key=&quot;index&quot;&gt;&#123;&#123;</span><br><span class="line">                  tag</span><br><span class="line">                &#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/el-collapse-item&gt;</span><br><span class="line">          &lt;/el-collapse&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickStatusRecord&quot;</span><br><span class="line">          &gt;提交记录&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickSolution&quot;&gt;题解&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;ClickDiscuss&quot;&gt;讨论&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import MonacoEditor from &quot;../components/Problem/MonacoEditor.vue&quot;;</span><br><span class="line">import service from &quot;../axios&quot;;</span><br><span class="line">import &#123; ref, onMounted, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import store from &quot;../store&quot;;</span><br><span class="line">import &#123; useRoute, useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">let submitbutton = ref(false);</span><br><span class="line">let submitloading = ref(false);</span><br><span class="line"></span><br><span class="line">const monacoeditor = ref();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const router = useRouter();</span><br><span class="line">// 创建题目描述，是否显示，获取题目数据</span><br><span class="line">const data = reactive(&#123;</span><br><span class="line">  problemid: &quot;&quot;,</span><br><span class="line">  title: &quot;&quot;,</span><br><span class="line">  content: &quot;&quot;,</span><br><span class="line">  timelimit: 0,</span><br><span class="line">  memorylimit: 0,</span><br><span class="line">  judgenum: 0,</span><br><span class="line">  submitnum: 0,</span><br><span class="line">  acnum: 0,</span><br><span class="line">  nickname: &quot;&quot;,</span><br><span class="line">  tags: [],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">let result = ref(-1);</span><br><span class="line">let reason = ref(&quot;&quot;);</span><br><span class="line">// 请求当前题目详情</span><br><span class="line">function GetProblem() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problem`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: data.problemid,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;请求成功了！！！&quot;, response.data);</span><br><span class="line">          SetDataInfo(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;出错啦！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function SetDataInfo(Info) &#123;</span><br><span class="line">  data.title = Info.Title;</span><br><span class="line">  data.content = Info.Description;</span><br><span class="line">  data.timelimit = Info.TimeLimit;</span><br><span class="line">  data.memorylimit = Info.MemoryLimit;</span><br><span class="line">  data.judgenum = Info.JudgeNum;</span><br><span class="line">  data.submitnum = Info.SubmitNum;</span><br><span class="line">  data.acnum = Info.ACNum;</span><br><span class="line">  data.nickname = Info.UserNickName;</span><br><span class="line">  data.tags = Info.Tags;</span><br><span class="line">&#125;</span><br><span class="line">// 提交代码</span><br><span class="line">function SubmitCode() &#123;</span><br><span class="line">  submitloading.value = true;</span><br><span class="line">  result.value = 0;</span><br><span class="line"></span><br><span class="line">  service</span><br><span class="line">    .post(`/api/problemcode`, &#123;</span><br><span class="line">      ProblemId: data.problemid,</span><br><span class="line">      UserId: store.state.UserId,</span><br><span class="line">      UserNickName: store.state.NickName,</span><br><span class="line">      Code: monacoeditor.value.GetCode(),</span><br><span class="line">      Language: monacoeditor.value.GetLanguage(),</span><br><span class="line">      TimeLimit: data.timelimit,</span><br><span class="line">      MemoryLimit: data.memorylimit,</span><br><span class="line">      JudgeNum: data.judgenum,</span><br><span class="line">      ProblemTitle: data.title,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        submitloading.value = false;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">          result.value = Number(response.data.Status);</span><br><span class="line">          reason.value = response.data.ComplierInfo;</span><br><span class="line">          // 如果第一次AC</span><br><span class="line">          if (response.data.IsFirstAC) &#123;</span><br><span class="line">            store.state.Solves.push(data.problemid);</span><br><span class="line">            console.log(&quot;solves:&quot;, store.state.Solves);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          console.log(&quot;提交失败&quot;, response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交失败了！！！&quot;);</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        submitloading.value = false;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function ResultMsg() &#123;</span><br><span class="line">  if (result.value == -1) return &quot;&quot;;</span><br><span class="line">  else if (result.value == 0) return &quot;Pending&quot;;</span><br><span class="line">  else if (result.value == 1) return &quot;Compile Error&quot;;</span><br><span class="line">  else if (result.value == 2) return &quot;Accepted&quot;;</span><br><span class="line">  else if (result.value == 3) return &quot;Wrong Answer&quot;;</span><br><span class="line">  else if (result.value == 4) return &quot;Runtime Error&quot;;</span><br><span class="line">  else if (result.value == 5) return &quot;Time Limit Exceeded&quot;;</span><br><span class="line">  else if (result.value == 6) return &quot;Memory Limit Exceeded&quot;;</span><br><span class="line">  else if (result.value == 7) return &quot;System Error&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function ClickStatusRecord() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;StatusRecord&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ProblemId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function ClickSolution() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;SolutionList&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ParentId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function ClickDiscuss() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;DiscussList&quot;,</span><br><span class="line">    query: &#123;</span><br><span class="line">      ParentId: route.query.ProblemId,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  data.problemid = route.query.ProblemId;</span><br><span class="line">  GetProblem();</span><br><span class="line">  if (store.state.UserId == &quot;0&quot;) submitbutton.value = true;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.content &#123;</span><br><span class="line">  width: 1200px;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题目编辑页面"><a href="#实现题目编辑页面" class="headerlink" title="实现题目编辑页面"></a>实现题目编辑页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9fc6d9681be47caaa71b38b8b72bc6f1-0" alt="图片描述"></p><p>将 Pages -&gt; Editor -&gt; ProblemEditor.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;</span><br><span class="line">        &lt;h5&gt;标题：&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;title&quot; placeholder=&quot;标题&quot; /&gt;</span><br><span class="line">        &lt;h5&gt;题目描述（可全屏编辑）&lt;/h5&gt;</span><br><span class="line">        &lt;MarkDownEditor ref=&quot;markdowneditor&quot;&gt;&lt;/MarkDownEditor&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">        &lt;h7&gt;输入&lt;/h7&gt;</span><br><span class="line">        &lt;TestDataFrom ref=&quot;intestdatafrom&quot;&gt;&lt;/TestDataFrom&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">        &lt;h7&gt;输出&lt;/h7&gt;</span><br><span class="line">        &lt;TestDataFrom ref=&quot;outtestdatafrom&quot;&gt;&lt;/TestDataFrom&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot;&gt;</span><br><span class="line">        &lt;h5&gt;SPJ文件（如果要启用请设置开关开启）&lt;/h5&gt;</span><br><span class="line">        &lt;el-switch v-model=&quot;isspj&quot; /&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;spjdata&quot;</span><br><span class="line">          placeholder=&quot;spj文件&quot;</span><br><span class="line">          type=&quot;textarea&quot;</span><br><span class="line">          :autosize=&quot;&#123; minRows: 10, maxRows: 30 &#125;&quot;</span><br><span class="line">        /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;时间复杂度：单位MS&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;timelimit&quot; placeholder=&quot;时间复杂度&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;空间复杂度：单位MB&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;memorylimit&quot; placeholder=&quot;空间复杂度&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;标签&lt;/h5&gt;</span><br><span class="line">        &lt;ProblemTags ref=&quot;problemtags&quot;&gt;&lt;/ProblemTags&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h5&gt;作者：&lt;/h5&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;usernickname&quot; placeholder=&quot;作者&quot; disabled /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;Submit()&quot;&gt;提交&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import TestDataFrom from &quot;../../components/Problem/TestDataFrom.vue&quot;;</span><br><span class="line">import ProblemTags from &quot;../../components/Problem/ProblemTags.vue&quot;;</span><br><span class="line">import MarkDownEditor from &quot;../../components/MarkDownEditor.vue&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import &#123; useRouter, useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">const route = useRoute();</span><br><span class="line">const markdowneditor = ref();</span><br><span class="line"></span><br><span class="line">// 组件</span><br><span class="line">const intestdatafrom = ref();</span><br><span class="line">const outtestdatafrom = ref();</span><br><span class="line">const problemtags = ref();</span><br><span class="line">// 提示信息</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">// 传递的信息</span><br><span class="line">const problemid = ref(&quot;&quot;);</span><br><span class="line">const edittype = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const title = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">const spjdata = ref(`#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;fstream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    FILE *f_out = fopen(argv[2], &quot;r&quot;);  // 测试输出</span><br><span class="line">    FILE *f_user = fopen(argv[3], &quot;r&quot;); // 用户输出</span><br><span class="line">    int ret = 0;                        // AC=0, WA=1</span><br><span class="line"></span><br><span class="line">    int a, b;</span><br><span class="line">    // 获取输入输出</span><br><span class="line">    fscanf(f_out, &quot;%d&quot;, &amp;a);</span><br><span class="line">    fscanf(f_user, &quot;%d&quot;, &amp;b);</span><br><span class="line">    // 比较答案</span><br><span class="line">    if (a == b)</span><br><span class="line">        ret = 0;</span><br><span class="line">    else</span><br><span class="line">        ret = 1;</span><br><span class="line"></span><br><span class="line">    fclose(f_out);</span><br><span class="line">    fclose(f_user);</span><br><span class="line"></span><br><span class="line">    return ret; // 返回结果，返回值为0时，答案正确，为1时，答案错误</span><br><span class="line">&#125;`);</span><br><span class="line">const isspj = ref(false);</span><br><span class="line">const timelimit = ref(2000);</span><br><span class="line">const memorylimit = ref(128);</span><br><span class="line">const usernickname = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">interface TestInfo &#123;</span><br><span class="line">  in: string;</span><br><span class="line">  out: string;</span><br><span class="line">&#125;</span><br><span class="line">interface ProblemData &#123;</span><br><span class="line">  ProblemId: string;</span><br><span class="line">  EditType: string;</span><br><span class="line">  Title: string;</span><br><span class="line">  Description: string;</span><br><span class="line">  JudgeNum: number;</span><br><span class="line">  IsSPJ: boolean;</span><br><span class="line">  SPJ: string;</span><br><span class="line">  UserNickName: string;</span><br><span class="line">  TimeLimit: number;</span><br><span class="line">  MemoryLimit: number;</span><br><span class="line">  Tags: Array&lt;string&gt;;</span><br><span class="line">  TestInfo: Array&lt;TestInfo&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Submit() &#123;</span><br><span class="line">  let indata = intestdatafrom.value.submitForm();</span><br><span class="line">  let outdata = outtestdatafrom.value.submitForm();</span><br><span class="line">  let tags = problemtags.value.GetTagsData();</span><br><span class="line">  if (title.value.length &lt; 2) &#123;</span><br><span class="line">    pointmessage.value = &quot;题目标题太短！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  if (indata.length != outdata.length) &#123;</span><br><span class="line">    pointmessage.value = &quot;输入输出数据的数量不一致！&quot;;</span><br><span class="line">    WaringMessage();</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  let testinfo = &lt;Array&lt;TestInfo&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; indata.length; i++) &#123;</span><br><span class="line">    const info = &lt;TestInfo&gt;&#123;&#125;;</span><br><span class="line">    info.in = indata[i].value;</span><br><span class="line">    info.out = outdata[i].value;</span><br><span class="line">    testinfo.push(info);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let tagsinfo = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; tags.length; i++) &#123;</span><br><span class="line">    tagsinfo.push(tags[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const data = &lt;ProblemData&gt;&#123;&#125;;</span><br><span class="line">  data.EditType = edittype.value;</span><br><span class="line">  data.ProblemId = problemid.value;</span><br><span class="line">  data.Title = title.value;</span><br><span class="line">  data.Description = markdowneditor.value.GetContent();</span><br><span class="line">  data.JudgeNum = indata.length;</span><br><span class="line">  data.IsSPJ = isspj.value;</span><br><span class="line">  data.SPJ = spjdata.value;</span><br><span class="line">  data.UserNickName = usernickname.value;</span><br><span class="line">  data.TimeLimit = timelimit.value;</span><br><span class="line">  data.MemoryLimit = memorylimit.value;</span><br><span class="line">  data.Tags = tagsinfo;</span><br><span class="line">  data.TestInfo = testinfo;</span><br><span class="line"></span><br><span class="line">  service</span><br><span class="line">    .post(`/api/problem/edit`, &#123;</span><br><span class="line">      datainfo: data,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;提交成功了！！！&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;题目插入成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(-1);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">function GetServerInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problem/select`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: problemid.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;题目获取成功！&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          handledata(response.data);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          pointmessage.value = response.data.Reason;</span><br><span class="line">          WaringMessage();</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(error.data);</span><br><span class="line">        pointmessage.value = &quot;提交失败,可能网络出现问题！&quot;;</span><br><span class="line">        ErrorMessage();</span><br><span class="line">        return;</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">//Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,IsSPJ,JudgeNum,Tags,TestInfo[&#123;in,out&#125;])</span><br><span class="line">function handledata(Info: any) &#123;</span><br><span class="line">  title.value = Info.Title;</span><br><span class="line">  markdowneditor.value.SetContent(Info.Description);</span><br><span class="line">  timelimit.value = Number(Info.TimeLimit);</span><br><span class="line">  memorylimit.value = Number(Info.MemoryLimit);</span><br><span class="line">  isspj.value = Info.IsSPJ;</span><br><span class="line">  if (isspj.value) spjdata.value = Info.SPJ;</span><br><span class="line">  usernickname.value = Info.UserNickName;</span><br><span class="line">  let tagsinfo = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; Info.Tags.length; i++) &#123;</span><br><span class="line">    tagsinfo.push(Info.Tags[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  problemtags.value.SetTagsData(tagsinfo);</span><br><span class="line"></span><br><span class="line">  let testdatain = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  let testdataout = &lt;Array&lt;string&gt;&gt;[];</span><br><span class="line">  for (var i = 0; i &lt; Number(Info.JudgeNum); i++) &#123;</span><br><span class="line">    testdatain.push(Info.TestInfo[i].in);</span><br><span class="line">    testdataout.push(Info.TestInfo[i].out);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  intestdatafrom.value.setForm(testdatain);</span><br><span class="line">  outtestdatafrom.value.setForm(testdataout);</span><br><span class="line">&#125;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  problemid.value = String(route.query.ProblemId);</span><br><span class="line">  edittype.value = String(route.query.edittype);</span><br><span class="line">  if (edittype.value == &quot;Update&quot;) &#123;</span><br><span class="line">    // 如果是更新，需要向服务器获取数据,并更新数据</span><br><span class="line">    GetServerInfo();</span><br><span class="line">  &#125; else if (edittype.value == &quot;Insert&quot;) &#123;</span><br><span class="line">    // 否则是添加</span><br><span class="line">    usernickname.value = store.state.NickName;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.el-row &#123;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line">.el-row:last-child &#123;</span><br><span class="line">  margin-bottom: 0;</span><br><span class="line">&#125;</span><br><span class="line">.el-col &#123;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.grid-content &#123;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  min-height: 36px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="实现题目管理页面"><a href="#实现题目管理页面" class="headerlink" title="实现题目管理页面"></a>实现题目管理页面</h2><p>实现效果如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/bf3198c016f20ef0d33bbfe0478e85c1-0" alt="图片描述"></p><p>将 Pages -&gt; Admin -&gt; AdminProblem.vue 替换为如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;题目&lt;/h1&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;AddProblem&quot;&gt;添加题目&lt;/el-button&gt;</span><br><span class="line">  &lt;el-table :data=&quot;problemsetdata.array&quot; style=&quot;width: 100%&quot; border&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;ProblemId&quot; label=&quot;ID&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;Title&quot; label=&quot;Title&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;SubmitNum&quot; label=&quot;提交次数&quot; width=&quot;180&quot; /&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;ACNum&quot; label=&quot;通过次数&quot; /&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">      &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleCheck(scope.row)&quot;&gt;查看&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; @click=&quot;handleEdit(scope.row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;danger&quot; @click=&quot;handleDelete(scope.row)&quot;</span><br><span class="line">          &gt;删除&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;demo-pagination-block&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      v-model:current-page=&quot;currentPage&quot;</span><br><span class="line">      v-model:page-size=&quot;pageSize&quot;</span><br><span class="line">      :page-sizes=&quot;[20, 40, 60]&quot;</span><br><span class="line">      :small=&quot;small&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;totalsize&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import service from &quot;../../axios&quot;;</span><br><span class="line">import store from &quot;../../store&quot;;</span><br><span class="line">import &#123; reactive, ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; ElMessage &#125; from &quot;element-plus&quot;;</span><br><span class="line">const router = useRouter();</span><br><span class="line">const pointmessage = ref(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">let currentPage = ref(1); // 当前页数</span><br><span class="line">let pageSize = ref(20); // 当前页的数量</span><br><span class="line">let totalsize = ref(20);</span><br><span class="line">const small = ref(false);</span><br><span class="line">const background = ref(false);</span><br><span class="line">const disabled = ref(false);</span><br><span class="line"></span><br><span class="line">// --------------------------------------</span><br><span class="line">// 添加题目</span><br><span class="line">function AddProblem() &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;ProblemEditor&quot;,</span><br><span class="line">    query: &#123; ProblemId: &quot;0&quot;, edittype: &quot;Insert&quot; &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 查看题目</span><br><span class="line">function handleCheck(row) &#123;</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;Problem&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 编辑题目</span><br><span class="line">function handleEdit(row) &#123;</span><br><span class="line">  console.log(&quot;点击编辑&quot;, row);</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &quot;ProblemEditor&quot;,</span><br><span class="line">    query: &#123; ProblemId: row.ProblemId, edittype: &quot;Update&quot; &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// 删除题目</span><br><span class="line">function handleDelete(row) &#123;</span><br><span class="line">  console.log(&quot;点击删除&quot;, row);</span><br><span class="line">  service</span><br><span class="line">    .delete(`/api/problem`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        ProblemId: row.ProblemId,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        if (response.data.Result == &quot;Success&quot;) &#123;</span><br><span class="line">          pointmessage.value = &quot;删除成功&quot;;</span><br><span class="line">          SuccessMessage();</span><br><span class="line">          router.go(0);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">// -------------------------------------------------------</span><br><span class="line">const handleSizeChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`$&#123;val&#125; items per page`);</span><br><span class="line">  pageSize.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">const handleCurrentChange = (val) =&gt; &#123;</span><br><span class="line">  console.log(`current page: $&#123;val&#125;`);</span><br><span class="line">  currentPage.value = val;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;;</span><br><span class="line">// 题目信息列表</span><br><span class="line">let problemsetdata = reactive(&#123; array: [] &#125;);</span><br><span class="line"></span><br><span class="line">function GetProblemSetInfo() &#123;</span><br><span class="line">  service</span><br><span class="line">    .get(`/api/problemlist/admin`, &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        Page: currentPage.value,</span><br><span class="line">        PageSize: pageSize.value,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(</span><br><span class="line">      (response) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求成功了&quot;, response.data);</span><br><span class="line">        problemsetdata.array = response.data.ArrayInfo;</span><br><span class="line">        totalsize.value = Number(response.data.TotalNum);</span><br><span class="line">      &#125;,</span><br><span class="line">      (error) =&gt; &#123;</span><br><span class="line">        console.log(&quot;请求失败了&quot;, error.data);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  GetProblemSetInfo();</span><br><span class="line">&#125;);</span><br><span class="line">// 发送成功消息</span><br><span class="line">const SuccessMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;success&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送警告消息</span><br><span class="line">const WaringMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;warning&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 发送错误消息</span><br><span class="line">const ErrorMessage = () =&gt; &#123;</span><br><span class="line">  ElMessage(&#123;</span><br><span class="line">    showClose: true,</span><br><span class="line">    message: pointmessage.value,</span><br><span class="line">    type: &quot;error&quot;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.demo-pagination-block + .demo-pagination-block &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.demo-pagination-block .demonstration &#123;</span><br><span class="line">  margin-bottom: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="运行-5"><a href="#运行-5" class="headerlink" title="运行"></a>运行</h2><p>将 store 文件夹中的 index.js 中的 mutations 添加如下函数：</p><p>此函数用于向后端请求标签数据。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">&#x27;../axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">GetProblemTags</span>(state)&#123;</span><br><span class="line">    service</span><br><span class="line">    .<span class="title function_">get</span>(<span class="string">`/api/tags`</span>, &#123;</span><br><span class="line">        <span class="attr">params</span>:&#123;</span><br><span class="line">            <span class="title class_">TagType</span>:<span class="string">&quot;Problem&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            state.<span class="property">ProblemTags</span> = response.<span class="property">data</span>.<span class="property">Tags</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将 main.js 中 createApp 函数前添加如下代码：</p><p>当加载前端页面时，执行请求获取标签数据。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取题目标签</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&quot;GetProblemTags&quot;</span>);</span><br></pre></td></tr></table></figure><p>执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后端</span></span><br><span class="line">sudo ./xdoj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动前端服务</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务进行测试。</p><h2 id="实验总结-7"><a href="#实验总结-7" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验实现了题目模块的全部功能。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code28.zip</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/10/26/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%90%8E%E7%AB%AF2/"/>
      <url>/2023/10/26/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%90%8E%E7%AB%AF2/</url>
      
        <content type="html"><![CDATA[<h1 id="9-题解模块实现"><a href="#9-题解模块实现" class="headerlink" title="9.题解模块实现"></a>9.题解模块实现</h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现题解模块。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、DiscussList 模块、MongoDB 模块</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b74efc7c4f9af80d75d792691850d300-0" alt="图片描述"></p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现题解模块</li></ul><h2 id="实现-MongoDB-模块"><a href="#实现-MongoDB-模块" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>向 MongoDataBase.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +++++++++++++++++++++++++Solution 题解表++++++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加题解</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,ParentId,UserId,Public)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询题解（公开题解）</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo,Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页查询题解</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询题解的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,Public)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询题解的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,Views,Comments,CreateTime,UpdateTime,User.NicaName,User.Avatar)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改题解的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateSolutionComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新题解</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId,Title,Content,Public)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除题解</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 MongoDataBase.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加题解</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,ParentId,UserId,Public)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_articleid;</span><br><span class="line">        string title = insertjson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = insertjson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">bool</span> ispublic = insertjson[<span class="string">&quot;Public&quot;</span>].<span class="built_in">asBool</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; parentid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Public&quot;</span> &lt;&lt; ispublic</span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = solutioncoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">result</span>().<span class="built_in">inserted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库插入失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询题解（公开题解）</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo(ParentId,UserId),Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SearchInfo&quot;</span>][<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SearchInfo&quot;</span>][<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (parentid &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 匹配ID</span></span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;);</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 匹配公开</span></span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Public&quot;</span>, <span class="literal">true</span>))&#125;);</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Public&quot;</span>, <span class="literal">true</span>))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (userid &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 匹配ID</span></span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;);</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line"></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = solutioncoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = solutioncoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页查询题解</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = solutioncoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = solutioncoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询题解的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,UserId,Public)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> solutionid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SolutionId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, solutionid))&#125;);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Public&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        mongocxx::cursor cursor = solutioncoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询题解的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,Views,Comments,CreateTime,UpdateTime,User.NicaName,User.Avatar)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> solutionid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SolutionId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line">        <span class="comment">// 浏览量加一</span></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line">        solutioncoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, solutionid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询Content</span></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, solutionid))&#125;);</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = solutioncoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据，可能是请求参数错误！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改题解的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateSolutionComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> articleid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;ArticleId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> num = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Num&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; num &lt;&lt; close_document;</span><br><span class="line">        solutioncoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, articleid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新题解</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId,Title,Content,Public)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> solutionid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;SolutionId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string title = updatejson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = updatejson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">bool</span> ispublic = updatejson[<span class="string">&quot;Public&quot;</span>].<span class="built_in">asBool</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Public&quot;</span> &lt;&lt; ispublic</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        solutioncoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, solutionid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除题解</span></span><br><span class="line"><span class="comment">    传入：Json(SolutionId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> solutionid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;SolutionId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection solutioncoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Solution&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = solutioncoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, solutionid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库删除失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-SolutionList-模块"><a href="#实现-SolutionList-模块" class="headerlink" title="实现 SolutionList 模块"></a>实现 SolutionList 模块</h2><p>向 SolutionList.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分页查询题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询题解的内容</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改评论数的数量</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateSolutionComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 SolutionList.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">SolutionList::InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertSolution</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolution</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SolutionList::UpdateSolutionComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateSolutionComments</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateSolution</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">SolutionList::DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteSolution</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块"><a href="#实现-Control-模块" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>向 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------------题解-----------------------</span></span><br><span class="line"><span class="comment">// 查询题解列表</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询题解进行编辑</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------------题解----------------------------</span></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectSolutionList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectSolutionListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectSolution</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolution</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectSolutionByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectSolutionByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::InsertSolution</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertSolution</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::UpdateSolution</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateSolution</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteSolution</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson = SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteSolution</span>(deletejson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当评论模块完成时，将下面注释去掉</span></span><br><span class="line">    <span class="comment">// if (resjson[&quot;Result&quot;].asString() == &quot;Success&quot;)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     Json::Value json;</span></span><br><span class="line">    <span class="comment">//     json[&quot;ArticleId&quot;] = deletejson[&quot;SolutionId&quot;];</span></span><br><span class="line">    <span class="comment">//     CommentList::GetInstance()-&gt;DeleteArticleComment(json);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块"><a href="#实现-HttpServer-模块" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>向 HttpServer.cpp 中 Run 函数添加：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------题解------------------------</span></span><br><span class="line"><span class="comment">// 获取题解列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/solutionlist&quot;</span>, doGetSolutionList);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取题解列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/solutionlist/admin&quot;</span>, doGetSolutionListByAdmin);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取题解内容</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/solution&quot;</span>, doGetSolution);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取题解信息用于编辑</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/solution/select&quot;</span>, doSelectSolutionByEdit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户题解公告</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/solution/insert&quot;</span>, doInsertSolution);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户修改题解</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/solution/update&quot;</span>, doUpdateSolution);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户删除题解</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/solution&quot;</span>, doDeleteSolution);</span><br></pre></td></tr></table></figure><p>向 HttpServer.cpp 添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------------题解------------------------------</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetSolutionList</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolutionList start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SearchInfo&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value searchinfo;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="comment">// 解析传入的json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SearchInfo&quot;</span>), searchinfo);</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SearchInfo&quot;</span>] = searchinfo;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectSolutionList</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolutionList end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetSolutionListByAdmin</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolutionListByAdmin start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectSolutionListByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolutionListByAdmin end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetSolution</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SolutionId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string solutionid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SolutionId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SolutionId&quot;</span>] = solutionid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectSolution</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSelectSolutionByEdit</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectSolutionByEdit start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SolutionId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string solutionid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SolutionId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SolutionId&quot;</span>] = solutionid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectSolutionByEdit</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectSolutionByEdit end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doInsertSolution</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">InsertSolution</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doUpdateSolution</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">UpdateSolution</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteSolution</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SolutionId&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;UserId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string solutionid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SolutionId&quot;</span>);</span><br><span class="line">        string userid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;UserId&quot;</span>);</span><br><span class="line">        Json::Value deletejson;</span><br><span class="line">        deletejson[<span class="string">&quot;SolutionId&quot;</span>] = solutionid;</span><br><span class="line">        deletejson[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteSolution</span>(deletejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>登录用户。</p><p>在题库中选择一道题，然后点击题解：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/05c9ad88c533db759d5d73e87ba889c0-0" alt="图片描述"></p><p>此时题解列表为空，我们点击写题解：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/c87a7c95f2daaa05dfda9e73e9574a09-0" alt="图片描述"></p><p>编辑内容，选择是否公开的按钮，如果不公开则只能本人和管理员看见：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/47fe16e688e76a7b750a76d7c230aaa4-0" alt="图片描述"></p><p>选择公开发布，则可以在列表中看见刚刚发布的题解：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d71335c7a8a4e6d9cdd1c8a6b83efcd3-0" alt="图片描述"></p><p>进入管理员界面，点击题解管理，可以对题解进行管理：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/ae4f32e385d12a50e55811c0ec6dcf86-0" alt="图片描述"></p><h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>本章节主要实现题解模块，对题解进行增删改查。</p><p>公告模块、讨论模块、题解模块这三个模块实现非常类似，个别字段不同。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code13.zip</span><br></pre></td></tr></table></figure><h1 id="10-评论模块实现"><a href="#10-评论模块实现" class="headerlink" title="10.评论模块实现"></a>10.评论模块实现</h1><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现评论模块。</p><p>本次实验设计到 HttpServer 模块、Control 模块、CommentList 模块、MongoDB 模块</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e5d51cf07c53224b94ff054cbfffd92e-0" alt="图片描述"></p><h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现评论模块</li></ul><h2 id="实现-MongoDB-模块-1"><a href="#实现-MongoDB-模块-1" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>向 MongoDataBase.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ++++++++++++++++++++++评论表 Comment+++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员查询评论</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,ParentId,ParentType,Content,CreateTime,</span></span><br><span class="line"><span class="comment">        Child_Comments._id,Child_Comments.Content,Child_Comments.CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询父评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Skip,Limie,SonNum)</span></span><br><span class="line"><span class="comment">    传出：</span></span><br><span class="line"><span class="comment">    Json(ParentId,Content,Likes,CreateTime,Child_Total,</span></span><br><span class="line"><span class="comment">    User(Avatar,NickName),</span></span><br><span class="line"><span class="comment">    Child_Comments(_id,Content,Likes,CreateTime,User(Avatar,NickName)))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getFatherComment</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取子评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Skip,Limit)</span></span><br><span class="line"><span class="comment">    传出：Json(Child_Total,Child_Comments(_id,Content,Likes,CreateTime,User(NickName,Avatar)))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getSonComment</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入父评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Content,UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertFatherComment</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入子评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Content,UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertSonComment</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除某一篇文章（讨论，题解，公告）的所有文章，主要服务于删除文章</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DeleteArticleComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除父评论</span></span><br><span class="line"><span class="comment">    传入：Json(CommentId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,DeleteNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteFatherComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除子评论</span></span><br><span class="line"><span class="comment">    传入：Json(CommentId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,DeleteNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteSonComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 MongoDataBase.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员查询评论</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,ParentId,ParentType,Content,CreateTime,</span></span><br><span class="line"><span class="comment">        Child_Comments._id,Child_Comments.Content,Child_Comments.CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="comment">// 按照时间先后顺序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        <span class="comment">// 跳过多少条</span></span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        <span class="comment">// 限制多少条</span></span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 选择需要的字段</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentType&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.CreateTime&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = commentcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;TotalNum&quot;</span>] = <span class="built_in">to_string</span>(commentcoll.<span class="built_in">count_documents</span>(&#123;&#125;));</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询父评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Page,PageSize,SonNum)</span></span><br><span class="line"><span class="comment">    传出：</span></span><br><span class="line"><span class="comment">    Json(ParentId,Content,Likes,CreateTime,Child_Total,</span></span><br><span class="line"><span class="comment">    User(Avatar,NickName),</span></span><br><span class="line"><span class="comment">    Child_Comments(_id,Content,Likes,CreateTime,User(Avatar,NickName)))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::getFatherComment</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> sonnum = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;SonNum&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="comment">// 匹配ParentId</span></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;);</span><br><span class="line">        <span class="comment">// 按照时间先后顺序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">1</span>))&#125;);</span><br><span class="line">        <span class="comment">// 跳过多少条</span></span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        <span class="comment">// 限制多少条</span></span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        <span class="comment">// 将子评论进行求个数</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$size&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span></span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">append_stage</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 限制子评论的个数</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$slice&quot;</span> &lt;&lt; open_array</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span> &lt;&lt; <span class="number">0</span> &lt;&lt; sonnum &lt;&lt; close_array</span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">append_stage</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将数组拆散</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;path&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;preserveNullAndEmptyArrays&quot;</span> &lt;&lt; <span class="literal">true</span>;</span><br><span class="line">        pipe.<span class="built_in">unwind</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将子评论的用户id和用户表进行外连接</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将其合并</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$ParentId&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Content&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Likes&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Likes&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$UserId&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$CreateTime&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Total&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$push&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span> &lt;&lt; close_document;</span><br><span class="line">        pipe.<span class="built_in">group</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将父评论的用户Id和用户表进行外连接</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 选择需要的字段</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Likes&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.Likes&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 按照时间先后顺序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">1</span>))&#125;);</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = commentcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArryInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;TotalNum&quot;</span>] = <span class="built_in">to_string</span>(commentcoll.<span class="built_in">count_documents</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;));</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取子评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Skip,Limit)</span></span><br><span class="line"><span class="comment">    传出：Json(Child_Total,Child_Comments(_id,Content,Likes,CreateTime,User(NickName,Avatar)))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::getSonComment</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> _id = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="comment">// 匹配id</span></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, _id))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将子评论进行求个数</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$size&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span></span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">append_stage</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 限制子评论个数</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$slice&quot;</span> &lt;&lt; open_array</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span> &lt;&lt; skip &lt;&lt; pagesize &lt;&lt; close_array</span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">append_stage</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将数组拆散</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;path&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;preserveNullAndEmptyArrays&quot;</span> &lt;&lt; <span class="literal">true</span>;</span><br><span class="line">        pipe.<span class="built_in">unwind</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// 将子评论的用户id和用户表进行外连接</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将其合并</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$first&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Total&quot;</span> &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$push&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span> &lt;&lt; close_document;</span><br><span class="line">        pipe.<span class="built_in">group</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.Likes&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User.NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments.User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = commentcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入父评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Content,UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertFatherComment</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_commentid;</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string parenttype = insertjson[<span class="string">&quot;ArticleType&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = insertjson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string createtime = <span class="built_in">GetTime</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; parentid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentType&quot;</span> &lt;&lt; parenttype.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Likes&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; createtime.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_array</span><br><span class="line">            &lt;&lt; close_array;</span><br><span class="line"></span><br><span class="line">        commentcoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        resjson[<span class="string">&quot;_id&quot;</span>] = <span class="built_in">to_string</span>(id);</span><br><span class="line">        resjson[<span class="string">&quot;CreateTime&quot;</span>] = createtime.<span class="built_in">data</span>();</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入子评论</span></span><br><span class="line"><span class="comment">    传入：Json(ParentId,Content,UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,CreateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertSonComment</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">data</span>());</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_commentid;</span><br><span class="line">        string content = insertjson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">data</span>());</span><br><span class="line">        string createtime = <span class="built_in">GetTime</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$addToSet&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span></span><br><span class="line">            &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Likes&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span></span><br><span class="line">            &lt;&lt; createtime.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; close_document</span><br><span class="line">            &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        commentcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, parentid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;_id&quot;</span>] = <span class="built_in">to_string</span>(id);</span><br><span class="line">        resjson[<span class="string">&quot;CreateTime&quot;</span>] = createtime;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除某一篇文章（讨论，题解，公告）的所有文章，主要服务于删除文章</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::DeleteArticleComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> articleid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;ArticleId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line">        <span class="keyword">auto</span> result = commentcoll.<span class="built_in">delete_many</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, articleid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除父评论</span></span><br><span class="line"><span class="comment">    传入：Json(CommentId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,DeleteNum,ArticleType)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteFatherComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> commentid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;CommentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = commentcoll.<span class="built_in">find</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, commentid))&#125;);</span><br><span class="line">        <span class="comment">// 如果未查询到父评论</span></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该评论！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, commentid))&#125;);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Total&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$size&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$Child_Comments&quot;</span></span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">append_stage</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        cursor = commentcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        Json::Value jsonvalue;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> sonnum = <span class="built_in">stoi</span>(jsonvalue[<span class="string">&quot;Child_Total&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string articletype = jsonvalue[<span class="string">&quot;ParentType&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = commentcoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, commentid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;DeleteNum&quot;</span>] = sonnum + <span class="number">1</span>;</span><br><span class="line">        resjson[<span class="string">&quot;ArticleType&quot;</span>] = articletype;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除子评论</span></span><br><span class="line"><span class="comment">    传入：Json(CommentId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,DeleteNum,ArticleType)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteSonComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> commentid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;CommentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection commentcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Comment&quot;</span>];</span><br><span class="line">        <span class="comment">// 找出父评论ID</span></span><br><span class="line">        mongocxx::cursor cursor = commentcoll.<span class="built_in">find</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Child_Comments._id&quot;</span>, commentid))&#125;);</span><br><span class="line">        Json::Value jsonvalue;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int64_t</span> fatherid = <span class="built_in">stoll</span>(jsonvalue[<span class="string">&quot;_id&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string articletype = jsonvalue[<span class="string">&quot;ParentType&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="comment">// 删除子评论</span></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$pull&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Child_Comments&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; commentid</span><br><span class="line">            &lt;&lt; close_document &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = commentcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, fatherid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">matched_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未找到该数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;DeleteNum&quot;</span>] = <span class="number">1</span>;</span><br><span class="line">        resjson[<span class="string">&quot;ArticleType&quot;</span>] = articletype;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-CommentList-模块"><a href="#实现-CommentList-模块" class="headerlink" title="实现 CommentList 模块"></a>实现 CommentList 模块</h2><p>向 CommentList.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 管理员查询评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取父评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getFatherComment</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取子评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getSonComment</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入父评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertFatherComment</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入子评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertSonComment</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除某一篇文章的所有评论</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DeleteArticleComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除父评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteFatherComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除子评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteSonComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 CommentList.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">CommentList::SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectCommentListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::getFatherComment</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getFatherComment</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::getSonComment</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getSonComment</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入父评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::InsertFatherComment</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertFatherComment</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入子评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::InsertSonComment</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertSonComment</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CommentList::DeleteArticleComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteArticleComment</span>(deletejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::DeleteFatherComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteFatherComment</span>(deletejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">CommentList::DeleteSonComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteSonComment</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块-1"><a href="#实现-Control-模块-1" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>向 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------评论Comment-------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取评论 根据Id</span></span><br><span class="line"><span class="function">Json::Value <span class="title">GetComment</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertComment</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除评论</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteComment</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>将 Control.cpp 文件中的 DeleteAnnouncement、DeleteDiscuss、DeleteSolution 三个函数中的注释去掉。</p><p>因为当删除公告、讨论和题解时，同时需要把他们的评论进行删除。</p><p>向 Control.cpp 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::SelectCommentListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectCommentListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::GetComment</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (queryjson[<span class="string">&quot;Type&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Father&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getFatherComment</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getSonComment</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::InsertComment</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 文章添加评论数</span></span><br><span class="line">    Json::Value updatejson;</span><br><span class="line">    updatejson[<span class="string">&quot;ArticleId&quot;</span>] = insertjson[<span class="string">&quot;ArticleId&quot;</span>];</span><br><span class="line">    updatejson[<span class="string">&quot;Num&quot;</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (insertjson[<span class="string">&quot;ArticleType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Discuss&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateDiscussComments</span>(updatejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (insertjson[<span class="string">&quot;ArticleType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Solution&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateSolutionComments</span>(updatejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (insertjson[<span class="string">&quot;ArticleType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Announcement&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateAnnouncementComments</span>(updatejson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (insertjson[<span class="string">&quot;Type&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Father&quot;</span>) <span class="comment">// 父评论</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertFatherComment</span>(insertjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">// 子评论</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertSonComment</span>(insertjson);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Json(ArticleId,CommentId)</span></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteComment</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string articleid = deletejson[<span class="string">&quot;ArticleId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="comment">// 删除父评论</span></span><br><span class="line">    Json::Value json = CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteFatherComment</span>(deletejson);</span><br><span class="line">    <span class="comment">// 如果失败删除子评论</span></span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">        json = CommentList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteSonComment</span>(deletejson);</span><br><span class="line">    <span class="comment">// 如果都失败，返回失败结果</span></span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果删除评论成功，更新文章的评论数量</span></span><br><span class="line">    Json::Value articlejson;</span><br><span class="line">    articlejson[<span class="string">&quot;Num&quot;</span>] = <span class="built_in">stoi</span>(json[<span class="string">&quot;DeleteNum&quot;</span>].<span class="built_in">asString</span>()) * <span class="number">-1</span>;</span><br><span class="line">    articlejson[<span class="string">&quot;ArticleId&quot;</span>] = articleid;</span><br><span class="line">    string articletype = json[<span class="string">&quot;ArticleType&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    <span class="keyword">if</span> (articletype == <span class="string">&quot;Discuss&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateDiscussComments</span>(articlejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (articletype == <span class="string">&quot;Solution&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        SolutionList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateSolutionComments</span>(articlejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (articletype == <span class="string">&quot;Announcement&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateAnnouncementComments</span>(articlejson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块-1"><a href="#实现-HttpServer-模块-1" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>向 HttpServer.cpp 中 Run 函数添加：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------评论--------------------</span></span><br><span class="line"><span class="comment">// 管理员获取评论</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/commentlist/admin&quot;</span>, doSelectCommentListByAdmin);</span><br><span class="line"><span class="comment">// 获取评论</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/comment&quot;</span>, doGetComment);</span><br><span class="line"><span class="comment">// 提交评论</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/comment/insert&quot;</span>, doInsertComment);</span><br><span class="line"><span class="comment">// 删除评论</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/comment&quot;</span>, doDeleteComment);</span><br></pre></td></tr></table></figure><p>向 HttpServer.cpp 添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSelectCommentListByAdmin</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectCommentListByAdmin start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectCommentListByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectCommentListByAdmin end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetComment</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetComment start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Type&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;ParentId&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;SonNum&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string type = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Type&quot;</span>);</span><br><span class="line">        string parentid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;ParentId&quot;</span>);</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line">        string sonsnum = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SonNum&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Type&quot;</span>] = type;</span><br><span class="line">        queryjson[<span class="string">&quot;ParentId&quot;</span>] = parentid;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        queryjson[<span class="string">&quot;SonNum&quot;</span>] = sonsnum;</span><br><span class="line">        resjson = control.<span class="built_in">GetComment</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetComment end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doInsertComment</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertComment start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">InsertComment</span>(jsonvalue[<span class="string">&quot;Info&quot;</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertComment end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteComment</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteComment start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;ArticleId&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;CommentId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string articleid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;ArticleId&quot;</span>);</span><br><span class="line">        string commentid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;CommentId&quot;</span>);</span><br><span class="line">        Json::Value deletejson;</span><br><span class="line">        deletejson[<span class="string">&quot;ArticleId&quot;</span>] = articleid;</span><br><span class="line">        deletejson[<span class="string">&quot;CommentId&quot;</span>] = commentid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteComment</span>(deletejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteComment end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>登录管理员用户，在公告、讨论和题解都有评论模块，这里以公告为例，进入 test 公告：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/41b4e7529399a9cef85ade2a98f7cdca-0" alt="图片描述"></p><p>发布评论后，如果是自己的评论，可以点击删除，如果是别人就是举报（举报功能未添加）：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f5eda2889058f6e0f7e8136f107693c6-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4831a94df3bfb1ac9a2756f89ace3077-0" alt="图片描述"></p><p>查看首页即可看到公告评论数与真实的评论数相同：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e013070530fc7526a2ba3615dee9f218-0" alt="图片描述"></p><p>进入管理员，点击评论管理，即可对评论进行管理：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4fa68582d418814ed526934e3c8babe0-0" alt="图片描述"></p><h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>本章节主要实现评论模块，对评论进行增删查。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code14.zip</span><br></pre></td></tr></table></figure><h1 id="11-测评记录模块实现"><a href="#11-测评记录模块实现" class="headerlink" title="11.测评记录模块实现"></a>11.测评记录模块实现</h1><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现测评记录模块。</p><p>本次实验设计到 HttpServer 模块、Control 模块、StatusRecordList 模块、MongoDB 模块</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5fb104e6a0ec2d36622d0b77fc434e35-0" alt="图片描述"></p><h4 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现测评记录模块</li></ul><h2 id="实现-MongoDB-模块-2"><a href="#实现-MongoDB-模块-2" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>向 MongoDataBase.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ++++++++++++++++++++++++评测表StatusRecord+++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入待测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,UserId,UserNickName,ProblemTitle,Language,Code)</span></span><br><span class="line"><span class="comment">    传出：SubmitId测评的ID</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">std::string <span class="title">InsertStatusRecord</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SubmitId,Status,RunTime,RunMemory,Length,ComplierInfo,</span></span><br><span class="line"><span class="comment">    TestInfo[(Status,StandardInput,StandardOutput,PersonalOutput,RunTime,RunMemory)])</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateStatusRecord</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo,PageSize,Page)</span></span><br><span class="line"><span class="comment">    传出：测评全部信息，详情请见MongoDB集合表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SubmitId)</span></span><br><span class="line"><span class="comment">    传出：全部记录，详情请看MongoDB集合表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 MongoDataBase.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入待测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,UserId,UserNickName,ProblemTitle,Language,Code)</span></span><br><span class="line"><span class="comment">    传出：SubmitId测评的ID</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">string <span class="title">MoDB::InsertStatusRecord</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_statusrecordid;</span><br><span class="line">        <span class="type">int64_t</span> problemid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string usernickname = insertjson[<span class="string">&quot;UserNickName&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string problemtitle = insertjson[<span class="string">&quot;ProblemTitle&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string language = insertjson[<span class="string">&quot;Language&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string code = insertjson[<span class="string">&quot;Code&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection statusrecordcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;StatusRecord&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProblemId&quot;</span> &lt;&lt; problemid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; usernickname.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProblemTitle&quot;</span> &lt;&lt; problemtitle.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Status&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RunTime&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;0MS&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RunMemory&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;0MB&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Length&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;0B&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Language&quot;</span> &lt;&lt; language.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Code&quot;</span> &lt;&lt; code.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ComplierInfo&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TestInfo&quot;</span> &lt;&lt; open_array &lt;&lt; close_array;</span><br><span class="line">        statusrecordcoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">to_string</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SubmitId,Status,RunTime,RunMemory,Length,ComplierInfo,</span></span><br><span class="line"><span class="comment">    TestInfo[(Status,StandardInput,StandardOutput,PersonalOutput,RunTime,RunMemory)])</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateStatusRecord</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> submitid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;SubmitId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> status = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string runtime = updatejson[<span class="string">&quot;RunTime&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string runmemory = updatejson[<span class="string">&quot;RunMemory&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string length = updatejson[<span class="string">&quot;Length&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string complierinfo = updatejson[<span class="string">&quot;ComplierInfo&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 更新测评记录</span></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection statusrecordcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;StatusRecord&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="keyword">auto</span> in_array = document</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Status&quot;</span> &lt;&lt; status</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;RunTime&quot;</span> &lt;&lt; runtime.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;RunMemory&quot;</span> &lt;&lt; runmemory.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Length&quot;</span> &lt;&lt; length.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;ComplierInfo&quot;</span> &lt;&lt; complierinfo.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;TestInfo&quot;</span> &lt;&lt; open_array;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; updatejson[<span class="string">&quot;TestInfo&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> teststatus = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">            string standardinput = updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;StandardInput&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            string standardoutput = updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;StandardOutput&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            string personaloutput = updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;PersonalOutput&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            string testruntime = updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;RunTime&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            string testrunmemory = updatejson[<span class="string">&quot;TestInfo&quot;</span>][i][<span class="string">&quot;RunMemory&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            in_array = in_array &lt;&lt; open_document</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;Status&quot;</span> &lt;&lt; teststatus</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;StandardInput&quot;</span> &lt;&lt; standardinput</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;StandardOutput&quot;</span> &lt;&lt; standardoutput</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;PersonalOutput&quot;</span> &lt;&lt; personaloutput</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;RunTime&quot;</span> &lt;&lt; testruntime</span><br><span class="line">                                &lt;&lt; <span class="string">&quot;RunMemory&quot;</span> &lt;&lt; testrunmemory &lt;&lt; close_document;</span><br><span class="line">        &#125;</span><br><span class="line">        bsoncxx::document::value doc = in_array &lt;&lt; close_array &lt;&lt; close_document &lt;&lt; finalize;</span><br><span class="line"></span><br><span class="line">        statusrecordcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, submitid))&#125;, doc.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo(ProblemId,UserId,ProblemTitle,Status,Language),PageSize,Page)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[(_id,ProbleId,UserId,UserNickName,ProblemTitle,Status,</span></span><br><span class="line"><span class="comment">                RunTime,RunMemory,Length,Language,SubmitTime)],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value searchinfo = queryjson[<span class="string">&quot;SearchInfo&quot;</span>];</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection statusrecordcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;StatusRecord&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询题目ID</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int64_t</span> problemid = <span class="built_in">mystoll</span>(searchinfo[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ProblemId&quot;</span>, problemid))&#125;&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ProblemId&quot;</span>, problemid))&#125;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 查询用户ID</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(searchinfo[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询题目标题</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;ProblemTitle&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;ProblemTitle&quot;</span> &lt;&lt; open_document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;$regex&quot;</span> &lt;&lt; searchinfo[<span class="string">&quot;ProblemTitle&quot;</span>].<span class="built_in">asString</span>()</span><br><span class="line">                &lt;&lt; close_document;</span><br><span class="line">            pipe.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line">            pipetot.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line">            document.<span class="built_in">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询状态</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> status = <span class="built_in">stoi</span>(searchinfo[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Status&quot;</span>, status))&#125;&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Status&quot;</span>, status))&#125;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询语言</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;Language&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            string language = searchinfo[<span class="string">&quot;Language&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Language&quot;</span>, language))&#125;&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Language&quot;</span>, language))&#125;&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = statusrecordcoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 排序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;SubmitTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        <span class="comment">// 跳过</span></span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        <span class="comment">// 限制</span></span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProbleId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProblemTitle&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Status&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RunTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RunMemory&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Length&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Language&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitTime&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        Json::Value arryjson;</span><br><span class="line">        cursor = statusrecordcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            arryjson.<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;ArrayInfo&quot;</span>] = arryjson;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询测评记录</span></span><br><span class="line"><span class="comment">    传入：Json(SubmitId)</span></span><br><span class="line"><span class="comment">    传出：全部记录，详情请看MongoDB集合表</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> submitid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SubmitId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection statusrecordcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;StatusRecord&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, submitid))&#125;);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Status&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Language&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Code&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ComplierInfo&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TestInfo&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="comment">// 查询测评记录</span></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = statusrecordcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-StatusRecordList-模块"><a href="#实现-StatusRecordList-模块" class="headerlink" title="实现 StatusRecordList 模块"></a>实现 StatusRecordList 模块</h2><p>向 StatusRecordList.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分页查询测评记录</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入查询记录</span></span><br><span class="line"><span class="function">std::string <span class="title">InsertStatusRecord</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新测评信息返回测评结果</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateStatusRecord</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询一条详细测评记录</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 StatusRecordList.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">StatusRecordList::SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectStatusRecordList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">StatusRecordList::InsertStatusRecord</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertStatusRecord</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">StatusRecordList::UpdateStatusRecord</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateStatusRecord</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">StatusRecordList::SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectStatusRecord</span>(queryjson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块-2"><a href="#实现-Control-模块-2" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>向 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------测评表-------------------------</span></span><br><span class="line"><span class="comment">// 返回状态记录的信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询一条详细测评记录</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::SelectStatusRecordList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> StatusRecordList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectStatusRecordList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> StatusRecordList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectStatusRecord</span>(queryjson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块-2"><a href="#实现-HttpServer-模块-2" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>向 HttpServer.cpp 中 Run 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------测评-----------------</span></span><br><span class="line"><span class="comment">// 获取状态记录</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/statusrecordlist&quot;</span>, doGetStatusRecordList);</span><br><span class="line"><span class="comment">// 获取一条测评记录</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/statusrecord&quot;</span>, doGetStatusRecord);</span><br></pre></td></tr></table></figure><p>向 HttpServer.cpp 添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetStatusRecordList</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetStatusRecordList start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SearchInfo&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value searchinfo;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="comment">// 解析传入的json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SearchInfo&quot;</span>), searchinfo);</span><br><span class="line"></span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SearchInfo&quot;</span>] = searchinfo;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectStatusRecordList</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetStatusRecordList end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetStatusRecord</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetStatusRecordInfo start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SubmitId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string submitid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SubmitId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SubmitId&quot;</span>] = submitid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectStatusRecord</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetStatusRecordInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行-2"><a href="#运行-2" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据库初始化脚本，点击进行并执行</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/init-statusrecord.mongodb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>点击测评页面，可以看到我们在数据库中插入的一条记录：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/769b2f37db54e4c0dad4c933fb72f722-0" alt="图片描述"></p><p>点击记录，查看详细信息：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/3d6d1415056e0c81c4b2f778dd2f91db-0" alt="图片描述"></p><h2 id="实验总结-2"><a href="#实验总结-2" class="headerlink" title="实验总结"></a>实验总结</h2><p>本章节主要实现测评记录模块，对测评记录进行增改查。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code15.zip</span><br></pre></td></tr></table></figure><h1 id="12-安全沙箱讲解"><a href="#12-安全沙箱讲解" class="headerlink" title="12.安全沙箱讲解"></a>12.安全沙箱讲解</h1><h2 id="实验介绍-3"><a href="#实验介绍-3" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验首先会对安全沙箱进行简单讲解以及为什么使用安全沙箱，其次我们对青岛大学开源的安全沙箱进行简单的源码分析，最后使用青岛大学开源的安全沙箱进行测试。</p><h4 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h4><ul><li>安全沙箱</li><li>编译并运行程序</li><li>开源安全沙箱测试</li></ul><h2 id="安全沙箱"><a href="#安全沙箱" class="headerlink" title="安全沙箱"></a>安全沙箱</h2><h4 id="安全沙箱是什么"><a href="#安全沙箱是什么" class="headerlink" title="安全沙箱是什么"></a>安全沙箱是什么</h4><p>安全沙箱技术是一种用于隔离应用程序或进程的安全机制，它可以在计算机系统中创建一个受限的环境，以防止应用程序或进程对系统造成潜在的安全威胁。</p><p>在安全沙箱中，应用程序或进程被限制在一个虚拟环境中运行，这个虚拟环境通常被称为沙箱。沙箱可以提供一些虚拟的硬件和软件资源，如文件系统、网络、操作系统等，使应用程序或进程可以在这个虚拟环境中运行，而不会对计算机系统产生任何不良影响。如果应用程序或进程试图访问沙箱之外的资源或执行危险操作，沙箱会拦截这些请求并采取相应的安全措施，例如禁止该操作或中止应用程序或进程。</p><h4 id="OJ-为什么要使用安全沙箱"><a href="#OJ-为什么要使用安全沙箱" class="headerlink" title="OJ 为什么要使用安全沙箱"></a>OJ 为什么要使用安全沙箱</h4><p>因为要运行用户提交的程序，可能有多种方式攻击 OJ 系统：</p><ol><li>使用超额的系统资源（时间、内存、硬盘空间）。</li><li>读取不该读取的文件（如答案文件）。</li><li>与外界通信。</li><li>破坏系统（如重启机器或损坏 rootfs）。</li></ol><p>这时需要将程序放在安全沙箱中运行，防止破环系统。</p><h2 id="青岛大学的开源安全沙箱"><a href="#青岛大学的开源安全沙箱" class="headerlink" title="青岛大学的开源安全沙箱"></a>青岛大学的开源安全沙箱</h2><p>本系统使用的青岛大学的开源安全沙箱，下面是 Github 地址和文档地址：</p><p>Github：<a href="https://github.com/QingdaoU/Judger">https://github.com/QingdaoU/Judger</a></p><p>文档：<a href="https://opensource.qduoj.com/#/judger/api">https://opensource.qduoj.com/#/judger/api</a></p><p>文档中详细讲解了 API 和工作原理，在这里将会简单通俗进行讲解。</p><p>简单分析安全沙箱的需求：</p><ol><li>运行用户提交的程序。</li><li>让程序获取提前准备好的输入，然后输出结果</li><li>限制程序的运行时间和内存，并获取程序运行的时间和内存。</li><li>限制某些破坏系统的系统调用。</li></ol><p>下面是安全沙箱用到的重要的函数和库，这里简单介绍：</p><p>fork 函数：创建一个与当前进程一样的子进程。</p><p>kill 函数：对进程发送信号。</p><p>wait4 函数：等待特定的子进程，并获取进程使用的资源详细信息。</p><p>setrlimit 函数：设置进程的资源限制。</p><p>dup2 函数：重定向文件描述符。</p><p>execve 函数：执行一个新的程序。</p><p>seccomp 库：是 linux 一个安全模块，用于限制程序系统调用。</p><p>下面是该安全沙箱的大致流程，大家可以结合代码理解：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/ea40d61264856e4c12832b2e55a647af-0" alt="图片描述"></p><h2 id="安全沙箱的使用"><a href="#安全沙箱的使用" class="headerlink" title="安全沙箱的使用"></a>安全沙箱的使用</h2><p>克隆代码仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/QingdaoU/Judger.git</span><br></pre></td></tr></table></figure><p>安装 seccomp 库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libseccomp-dev</span><br></pre></td></tr></table></figure><p>打开项目的 CMakeLists.txt 文件，在编译参数那里加 -shared 参数。</p><p>-shared：该选项指定生成动态连接库（让连接器生成 T 类型的导出符号表，有时候也生成弱连接 W 类型的导出符号），不用该标志外部程序无法连接。相当于一个可执行文件。</p><p>注意：如果不加的话，会导致 C++ 项目引入该库会出现各种链接错误，其它语言官方做了封装。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/255610651792ceaef0f3837b1b3e1319-0" alt="图片描述"></p><p>编译动态库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/Judger </span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>此时我们在项目中找到头文件和库文件，如图所示，项目只需要这两个文件即可。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7a30b6d4dd7e6d547c6447524953c872-0" alt="图片描述"></p><p>下载并运行示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code16.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./code16 code16.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> code16/tmp</span><br><span class="line"></span><br><span class="line">g++ code.cpp -o code</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build &amp;&amp; cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">sudo ./app</span><br></pre></td></tr></table></figure><p>运行必须使用 Root 用户，因为安全沙箱需要权限。</p><p>下面是运行结果，我们首先编译 code.cpp 文件（内容是获取两个数并输出相加结果）为 code 可执行文件，然后运行安全沙箱执行 code 文件并将 1.in 作为标准输入，1.out 作为标准输出，error.out 作为标准错误，最后我们查看输出和文件得到结果。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/0d320a7def79bf2adfe5cc2d659936ba-0" alt="图片描述"></p><h2 id="实验总结-3"><a href="#实验总结-3" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p><ol><li>了解什么是安全沙箱</li><li>了解 OJ 为什么要使用安全沙箱</li><li>对青岛大学的开源安全沙箱进行简单分析</li><li>对青岛大学的开源安全沙箱进行简单运行测试</li></ol><p>注意：我们在运行安全沙箱必须使用 Root 权限，后续运行项目我们都将使用 Root 权限运行。</p><h1 id="13-判题模块实现"><a href="#13-判题模块实现" class="headerlink" title="13.判题模块实现"></a>13.判题模块实现</h1><h2 id="实验介绍-4"><a href="#实验介绍-4" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验主要实现判题模块，判题模块对多种语言程序进行编译运行并判断程序是否正确。</p><p><strong>注意：本次实验将重新回到 XDOJ 项目，与上一章节无关。</strong></p><p>本次实验涉及到 HttpServer 模块、Control 模块、Judger 模块：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/fd14e2e0e19decaac351932920876f17-0" alt="图片描述"></p><h4 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h4><ul><li>安全沙箱使用</li><li>判题流程</li><li>编程语言环境配置</li></ul><h2 id="判题模块"><a href="#判题模块" class="headerlink" title="判题模块"></a>判题模块</h2><p>判题模块实现了对 C、C++、Java、Python2、Python3、JavaScript、Go 语言的判题。</p><h4 id="判题模块执行流程"><a href="#判题模块执行流程" class="headerlink" title="判题模块执行流程"></a>判题模块执行流程</h4><p>首先对程序进行编译/解释，然后运行程序，多次执行并记录结果直到测试用例执行完，最后返回最终结果。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4f64a46df26df3c72216b44369b3fd94-0" alt="图片描述"></p><h4 id="编程语言的环境配置"><a href="#编程语言的环境配置" class="headerlink" title="编程语言的环境配置"></a>编程语言的环境配置</h4><p>因为安全沙箱需要用到 Root 权限，所以我们需要保证每种语言在 sudo 环境下执行。</p><p>我们通过查看不同语言的编译器/解释器的版本号来了解语言环境是否配置成功。</p><p>蓝桥实验楼的环境需要安装 python2，配置 go 的 sudo 环境。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 gcc 版本号 C</span></span><br><span class="line">sudo gcc -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 g++ 版本号 C++</span></span><br><span class="line">sudo g++ -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 javac java 版本号 Java</span></span><br><span class="line">sudo javac -version</span><br><span class="line">sudo java -version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 python2 版本号 Python2</span></span><br><span class="line">sudo python2 -V</span><br><span class="line">sudo apt install python2 <span class="comment"># 默认没有，请安装</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 python3 版本号 Python3</span></span><br><span class="line">sudo python3 -V</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 nodejs 版本号 JavaScript</span></span><br><span class="line">sudo nodejs -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 go 版本号 Go</span></span><br><span class="line">sudo go version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 go 的 sudo 环境</span></span><br><span class="line">sudo vim /etc/sudoers <span class="comment"># 打开配置文件</span></span><br><span class="line"></span><br><span class="line">:/usr/local/go/bin <span class="comment"># 在secure_path后加入，如下图所示</span></span><br><span class="line"></span><br><span class="line">:wq! <span class="comment"># 强制保存并退出</span></span><br></pre></td></tr></table></figure><p>go 语言环境变量配置：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9ca0f0588cd97ca7f3d9c88b947a336a-0" alt="图片描述"></p><p>若查看版本号没问题，则说明语言的环境配置没有问题。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/12a11dfc676080fe09729ed6d83c975c-0" alt="图片描述"></p><h2 id="实现-Judger-模块"><a href="#实现-Judger-模块" class="headerlink" title="实现 Judger 模块"></a>实现 Judger 模块</h2><p>将整个 Judger.h 文件替换成如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> JUDGER_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> JUDGER_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;jsoncpp/json/json.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Status</span></span><br><span class="line">&#123;</span><br><span class="line">    PJ,  <span class="comment">// PJ &quot;Pending &amp; Judging&quot;</span></span><br><span class="line">    CE,  <span class="comment">// CE &quot;Compile Error&quot;</span></span><br><span class="line">    AC,  <span class="comment">// AC &quot;Accepted&quot;</span></span><br><span class="line">    WA,  <span class="comment">// WA &quot;Wrong Answer&quot;</span></span><br><span class="line">    RE,  <span class="comment">// RE &quot;Runtime Error&quot;</span></span><br><span class="line">    TLE, <span class="comment">// TLE &quot;Time Limit Exceeded&quot;</span></span><br><span class="line">    MLE, <span class="comment">// MLE &quot;Memory Limit Exceeded&quot;</span></span><br><span class="line">    SE   <span class="comment">// SE &quot;System Error&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Judger</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Judger</span>();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        功能：判题函数</span></span><br><span class="line"><span class="comment">        传入数据：Json(SubmitId,ProblemId,JudgeNum,Code,Language,TimeLimit,MemoryLimit)</span></span><br><span class="line"><span class="comment">        传出数据：Json(Status,RunTime,RunMemory,Length,CompilerInfo,</span></span><br><span class="line"><span class="comment">            TestInfo(Status,StandardOutput,PersonalOutput,RunTime,RunMemory))</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">Run</span><span class="params">(Json::Value &amp;runjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// 数据初始化</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Init</span><span class="params">(Json::Value &amp;initjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileSPJ</span><span class="params">()</span></span>; <span class="comment">// 编译SPJ文件</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">GetCompilationFailed</span><span class="params">()</span></span>; <span class="comment">// 获取编译失败的原因</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// -----编译-----</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileC</span><span class="params">()</span></span>; <span class="comment">// 编译C</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileCpp</span><span class="params">()</span></span>; <span class="comment">// 编译C++</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileGo</span><span class="params">()</span></span>; <span class="comment">// 编译Go</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileJava</span><span class="params">()</span></span>; <span class="comment">// 编译Java</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompilePython2</span><span class="params">()</span></span>; <span class="comment">// 编译Python2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompilePython3</span><span class="params">()</span></span>; <span class="comment">// 编译Python3</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">CompileJavaScript</span><span class="params">()</span></span>; <span class="comment">// 编译JavaScript</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ------运行--------</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramC_Cpp</span><span class="params">()</span></span>; <span class="comment">// 运行C或者C++</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramGo</span><span class="params">()</span></span>; <span class="comment">// 运行Go</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramJava</span><span class="params">()</span></span>; <span class="comment">// 运行Java</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramPython2</span><span class="params">()</span></span>; <span class="comment">// 运行Python2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramPython3</span><span class="params">()</span></span>; <span class="comment">// 运行Python3</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgramJavaScript</span><span class="params">()</span></span>; <span class="comment">// 运行JavaScript</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">RunProgram</span><span class="params">(<span class="keyword">struct</span> config *conf)</span></span>; <span class="comment">// 运行程序</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">JudgmentResult</span><span class="params">(<span class="keyword">struct</span> result *res, std::string &amp;index)</span></span>; <span class="comment">// 判断结果</span></span><br><span class="line"></span><br><span class="line">    <span class="function">Json::Value <span class="title">Done</span><span class="params">()</span></span>; <span class="comment">// 返回结果</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Json::Value m_resjson; <span class="comment">// 存储运行结果的Json</span></span><br><span class="line"></span><br><span class="line">    std::string RUN_PATH;  <span class="comment">// 运行的路径</span></span><br><span class="line">    std::string DATA_PATH; <span class="comment">// 存储数据的路径</span></span><br><span class="line">    <span class="type">bool</span> m_isspj;          <span class="comment">// 是否有SPJ文件</span></span><br><span class="line"></span><br><span class="line">    std::string m_submitid;  <span class="comment">// 运行ID</span></span><br><span class="line">    std::string m_problemid; <span class="comment">// 题目ID</span></span><br><span class="line">    <span class="type">int</span> m_judgenum;          <span class="comment">// 测试用例数目</span></span><br><span class="line">    std::string m_code;      <span class="comment">// 代码</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_result;           <span class="comment">// 运行结果</span></span><br><span class="line">    std::string m_reason;   <span class="comment">// 错误原因</span></span><br><span class="line">    std::string m_command;  <span class="comment">// 命令（中间变量）</span></span><br><span class="line">    std::string m_language; <span class="comment">// 测评语言</span></span><br><span class="line"></span><br><span class="line">    std::string m_length; <span class="comment">// 文件长度</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_timelimit;    <span class="comment">// 时间限制</span></span><br><span class="line">    <span class="type">long</span> m_memorylimit; <span class="comment">// 空间限制</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_maxtimelimit;    <span class="comment">// 最大时间限制</span></span><br><span class="line">    <span class="type">long</span> m_maxmemorylimie; <span class="comment">// 最大空间限制</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> m_runtime;    <span class="comment">// 运行时间</span></span><br><span class="line">    <span class="type">long</span> m_runmemory; <span class="comment">// 运行空间</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>将整个 Judger.cpp 文件替换成如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Judger.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;../include/runner.h&quot;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 获取文件大小</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">GetFileSize</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *fileName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (fileName == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">stat</span> statbuf;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">stat</span>(fileName, &amp;statbuf);</span><br><span class="line"></span><br><span class="line">    <span class="type">size_t</span> filesize = statbuf.st_size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> filesize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Judger::<span class="built_in">Judger</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Judger::Run</span><span class="params">(Json::Value &amp;runjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 初始化数据</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Init</span>(runjson))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 编译 运行</span></span><br><span class="line">    <span class="keyword">if</span> (m_language == <span class="string">&quot;C&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompileC</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramC_Cpp</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;C++&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompileCpp</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramC_Cpp</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Go&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompileGo</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramGo</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Java&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompileJava</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramJava</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Python2&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompilePython2</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramPython2</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Python3&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompilePython3</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramPython3</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;JavaScript&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">CompileJavaScript</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">RunProgramJavaScript</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Done</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::Init</span><span class="params">(Json::Value &amp;initjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 初始化数据</span></span><br><span class="line">    <span class="comment">// Json(SubmitId,ProblemId,JudgeNum,Code,Language,TimeLimit,MemoryLimit)</span></span><br><span class="line">    m_submitid = initjson[<span class="string">&quot;SubmitId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    m_problemid = initjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    m_code = initjson[<span class="string">&quot;Code&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">    m_judgenum = initjson[<span class="string">&quot;JudgeNum&quot;</span>].<span class="built_in">asInt</span>();</span><br><span class="line">    m_timelimit = initjson[<span class="string">&quot;TimeLimit&quot;</span>].<span class="built_in">asInt</span>();</span><br><span class="line">    m_memorylimit = initjson[<span class="string">&quot;MemoryLimit&quot;</span>].<span class="built_in">asLargestInt</span>() * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    m_language = initjson[<span class="string">&quot;Language&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    m_maxtimelimit = m_timelimit * <span class="number">2</span>;</span><br><span class="line">    m_maxmemorylimie = m_memorylimit * <span class="number">2</span>;</span><br><span class="line">    m_result = PJ;</span><br><span class="line">    m_reason = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    m_runmemory = <span class="number">0</span>;</span><br><span class="line">    m_runtime = <span class="number">0</span>;</span><br><span class="line">    m_isspj = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    RUN_PATH = <span class="string">&quot;./&quot;</span> + m_submitid + <span class="string">&quot;/&quot;</span>;</span><br><span class="line">    DATA_PATH = <span class="string">&quot;../../problemdata/&quot;</span> + m_problemid + <span class="string">&quot;/&quot;</span>;</span><br><span class="line"></span><br><span class="line">    m_resjson.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建中间文件夹</span></span><br><span class="line">    m_command = <span class="string">&quot;mkdir &quot;</span> + m_submitid;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将代码输出到文件中</span></span><br><span class="line">    ofstream outfile;</span><br><span class="line">    <span class="keyword">if</span> (m_language == <span class="string">&quot;C&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.c&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;C++&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.cpp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Go&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.go&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Java&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;Main.java&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Python2&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.py&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;Python3&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.py&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (m_language == <span class="string">&quot;JavaScript&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;main.js&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    outfile.<span class="built_in">open</span>(m_command.<span class="built_in">data</span>());</span><br><span class="line">    <span class="keyword">if</span> (!outfile.<span class="built_in">is_open</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    outfile &lt;&lt; m_code.<span class="built_in">data</span>();</span><br><span class="line">    outfile.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    m_length = <span class="built_in">to_string</span>(<span class="built_in">GetFileSize</span>(m_command.<span class="built_in">data</span>())) + <span class="string">&quot;B&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 编译spj文件</span></span><br><span class="line">    <span class="built_in">CompileSPJ</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileSPJ</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 如果存在可执行文件spj</span></span><br><span class="line">    m_command = DATA_PATH + <span class="string">&quot;spj&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_isspj = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果不存在spj.cpp文件</span></span><br><span class="line">    m_command = DATA_PATH + <span class="string">&quot;spj.cpp&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 编译SPJ文件</span></span><br><span class="line">    m_command = <span class="string">&quot;timeout 10 g++ &quot;</span> + DATA_PATH + <span class="string">&quot;spj.cpp -o &quot;</span> + DATA_PATH + <span class="string">&quot;spj -O2 -std=c++14&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果存在可执行文件spj</span></span><br><span class="line">    m_command = DATA_PATH + <span class="string">&quot;spj&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_isspj = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::GetCompilationFailed</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ifstream infile;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只要编译就会有这个文件</span></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    infile.<span class="built_in">open</span>(m_command.<span class="built_in">data</span>());</span><br><span class="line">    <span class="comment">// 读取全部信息</span></span><br><span class="line">    <span class="function">string <span class="title">reason</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infile)),</span></span></span><br><span class="line"><span class="params"><span class="function">                  (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">    m_reason = reason;</span><br><span class="line">    m_result = CE;</span><br><span class="line">    infile.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileC</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行gcc编译</span></span><br><span class="line">    m_command = <span class="string">&quot;timeout 10 gcc &quot;</span> + RUN_PATH + <span class="string">&quot;main.c -fmax-errors=3 -o &quot;</span> + RUN_PATH + <span class="string">&quot;main -O2 -std=c11 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileCpp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行g++编译</span></span><br><span class="line">    m_command = <span class="string">&quot;timeout 10 g++ &quot;</span> + RUN_PATH + <span class="string">&quot;main.cpp -fmax-errors=3 -o &quot;</span> + RUN_PATH + <span class="string">&quot;main -O2 -std=c++11 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileGo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行go编译</span></span><br><span class="line">    m_command = <span class="string">&quot;go build -o &quot;</span> + RUN_PATH + <span class="string">&quot;main &quot;</span> + RUN_PATH + <span class="string">&quot;main.go 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileJava</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行java编译</span></span><br><span class="line">    m_command = <span class="string">&quot;javac &quot;</span> + RUN_PATH + <span class="string">&quot;Main.java -d &quot;</span> + RUN_PATH + <span class="string">&quot;Main 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;Main&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompilePython2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行Python2编译</span></span><br><span class="line">    m_command = <span class="string">&quot;python2 -m py_compile &quot;</span> + RUN_PATH + <span class="string">&quot;main.py 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;main.pyc&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompilePython3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行Python3编译</span></span><br><span class="line">    m_command = <span class="string">&quot;python3 -m py_compile &quot;</span> + RUN_PATH + <span class="string">&quot;main.py 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;__pycache__/main.cpython-38.pyc&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::CompileJavaScript</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 进行JavaScript编译</span></span><br><span class="line">    m_command = <span class="string">&quot;/usr/bin/nodejs --check &quot;</span> + RUN_PATH + <span class="string">&quot;main.js 2&gt;&quot;</span> + RUN_PATH + <span class="string">&quot;compileinfo.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span>不能返回错误，因为肯定有这个文件</span></span><br><span class="line">    m_command = RUN_PATH + <span class="string">&quot;main.js&quot;</span>;</span><br><span class="line">    <span class="comment">// 编译失败</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(m_command.<span class="built_in">data</span>(), F_OK) == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 返回编译失败原因</span></span><br><span class="line">        <span class="built_in">GetCompilationFailed</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramC_Cpp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit;</span><br><span class="line">    conf.max_memory = m_maxmemorylimie;</span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = RUN_PATH + <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = (<span class="type">char</span> *)<span class="string">&quot;c_cpp&quot;</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramGo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit;</span><br><span class="line">    conf.max_memory = m_maxmemorylimie;</span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = RUN_PATH + <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = (<span class="type">char</span> *)<span class="string">&quot;golang&quot;</span>;</span><br><span class="line">    conf.memory_limit_check_only = <span class="number">1</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line">    conf.env[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANG=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANGUAGE=en_US:en&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">2</span>] = (<span class="type">char</span> *)<span class="string">&quot;LC_ALL=en_US.UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramJava</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line">    <span class="comment">// Java的空间限制为其正确的五倍</span></span><br><span class="line">    m_memorylimit = m_memorylimit * <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit * <span class="number">3</span>;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit * <span class="number">3</span>;</span><br><span class="line">    conf.max_memory = <span class="number">-1</span>; <span class="comment">// Java不能限制内存，在虚拟机中限制</span></span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = <span class="string">&quot;/usr/bin/java&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = <span class="literal">nullptr</span>;</span><br><span class="line">    conf.memory_limit_check_only = <span class="number">1</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line"></span><br><span class="line">    string exe_file = RUN_PATH + <span class="string">&quot;Main&quot;</span>;</span><br><span class="line">    string tmp_maxmemory = <span class="string">&quot;-XX:MaxRAM=&quot;</span> + <span class="built_in">to_string</span>(m_memorylimit) + <span class="string">&quot;k&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;/usr/bin/java&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;-cp&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">2</span>] = (<span class="type">char</span> *)exe_file.<span class="built_in">data</span>();</span><br><span class="line">    conf.args[<span class="number">3</span>] = (<span class="type">char</span> *)tmp_maxmemory.<span class="built_in">data</span>();</span><br><span class="line">    conf.args[<span class="number">4</span>] = (<span class="type">char</span> *)<span class="string">&quot;-Djava.security.policy==policy&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">5</span>] = (<span class="type">char</span> *)<span class="string">&quot;-Djava.awt.headless=true&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">6</span>] = (<span class="type">char</span> *)<span class="string">&quot;Main&quot;</span>;</span><br><span class="line"></span><br><span class="line">    conf.env[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANG=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANGUAGE=en_US:en&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">2</span>] = (<span class="type">char</span> *)<span class="string">&quot;LC_ALL=en_US.UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramPython2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_memory = m_maxmemorylimie * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = <span class="string">&quot;/usr/bin/python2&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = (<span class="type">char</span> *)<span class="string">&quot;general&quot;</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line"></span><br><span class="line">    string exe_file = RUN_PATH + <span class="string">&quot;main.pyc&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;/usr/bin/python2&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">1</span>] = (<span class="type">char</span> *)exe_file.<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">    conf.env[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANG=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANGUAGE=en_US:en&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">2</span>] = (<span class="type">char</span> *)<span class="string">&quot;LC_ALL=en_US.UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramPython3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_memory = m_maxmemorylimie * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = <span class="string">&quot;/usr/bin/python3&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = (<span class="type">char</span> *)<span class="string">&quot;general&quot;</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line"></span><br><span class="line">    string exe_file = RUN_PATH + <span class="string">&quot;__pycache__/main.cpython-38.pyc&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;/usr/bin/python3&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">1</span>] = (<span class="type">char</span> *)exe_file.<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">    conf.env[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANG=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANGUAGE=en_US:en&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">2</span>] = (<span class="type">char</span> *)<span class="string">&quot;LC_ALL=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">3</span>] = (<span class="type">char</span> *)<span class="string">&quot;PYTHONIOENCODING=utf-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgramJavaScript</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建结构体</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">config</span> conf;</span><br><span class="line"></span><br><span class="line">    conf.max_cpu_time = m_timelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_real_time = m_maxtimelimit * <span class="number">2</span>;</span><br><span class="line">    conf.max_memory = m_maxmemorylimie * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    conf.max_process_number = <span class="number">200</span>;</span><br><span class="line">    conf.max_output_size = <span class="number">-1</span>;</span><br><span class="line">    conf.max_stack = <span class="number">32</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    string exe_path = <span class="string">&quot;/usr/bin/nodejs&quot;</span>;</span><br><span class="line">    conf.exe_path = (<span class="type">char</span> *)exe_path.<span class="built_in">data</span>();</span><br><span class="line">    string error_path = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">    conf.error_path = (<span class="type">char</span> *)error_path.<span class="built_in">data</span>();</span><br><span class="line">    string log_path = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">    conf.log_path = (<span class="type">char</span> *)log_path.<span class="built_in">data</span>();</span><br><span class="line">    conf.seccomp_rule_name = (<span class="type">char</span> *)<span class="string">&quot;node&quot;</span>;</span><br><span class="line">    conf.memory_limit_check_only = <span class="number">1</span>;</span><br><span class="line">    conf.uid = <span class="number">0</span>;</span><br><span class="line">    conf.gid = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(conf.args, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.args));</span><br><span class="line">    <span class="built_in">memset</span>(conf.env, <span class="number">0</span>, <span class="built_in">sizeof</span>(conf.env));</span><br><span class="line"></span><br><span class="line">    string exe_file = RUN_PATH + <span class="string">&quot;main.js&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;/usr/bin/nodejs&quot;</span>;</span><br><span class="line">    conf.args[<span class="number">1</span>] = (<span class="type">char</span> *)exe_file.<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">    conf.env[<span class="number">0</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANG=en_US.UTF-8&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">1</span>] = (<span class="type">char</span> *)<span class="string">&quot;LANGUAGE=en_US:en&quot;</span>;</span><br><span class="line">    conf.env[<span class="number">2</span>] = (<span class="type">char</span> *)<span class="string">&quot;LC_ALL=en_US.UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">RunProgram</span>(&amp;conf);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::RunProgram</span><span class="params">(<span class="keyword">struct</span> config *conf)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">result</span> res;</span><br><span class="line">    <span class="comment">// 根据测试数量进行判定</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m_judgenum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string index = <span class="built_in">to_string</span>(i);</span><br><span class="line">        string input_path = DATA_PATH + index + <span class="string">&quot;.in&quot;</span>;</span><br><span class="line">        conf-&gt;input_path = (<span class="type">char</span> *)input_path.<span class="built_in">data</span>();</span><br><span class="line">        string output_path = RUN_PATH + index + <span class="string">&quot;.out&quot;</span>;</span><br><span class="line">        conf-&gt;output_path = (<span class="type">char</span> *)output_path.<span class="built_in">data</span>();</span><br><span class="line">        <span class="comment">// 执行程序</span></span><br><span class="line">        <span class="built_in">run</span>(conf, &amp;res);</span><br><span class="line">        <span class="comment">// printf(&quot;cpu time is %d,real time is %d,memory is %ld,signal is %d,result is %d\n&quot;, res.cpu_time, res.real_time, res.memory, res.signal, res.result);</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">JudgmentResult</span>(&amp;res, index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Judger::JudgmentResult</span><span class="params">(<span class="keyword">struct</span> result *res, string &amp;index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value testinfo; <span class="comment">// 保存本次结果</span></span><br><span class="line">    <span class="comment">// 获取最大时间和空间</span></span><br><span class="line">    m_runtime = <span class="built_in">max</span>(m_runtime, res-&gt;cpu_time);</span><br><span class="line">    m_runmemory = <span class="built_in">max</span>(m_runmemory, res-&gt;memory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取运行时间和运行内存的数据</span></span><br><span class="line">    testinfo[<span class="string">&quot;RunTime&quot;</span>] = <span class="built_in">to_string</span>(res-&gt;cpu_time) + <span class="string">&quot;MS&quot;</span>;</span><br><span class="line">    testinfo[<span class="string">&quot;RunMemory&quot;</span>] = <span class="built_in">to_string</span>(res-&gt;memory / <span class="number">1024</span> / <span class="number">1024</span>) + <span class="string">&quot;MB&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取标准输入</span></span><br><span class="line">    ifstream infile;</span><br><span class="line">    string indatapath = DATA_PATH + index + <span class="string">&quot;.in&quot;</span>;</span><br><span class="line">    infile.<span class="built_in">open</span>(indatapath.<span class="built_in">data</span>());</span><br><span class="line">    <span class="function">string <span class="title">standardinput</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infile)),</span></span></span><br><span class="line"><span class="params"><span class="function">                         (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">    infile.<span class="built_in">close</span>();</span><br><span class="line">    <span class="comment">// 获取标准答案</span></span><br><span class="line">    ifstream infile1;</span><br><span class="line">    string datapath = DATA_PATH + index + <span class="string">&quot;.out&quot;</span>;</span><br><span class="line">    infile1.<span class="built_in">open</span>(datapath.<span class="built_in">data</span>());</span><br><span class="line">    <span class="function">string <span class="title">standardanswer</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infile1)),</span></span></span><br><span class="line"><span class="params"><span class="function">                          (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">    infile1.<span class="built_in">close</span>();</span><br><span class="line">    <span class="comment">// 获取计算答案</span></span><br><span class="line">    ifstream infile2;</span><br><span class="line">    string runpath = RUN_PATH + index + <span class="string">&quot;.out&quot;</span>;</span><br><span class="line">    infile2.<span class="built_in">open</span>(runpath.<span class="built_in">data</span>());</span><br><span class="line">    <span class="function">string <span class="title">calculateanswer</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infile2)),</span></span></span><br><span class="line"><span class="params"><span class="function">                           (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">    infile2.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    testinfo[<span class="string">&quot;StandardInput&quot;</span>] = standardinput;</span><br><span class="line">    testinfo[<span class="string">&quot;StandardOutput&quot;</span>] = standardanswer;</span><br><span class="line">    testinfo[<span class="string">&quot;PersonalOutput&quot;</span>] = calculateanswer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断结果</span></span><br><span class="line">    <span class="keyword">if</span> (res-&gt;result == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 判断是否超出时间限制</span></span><br><span class="line">        <span class="keyword">if</span> (res-&gt;cpu_time &gt; m_timelimit)</span><br><span class="line">        &#123;</span><br><span class="line">            m_result = TLE;</span><br><span class="line">            testinfo[<span class="string">&quot;Status&quot;</span>] = TLE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;memory &gt; m_memorylimit)</span><br><span class="line">        &#123;</span><br><span class="line">            m_result = MLE;</span><br><span class="line">            testinfo[<span class="string">&quot;Status&quot;</span>] = MLE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (m_isspj) <span class="comment">// SPJ判断</span></span><br><span class="line">        &#123;</span><br><span class="line">            m_command = DATA_PATH + <span class="string">&quot;spj &quot;</span> + indatapath + <span class="string">&quot; &quot;</span> + datapath + <span class="string">&quot; &quot;</span> + runpath;</span><br><span class="line">            testinfo[<span class="string">&quot;Status&quot;</span>] = AC;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">system</span>(m_command.<span class="built_in">data</span>()) != <span class="number">0</span>) <span class="comment">// 如果答案错误</span></span><br><span class="line">            &#123;</span><br><span class="line">                testinfo[<span class="string">&quot;Status&quot;</span>] = WA;</span><br><span class="line">                m_result = WA;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// 普通比较</span></span><br><span class="line">        &#123;</span><br><span class="line">            testinfo[<span class="string">&quot;Status&quot;</span>] = AC;</span><br><span class="line">            <span class="comment">// 比较答案（比较字符串）</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">strcmp</span>(standardanswer.<span class="built_in">data</span>(), calculateanswer.<span class="built_in">data</span>()) != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                testinfo[<span class="string">&quot;Status&quot;</span>] = WA;</span><br><span class="line">                m_result = WA;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;result == <span class="number">1</span>) <span class="comment">// CPU_TIME_LIMIT_EXCEEDED</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_result = TLE;</span><br><span class="line">        testinfo[<span class="string">&quot;Status&quot;</span>] = TLE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;result == <span class="number">2</span>) <span class="comment">// REAL_TIME_LIMIT_EXCEEDED</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_result = TLE;</span><br><span class="line">        testinfo[<span class="string">&quot;Status&quot;</span>] = TLE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;result == <span class="number">3</span>) <span class="comment">// MEMORY_LIMIT_EXCEEDED</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_result = MLE;</span><br><span class="line">        testinfo[<span class="string">&quot;Status&quot;</span>] = MLE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;result == <span class="number">4</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取失败原因</span></span><br><span class="line">        ifstream infile;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;error.out&quot;</span>;</span><br><span class="line">        infile.<span class="built_in">open</span>(m_command.<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">        <span class="function">string <span class="title">reason</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infile)),</span></span></span><br><span class="line"><span class="params"><span class="function">                      (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line"></span><br><span class="line">        m_reason = reason;</span><br><span class="line">        m_result = RE;</span><br><span class="line">        testinfo[<span class="string">&quot;Status&quot;</span>] = RE;</span><br><span class="line">        infile.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (res-&gt;result == <span class="number">5</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取失败原因</span></span><br><span class="line">        ifstream infile;</span><br><span class="line">        m_command = RUN_PATH + <span class="string">&quot;judger.log&quot;</span>;</span><br><span class="line">        infile.<span class="built_in">open</span>(m_command.<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span> reason[<span class="number">100</span>];</span><br><span class="line">        infile.<span class="built_in">getline</span>(reason, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">        m_reason = reason;</span><br><span class="line">        m_result = SE;</span><br><span class="line">        testinfo[<span class="string">&quot;Status&quot;</span>] = SE;</span><br><span class="line">        infile.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    m_resjson[<span class="string">&quot;TestInfo&quot;</span>].<span class="built_in">append</span>(testinfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Judger::Done</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 返回：Json(Result,Reason,RunTime,RunMemory)</span></span><br><span class="line">    <span class="keyword">if</span> (m_result == PJ)</span><br><span class="line">        m_result = AC;</span><br><span class="line"></span><br><span class="line">    m_resjson[<span class="string">&quot;SubmitId&quot;</span>] = m_submitid;</span><br><span class="line">    m_resjson[<span class="string">&quot;Status&quot;</span>] = m_result;</span><br><span class="line">    m_resjson[<span class="string">&quot;ComplierInfo&quot;</span>] = m_reason;</span><br><span class="line">    m_resjson[<span class="string">&quot;RunTime&quot;</span>] = <span class="built_in">to_string</span>(m_runtime) + <span class="string">&quot;MS&quot;</span>;</span><br><span class="line">    m_resjson[<span class="string">&quot;RunMemory&quot;</span>] = <span class="built_in">to_string</span>(<span class="built_in">int</span>(m_runmemory / <span class="number">1024</span> / <span class="number">1024</span>)) + <span class="string">&quot;MB&quot;</span>;</span><br><span class="line">    m_resjson[<span class="string">&quot;Length&quot;</span>] = m_length;</span><br><span class="line">    <span class="comment">// 删除中间文件夹</span></span><br><span class="line">    m_command = <span class="string">&quot;rm -rf &quot;</span> + RUN_PATH;</span><br><span class="line">    <span class="built_in">system</span>(m_command.<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> m_resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块-3"><a href="#实现-Control-模块-3" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>在 Control.h 文件中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回判题信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">GetJudgeCode</span><span class="params">(Json::Value judgejson)</span></span>;</span><br></pre></td></tr></table></figure><p>在 Control.cpp 文件中添加函数定义：</p><p>执行一次代码需要有如下步骤：</p><ol><li>添加状态记录，设置为 Pending 状态。</li><li>运行代码并获得结果。</li><li>更新状态记录。</li><li>更新题目的每种状态的数量。</li><li>更新用户的提交次数，如果 AC 根据情况更新用户信息。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::GetJudgeCode</span><span class="params">(Json::Value judgejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="comment">// 传入Json(ProblemId,UserId,UserNickName,Code,Language,TimeLimit,MemoryLimit,JudgeNum,ProblemTitle)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加状态记录</span></span><br><span class="line">    <span class="comment">// 传入：Json(ProblemId,UserId,UserNickName,ProblemTitle,Language,Code);</span></span><br><span class="line">    Json::Value insertjson;</span><br><span class="line">    insertjson[<span class="string">&quot;ProblemId&quot;</span>] = judgejson[<span class="string">&quot;ProblemId&quot;</span>];</span><br><span class="line">    insertjson[<span class="string">&quot;UserId&quot;</span>] = judgejson[<span class="string">&quot;UserId&quot;</span>];</span><br><span class="line">    insertjson[<span class="string">&quot;UserNickName&quot;</span>] = judgejson[<span class="string">&quot;UserNickName&quot;</span>];</span><br><span class="line">    insertjson[<span class="string">&quot;ProblemTitle&quot;</span>] = judgejson[<span class="string">&quot;ProblemTitle&quot;</span>];</span><br><span class="line">    insertjson[<span class="string">&quot;Language&quot;</span>] = judgejson[<span class="string">&quot;Language&quot;</span>];</span><br><span class="line">    insertjson[<span class="string">&quot;Code&quot;</span>] = judgejson[<span class="string">&quot;Code&quot;</span>];</span><br><span class="line"></span><br><span class="line">    string submitid = StatusRecordList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertStatusRecord</span>(insertjson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (submitid == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;系统出错！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行代码</span></span><br><span class="line">    <span class="comment">// Json(SubmitId,ProblemId,JudgeNum,Code,Language,TimeLimit,MemoryLimit)</span></span><br><span class="line">    Json::Value runjson;</span><br><span class="line">    runjson[<span class="string">&quot;Code&quot;</span>] = judgejson[<span class="string">&quot;Code&quot;</span>];</span><br><span class="line">    runjson[<span class="string">&quot;SubmitId&quot;</span>] = submitid;</span><br><span class="line">    runjson[<span class="string">&quot;ProblemId&quot;</span>] = judgejson[<span class="string">&quot;ProblemId&quot;</span>];</span><br><span class="line">    runjson[<span class="string">&quot;Language&quot;</span>] = judgejson[<span class="string">&quot;Language&quot;</span>];</span><br><span class="line">    runjson[<span class="string">&quot;JudgeNum&quot;</span>] = judgejson[<span class="string">&quot;JudgeNum&quot;</span>];</span><br><span class="line">    runjson[<span class="string">&quot;TimeLimit&quot;</span>] = judgejson[<span class="string">&quot;TimeLimit&quot;</span>];</span><br><span class="line">    runjson[<span class="string">&quot;MemoryLimit&quot;</span>] = judgejson[<span class="string">&quot;MemoryLimit&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建判题对象</span></span><br><span class="line">    Judger judger;</span><br><span class="line">    Json::Value json = judger.<span class="built_in">Run</span>(runjson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新状态信息</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        传入：Json(SubmitId,Status,RunTime,RunMemory,Length,ComplierInfo,</span></span><br><span class="line"><span class="comment">        TestInfo[(Status,StandardOutput,PersonalOutput,RunTime,RunMemory)])</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    StatusRecordList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateStatusRecord</span>(json);</span><br><span class="line">    <span class="comment">// 更新题目的状态</span></span><br><span class="line">    Json::Value updatejson;</span><br><span class="line">    updatejson[<span class="string">&quot;ProblemId&quot;</span>] = judgejson[<span class="string">&quot;ProblemId&quot;</span>];</span><br><span class="line">    updatejson[<span class="string">&quot;Status&quot;</span>] = json[<span class="string">&quot;Status&quot;</span>];</span><br><span class="line">    ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateProblemStatusNum</span>(updatejson);</span><br><span class="line"></span><br><span class="line">    updatejson[<span class="string">&quot;UserId&quot;</span>] = judgejson[<span class="string">&quot;UserId&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新用户的状态</span></span><br><span class="line">    <span class="keyword">if</span> (UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateUserProblemInfo</span>(updatejson))</span><br><span class="line">        resjson[<span class="string">&quot;IsFirstAC&quot;</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        resjson[<span class="string">&quot;IsFirstAC&quot;</span>] = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">    resjson[<span class="string">&quot;Status&quot;</span>] = json[<span class="string">&quot;Status&quot;</span>];</span><br><span class="line">    resjson[<span class="string">&quot;ComplierInfo&quot;</span>] = json[<span class="string">&quot;ComplierInfo&quot;</span>];</span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块-3"><a href="#实现-HttpServer-模块-3" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>在 HttpServer.cpp 中 Run 函数添加：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 提交代码</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/problemcode&quot;</span>, doPostCode);</span><br></pre></td></tr></table></figure><p>在 HttpServer.cpp 文件添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前端提交代码进行判定并返回结果</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doPostCode</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">GetJudgeCode</span>(jsonvalue);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 CMakeLists.txt 文件中添加：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查找库的路径</span><br><span class="line"><span class="built_in">link_directories</span>($&#123;CMAKE_SOURCE_DIR&#125;/lib)</span><br></pre></td></tr></table></figure><p>在 CMakeLists.txt 文件的链接库中添加 <code>judger</code> 参数。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b5a2e176879bb7815904b1d17b58adbf-0" alt="图片描述"></p><p>添加安全沙箱的头文件和库文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载文件</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/judgerlibrary.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压文件</span></span><br><span class="line">unzip -d ./judgerlibrary judgerlibrary.zip</span><br></pre></td></tr></table></figure><p>将文件中头文件放在项目的 include 文件夹中，创建 lib 文件夹并将库文件放在里面。（.h 是头文件，.so 是库文件），include 和 lib 文件夹是同级目录。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/a6acbbeb4dc10368a07b10c85528f5be-0" alt="图片描述"></p><h2 id="运行-3"><a href="#运行-3" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">sudo ./xdoj</span><br></pre></td></tr></table></figure><p>下载关于 A+B Problem 题目的所有语言版本的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/A%2BB%20Problem%20Code.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./a+bcode A+B\ Problem\ Code.zip</span><br></pre></td></tr></table></figure><p>我们点击进入题库中，选择 A+B Problem 题目，使用每种语言进行测试一下。</p><p>点击测评，查看结果。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e72714150f06dc8967359be998e9bfac-0" alt="图片描述"></p><h2 id="实验总结-4"><a href="#实验总结-4" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验主要实现了判题模块并对多种语言环境进行检查和配置。</p><p>判题模块对代码进行保存，编译/检查代码是否错误，通过安全沙箱执行代码，最后根据运行结果与安全沙箱的结果判定是否通过。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code17.zip</span><br></pre></td></tr></table></figure><h1 id="14-redis数据库环境搭建"><a href="#14-redis数据库环境搭建" class="headerlink" title="14.redis数据库环境搭建"></a>14.redis数据库环境搭建</h1><h2 id="实验介绍-5"><a href="#实验介绍-5" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验首先会安装 Redis 数据库，然后安装 VSCode 插件并连接数据库进行简单命令操作，接着安装 Redis 的客户端 redis-plus-plus，最后使用 C++ 代码连接 Redis 数据库进行测试。</p><h4 id="知识点-5"><a href="#知识点-5" class="headerlink" title="知识点"></a>知识点</h4><ul><li>安装 Redis 数据库</li><li>安装 VSCode 插件</li><li>安装 redis-plus-plus</li><li>Redis 数据库简单使用</li></ul><h2 id="Redis-数据库安装"><a href="#Redis-数据库安装" class="headerlink" title="Redis 数据库安装"></a>Redis 数据库安装</h2><p>执行下面代码安装 Redis 数据库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载redis</span></span><br><span class="line">wget https://download.redis.io/releases/redis-6.0.9.tar.gz</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xzf redis-6.0.9.tar.gz</span><br><span class="line"><span class="comment"># 进入redis文件夹</span></span><br><span class="line"><span class="built_in">cd</span> redis-6.0.9</span><br><span class="line"><span class="comment"># 编译并安装</span></span><br><span class="line">make &amp;&amp; sudo make install</span><br><span class="line"><span class="comment"># 编辑conf文件</span></span><br><span class="line">vi redis.conf</span><br><span class="line"></span><br><span class="line">daemonize <span class="built_in">yes</span> <span class="comment"># 将224行的daemonize变为yes，打开守护进程</span></span><br><span class="line"><span class="comment"># 返回上一级路径</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># 移动文件夹到/usr/local路径下</span></span><br><span class="line">sudo <span class="built_in">mv</span> redis-6.0.9 /usr/local</span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br></pre></td></tr></table></figure><p>安装 VSCode 插件：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/6a0bf4c96107e1125b65f731dd5d58ae-0" alt="图片描述"></p><p>使用插件连接 redis 数据库：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b3962f5f2ab23918868de809f6480dca-0" alt="图片描述"></p><p>打开插件中的命令行：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b08519b57b2f9015939274c446657eae-0" alt="图片描述"></p><p>下面执行几个命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置键值对&lt;name,jack&gt;</span></span><br><span class="line"><span class="built_in">set</span> name jack</span><br><span class="line"><span class="comment"># 设置键值对&lt;age,10&gt;</span></span><br><span class="line"><span class="built_in">set</span> age 10</span><br><span class="line"><span class="comment"># 设置键值对&lt;name2,jack&gt;</span></span><br><span class="line"><span class="built_in">set</span> name2 jack</span><br><span class="line"><span class="comment"># 删除键为name2</span></span><br><span class="line">del name2</span><br><span class="line"><span class="comment"># 设置键值对&lt;k1,v1&gt;并设置过期时间20秒</span></span><br><span class="line">setex k1 20 v1</span><br><span class="line"><span class="comment"># 查询键为k1的过期时间</span></span><br><span class="line">ttl k1</span><br><span class="line"><span class="comment"># 将键为age的值自增1</span></span><br><span class="line">incr age</span><br></pre></td></tr></table></figure><p>Redis 通用命令介绍：</p><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>KEYS</td><td>查看符合模板的所有 key</td></tr><tr><td>DEL</td><td>删除一个指定的 key</td></tr><tr><td>EXISTS</td><td>判断 key 是否存在</td></tr><tr><td>EXPIRE</td><td>给一个 key 设置有效期，有效期到期时该 key 会被自动删除</td></tr><tr><td>TTL</td><td>查看一个 KEY 的剩余有效期</td></tr><tr><td>HTLP</td><td>查看帮助文档</td></tr></tbody></table></div><p>String 类型命令介绍：</p><div class="table-container"><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>SET</td><td>添加或者修改已经存在的一个 String 类型的键值对</td></tr><tr><td>GET</td><td>根据 key 获取 String 类型的 value</td></tr><tr><td>MSET</td><td>批量添加多个 String 类型的键值对</td></tr><tr><td>MGET</td><td>根据多个 key 获取多个 String 类型的 value</td></tr><tr><td>INCR</td><td>让一个整型的 key 自增 1</td></tr><tr><td>INCRBY</td><td>让一个整型的 key 自增并指定步长</td></tr><tr><td>INCRBYFLOAT</td><td>让一个浮点类型的数字自增并指定步长</td></tr><tr><td>SETNX</td><td>添加一个 String 类型的键值对，前提是这个 key 不存在，否则不执行</td></tr><tr><td>SETEX</td><td>添加一个 String 类型的键值对，并且指定有效期</td></tr></tbody></table></div><h2 id="Redis-客户端-redis-plus-plus-安装"><a href="#Redis-客户端-redis-plus-plus-安装" class="headerlink" title="Redis 客户端 redis-plus-plus 安装"></a>Redis 客户端 redis-plus-plus 安装</h2><p>官网：<a href="https://github.com/sewenew/redis-plus-plus">https://github.com/sewenew/redis-plus-plus</a></p><p>执行下面命令安装 redis-plus-plus：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装hiredis</span></span><br><span class="line">sudo apt-get install libhiredis-dev</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/sewenew/redis-plus-plus.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> redis-plus-plus</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>如果 git clone 连接不上，执行下面代码下载提前下载好的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/redis-plus-plus.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./redis-plus-plus ./redis-plus-plus.zip</span><br></pre></td></tr></table></figure><p>下载代码，使用 C++ 代码连接 Redis 并测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code18.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./code18 code18.zip</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> code18</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">./app</span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b31a01c37ebe24a8073e7f487ee267c8-0" alt="图片描述"></p><h2 id="实验总结-5"><a href="#实验总结-5" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p><ol><li>安装 Redis 数据库并启动</li><li>安装 VSCode 插件并连接 Redis 数据库</li><li>使用命令操作 Redis 数据库</li><li>安装 Redis 数据库客户端 edis-plus-plus</li><li>通过 C++ 代码操作 Redis 数据库</li></ol><p>后续将会使用 Redis 数据库来完成 Token 鉴权和缓存。</p><h1 id="15-Token鉴权实现"><a href="#15-Token鉴权实现" class="headerlink" title="15.Token鉴权实现"></a>15.Token鉴权实现</h1><h2 id="实验介绍-6"><a href="#实验介绍-6" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验主要实现 Token 鉴权，系统通过 Token 即可获得用户权限，并对越权行为进行限制。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、UserList 模块、MongoDB 模块、Redis 模块。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b6a12536ec2937cd5a90f2a4c54295a0-0" alt="图片描述"></p><h4 id="知识点-6"><a href="#知识点-6" class="headerlink" title="知识点"></a>知识点</h4><ul><li>Token 鉴权</li><li>Redis 数据库设置过期时间</li><li>权限限制</li></ul><h2 id="实现-MongoDB-模块-3"><a href="#实现-MongoDB-模块-3" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>在 MongoDataBase.h 中添加函数声明：</p><p>LoginUserByToken：当用户使用 Token 登录时，系统识别 Token 得到用户 ID 用于登录。</p><p>SelectUserAuthority：UserList 模块需要得到所有的用户权限进行初始化。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +++++++++++++++++ Token ++++++++++++++++++++++++++++</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：用户登录通过Token</span></span><br><span class="line"><span class="comment">    传入：Json(UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询所有用户的权限</span></span><br><span class="line"><span class="comment">    传入：void</span></span><br><span class="line"><span class="comment">    传出：Json(Result,_id,Authority)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectUserAuthority</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>在 MongoDataBase.cpp 中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：用户登录通过Token</span></span><br><span class="line"><span class="comment">    传入：Json(UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(loginjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; userid;</span><br><span class="line">        pipe.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CommentLikes&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Solves&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Authority&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="comment">// 匹配失败</span></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;用户ID错误！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 匹配成功</span></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;Info&quot;</span>] = jsonvalue;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询所有用户的权限</span></span><br><span class="line"><span class="comment">    传入：void</span></span><br><span class="line"><span class="comment">    传出：Json(Result,_id,Authority)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectUserAuthority</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Authority&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Redis-模块"><a href="#实现-Redis-模块" class="headerlink" title="实现 Redis 模块"></a>实现 Redis 模块</h2><p>将 RedisDataBase.h 整个文件替换为如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> REDISDATABASE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REDISDATABASE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sw/redis++/redis++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> sw::redis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReDB</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 局部静态特性的方式实现单实例</span></span><br><span class="line">    <span class="function"><span class="type">static</span> ReDB *<span class="title">GetInstance</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== Token =======================</span></span><br><span class="line">    <span class="comment">// 存放Token</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">SetToken</span><span class="params">(std::string token, std::string userid)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过Token取出用户ID</span></span><br><span class="line">    <span class="function">std::string <span class="title">GetUserIdByToken</span><span class="params">(std::string token)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">ReDB</span>();</span><br><span class="line">    ~<span class="built_in">ReDB</span>();</span><br><span class="line"></span><br><span class="line">    Redis *redis_token;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>将整个 RedisDataBase.cpp 文件替换为如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;RedisDataBase.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">ReDB *<span class="title">ReDB::GetInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> ReDB redb;</span><br><span class="line">    <span class="keyword">return</span> &amp;redb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ReDB::SetToken</span><span class="params">(std::string token, std::string userid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        redis_token-&gt;<span class="built_in">setex</span>(token, <span class="number">604800</span>, userid);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">ReDB::GetUserIdByToken</span><span class="params">(std::string token)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> res = redis_token-&gt;<span class="built_in">get</span>(token);</span><br><span class="line">        <span class="keyword">if</span> (res)</span><br><span class="line">            <span class="keyword">return</span> *res;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReDB::<span class="built_in">ReDB</span>()</span><br><span class="line">&#123;</span><br><span class="line">    redis_token = <span class="keyword">new</span> <span class="built_in">Redis</span>(<span class="string">&quot;tcp://127.0.0.1:6379/0?socket_timeout=50ms&amp;connect_timeout=1s&amp;pool_size=5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReDB::~<span class="built_in">ReDB</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-UserList-模块"><a href="#实现-UserList-模块" class="headerlink" title="实现 UserList 模块"></a>实现 UserList 模块</h2><p>在 UserList.h 文件中添加变量：</p><p>这里直接使用哈希表来存放用户 ID 和用户权限的关系。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户权限的哈希表，键：用户ID，值：用户权限</span></span><br><span class="line">std::unordered_map&lt;<span class="type">int64_t</span>, <span class="type">int</span>&gt; UserAuthorityMap;</span><br></pre></td></tr></table></figure><p>在 UserList.h 中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// =============== Token鉴权 ===============</span></span><br><span class="line"><span class="comment">// 登录用户通过Token</span></span><br><span class="line"><span class="function">Json::Value <span class="title">LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化用户权限</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">InitUserAuthority</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户权限</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetUserAuthority</span><span class="params">(Json::Value &amp;json)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 权限是否是普通用户或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsOrdinaryUser</span><span class="params">(Json::Value &amp;json)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 权限是否是作者本人或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsAuthor</span><span class="params">(Json::Value &amp;json)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 权限是否是管理员或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsAdministrator</span><span class="params">(Json::Value &amp;json)</span></span>;</span><br></pre></td></tr></table></figure><p>在 UserList.cpp 文件中添加文件包含命令和定义变量：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./utils/snowflake.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 雪花算法</span></span><br><span class="line"><span class="keyword">using</span> <span class="type">snowflake_t</span> = snowflake&lt;<span class="number">1534832906275L</span>, std::mutex&gt;;</span><br><span class="line"><span class="type">snowflake_t</span> uuid_token;</span><br></pre></td></tr></table></figure><p>更新 UserList.cpp 文件中的 RegisterUser 函数、LoginUser 函数、DeleteUser 函数：</p><p>因为登录用户、注册用户和删除用户都涉及到用户权限问题。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">UserList::RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value json = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">RegisterUser</span>(registerjson);</span><br><span class="line">    <span class="comment">// 将其权限加入用户权限表中</span></span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Success&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = json[<span class="string">&quot;_id&quot;</span>].<span class="built_in">asInt64</span>();</span><br><span class="line">        UserAuthorityMap[id] = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> json;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value json = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">LoginUser</span>(loginjson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Success&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        uuid_token.<span class="built_in">init</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 获取Token</span></span><br><span class="line">        <span class="type">int64_t</span> token = uuid_token.<span class="built_in">nextid</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Redis存入Token</span></span><br><span class="line">        ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SetToken</span>(<span class="built_in">to_string</span>(token), json[<span class="string">&quot;Info&quot;</span>][<span class="string">&quot;_id&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        json[<span class="string">&quot;Info&quot;</span>][<span class="string">&quot;Token&quot;</span>] = <span class="built_in">to_string</span>(token);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> json;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value json = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteUser</span>(deletejson);</span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Success&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        UserAuthorityMap.<span class="built_in">erase</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> json;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 UserList.cpp 中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">UserList::LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string token = loginjson[<span class="string">&quot;Token&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据Token查询UserId</span></span><br><span class="line">    string userid = ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">GetUserIdByToken</span>(token);</span><br><span class="line"></span><br><span class="line">    loginjson[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">LoginUserByToken</span>(loginjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UserList::InitUserAuthority</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value json = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserAuthority</span>();</span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> info : json[<span class="string">&quot;ArrayInfo&quot;</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        UserAuthorityMap[info[<span class="string">&quot;_id&quot;</span>].<span class="built_in">asInt64</span>()] = info[<span class="string">&quot;Authority&quot;</span>].<span class="built_in">asInt</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将json 的Token 转化为 VerifyId</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TokenToVerifyId</span><span class="params">(Json::Value &amp;json)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!json[<span class="string">&quot;Token&quot;</span>].<span class="built_in">isNull</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        json[<span class="string">&quot;VerifyId&quot;</span>] = ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">GetUserIdByToken</span>(json[<span class="string">&quot;Token&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">UserList::GetUserAuthority</span><span class="params">(Json::Value &amp;json)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        用户权限</span></span><br><span class="line"><span class="comment">        1：游客</span></span><br><span class="line"><span class="comment">        3：普通用户</span></span><br><span class="line"><span class="comment">        5：管理员</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// 如果未发现ID</span></span><br><span class="line">    <span class="keyword">if</span> (json[<span class="string">&quot;VerifyId&quot;</span>].<span class="built_in">isNull</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = <span class="built_in">stoll</span>(json[<span class="string">&quot;VerifyId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="comment">// 如果未查询到该用户ID或者用户ID为0是游客</span></span><br><span class="line">        <span class="keyword">if</span> (UserAuthorityMap[id] == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> UserAuthorityMap[id];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 是否是普通用户或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UserList::IsOrdinaryUser</span><span class="params">(Json::Value &amp;json)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">TokenToVerifyId</span>(json);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">GetUserAuthority</span>(json) &gt;= <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否是作者本人或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UserList::IsAuthor</span><span class="params">(Json::Value &amp;json)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">TokenToVerifyId</span>(json);</span><br><span class="line">    <span class="type">int</span> authority = <span class="built_in">GetUserAuthority</span>(json);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (authority &lt; <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (authority &gt;= <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> verifyid = <span class="built_in">stoll</span>(json[<span class="string">&quot;VerifyId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(json[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (verifyid == userid)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否是管理员或以上</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UserList::IsAdministrator</span><span class="params">(Json::Value &amp;json)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">TokenToVerifyId</span>(json);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">GetUserAuthority</span>(json) &gt;= <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块-4"><a href="#实现-Control-模块-4" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>在 Control.h 中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录用户通过Token</span></span><br><span class="line"><span class="function">Json::Value <span class="title">LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br></pre></td></tr></table></figure><p>在 Control.cpp 中添加函数函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::LoginUserByToken</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">LoginUserByToken</span>(loginjson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 上面添加静态变量：</p><p>该变量用于当无权限情况时，直接返回该变量。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无权限</span></span><br><span class="line"><span class="type">static</span> Json::Value NoPermission;</span><br></pre></td></tr></table></figure><p>在 Control 的构造函数中添加如下代码：</p><p>首先初始化用户权限，然后初始化无权限的变量。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化用户权限</span></span><br><span class="line">UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InitUserAuthority</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化返回变量</span></span><br><span class="line">NoPermission[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;401&quot;</span>;</span><br><span class="line">NoPermission[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;无权限&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>下面将会对接口进行鉴权和限制：</strong></p><p>在 Control.cpp 文件中 UpdateUserInfo 函数、SelectUserUpdateInfo 函数、UpdateDiscuss 函数、DeleteDiscuss 函数、UpdateSolution 函数、DeleteSolution 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不是本人或者管理员 无权修改</span></span><br><span class="line"><span class="keyword">if</span> (!UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">IsAuthor</span>(xxxjson))</span><br><span class="line">    <span class="keyword">return</span> NoPermission;</span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4eb6e2fd51e0e08522691227b34472b9-0" alt="图片描述"></p><p>在 Control.cpp 文件中 SelectUserSetInfo 函数、DeleteUser 函数、SelectProblemInfoByAdmin 函数、EditProblem 函数、DeleteProblem 函数、SelectProblemListByAdmin 函数、SelectAnnouncementListByAdmin 函数、SelectAnnouncementByEdit 函数、InsertAnnouncement 函数、UpdateAnnouncement 函数、DeleteAnnouncement 函数、SelectDiscussListByAdmin 函数、SelectSolutionListByAdmin 函数、SelectCommentListByAdmin 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不是管理员，无权查询</span></span><br><span class="line"><span class="keyword">if</span> (!UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">IsAdministrator</span>(xxxjson))</span><br><span class="line">    <span class="keyword">return</span> NoPermission;</span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/955352e2e58131681f8c6b2abdff731b-0" alt="图片描述"></p><p>在 Control.cpp 文件中 SelectDiscussByEdit 函数、InsertDiscuss 函数、SelectSolutionByEdit 函数、InsertSolution 函数、InsertComment 函数、DeleteComment 函数、GetJudgeCode 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不是用户，无权限</span></span><br><span class="line"><span class="keyword">if</span> (!UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">IsOrdinaryUser</span>(xxxjson))</span><br><span class="line">    <span class="keyword">return</span> NoPermission;</span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b280ccf96e6f20f533223900579bedd4-0" alt="图片描述"></p><h2 id="实现-HttpServer-模块-4"><a href="#实现-HttpServer-模块-4" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>在 HttpServer.cpp 中 Run 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回用户信息 Token登录</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/user/tokenlogin&quot;</span>, doGetUserInfoByToken);</span><br></pre></td></tr></table></figure><p>在 HttpServer.cpp 中添加函数：</p><p>GetRequestToken：获取请求头中的 Authorization 字段。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取请求中的Token</span></span><br><span class="line"><span class="function">string <span class="title">GetRequestToken</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> res = req.headers.<span class="built_in">find</span>(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (res != req.headers.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> res-&gt;second;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过Token登录用户获取信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetUserInfoByToken</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserInfoByToken start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value queryjson;</span><br><span class="line"></span><br><span class="line">    queryjson[<span class="string">&quot;Token&quot;</span>] = <span class="built_in">GetRequestToken</span>(req);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">LoginUserByToken</span>(queryjson);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserInfoByToken end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>除了登录、注册、获取标签和获取图片函数其他函数全都需要加上获取 Token 的函数，样例如下：</strong></p><p>其中我们仔细查看 Control 模块调用时传入的 JSON 变量，不管 JSON 变量套几层，我们都只需要在第一层加入 Token 即可，仔细查看下面的图寻找规律。</p><p>HttpServer 模块获取请求的 Token 是为了 Control 模块进行鉴权。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/98e8f5b2f55022c9ab1b8c47a905b6e8-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f71575d05cb7e1b5edec05d174c212c4-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/86e7450e479f047ee47ceacd8c9b668c-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/aad9ac86dd9226407eb7db3d9606b907-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/500085525420c72e0869b3232fb76183-0" alt="图片描述"></p><h2 id="添加-CMakeList-txt-配置"><a href="#添加-CMakeList-txt-配置" class="headerlink" title="添加 CMakeList.txt 配置"></a>添加 CMakeList.txt 配置</h2><p>添加：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找库的路径</span></span><br><span class="line"><span class="keyword">link_directories</span>(/usr/local/lib)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找头文件的路径 redis-plus-plus</span></span><br><span class="line"><span class="keyword">include_directories</span>(hiredis sw)</span><br></pre></td></tr></table></figure><p>添加 <code>hiredis redis++</code> 在最前面</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/20de3fe0926d7d2d96f4f24d8143ed7a-0" alt="图片描述"></p><h2 id="运行-4"><a href="#运行-4" class="headerlink" title="运行"></a>运行</h2><p>执行下面的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">sudo ./xdoj</span><br></pre></td></tr></table></figure><p>如何获取 Token ？</p><p>我们首先登录账户，然后 F12 打开浏览器控制台，点击 Application 选项，点击 Local Storage 选项，最后复制 Token 即可，如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b0dfa86d71977c5c8dfc18d3b44fec76-0" alt="图片描述"></p><p>首先我们获取到 小 a 用户的 Token 为<code>635545086750494720</code>，小 b 用户的 Token 为<code>635545501453914112</code>，其中小 a 为管理员，小 b 为普通用户（Token 需要自己获取）。</p><p>我们通过以下命令测试 Token 鉴权：</p><p>下面两个命令分别用不同的 Token 登录获取用户信息，可以看到获取的信息和权限不一样：</p><p>我们可以发现使用 Token 其实和账号密码差不多，它也可以用来鉴定用户身份。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&quot;Authorization:635545086750494720&quot;</span> <span class="string">&quot;http://127.0.0.1:8081/user/tokenlogin&quot;</span></span><br><span class="line"></span><br><span class="line">curl -H <span class="string">&quot;Authorization:635545501453914112&quot;</span> <span class="string">&quot;http://127.0.0.1:8081/user/tokenlogin&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e9f87c1405a97603b503e87ac04acd46-0" alt="图片描述"></p><p>这里进行一步测试可知，当用户权限不足时，直接访问会被告知无权限，后端实现了对 Token 鉴定权限并对越权行为进行限制。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&quot;Authorization:635545086750494720&quot;</span> <span class="string">&quot;http://127.0.0.1:8081/problemlist/admin?Page=1&amp;PageSize=1&quot;</span></span><br><span class="line"></span><br><span class="line">curl -H <span class="string">&quot;Authorization:635545501453914112&quot;</span> <span class="string">&quot;http://127.0.0.1:8081/problemlist/admin?Page=1&amp;PageSize=1&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2a2ff95330623aff58fb33177ed54a83-0" alt="图片描述"></p><h2 id="实验总结-6"><a href="#实验总结-6" class="headerlink" title="实验总结"></a>实验总结</h2><p>本实验中，Redis 模块提供 Token 和用户 ID 的转换接口，UserList 模块实现用户 ID 和权限的转换并通过 Redis 模块实现了 Token 和用户权限转换的接口，Control 模块通过 UserList 模块的接口获取用户权限对用户越权行为进行限制。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code19.zip</span><br></pre></td></tr></table></figure><h1 id="16-缓存实现"><a href="#16-缓存实现" class="headerlink" title="16.缓存实现"></a>16.缓存实现</h1><h2 id="实验介绍-7"><a href="#实验介绍-7" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验主要实现对题目详细信息的缓存和测评记录详细信息的缓存。</p><p>本次实验涉及到 ProblemList 模块、StatusRecordList 模块、Redis 模块。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/04a3f4efa6a2027ddbf9d9f4359c669a-0" alt="图片描述"></p><h4 id="知识点-7"><a href="#知识点-7" class="headerlink" title="知识点"></a>知识点</h4><ul><li>Redis 数据库实现缓存</li><li>如何使用缓存</li><li>缓存性能测试</li></ul><h2 id="实现-Redis-模块-1"><a href="#实现-Redis-模块-1" class="headerlink" title="实现 Redis 模块"></a>实现 Redis 模块</h2><p>向 RedisDataBase.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// =============== 题目 ======================</span></span><br><span class="line"><span class="comment">// 添加题目缓存</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">AddProblemCache</span><span class="params">(std::string problemid, std::string probleminfo)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取题目缓存</span></span><br><span class="line"><span class="function">std::string <span class="title">GetProblemCache</span><span class="params">(std::string problemid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题目缓存（当题目修改，删除时）</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DeleteProblemCache</span><span class="params">(std::string problemid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// =============== 测评记录=================</span></span><br><span class="line"><span class="comment">// 添加测评记录缓存</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">AddStatusRecordCache</span><span class="params">(std::string statusrecordid, std::string statusrecordinfo)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取测评记录缓存</span></span><br><span class="line"><span class="function">std::string <span class="title">GetStatusRecordCache</span><span class="params">(std::string statusrecordid)</span></span>;</span><br></pre></td></tr></table></figure><p>向 RedisDataBase.h 添加变量：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Redis *redis_cache;</span><br></pre></td></tr></table></figure><p>向 RedisDataBase.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加题目缓存</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ReDB::AddProblemCache</span><span class="params">(std::string problemid, std::string probleminfo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string id = <span class="string">&quot;Cache:Problem:&quot;</span> + problemid;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        redis_cache-&gt;<span class="built_in">setex</span>(id, <span class="number">86400</span>, probleminfo);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取题目缓存</span></span><br><span class="line"><span class="function">std::string <span class="title">ReDB::GetProblemCache</span><span class="params">(std::string problemid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string id = <span class="string">&quot;Cache:Problem:&quot;</span> + problemid;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> res = redis_cache-&gt;<span class="built_in">get</span>(id);</span><br><span class="line">        <span class="keyword">if</span> (res)</span><br><span class="line">            <span class="keyword">return</span> *res;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题目缓存（当题目修改）</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ReDB::DeleteProblemCache</span><span class="params">(std::string problemid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string id = <span class="string">&quot;Cache:Problem:&quot;</span> + problemid;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> redis_cache-&gt;<span class="built_in">del</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加测评记录缓存</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ReDB::AddStatusRecordCache</span><span class="params">(std::string statusrecordid, std::string statusrecordinfo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string id = <span class="string">&quot;Cache:StatusRecord:&quot;</span> + statusrecordid;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        redis_cache-&gt;<span class="built_in">setex</span>(id, <span class="number">86400</span>, statusrecordinfo);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取测评记录缓存</span></span><br><span class="line"><span class="function">std::string <span class="title">ReDB::GetStatusRecordCache</span><span class="params">(std::string statusrecordid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string id = <span class="string">&quot;Cache:StatusRecord:&quot;</span> + statusrecordid;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> res = redis_cache-&gt;<span class="built_in">get</span>(id);</span><br><span class="line">        <span class="keyword">if</span> (res)</span><br><span class="line">            <span class="keyword">return</span> *res;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>向构造函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis_cache = <span class="keyword">new</span> <span class="built_in">Redis</span>(<span class="string">&quot;tcp://127.0.0.1:6379/1?socket_timeout=50ms&amp;connect_timeout=1s&amp;pool_size=5&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="实现-ProblemList-模块"><a href="#实现-ProblemList-模块" class="headerlink" title="实现 ProblemList 模块"></a>实现 ProblemList 模块</h2><p>向 ProblemList.cpp 中 SelectProblem 函数替换为下面：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">ProblemList::SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string problemid = queryjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取缓存</span></span><br><span class="line">    string resstr = ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">GetProblemCache</span>(problemid);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 如果有缓存</span></span><br><span class="line">    <span class="keyword">if</span> (resstr != <span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 解析缓存json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(resstr, resjson);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果没有缓存</span></span><br><span class="line">    resjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblem</span>(queryjson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加缓存</span></span><br><span class="line">    <span class="keyword">if</span> (resjson[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Success&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">AddProblemCache</span>(problemid, resjson.<span class="built_in">toStyledString</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>向 ProblemList.cpp 文件中 UpdateProblem 函数和 DeleteProblem 函数 return 前一步的位置分别添加相应代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UpdateProblem 函数</span></span><br><span class="line"><span class="comment">// 删除缓存</span></span><br><span class="line">ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteProblemCache</span>(problemid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// DeleteProblem 函数</span></span><br><span class="line"><span class="comment">// 删除缓存</span></span><br><span class="line">ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteProblemCache</span>(deletejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br></pre></td></tr></table></figure><h2 id="实现-StatusRecordList-模块-1"><a href="#实现-StatusRecordList-模块-1" class="headerlink" title="实现 StatusRecordList 模块"></a>实现 StatusRecordList 模块</h2><p>将 StatusRecordList.cpp 中 SelectStatusRecord 函数替换成以下函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">StatusRecordList::SelectStatusRecord</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string statusrecordid = queryjson[<span class="string">&quot;SubmitId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取缓存</span></span><br><span class="line">    string resstr = ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">GetStatusRecordCache</span>(statusrecordid);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 如果有缓存</span></span><br><span class="line">    <span class="keyword">if</span> (resstr != <span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 解析缓存json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(resstr, resjson);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果没有缓存</span></span><br><span class="line">    resjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectStatusRecord</span>(queryjson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加缓存 （状态不能为等待）</span></span><br><span class="line">    <span class="keyword">if</span> (resjson[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Success&quot;</span> &amp;&amp; resjson[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asInt</span>() &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ReDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">AddStatusRecordCache</span>(statusrecordid, resjson.<span class="built_in">toStyledString</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行-5"><a href="#运行-5" class="headerlink" title="运行"></a>运行</h2><p>执行以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启Redis数据库</span></span><br><span class="line">sudo redis-server /usr/local/redis-6.0.9/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">sudo ./xdoj</span><br></pre></td></tr></table></figure><p>缓存存放在 db1 所以需要将 VSCode 插件连接 db1：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/30ca502d24f394a2de7755a09eafd4af-0" alt="图片描述"></p><p>我们分别打开一个题目和一个测评记录，我们刷新可以看见缓存已经存入。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/41781a4a951c0686a97be9cd4f32b124-0" alt="图片描述"></p><p>如何测试缓存性能？</p><p>打开浏览器控制台，点击 Network ，然后点击某个测评记录三次，接着再打开三次测评记录但是每次都手动删除缓存，通过算平均时间得出有缓存还是比没有缓存快不少。</p><p>当文件很小缓存性能体现不明显，我们可以通过在代码中加入大量注释提高文件的大小。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5ed24241b2eb2291d0264f5e98b88050-0" alt="图片描述"></p><h2 id="实验总结-7"><a href="#实验总结-7" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验首先在 Redis 模块中实现对数据的增删查，然后在查询 MongoDB 数据库之前先查询 Redis 数据库，如果在 Redis 数据库没有查询到数据就将 MongoDB 数据库查询的数据插入到 Redis 数据库中并且设置过期时间，这样当多次查询某数据时，因为 Redis 查询比 MongoDB 查询速度快，所以提高了系统的响应速度。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code20.zip</span><br></pre></td></tr></table></figure><p>注：下一章节是前端开发，但是还是需要使用后端环境，请大家保存环境！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/10/24/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%90%8E%E7%AB%AF/"/>
      <url>/2023/10/24/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5-%E5%90%8E%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="1-CMake构建工具讲解"><a href="#1-CMake构建工具讲解" class="headerlink" title="1.CMake构建工具讲解"></a>1.CMake构建工具讲解</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul><li>通过命令编译项目</li><li>通过 Makefile 编译项目</li><li>通过 CMake 编译项目</li></ul><h3 id="初始化环境"><a href="#初始化环境" class="headerlink" title="初始化环境"></a>初始化环境</h3><p>通过执行下面命令，获取项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载项目</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code5.zip</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">unzip -d ./test code5.zip</span><br><span class="line"><span class="comment"># 进入项目</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h4 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h4><p>这个项目是一个通过 C++ 实现的代理模式的简单例子，项目类图如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d1e9d25661b820a8a7c4f5bb0317f433-0" alt="图片描述"></p><p>运行结果如下：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d043353d581ffba3f3b0d8d7d8044df0-0" alt="图片描述"></p><p>注意：当前没有 app 可执行文件，后面我们会分别使用命令、Makefile 和 CMake 来构建项目并运行。</p><h3 id="通过命令构建项目"><a href="#通过命令构建项目" class="headerlink" title="通过命令构建项目"></a>通过命令构建项目</h3><p>我们可以通过如下命令进行编译并运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译</span></span><br><span class="line">g++ main.cpp Proxy.cpp RealSubject.cpp -o app</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">./app</span><br></pre></td></tr></table></figure><p>上面的命令是全部编译，如果我们修改一个文件，只想编译这个文件，不想全部编译怎么办？</p><p>我们可以将整个过程分为编译和链接，首先编译生成 .o 文件，然后链接所有 .o 文件生成可执行文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g++ -c main.cpp</span><br><span class="line">g++ -c Proxy.cpp</span><br><span class="line">g++ -c RealSubject.cpp</span><br><span class="line">g++ main.o Proxy.o RealSubject.o -o app</span><br></pre></td></tr></table></figure><p>当我们修改 Proxy 文件时，我们只需要重新编译一个文件即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g++ -c Proxy.cpp</span><br><span class="line">g++ main.o Proxy.o RealSubject.o -o app</span><br></pre></td></tr></table></figure><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>从这里我们发现，当项目变大，有很多文件和文件夹时，我们需要写很多命令，非常不方便。</p><p>然后我们会想到通过编写脚本文件，就可以极大减少工作量，那么这个脚本文件就是 Makefile 。</p><p>接下来我们就看看如何使用 Makefile 编译此项目。</p><p>在此之前，我们需要清理多余文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> *.o app</span><br></pre></td></tr></table></figure><h3 id="通过-Makefile-构建项目"><a href="#通过-Makefile-构建项目" class="headerlink" title="通过 Makefile 构建项目"></a>通过 Makefile 构建项目</h3><p>注意：Makefile 文件我们简单看看就行，不需要看懂各种语法，主要是为了后边更好理解 CMake。</p><p>本项目的 Makefile 文件，它有 4 个版本。需要使用哪个版本我们就将注释去掉。</p><h4 id="版本一"><a href="#版本一" class="headerlink" title="版本一"></a>版本一</h4><p>第一个版本就是直接编译所有文件，可以通过执行 <code>make</code> 进行测试。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VERSION 1</span></span><br><span class="line"><span class="section">app: main.cpp Proxy.cpp RealSubject.cpp</span></span><br><span class="line">    g++ -o app main.cpp Proxy.cpp RealSubject.cpp</span><br></pre></td></tr></table></figure><h4 id="版本二"><a href="#版本二" class="headerlink" title="版本二"></a>版本二</h4><p>第二个版本就是分别编译源文件为 .o 文件，最后对所有 .o 文件进行链接，可以通过执行 <code>make</code> 进行测试。</p><p>注意：此时我们修改其中一个文件，再次进行编译也只会编译修改的文件，因为 Makefile 会对比目标文件与依赖文件的修改时间。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">目标:依赖</span></span><br><span class="line">    命令</span><br><span class="line"><span class="comment"># VERSION 2</span></span><br><span class="line">CXX = g++</span><br><span class="line">TARGET = app</span><br><span class="line">OBJ = main.o Proxy.o RealSubject.o</span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(OBJ)</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -o <span class="variable">$(TARGET)</span> <span class="variable">$(OBJ)</span></span><br><span class="line"></span><br><span class="line"><span class="section">main.o: main.cpp</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -c main.cpp</span><br><span class="line"></span><br><span class="line"><span class="section">Proxy.o: Proxy.cpp</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -c Proxy.cpp</span><br><span class="line"></span><br><span class="line"><span class="section">RealSubject.o: RealSubject.cpp</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -c RealSubject.cpp</span><br></pre></td></tr></table></figure><h4 id="版本三"><a href="#版本三" class="headerlink" title="版本三"></a>版本三</h4><p>第三个版本相当于第二个版本简化了 .o 文件的生成并添加了 <code>make clean</code> 命令来清除.o 文件和 app 可执行文件。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VERSION 3</span></span><br><span class="line">CXX = g++</span><br><span class="line">TARGET = app</span><br><span class="line">OBJ = main.o Proxy.o RealSubject.o</span><br><span class="line"></span><br><span class="line">CXXFLAGS = -c -Wall</span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(OBJ)</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line"><span class="section">%.o: %.cpp</span></span><br><span class="line">    <span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -f *.o <span class="variable">$(TARGET)</span></span><br></pre></td></tr></table></figure><h4 id="版本四"><a href="#版本四" class="headerlink" title="版本四"></a>版本四</h4><p>第四个版本相对于第三个版本简化了查找源文件和 .o 文件的书写。</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VERSION 4</span></span><br><span class="line">CXX = g++</span><br><span class="line">TARGET = app</span><br><span class="line">SRC = <span class="variable">$(<span class="built_in">wildcard</span> *.cpp)</span></span><br><span class="line">OBJ = <span class="variable">$(<span class="built_in">patsubst</span> %.cpp, %.o, <span class="variable">$(SRC)</span>)</span></span><br><span class="line"></span><br><span class="line">CXXFLAGS = -c -Wall</span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(OBJ)</span></span><br><span class="line">    <span class="variable">$(CXX)</span> -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line"><span class="section">%.o: %.cpp</span></span><br><span class="line">    <span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> <span class="variable">$&lt;</span> -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">    rm -f *.o <span class="variable">$(TARGET)</span></span><br></pre></td></tr></table></figure><h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><p>Makefile 文件虽然能满足需求，但是其语法难懂且不直观，下面我们来看看 CMake 怎么样。</p><h3 id="通过-CMake-构建项目"><a href="#通过-CMake-构建项目" class="headerlink" title="通过 CMake 构建项目"></a>通过 CMake 构建项目</h3><p>下面是本项目的 CMake 文件，简单直观：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake 最低版本号要求</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目信息</span></span><br><span class="line"><span class="keyword">project</span> (app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找当前目录下的所有源文件</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定生成目标</span></span><br><span class="line"><span class="keyword">add_executable</span>(app <span class="variable">$&#123;DIR_SRCS&#125;</span>)</span><br></pre></td></tr></table></figure><p>通过下面命令来编译并运行项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建build文件夹并进入</span></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用CMake生成Makefile文件</span></span><br><span class="line">cmake ..</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译项目</span></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">./app</span><br></pre></td></tr></table></figure><p>当我们修改某一个文件，再次执行 <code>make</code> 命令，我们会发现它只会编译修改的文件，当项目很大时，这大大节省了编译时间。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/12b417ee54c59d2685b1f98036122f09-0" alt="图片描述"></p><h4 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h4><p>为什么要创建 build 文件夹？</p><p>因为 CMake 会创建很多中间文件，一般会创建 build 文件夹来保存中间文件，方便直接删除。此时我们需要注意项目的运行路径在 build 文件夹中。</p><p>从这里我们也发现了，其实 <strong>CMake 本质就是自动创建 Makefile 文件，最后还是需要执行 <code>make</code> 命令对项目进行编译</strong>。</p><h3 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h3><ol><li>通过命令对项目进行编译，当项目很大时，使用命令会非常不便。</li><li>通过 Makefile 对项目进行编译，虽然能够完成任务，但是其学习成本能让人劝退。</li><li>通过 CMake 可以很简单对项目进行编译，其语法简单直观，对于初学者友好，推荐。</li><li>CMake 的本质是为项目自动创建 Makefile 文件。</li></ol><h1 id="2-JSON库、HTTP库快速搭建后端项目"><a href="#2-JSON库、HTTP库快速搭建后端项目" class="headerlink" title="2.JSON库、HTTP库快速搭建后端项目"></a>2.JSON库、HTTP库快速搭建后端项目</h1><h2 id="实验介绍"><a href="#实验介绍" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验将会创建一个 C++ 项目，然后使用 C++ 的 HTTP 库 cpp-httplib 和 C++ 的 JSON 库 jsoncpp 实现对常见的 GET 请求和 POST 请求进行响应。</p><h4 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h4><ul><li>C++ 项目创建</li><li>C++ HTTP 库 cpp-httplib 的使用</li><li>C++ JSON 库 jsoncpp 的使用</li></ul><h3 id="创建项目和配置环境"><a href="#创建项目和配置环境" class="headerlink" title="创建项目和配置环境"></a>创建项目和配置环境</h3><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p>创建如图所示的项目结构：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/23185d1fc4c26da4b162c5aca551fd36-0" alt="图片描述"></p><p>向 CMakeLists.txt 文件中添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line"><span class="built_in">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"># 项目信息</span><br><span class="line"><span class="built_in">project</span> (test)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"># 查找当前目录下的所有源文件</span><br><span class="line"><span class="built_in">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"># 指定生成目标</span><br><span class="line"><span class="built_in">add_executable</span>(test $&#123;DIR_SRCS&#125;)</span><br><span class="line"></span><br><span class="line"># 链接库</span><br><span class="line"><span class="built_in">target_link_libraries</span>(test jsoncpp pthread)</span><br><span class="line"></span><br><span class="line"># 指定编译参数</span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall -std=c++17&quot;</span>)</span><br></pre></td></tr></table></figure><p>向 main.cpp 文件中添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;httplib.h&quot;</span>           <span class="comment">// HTTP库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;jsoncpp/json/json.h&gt;</span> <span class="comment">// JSON库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> httplib;</span><br><span class="line">    Server server;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置监听端口</span></span><br><span class="line">    server.<span class="built_in">listen</span>(<span class="string">&quot;0.0.0.0&quot;</span>, <span class="number">8081</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="安装-cpp-httplib-库"><a href="#安装-cpp-httplib-库" class="headerlink" title="安装 cpp-httplib 库"></a>安装 cpp-httplib 库</h5><p>切换到根目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project</span><br></pre></td></tr></table></figure><p>从 GitHub 中下载 cpp-httplib 源码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/yhirose/cpp-httplib.git</span><br></pre></td></tr></table></figure><p>如果 Github 不稳定可以直接下载准备好 httplib.h 文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/httplib.h</span><br></pre></td></tr></table></figure><p>将 cpp-httplib 文件夹中 httplib.h 文件复制到本项目目录下即可：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/cdfa8121c50f0880928873a9803ddc64-0" alt="图片描述"></p><h5 id="安装-jsoncpp-库"><a href="#安装-jsoncpp-库" class="headerlink" title="安装 jsoncpp 库"></a>安装 jsoncpp 库</h5><p>使用命令安装 jsoncpp 库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libjsoncpp-dev</span><br></pre></td></tr></table></figure><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>进入项目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/test</span><br></pre></td></tr></table></figure><p>创建 build 文件夹并进入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br></pre></td></tr></table></figure><p>构建项目并编译：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake .. &amp;&amp; make</span><br></pre></td></tr></table></figure><p>运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./test</span><br></pre></td></tr></table></figure><p>点击端口看见如图所示，说明项目创建成功：</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/0781bb281222ff5afdfd7e60a77b5abe8e-0" alt="图片描述"></p><h3 id="处理POST请求"><a href="#处理POST请求" class="headerlink" title="处理POST请求"></a>处理POST请求</h3><h4 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h4><p>向 main 函数中添加如下代码（注：<strong>添加在设置监听端口前面</strong>）：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Post请求</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/test/post&quot;</span>, doTestPost);</span><br></pre></td></tr></table></figure><p>添加 POST 请求处理函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doTestPost</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;执行doTestPost&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 获取请求体</span></span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;获取请求体信息：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; jsonvalue.<span class="built_in">toStyledString</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理逻辑......</span></span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    resjson[<span class="string">&quot;result&quot;</span>] = <span class="string">&quot;处理成功&quot;</span>;</span><br><span class="line">    resjson[<span class="string">&quot;info&quot;</span>] = jsonvalue;</span><br><span class="line"></span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4><p>重新编译运行代码，开启新终端执行如下命令：</p><p>该命令会发送 POST 请求并携带请求数据</p><p>- i 输出 HTTP 头和返回内容。</p><p>- X 指定与服务器通信使用的请求方法</p><p>- d 主要是针对 http 协议的 post 请求指定要在消息体中发送的数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i -X POST -d <span class="string">&#x27;&#123;&quot;name&quot;:&quot;ikun&quot;, &quot;hobby&quot;:[&quot;唱&quot;,&quot;跳&quot;,&quot;rap&quot;,&quot;打篮球&quot;]&#125;&#x27;</span> 127.0.0.1:8081/test/post</span><br></pre></td></tr></table></figure><p>如果不出意外，如图所示：</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07f78f0ec32ec62f2c81560888be9d7678-0" alt="图片描述"></p><h3 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h3><p>本次实验主要是创建了 C++ 项目并配置了项目环境，简单的使用了 cpp-httplib 库和 jsoncpp 库完成对 HTTP 请求的响应，最后通过 curl 命令发送 GET 请求和 POST 请求对项目进行验证。</p><h1 id="3-MongoDB数据库环境搭建"><a href="#3-MongoDB数据库环境搭建" class="headerlink" title="3.MongoDB数据库环境搭建"></a>3.MongoDB数据库环境搭建</h1><p>本实验将会创建配置文件并启动 MongoDB 数据库、通过 VSCode 插件查看数据库、通过脚本文件使用简单命令操作数据库、安装 mongocxx 驱动并使用 C++ 代码操作数据库。</p><h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><ul><li>通过配置文件启动 MongoDB 数据库</li><li>使用命令操作 MongoDB 数据库</li><li>安装 mongocxx 驱动</li><li>通过 C++ 代码操作 MongoDB 数据库</li></ul><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ol><li>本次安装环境耗时比较久，请注意时间！</li><li>后续所有实验都要基于该环境，请注意保存环境！</li></ol><h2 id="启动-MongoDB-数据库"><a href="#启动-MongoDB-数据库" class="headerlink" title="启动 MongoDB 数据库"></a>启动 MongoDB 数据库</h2><p>因为该环境下已经安装了 MongoDB 数据库，所以不需要安装。</p><p>进入 /usr/local 路径，新建 mongo 文件夹并进入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">mkdir</span> mongo &amp;&amp; <span class="built_in">cd</span> mongo</span><br></pre></td></tr></table></figure><p>创建如下文件夹：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p data/db        <span class="comment">#数据库目录</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> -p logs           <span class="comment">#日志目录</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> -p conf           <span class="comment">#配置文件目录</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> -p pids           <span class="comment">#进程描述文件目录</span></span><br></pre></td></tr></table></figure><p>添加配置文件 mongo.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/local/mongo/conf/mongo.conf</span><br></pre></td></tr></table></figure><p>将如下配置复制到文件中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数据保存路径</span></span><br><span class="line">dbpath=/usr/local/mongo/data/db/</span><br><span class="line"><span class="comment">#日志保存路径</span></span><br><span class="line">logpath=/usr/local/mongo/logs/mongo.log</span><br><span class="line"><span class="comment">#进程描述文件</span></span><br><span class="line">pidfilepath=/usr/local/mongo/pids/mongo.pid</span><br><span class="line"><span class="comment">#日志追加写入</span></span><br><span class="line">logappend=<span class="literal">true</span></span><br><span class="line">bind_ip_all=<span class="literal">true</span></span><br><span class="line"><span class="comment">#mongo默认端口</span></span><br><span class="line">port=27017</span><br><span class="line"><span class="comment">#操作日志容量</span></span><br><span class="line">oplogSize=10000</span><br><span class="line"><span class="comment">#开启子进程</span></span><br><span class="line">fork=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>保存并退出，执行如下命令，开启 MongoDB 数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br></pre></td></tr></table></figure><p>看见如图所示，说明开启成功</p><p><strong>注意：如果已经开启 MongoDB 数据库，后续重新启动会报错。如果后面章节提到开启 MongoDB 数据库，已开启请忽略。</strong></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/72f6a60007d6708f10598b01d537b556-0" alt="图片描述"></p><p>在命令行中输入 <code>mongosh</code> 即可进入命令行操作界面。</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024182158653.png" alt="image-20231024182158653"></p><h2 id="MongoDB-基本操作"><a href="#MongoDB-基本操作" class="headerlink" title="MongoDB 基本操作"></a>MongoDB 基本操作</h2><p>点击 VSCode 左侧栏中 MongoDB 插件，可以看见图形化界面了。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9d4660eeb1269ff392def367f4ba8edb-0/wm" alt="img"></p><p>下载 mongodb 的脚本文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/demo.mongodb</span><br></pre></td></tr></table></figure><p>进行如下图的操作：</p><ol><li>点击 demo.mongodb 文件</li><li>将脚本注释撤销（从插入开始，一步一步往下执行）</li><li>点击执行按钮</li><li>查看运行结果</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7fbb5f88100e8143476835bab4dc68bf-0/wm" alt="img"></p><p><strong>注意：</strong> 如果脚本显示未连接，需要手动点击连接，防止执行失败，如下图所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e9eb475bd2f73b5dcb6c247a3afa322d-0" alt="图片描述"></p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5c5a988395dd2dd29e73d506072b16a5-0" alt="图片描述"></p><p>更多 MongoDB 的操作，请查阅文档进行学习：<a href="https://docs.mongoing.com/">https://docs.mongoing.com/</a></p><p>重点学习 MongoDB 聚合中的聚合管道。</p><h2 id="C-连接-MongoDB"><a href="#C-连接-MongoDB" class="headerlink" title="C++ 连接 MongoDB"></a>C++ 连接 MongoDB</h2><p>下面我们将会安装 mongo-cxx-driver 来使用 C++ 代码操作 MongoDB 数据库。</p><p>注：The mongocxx driver builds on top of the MongoDB C driver. 所以我们先要安装 mongo-c-driver。</p><p>参考网址：<a href="https://mongocxx.org/mongocxx-v3/installation/linux/">https://mongocxx.org/mongocxx-v3/installation/linux/</a></p><h4 id="安装库"><a href="#安装库" class="headerlink" title="安装库"></a>安装库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libmongoc-1.0-0</span><br><span class="line"></span><br><span class="line">sudo apt-get install libbson-1.0-0</span><br><span class="line"></span><br><span class="line">sudo apt-get install cmake libssl-dev libsasl2-dev</span><br></pre></td></tr></table></figure><h4 id="安装-mongo-c-driver-（预计编译-3-分钟左右）"><a href="#安装-mongo-c-driver-（预计编译-3-分钟左右）" class="headerlink" title="安装 mongo-c-driver （预计编译 3 分钟左右）"></a>安装 mongo-c-driver （预计编译 3 分钟左右）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/mongo-c-driver-1.23.4.tar.gz</span><br><span class="line"></span><br><span class="line">tar xzf mongo-c-driver-1.23.4.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> mongo-c-driver-1.23.4</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> cmake-build</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> cmake-build</span><br><span class="line"></span><br><span class="line">cmake -DENABLE_AUTOMATIC_INIT_AND_CLEANUP=OFF ..</span><br><span class="line"></span><br><span class="line">cmake --build .</span><br><span class="line"></span><br><span class="line">sudo cmake --build . --target install</span><br></pre></td></tr></table></figure><h4 id="安装-mongo-cxx-driver"><a href="#安装-mongo-cxx-driver" class="headerlink" title="安装 mongo-cxx-driver"></a>安装 mongo-cxx-driver</h4><p>注意：此次编译时间可能比较长（预计编译 15 ~ 20 分钟）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/mongo-cxx-driver-r3.7.1.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xzf mongo-cxx-driver-r3.7.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> mongo-cxx-driver-r3.7.1/build</span><br><span class="line"></span><br><span class="line">cmake ..                                \</span><br><span class="line">    -DCMAKE_BUILD_TYPE=Release          \</span><br><span class="line">    -DCMAKE_INSTALL_PREFIX=/usr/local</span><br><span class="line"></span><br><span class="line">sudo cmake --build . --target EP_mnmlstc_core</span><br><span class="line"></span><br><span class="line">cmake --build .</span><br><span class="line"></span><br><span class="line">sudo cmake --build . --target install</span><br></pre></td></tr></table></figure><h4 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h4><p>安装 jsoncpp 库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libjsoncpp-dev</span><br></pre></td></tr></table></figure><p>创建如图所示的目录结构：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/e5668bbc5b4b840c78929c1f7407e0c5-0" alt="图片描述"></p><p>将如下代码复制到 CMakeLists.txt 文件中：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake 最低版本号要求</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目信息</span></span><br><span class="line"><span class="keyword">project</span> (mongotest)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找头文件的路径</span></span><br><span class="line"><span class="keyword">include_directories</span>(/usr/local/<span class="keyword">include</span>/mongocxx/v_noabi /usr/local/<span class="keyword">include</span>/libmongoc-<span class="number">1.0</span>)</span><br><span class="line"><span class="keyword">include_directories</span>(/usr/local/<span class="keyword">include</span>/bsoncxx/v_noabi /usr/local/<span class="keyword">include</span>/libbson-<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找当前目录下的所有源文件</span></span><br><span class="line"><span class="comment"># 并将名称保存到 DIR_SRCS 变量</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定生成目标</span></span><br><span class="line"><span class="keyword">add_executable</span>(mongotest <span class="variable">$&#123;DIR_SRCS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 链接库</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(mongotest pthread mongocxx bsoncxx jsoncpp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定编译参数</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall -std=c++11&quot;</span>)</span><br></pre></td></tr></table></figure><p>将如下代码复制到 main.cpp 文件中：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bsoncxx/json.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/client.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/stdx.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/pipeline.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bsoncxx/builder/stream/helpers.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bsoncxx/builder/stream/document.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bsoncxx/builder/stream/array.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/pool.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/instance.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mongocxx/uri.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;jsoncpp/json/json.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::close_array;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::close_document;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::document;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::finalize;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::open_array;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::stream::open_document;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::basic::kvp;</span><br><span class="line"><span class="keyword">using</span> bsoncxx::builder::basic::make_document;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">mongocxx::instance instance&#123;&#125;;                                                                       <span class="comment">// This should be done only once.</span></span><br><span class="line">mongocxx::uri uri&#123;&#125;; <span class="comment">// 连接配置</span></span><br><span class="line"><span class="function">mongocxx::client <span class="title">client</span><span class="params">(uri)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    mongocxx::pipeline pipe;</span><br><span class="line">    bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">    <span class="keyword">auto</span> collection = client[<span class="string">&quot;Test&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 查询全部</span></span><br><span class="line">    <span class="comment">// mongocxx::cursor cursor = collection.find(&#123;&#125;);</span></span><br><span class="line">    <span class="comment">// for (auto doc : cursor)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     reader.parse(bsoncxx::to_json(doc), jsonvalue);</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; jsonvalue.toStyledString() &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.查询年龄最小的两个人</span></span><br><span class="line">    <span class="comment">// pipe.sort(&#123;make_document(kvp(&quot;age&quot;, 1))&#125;);</span></span><br><span class="line">    <span class="comment">// pipe.limit(2);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// mongocxx::cursor cursor = collection.aggregate(pipe);</span></span><br><span class="line">    <span class="comment">// for (auto doc : cursor)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     reader.parse(bsoncxx::to_json(doc), jsonvalue);</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; jsonvalue.toStyledString() &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.修改小a的age为100</span></span><br><span class="line">    <span class="comment">// document</span></span><br><span class="line">    <span class="comment">//     &lt;&lt; &quot;$set&quot; &lt;&lt; open_document</span></span><br><span class="line">    <span class="comment">//     &lt;&lt; &quot;age&quot; &lt;&lt; 100</span></span><br><span class="line">    <span class="comment">//     &lt;&lt; close_document;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// collection.update_one(&#123;make_document(kvp(&quot;name&quot;, &quot;小a&quot;))&#125;,document.view());</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.删除小c</span></span><br><span class="line">    <span class="comment">// collection.delete_one(&#123;make_document(kvp(&quot;name&quot;, &quot;小c&quot;))&#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行程序：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/mongotest</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">./mongotest</span><br></pre></td></tr></table></figure><p>如果运行失败，如图所示（如果成功请忽略）：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7493cda07ebbc20e6cd8b89fa4de8b38-0" alt="图片描述"></p><p>执行 <code>ldd mongotest</code> 如图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/c4349ca4d2f18ec68635d36f0f943d02-0" alt="图片描述"></p><p>执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/lib</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">rm</span> libmongocxx.so._noabi</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">rm</span> libbsoncxx.so._noabi</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">ln</span> -s /usr/local/lib/libmongocxx.so.3.7.1 /usr/local/lib/libmongocxx.so._noabi</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">ln</span> -s /usr/local/lib/libbsoncxx.so.3.7.1 /usr/local/lib/libbsoncxx.so._noabi</span><br><span class="line"></span><br><span class="line">sudo ldconfig</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure><p>最后执行 <code>ldd mongotest</code> 如图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/0d28856b16fd95c47f0926a4cf09562b-0" alt="图片描述"></p><p>此代码与上述的脚本文件对应（没有插入语句），通过释放注释，重新执行 <code>make</code> 进行编译并执行。</p><h2 id="实验总结-2"><a href="#实验总结-2" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验：</p><ol><li>通过配置文件启动 MongoDB 数据库。</li><li>使用 VSCode 插件进行连接并使用命令对数据库进行简单增删改查的操作。</li><li>安装 C++ 驱动 mongocxx。</li><li>使用 C++ 代码操作 MongoDB 数据库，对其一个错误进行处理。</li></ol><p>后续本项目将会主要对 MongoDB 数据库进行操作，对于不太懂的操作，请大家自行在官网进行查询。</p><p>注意：请保存本项目的环境，后续实验都需要使用本环境！</p><p><strong>注意：如果已经开启 MongoDB 数据库，后续重新启动会报错。如果后面章节提到开启 MongoDB 数据库，已开启请忽略。</strong></p><h1 id="4-项目框架介绍"><a href="#4-项目框架介绍" class="headerlink" title="4.项目框架介绍"></a>4.项目框架介绍</h1><h2 id="项目框架介绍"><a href="#项目框架介绍" class="headerlink" title="项目框架介绍"></a>项目框架介绍</h2><p>本项目的框架如下图所示:</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/0f38c9bb69dcade9283d7626b9cce5c7-0" alt="图片描述"></p><p>下面对每个模块进行简单介绍：</p><p>HttpServer 模块：会监听网络中发送的 Http (Ajax) 请求，然后将请求数据封装到 JSON 变量中传给 Control 模块进行下一步处理，处理完之后会对结果状态码进行相应调整，并返回结果。</p><p>Control 模块：主要就是控制和调用后面除数据库的所有模块的接口，进行不同模块之间的业务逻辑处理，类似于上帝。并且会根据参数中的 Token 对请求进行权限检测。</p><p>AnnouncementList 模块：公告模块，封装所有来自 MongoDB 数据库关于公告的接口，并为 Control 模块提供接口。</p><p>CommentList 模块：评论模块，封装所有来自 MongoDB 数据库关于评论的接口，并为 Control 模块提供接口。</p><p>DiscussList 模块：讨论模块，封装所有来自 MongoDB 数据库关于讨论的接口，并为 Control 模块提供接口。</p><p>Judger 模块：判题机模块，主要为系统提供判题服务。</p><p>ProblemList 模块：题目模块，封装所有来自 MongoDB 数据库关于题目的接口，在此接口上添加了对每个题目测试用例文件的管理以及对题目内容查询进行的缓存处理，最后为 Control 模块提供接口。</p><p>SolutionList 模块：题解模块，封装所有来自 MongoDB 数据库关于题解的接口，并为 Control 模块提供接口。</p><p>StatusRecord 模块：状态模块，封装所有来自 MongoDB 数据库关于状态的接口，在此接口上添加了对每个测评记录内容查询的缓存处理，最后为 Control 模块提供接口。</p><p>Tag 模块：标签模块，保存题目的所有标签并提供接口。</p><p>UserList 模块：用户模块，封装所有来自 MongoDB 数据库关于用户的接口，并添加了对用户鉴权的接口，最后为 Control 模块提供接口。</p><p>MongoDataBase 模块：MongoDB 数据库模块，会连接 MongoDB 数据库进行增删改查，并提供接口。</p><p>RedisDataBase 模块：Redis 数据库模块，会连接 Redis 数据库提供接口。</p><p>下面对系统工作流程进行介绍：</p><ol><li>HttpServer 模块监听 8081 端口。</li><li>用户向网络中发送对后端数据的请求并携带请求参数。</li><li>HttpServer 模块监听到请求，将参数封装成 JSON 变量，并传递给 Control 模块。</li><li>Control 模块会调用一个或多个模块进行逻辑处理，这些模块会调用 MongoDB 数据库或 Redis 数据库请求数据或操作数据。</li><li>Control 模块调用完成后将结果返回给 HttpServer 模块。</li><li>HttpServer 模块会根据返回结果的 Result 参数调整不同的状态码并将最终结果进行返回。</li></ol><h2 id="项目框架代码"><a href="#项目框架代码" class="headerlink" title="项目框架代码"></a>项目框架代码</h2><h4 id="下载项目文件"><a href="#下载项目文件" class="headerlink" title="下载项目文件"></a>下载项目文件</h4><p>执行下面命令，下载项目文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code8.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./XDOJ code8.zip</span><br></pre></td></tr></table></figure><p>大家点开之后就可以查看到如下的目录结构，每个模块包含头文件和源文件：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">|-- include</span><br><span class="line">    |-- httplib.h           <span class="comment">// cpp-httplib库</span></span><br><span class="line">|-- src</span><br><span class="line">    |-- AnnocumentList.cpp  <span class="comment">// 公告</span></span><br><span class="line">    |-- AnnocumentList.h</span><br><span class="line">    |-- CommentList.cpp     <span class="comment">// 评论</span></span><br><span class="line">    |-- CommentList.h</span><br><span class="line">    |-- Control.cpp         <span class="comment">// 控制</span></span><br><span class="line">    |-- Control.h</span><br><span class="line">    |-- DiscussList.cpp     <span class="comment">// 讨论</span></span><br><span class="line">    |-- DiscussList.h</span><br><span class="line">    |-- HttpServer.cpp      <span class="comment">// HttpServer</span></span><br><span class="line">    |-- HttpServer.h</span><br><span class="line">    |-- Judger.cpp          <span class="comment">// 判题机</span></span><br><span class="line">    |-- Judger.h</span><br><span class="line">    |-- main.cpp            <span class="comment">// 入口文件</span></span><br><span class="line">    |-- MongoDataBase.cpp   <span class="comment">// MongoDB数据库</span></span><br><span class="line">    |-- MongoDataBase.h</span><br><span class="line">    |-- ProblemList.cpp     <span class="comment">// 题目</span></span><br><span class="line">    |-- ProblemList.h</span><br><span class="line">    |-- RedisDataBase.cpp   <span class="comment">// Redis数据库</span></span><br><span class="line">    |-- RedisDataBase.h</span><br><span class="line">    |-- SolutionList.cpp    <span class="comment">// 题解</span></span><br><span class="line">    |-- SolutionList.h</span><br><span class="line">    |-- StatusRecordList.cpp<span class="comment">// 状态</span></span><br><span class="line">    |-- StatusRecordList.h</span><br><span class="line">    |-- Tag.cpp             <span class="comment">// 标签</span></span><br><span class="line">    |-- Tag.h</span><br><span class="line">    |-- UserList.cpp        <span class="comment">// 用户</span></span><br><span class="line">    |-- UserList.h</span><br><span class="line">|-- WWW</span><br><span class="line">    |-- image</span><br><span class="line">        |-- avatar1.webp    <span class="comment">// 头像1图片</span></span><br><span class="line">        |-- avatar2.webp    <span class="comment">// 头像2图片</span></span><br><span class="line">|-- CMakeLists.txt          <span class="comment">// CMake文件</span></span><br></pre></td></tr></table></figure><h4 id="代码解释"><a href="#代码解释" class="headerlink" title="代码解释"></a>代码解释</h4><p>注意：本次项目代码是最初始代码，只做了简单实现，后续将会在此基础上编写。</p><p>Control、Judger 只是进行简单创建了类。</p><p>MongoDataBase 实现了获取时间函数、获取某一集合的最大 ID 函数并在构造函数中对 ID 进行初始化。</p><p>获取某一集合的最大 ID 函数的实现：通过对 ID 进行逆序排序，然后取出第一个即可。</p><p>ID 使用的是原子变量 <code>std::atomic_int64_t</code>。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取时间</span></span><br><span class="line"><span class="function">string <span class="title">GetTime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">time_t</span> t = <span class="built_in">time</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">tm</span> *now = <span class="built_in">localtime</span>(&amp;t);</span><br><span class="line">    <span class="type">char</span> str[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">strftime</span>(str, <span class="built_in">sizeof</span>(str), <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, now);</span><br><span class="line">    <span class="keyword">return</span> (string)str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取某一个集合中最大的ID</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int64_t</span> <span class="title">MoDB::GetMaxId</span><span class="params">(std::string name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">    mongocxx::collection coll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][name.<span class="built_in">data</span>()];</span><br><span class="line"></span><br><span class="line">    bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">    mongocxx::pipeline pipe;</span><br><span class="line">    pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">    pipe.<span class="built_in">limit</span>(<span class="number">1</span>);</span><br><span class="line">    mongocxx::cursor cursor = coll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果没找到，说明集合中没有数据</span></span><br><span class="line">    <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">    &#123;</span><br><span class="line">        reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int64_t</span> id = <span class="built_in">stoll</span>(jsonvalue[<span class="string">&quot;_id&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MoDB::<span class="built_in">MoDB</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 初始化ID</span></span><br><span class="line">    m_problemid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;Problem&quot;</span>);</span><br><span class="line">    m_statusrecordid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;StatusRecord&quot;</span>);</span><br><span class="line">    m_commentid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;Comment&quot;</span>);</span><br><span class="line">    <span class="type">int64_t</span> m_announcementid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;Announcement&quot;</span>);</span><br><span class="line">    <span class="type">int64_t</span> m_solutionid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;Solution&quot;</span>);</span><br><span class="line">    <span class="type">int64_t</span> m_discussid = <span class="built_in">GetMaxId</span>(<span class="string">&quot;Discuss&quot;</span>);</span><br><span class="line">    m_articleid = <span class="built_in">max</span>(m_solutionid, <span class="built_in">max</span>(m_discussid, m_announcementid));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HttpServer 实现了返回图片的请求，后面我们将会对其验证。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取图片资源</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">R&quot;(/image/(\d+))&quot;</span>, doGetImage);</span><br></pre></td></tr></table></figure><p>其中 AnnocumentList、CommentList、DiscussList、ProblemList、RedisDataBase、SolutionList、StatusRecordList、Tag、UserList 这些模块均只实现了单例模式，如下所示：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AnnocumentList.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ANNOUNCEMENTLIST_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ANNOUNCEMENTLIST_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;jsoncpp/json/json.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">// 公告类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AnnouncementList</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 局部静态特性的方式实现单实例</span></span><br><span class="line">    <span class="function"><span class="type">static</span> AnnouncementList *<span class="title">GetInstance</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">AnnouncementList</span>();</span><br><span class="line">    ~<span class="built_in">AnnouncementList</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AnnocumentList.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AnnouncementList.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MongoDataBase.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部静态特性的方式实现单实例</span></span><br><span class="line"><span class="function">AnnouncementList *<span class="title">AnnouncementList::GetInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> AnnouncementList announcementlist;</span><br><span class="line">    <span class="keyword">return</span> &amp;announcementlist;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AnnouncementList::<span class="built_in">AnnouncementList</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">AnnouncementList::~<span class="built_in">AnnouncementList</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h4><p>执行下面命令，开启数据库并初始化数据库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开 MongoDB 数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载数据库初始化脚本</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/init.mongodb</span><br></pre></td></tr></table></figure><p>点击初始化脚本，然后点击右边的执行按钮。脚本主要是创建数据库和表，详情可以查看《数据库设计》章节。</p><p>执行以下命令，编译并运行代码：</p><p><strong>注意：后续编写完代码后需要重新编译，如果有 build 文件夹只需要进入并执行 <code>make</code> 即可，如果没有需要创建 build 文件夹执行 <code>cmake .. 和 make</code>。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/XDOJ</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>打开一个新的终端，输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载图片1</span></span><br><span class="line">wget http://127.0.0.1:8081/image/1</span><br><span class="line"><span class="comment"># 下载图片2</span></span><br><span class="line">wget http://127.0.0.1:8081/image/2</span><br></pre></td></tr></table></figure><p>修改下载文件的后缀，可以看见项目文件的两个头像图片。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/885cae25cf6b49a34830f09d3209b299-0" alt="图片描述"></p><h2 id="实验总结-3"><a href="#实验总结-3" class="headerlink" title="实验总结"></a>实验总结</h2><p>本次实验总结：</p><ol><li>查看了项目的结构图，列出每个模块及其作用。</li><li>查看项目架构的代码，具体了解代码的运行逻辑及组成。</li><li>运行代码，验证获得图片文件的功能。</li></ol><p>注意：后续的所有实验都将在此代码基础上进行增加和修改。</p><p><strong>注意：后续编写完代码后需要重新编译，如果有 build 文件夹只需要进入并执行 <code>make</code> 即可，如果没有需要创建 build 文件夹执行 <code>cmake .. 和 make</code>。</strong></p><p><strong>注意：后续章节的实验总结部分，都会有当前的章节完成的标准代码包，大家可以下载比对。</strong></p><h1 id="5-用户模块实现"><a href="#5-用户模块实现" class="headerlink" title="5.用户模块实现"></a>5.用户模块实现</h1><h2 id="实验介绍-1"><a href="#实验介绍-1" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验主要对用户模块进行实现。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、UserList 模块、MongoDB 模块：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/775212c84744cb87ce5a711424ee5d64-0" alt="图片描述"></p><h4 id="知识点-2"><a href="#知识点-2" class="headerlink" title="知识点"></a>知识点</h4><ul><li>雪花算法</li><li>用户模块实现</li><li>Nginx 服务器配置</li></ul><h2 id="实验准备"><a href="#实验准备" class="headerlink" title="实验准备"></a>实验准备</h2><p>雪花算法：使用一个 64 bit 的 long 型的数字作为全局唯一 ID。在分布式系统中的应用十分广泛，且 ID 引入了时间戳，基本上保持自增的，详细了解请自行网络查询。</p><p><strong>下载雪花算法的源代码：</strong></p><p>该源码取自：<a href="https://github.com/sniper00/snowflake-cpp">https://github.com/sniper00/snowflake-cpp</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/snowflake.hpp</span><br></pre></td></tr></table></figure><p>在项目 src 文件夹中创建 utils 文件夹，将 snowflake.hpp 文件移动到里面即可，如下图所示：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/a8f22afc77761b94024bda40d16d0180-0" alt="图片描述"></p><p><strong>数据库准备：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载用户表数据库脚本</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/init-user.mongodb</span><br></pre></td></tr></table></figure><p>点击数据库脚本，点击右上角执行按钮执行。</p><p>此脚本会添加五位用户，分别为小 a、小 b、小 c、小 d、小 e。</p><p>其中小 a 的用户权限是管理员，账号<code>111111</code>,密码<code>111111</code>，后续将会经常使用。</p><h2 id="实现-MongoDB-模块"><a href="#实现-MongoDB-模块" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p><strong>注意：后面添加的函数声明是放在 .h 头文件的 public 访问属性里面 .cpp 库文件里面的函数如果不是类函数存在调用关系，只能下面的函数调用上面的函数。</strong></p><p>在 MongoDataBase.h 文件中添加如下的函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +++++++++++++++++++++++用户表User+++++++++++++++++++++++++++++</span></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：用户注册</span></span><br><span class="line"><span class="comment">       传入：Json(NickName,Account,PassWord,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">       传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：用户登录</span></span><br><span class="line"><span class="comment">       传入：Json(Account,PassWord)</span></span><br><span class="line"><span class="comment">       传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：更新用户的题目信息，当用户提交代码时</span></span><br><span class="line"><span class="comment">       传入：Json(UserId,ProblemId,Status)</span></span><br><span class="line"><span class="comment">       传出：bool(如果AC是否向其添加)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function"><span class="type">bool</span> <span class="title">UpdateUserProblemInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：获取用户的Rank排名</span></span><br><span class="line"><span class="comment">       传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">       传出：Json(ArrayInfo[_id,Rank,Avatar,NickName,PersonalProfile,SubmitNum,ACNum],TotalNum)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：用户主页展示</span></span><br><span class="line"><span class="comment">       传入：Json(UserId)</span></span><br><span class="line"><span class="comment">       传出：Json(Result,Reason,_id,Avatar,NickName,PersonalProfile,School,Major,JoinTime,Solves,ACNum,SubmitNum)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：更改用户信息</span></span><br><span class="line"><span class="comment">       传入：Json(UserId,Avatar,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">       传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：查询用户表，用于修改用户</span></span><br><span class="line"><span class="comment">       传入：Json(UserId)</span></span><br><span class="line"><span class="comment">       传出：Json(_id,Avatar,NickName,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：分页查询用户列表</span></span><br><span class="line"><span class="comment">       传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">       传出：Json(_id,NickName,PersonalProfile,School,Major,JoinTime,TotalNum)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">       功能：删除用户</span></span><br><span class="line"><span class="comment">       传入：Json(UserId)</span></span><br><span class="line"><span class="comment">       传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>在 MongoDataBase.cpp 文件中，首先添加对雪花算法的引用：</p><p>雪花算法的 using 写在命名空间后面。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;./utils/snowflake.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 雪花算法</span></span><br><span class="line"><span class="keyword">using</span> <span class="type">snowflake_t</span> = snowflake&lt;<span class="number">1534832906275L</span>, std::mutex&gt;;</span><br><span class="line"><span class="type">snowflake_t</span> uuid;</span><br></pre></td></tr></table></figure><p>然后添加函数定义：</p><p>RegisterUser：用户注册，首先需要检查账户是否存在，其次检查昵称是否存在，如果都不存在直接插入数据库即可。</p><p>LoginUser：用户登录，将账号和密码作为查询条件，如果未查询出数据，则代表账号密码错误或没有该账户，如果查询出数据，直接返回即可。</p><p>UpdateUserProblemInfo：当用户提交代码时，更新用户的题目信息。用户提交代码后，首先将提交次数加一，如果代码通过了，检查 Solves 数组是否有该 ID，如果没有代表第一次通过，会将通过次数加一并将 ID 加入 Solves 数组。</p><p>SelectUserRank：获取用户的排名数组，用于排名页面展示。先通过 AC 题目数反序排序，再通过提交数量正序排序。</p><p>SelectUserInfo：用户主页展示，直接返回用户的数据即可。</p><p>UpdateUserInfo：更新用户信息，直接修改即可。</p><p>SelectUserUpdateInfo：查询用户信息，用于设置页面，直接返回相应的用户信息即可。</p><p>DeleteUser：删除用户，匹配 ID 直接删除。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：用户注册</span></span><br><span class="line"><span class="comment">    传入：Json(NickName,Account,PassWord,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        string account = registerjson[<span class="string">&quot;Account&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string nickname = registerjson[<span class="string">&quot;NickName&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string password = registerjson[<span class="string">&quot;PassWord&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string personalprofile = registerjson[<span class="string">&quot;PersonalProfile&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string school = registerjson[<span class="string">&quot;School&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string major = registerjson[<span class="string">&quot;Major&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">find</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Account&quot;</span>, account.<span class="built_in">data</span>()))&#125;);</span><br><span class="line">        <span class="comment">// 判断账户是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() != cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;账户已存在，请重新填写！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检查昵称是否存在</span></span><br><span class="line">        cursor = usercoll.<span class="built_in">find</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;NickName&quot;</span>, nickname.<span class="built_in">data</span>()))&#125;);</span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() != cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;昵称已存在，请重新填写！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        uuid.<span class="built_in">init</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="type">int64_t</span> id = uuid.<span class="built_in">nextid</span>();</span><br><span class="line">        string jointime = <span class="built_in">GetTime</span>();</span><br><span class="line">        <span class="comment">// 默认头像</span></span><br><span class="line">        string avatar = <span class="string">&quot;http://127.0.0.1:8081/image/1&quot;</span>;</span><br><span class="line">        <span class="comment">// 插入</span></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; avatar.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; nickname.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Account&quot;</span> &lt;&lt; account.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;PassWord&quot;</span> &lt;&lt; password.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; personalprofile.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;School&quot;</span> &lt;&lt; school.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Major&quot;</span> &lt;&lt; major.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;JoinTime&quot;</span> &lt;&lt; jointime.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;CommentLikes&quot;</span> &lt;&lt; open_array &lt;&lt; close_array</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Solves&quot;</span> &lt;&lt; open_array &lt;&lt; close_array</span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Authority&quot;</span> &lt;&lt; <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = usercoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">result</span>().<span class="built_in">inserted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库插入失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;注册成功！&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;_id&quot;</span>] = (Json::Int64)id;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：用户登录</span></span><br><span class="line"><span class="comment">    传入：Json(Account,PassWord)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Info(_id,NickName,Avatar,CommentLikes,Solves,Authority))</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        string account = loginjson[<span class="string">&quot;Account&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string password = loginjson[<span class="string">&quot;PassWord&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Account&quot;</span> &lt;&lt; account.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;PassWord&quot;</span> &lt;&lt; password.<span class="built_in">data</span>();</span><br><span class="line">        pipe.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CommentLikes&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Solves&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Authority&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="comment">// 匹配账号和密码</span></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="comment">// 匹配失败</span></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;账户或密码错误！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 匹配成功</span></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;Info&quot;</span>] = jsonvalue;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新用户的题目信息，当用户提交代码时</span></span><br><span class="line"><span class="comment">    传入：Json(UserId,ProblemId,Status)</span></span><br><span class="line"><span class="comment">    传出：bool(如果AC是否向其添加)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateUserProblemInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> problemid = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> status = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将用户提交数目加一</span></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        usercoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果AC了</span></span><br><span class="line">        <span class="keyword">if</span> (status == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 查询AC题目是否已经添加至Solves的数组中</span></span><br><span class="line">            mongocxx::pipeline pipe;</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;);</span><br><span class="line">            document.<span class="built_in">clear</span>();</span><br><span class="line">            document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;IsHasAc&quot;</span> &lt;&lt; open_document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;$in&quot;</span> &lt;&lt; open_array &lt;&lt; problemid &lt;&lt; <span class="string">&quot;$Solves&quot;</span> &lt;&lt; close_array</span><br><span class="line">                &lt;&lt; close_document;</span><br><span class="line">            pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">            Json::Reader reader;</span><br><span class="line">            Json::Value tmpjson;</span><br><span class="line">            mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">            &#123;</span><br><span class="line">                reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), tmpjson);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果未添加</span></span><br><span class="line">            <span class="keyword">if</span> (tmpjson[<span class="string">&quot;IsHasAc&quot;</span>].<span class="built_in">asBool</span>() == <span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                document.<span class="built_in">clear</span>();</span><br><span class="line">                document</span><br><span class="line">                    &lt;&lt; <span class="string">&quot;$push&quot;</span> &lt;&lt; open_document</span><br><span class="line">                    &lt;&lt; <span class="string">&quot;Solves&quot;</span> &lt;&lt; problemid</span><br><span class="line">                    &lt;&lt; close_document</span><br><span class="line">                    &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">                    &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line">                usercoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取用户的Rank排名</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[_id,Rank,Avatar,NickName,PersonalProfile,SubmitNum,ACNum],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">-1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">sort</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 添加Rank排名</span></span><br><span class="line">        <span class="type">int</span> currank = (page - <span class="number">1</span>) * pagesize + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>][i][<span class="string">&quot;Rank&quot;</span>] = currank++;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：用户主页展示</span></span><br><span class="line"><span class="comment">    传入：Json(UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Avatar,NickName,PersonalProfile,School,Major,JoinTime,Solves,ACNum,SubmitNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;School&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Major&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;JoinTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Solves&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该信息！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更改用户信息</span></span><br><span class="line"><span class="comment">    传入：Json(UserId,Avatar,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string avatar = updatejson[<span class="string">&quot;Avatar&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string personalprofile = updatejson[<span class="string">&quot;PersonalProfile&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string school = updatejson[<span class="string">&quot;School&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string major = updatejson[<span class="string">&quot;Major&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; avatar.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; personalprofile.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;School&quot;</span> &lt;&lt; school.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Major&quot;</span> &lt;&lt; major.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        usercoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询用户表，用于修改用户</span></span><br><span class="line"><span class="comment">    传入：Json(UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Avatar,NickName,PersonalProfile,School,Major)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;School&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Major&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该信息！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询用户列表</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[_id,NickName,PersonalProfile,School,Major,JoinTime],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;NickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;PersonalProfile&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;School&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Major&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;JoinTime&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = usercoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;TotalNum&quot;</span>] = <span class="built_in">to_string</span>(usercoll.<span class="built_in">count_documents</span>(&#123;&#125;));</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除用户</span></span><br><span class="line"><span class="comment">    传入：Json(UserId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection usercoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;User&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = usercoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, userid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="用户模块实现"><a href="#用户模块实现" class="headerlink" title="用户模块实现"></a>用户模块实现</h2><h3 id="UserList-模块"><a href="#UserList-模块" class="headerlink" title="UserList 模块"></a>UserList 模块</h3><p>首先在 UserList.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册用户</span></span><br><span class="line"><span class="function">Json::Value <span class="title">RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录用户</span></span><br><span class="line"><span class="function">Json::Value <span class="title">LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新用户题目信息</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateUserProblemInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户Rank排名</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户大部分信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新用户信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户信息以供修改</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员分页查看用户列表</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除用户</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>然后在 UserList.cpp 添加函数定义：</p><p>实现都是直接使用 MongoDB 模块提供好的接口，后续将会对此接口进行扩展。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">UserList::RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">RegisterUser</span>(registerjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">LoginUser</span>(loginjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UserList::UpdateUserProblemInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateUserProblemInfo</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserRank</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateUserInfo</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserUpdateInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserSetInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">UserList::DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteUser</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Control-模块"><a href="#Control-模块" class="headerlink" title="Control 模块"></a>Control 模块</h3><p>首先在 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------用户表 User-----------------</span></span><br><span class="line">    <span class="comment">// 注册用户</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 登录用户</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取用户Rank排名</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取用户大部分信息</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新用户信息</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取用户信息，以供修改</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分页获取用户信息</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除用户</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>然后在 Control.cpp 添加函数定义：</p><p>函数定义直接使用了 UserList 模块提供好的接口，后续会扩展。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::RegisterUser</span><span class="params">(Json::Value &amp;registerjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">RegisterUser</span>(registerjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::LoginUser</span><span class="params">(Json::Value &amp;loginjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">LoginUser</span>(loginjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectUserRank</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserRank</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectUserInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::UpdateUserInfo</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateUserInfo</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectUserUpdateInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserUpdateInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectUserSetInfo</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectUserSetInfo</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteUser</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UserList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteUser</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HttpServer-模块"><a href="#HttpServer-模块" class="headerlink" title="HttpServer 模块"></a>HttpServer 模块</h3><p>首先在 HttpServer.cpp 文件的 Run 函数中添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -----------------用户----------------</span></span><br><span class="line"><span class="comment">// 注册用户</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/user/register&quot;</span>, doRegisterUser);</span><br><span class="line"><span class="comment">// 登录用户</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/user/login&quot;</span>, doLoginUser);</span><br><span class="line"><span class="comment">// 返回用户排名</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/user/rank&quot;</span>, doGetUserRank);</span><br><span class="line"><span class="comment">// 返回用户信息，用于主页展示</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/user/home&quot;</span>, doGetUserInfo);</span><br><span class="line"><span class="comment">// 更新用户信息</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/user/update&quot;</span>, doUpdateUserInfo);</span><br><span class="line"><span class="comment">// 返回用户信息，用于编辑修改</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/user/updateinfo&quot;</span>, doGetUserUpdateInfo);</span><br><span class="line"><span class="comment">// 分页获取用户信息</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/userlist/admin&quot;</span>, doGetUserSetInfo);</span><br><span class="line"><span class="comment">// 删除用户</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/user&quot;</span>, doDeleteUser);</span><br></pre></td></tr></table></figure><p>其次添加如下函数，对接口函数进行实现：</p><p>SetResponseStatus 函数主要对返回结果的 json 数据的 Result 变量进行检查并设置成相应的状态码。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据返回结果设置状态码</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SetResponseStatus</span><span class="params">(<span class="type">const</span> Json::Value &amp;json, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string result = json[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    <span class="keyword">if</span> (result == <span class="string">&quot;Success&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="string">&quot;400&quot;</span>) <span class="comment">// 请求参数有误</span></span><br><span class="line">    &#123;</span><br><span class="line">        res.status = <span class="number">400</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="string">&quot;401&quot;</span>) <span class="comment">// 无权限</span></span><br><span class="line">    &#123;</span><br><span class="line">        res.status = <span class="number">401</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (result == <span class="string">&quot;500&quot;</span>) <span class="comment">// 服务器出错啦</span></span><br><span class="line">    &#123;</span><br><span class="line">        res.status = <span class="number">500</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 请求注册用户</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doRegisterUser</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doRegister start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">RegisterUser</span>(jsonvalue);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblem end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 请求登录用户</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doLoginUser</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doLoginUser start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">LoginUser</span>(jsonvalue);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doLoginUser end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetUserRank</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserRank start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectUserRank</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserRank end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetUserInfo</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserInfo start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;UserId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string userid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;UserId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectUserInfo</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doUpdateUserInfo</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateUserInfo start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">UpdateUserInfo</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateUserInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetUserUpdateInfo</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserUpdateInfo start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;UserId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string userid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;UserId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectUserUpdateInfo</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserUpdateInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetUserSetInfo</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserSetInfo start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectUserSetInfo</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetUserSetInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteUser</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteUser start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;UserId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string userid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;UserId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value jsonvalue;</span><br><span class="line">        jsonvalue[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteUser</span>(jsonvalue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteUser end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h2><p><strong>注意：下面将会运行打包好的完整前端项目，这是为了更好验证后端的功能</strong></p><p>下载前端的打包文件夹：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/dist.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./dist dist.zip</span><br></pre></td></tr></table></figure><p>配置 Nginx 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>在 http 模块中添加如下配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">    listen 8080;</span><br><span class="line">    server_name 127.0.0.1;  <span class="comment"># 此处填写你的域名或IP</span></span><br><span class="line">    root /home/project/dist;   <span class="comment"># 此处填写你的网页根目录</span></span><br><span class="line">    location /api &#123;  <span class="comment"># 将API重定向到后台服务器（如果你修改了前端中的代理配置，这里需要对应&gt;的修改）</span></span><br><span class="line">        rewrite ^.*api/?(.*)$ /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">        proxy_pass http://127.0.0.1:8081; <span class="comment"># 填写你的后端地址和端口</span></span><br><span class="line">    &#125;</span><br><span class="line">    location / &#123;  <span class="comment"># 路由重定向以适应Vue中的路由</span></span><br><span class="line">        index index.html;</span><br><span class="line">        try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后开启 nginx 服务（启动前端）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启 nginx 服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭 nginx 服务</span></span><br><span class="line">sudo service nginx stop</span><br></pre></td></tr></table></figure><p>启动后端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/XDOJ</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><h2 id="实验总结-4"><a href="#实验总结-4" class="headerlink" title="实验总结"></a>实验总结</h2><ol><li>本次实验主要实现了用户模块。</li><li>向数据库添加五位用户数据。</li><li>使用到了雪花算法用于创建用户的 ID。</li><li>HttpServer 模块实现了根据返回结果设置状态码功能。</li><li>配置 Nginx 服务器并开启前端服务。</li></ol><p><strong>注意：添加的函数声明是放在 .h 头文件的 public 访问属性里面 .cpp 库文件里面的函数如果不是类函数存在调用关系，只能下面的函数调用上面的函数。</strong></p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code9.zip</span><br></pre></td></tr></table></figure><h1 id="6-题目模块实现"><a href="#6-题目模块实现" class="headerlink" title="6.题目模块实现"></a>6.题目模块实现</h1><h2 id="实验介绍-2"><a href="#实验介绍-2" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验主要实现题目模块和标签模块。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、ProblemList 模块、Tag 模块、MongoDB 模块：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/ea8ca344328dfb0db8dd884d99637457-0" alt="图片描述"></p><h4 id="知识点-3"><a href="#知识点-3" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现题目模块</li><li>实现标签模块</li><li>测试用例文件管理</li></ul><h2 id="实验准备-1"><a href="#实验准备-1" class="headerlink" title="实验准备"></a>实验准备</h2><p><strong>准备 problemdata 文件夹：</strong></p><p>该文件夹用于存放题目的测试用例数据和 SPJ 程序。</p><p>切记 problemdata 文件夹路径，与 XDOJ 项目文件夹路径位于同一级目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/project/</span><br><span class="line"></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/problemdata.zip</span><br><span class="line"></span><br><span class="line">unzip -d ./problemdata problemdata.zip</span><br></pre></td></tr></table></figure><p><strong>初始化数据库：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载题目表数据库脚本</span></span><br><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/init-problem.mongodb</span><br></pre></td></tr></table></figure><p>点击数据库脚本，点击右上角执行按钮执行。此脚本会向数据库添加 3 道题目。</p><h3 id="实现-MongoDB-模块-1"><a href="#实现-MongoDB-模块-1" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h3><p>在 MongoDataBase.h 添加如下函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ++++++++++++++++++++++++++题目表Problem+++++++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员查询题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,UserNickName,JudgeNum,Tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,JudgeNum,SubmitNum,ACNum,UserNickName,Tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入题目</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Description,TimeLimit,MemoryLimit,JudgeNum,Tags,UseNickName)</span></span><br><span class="line"><span class="comment">    传出：Json(Reuslt,Reason,ProblemId)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,Title,Description,TimeLimit,MemoryLimit,JudgeNum,Tags,UseNickName)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateProblem</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除题目</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页获取题目列表（包含查询条件，暂时未添加）</span></span><br><span class="line"><span class="comment">    前端传入</span></span><br><span class="line"><span class="comment">    Json(SearchInfo,Page,PageSize,MatchString)</span></span><br><span class="line"><span class="comment">    后端传出</span></span><br><span class="line"><span class="comment">    Json(ProblemId,Title,SubmitNum,CENum,ACNum,WANum,TLENum,MLENum,SENum,Tags),TotalNum</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页获取题目列表</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(ArrayInfo([ProblemId,Title,SubmitNum,CENum,ACNum,WANum,TLENum,MLENum,SENum,Tags]),TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新题目的状态数量</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,Status)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateProblemStatusNum</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取题目的所有标签</span></span><br><span class="line"><span class="comment">    传入：void</span></span><br><span class="line"><span class="comment">    传出：Json(tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getProblemTags</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>在 MongoDataBase.cpp 中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员查询题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,JudgeNum,UserNickName,Tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> problemid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, problemid))&#125;);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Description&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TimeLimit&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;MemoryLimit&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;JudgeNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = problemcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该信息！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,_id,Title,Description,TimeLimit,MemoryLimit,JudgeNum,SubmitNum,ACNum,UserNickName,Tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> problemid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, problemid))&#125;);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Description&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TimeLimit&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;MemoryLimit&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;JudgeNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        mongocxx::cursor cursor = problemcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该信息！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库出错啦！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：插入题目</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Description,TimeLimit,MemoryLimit,JudgeNum,Tags,UseNickName)</span></span><br><span class="line"><span class="comment">    传出：Json(Reuslt,Reason,ProblemId)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> problemid = ++m_problemid;</span><br><span class="line">        string title = insertjson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string description = insertjson[<span class="string">&quot;Description&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int</span> timelimit = <span class="built_in">stoi</span>(insertjson[<span class="string">&quot;TimeLimit&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> memorylimit = <span class="built_in">stoi</span>(insertjson[<span class="string">&quot;MemoryLimit&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> judgenum = <span class="built_in">stoi</span>(insertjson[<span class="string">&quot;JudgeNum&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string usernickname = insertjson[<span class="string">&quot;UserNickName&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="keyword">auto</span> in_array = document</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; problemid</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Description&quot;</span> &lt;&lt; description.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;TimeLimit&quot;</span> &lt;&lt; timelimit</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;MemoryLimit&quot;</span> &lt;&lt; memorylimit</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;JudgeNum&quot;</span> &lt;&lt; judgenum</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;CENum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;WANum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;RENum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;TLENum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;MLENum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;SENum&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">                        &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; usernickname.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; open_array;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; insertjson[<span class="string">&quot;Tags&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            string tag = insertjson[<span class="string">&quot;Tags&quot;</span>][i].<span class="built_in">asString</span>();</span><br><span class="line">            in_array = in_array &lt;&lt; tag.<span class="built_in">data</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        bsoncxx::document::value doc = in_array &lt;&lt; close_array &lt;&lt; finalize;</span><br><span class="line">        <span class="keyword">auto</span> result = problemcoll.<span class="built_in">insert_one</span>(doc.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">result</span>().<span class="built_in">inserted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库插入失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;ProblemId&quot;</span>] = (Json::Int64)problemid;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改题目信息</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,Title,Description,TimeLimit,MemoryLimit,JudgeNum,Tags,UseNickName)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::UpdateProblem</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> problemid = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string title = updatejson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string description = updatejson[<span class="string">&quot;Description&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int</span> timelimit = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;TimeLimit&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> memorylimit = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;MemoryLimit&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> judgenum = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;JudgeNum&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string usernickname = updatejson[<span class="string">&quot;UserNickName&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        <span class="keyword">auto</span> in_array = document</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Description&quot;</span> &lt;&lt; description.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;TimeLimit&quot;</span> &lt;&lt; timelimit</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;MemoryLimit&quot;</span> &lt;&lt; memorylimit</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;JudgeNum&quot;</span> &lt;&lt; judgenum</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;UserNickName&quot;</span> &lt;&lt; usernickname.<span class="built_in">data</span>()</span><br><span class="line">                        &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; open_array;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; updatejson[<span class="string">&quot;Tags&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            string tag = updatejson[<span class="string">&quot;Tags&quot;</span>][i].<span class="built_in">asString</span>();</span><br><span class="line">            in_array = in_array &lt;&lt; tag.<span class="built_in">data</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        bsoncxx::document::value doc = in_array &lt;&lt; close_array &lt;&lt; close_document &lt;&lt; finalize;</span><br><span class="line"></span><br><span class="line">        problemcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, problemid))&#125;, doc.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除题目</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> problemid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = problemcoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, problemid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到该数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：将字符串变为数字</span></span><br><span class="line"><span class="comment">    主要为查询ID服务，限制：ID长度不能大于4，只关注数字</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mystoi</span><span class="params">(string num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> resnum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (num.<span class="built_in">size</span>() &gt;= <span class="number">4</span> || num.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> resnum;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> n : num)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isdigit</span>(n))</span><br><span class="line">        &#123;</span><br><span class="line">            resnum = resnum * <span class="number">10</span> + n - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resnum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：将字符串变为int64</span></span><br><span class="line"><span class="comment">    主要为查询ID服务，限制：ID长度不能大于19，只关注数字</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int64_t</span> <span class="title">mystoll</span><span class="params">(string num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int64_t</span> resnum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (num.<span class="built_in">size</span>() &gt;= <span class="number">19</span> || num.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> resnum;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> n : num)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isdigit</span>(n))</span><br><span class="line">        &#123;</span><br><span class="line">            resnum = resnum * <span class="number">10</span> + n - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resnum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页获取题目列表</span></span><br><span class="line"><span class="comment">    前端传入</span></span><br><span class="line"><span class="comment">    Json(SearchInfo&#123;Id,Title,Tags[]&#125;,Page,PageSize)</span></span><br><span class="line"><span class="comment">    后端传出</span></span><br><span class="line"><span class="comment">    Json((Result,Reason,ArrayInfo[ProblemId,Title,SubmitNum,CENum,ACNum,WANum,RENum,TLENum,MLENum,SENum,Tags]),TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value searchinfo = queryjson[<span class="string">&quot;SearchInfo&quot;</span>];</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询ID</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;Id&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> id = <span class="built_in">mystoi</span>(searchinfo[<span class="string">&quot;Id&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, id))&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, id))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询标题</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; open_document</span><br><span class="line">                &lt;&lt; <span class="string">&quot;$regex&quot;</span> &lt;&lt; searchinfo[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>()</span><br><span class="line">                &lt;&lt; close_document;</span><br><span class="line">            pipe.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line">            pipetot.<span class="built_in">match</span>(document.<span class="built_in">view</span>());</span><br><span class="line">            document.<span class="built_in">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询标签</span></span><br><span class="line">        <span class="keyword">if</span> (searchinfo[<span class="string">&quot;Tags&quot;</span>].<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">auto</span> in_array = document</span><br><span class="line">                            &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; open_document</span><br><span class="line">                            &lt;&lt; <span class="string">&quot;$in&quot;</span> &lt;&lt; open_array;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; searchinfo[<span class="string">&quot;Tags&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                in_array = in_array</span><br><span class="line">                           &lt;&lt; searchinfo[<span class="string">&quot;Tags&quot;</span>][i].<span class="built_in">asString</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            bsoncxx::document::value doc = in_array &lt;&lt; close_array &lt;&lt; close_document &lt;&lt; finalize;</span><br><span class="line">            pipe.<span class="built_in">match</span>(doc.<span class="built_in">view</span>());</span><br><span class="line">            pipetot.<span class="built_in">match</span>(doc.<span class="built_in">view</span>());</span><br><span class="line">            document.<span class="built_in">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = problemcoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 排序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, <span class="number">1</span>))&#125;);</span><br><span class="line">        <span class="comment">// 跳过</span></span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        <span class="comment">// 限制</span></span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        <span class="comment">// 进行</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProblemId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;WANum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TLENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;MLENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = problemcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Reuslt&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库出错啦！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页获取题目列表</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo([ProblemId,Title,SubmitNum,CENum,ACNum,WANum,RENum,TLENum,MLENum,SENum,Tags]),TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = problemcoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 排序</span></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, <span class="number">1</span>))&#125;);</span><br><span class="line">        <span class="comment">// 跳过</span></span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        <span class="comment">// 限制</span></span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        <span class="comment">// 进行</span></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ProblemId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;$_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;ACNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;WANum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;RENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;TLENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;MLENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;SENum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Tags&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        Json::Value arryjson;</span><br><span class="line">        cursor = problemcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            arryjson.<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;ArrayInfo&quot;</span>] = arryjson;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库出错啦！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新题目的状态数量</span></span><br><span class="line"><span class="comment">    传入：Json(ProblemId,Status)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateProblemStatusNum</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> problemid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> status = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Status&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        string statusnum = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (status == <span class="number">1</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;CENum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">2</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;ACNum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">3</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;WANum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">4</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;RENum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">5</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;TLENum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">6</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;MLENum&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (status == <span class="number">7</span>)</span><br><span class="line">            statusnum = <span class="string">&quot;SENum&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;SubmitNum&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; statusnum &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        problemcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, problemid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：获取题目的所有标签</span></span><br><span class="line"><span class="comment">    传入：void</span></span><br><span class="line"><span class="comment">    传出：Json(tags)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::getProblemTags</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">    mongocxx::collection problemcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Problem&quot;</span>];</span><br><span class="line">    mongocxx::cursor cursor = problemcoll.<span class="built_in">distinct</span>(&#123;<span class="string">&quot;Tags&quot;</span>&#125;, &#123;&#125;);</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">    &#123;</span><br><span class="line">        reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现-ProblemList-模块"><a href="#实现-ProblemList-模块" class="headerlink" title="实现 ProblemList 模块"></a>实现 ProblemList 模块</h3><p>在 ProblemList.h 中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 管理员查询题目详细信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户查询题目详细信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入题目</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改题目</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateProblem</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题目</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过普通查询获取题库数据</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询列表</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新题目状态数量</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateProblemStatusNum</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br></pre></td></tr></table></figure><p>在 ProblemList.cpp 添加函数定义：</p><p>其中 PROBLEMDATAPATH 变量表示 problemdata 文件夹的相对路径。</p><p>当题目增删改时，problemdata 中的数据文件也会相应改变。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> string PROBLEMDATAPATH = <span class="string">&quot;../../problemdata/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 获取基本信息</span></span><br><span class="line">    Json::Value resjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemInfoByAdmin</span>(queryjson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (resjson[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取测试点信息</span></span><br><span class="line">    string problemid = resjson[<span class="string">&quot;_id&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    <span class="type">int</span> judgenum = <span class="built_in">stoi</span>(resjson[<span class="string">&quot;JudgeNum&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">    string DATA_PATH = PROBLEMDATAPATH + problemid + <span class="string">&quot;/&quot;</span>;</span><br><span class="line">    ifstream infilein, infileout;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= judgenum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value jsoninfo;</span><br><span class="line">        string infilepath = DATA_PATH + <span class="built_in">to_string</span>(i) + <span class="string">&quot;.in&quot;</span>;</span><br><span class="line">        string outfilepath = DATA_PATH + <span class="built_in">to_string</span>(i) + <span class="string">&quot;.out&quot;</span>;</span><br><span class="line"></span><br><span class="line">        infilein.<span class="built_in">open</span>(infilepath.<span class="built_in">data</span>());</span><br><span class="line">        <span class="function">string <span class="title">infile</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infilein)),</span></span></span><br><span class="line"><span class="params"><span class="function">                      (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line"></span><br><span class="line">        infileout.<span class="built_in">open</span>(outfilepath.<span class="built_in">data</span>());</span><br><span class="line">        <span class="function">string <span class="title">outfile</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infileout)),</span></span></span><br><span class="line"><span class="params"><span class="function">                       (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">        jsoninfo[<span class="string">&quot;in&quot;</span>] = infile;</span><br><span class="line">        jsoninfo[<span class="string">&quot;out&quot;</span>] = outfile;</span><br><span class="line"></span><br><span class="line">        infilein.<span class="built_in">close</span>();</span><br><span class="line">        infileout.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;TestInfo&quot;</span>].<span class="built_in">append</span>(jsoninfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取SPJ文件</span></span><br><span class="line">    resjson[<span class="string">&quot;IsSPJ&quot;</span>] = <span class="literal">false</span>;</span><br><span class="line">    string spjpath = DATA_PATH + <span class="string">&quot;spj.cpp&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">access</span>(spjpath.<span class="built_in">data</span>(), F_OK) == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ifstream infilespj;</span><br><span class="line">        infilespj.<span class="built_in">open</span>(spjpath.<span class="built_in">data</span>());</span><br><span class="line">        <span class="function">string <span class="title">spjfile</span><span class="params">((istreambuf_iterator&lt;<span class="type">char</span>&gt;(infilespj)),</span></span></span><br><span class="line"><span class="params"><span class="function">                       (istreambuf_iterator&lt;<span class="type">char</span>&gt;()))</span></span>;</span><br><span class="line">        resjson[<span class="string">&quot;SPJ&quot;</span>] = spjfile;</span><br><span class="line">        resjson[<span class="string">&quot;IsSPJ&quot;</span>] = <span class="literal">true</span>;</span><br><span class="line">        infilespj.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblem</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">InsertProblemDataInfo</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 添加测试用例</span></span><br><span class="line">    string DATA_PATH = PROBLEMDATAPATH + insertjson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    string command = <span class="string">&quot;mkdir &quot;</span> + DATA_PATH;</span><br><span class="line">    <span class="comment">// 创建文件夹</span></span><br><span class="line">    <span class="built_in">system</span>(command.<span class="built_in">data</span>());</span><br><span class="line">    <span class="comment">// 添加测试文件</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= insertjson[<span class="string">&quot;TestInfo&quot;</span>].<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string index = <span class="built_in">to_string</span>(i);</span><br><span class="line">        ofstream outfilein, outfileout;</span><br><span class="line">        string inpath = DATA_PATH + <span class="string">&quot;/&quot;</span> + index + <span class="string">&quot;.in&quot;</span>;</span><br><span class="line">        string outpath = DATA_PATH + <span class="string">&quot;/&quot;</span> + index + <span class="string">&quot;.out&quot;</span>;</span><br><span class="line"></span><br><span class="line">        outfilein.<span class="built_in">open</span>(inpath.<span class="built_in">data</span>());</span><br><span class="line">        outfilein &lt;&lt; insertjson[<span class="string">&quot;TestInfo&quot;</span>][i - <span class="number">1</span>][<span class="string">&quot;in&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        outfilein.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        outfileout.<span class="built_in">open</span>(outpath.<span class="built_in">data</span>());</span><br><span class="line">        outfileout &lt;&lt; insertjson[<span class="string">&quot;TestInfo&quot;</span>][i - <span class="number">1</span>][<span class="string">&quot;out&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        outfileout.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 添加SPJ文件</span></span><br><span class="line">    <span class="keyword">if</span> (insertjson[<span class="string">&quot;IsSPJ&quot;</span>].<span class="built_in">asBool</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        ofstream outfilespj;</span><br><span class="line">        string spjpath = DATA_PATH + <span class="string">&quot;/spj.cpp&quot;</span>;</span><br><span class="line">        outfilespj.<span class="built_in">open</span>(spjpath.<span class="built_in">data</span>());</span><br><span class="line">        outfilespj &lt;&lt; insertjson[<span class="string">&quot;SPJ&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        outfilespj.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::InsertProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value tmpjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertProblem</span>(insertjson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tmpjson[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Fail&quot;</span>) <span class="comment">// 插入失败</span></span><br><span class="line">        <span class="keyword">return</span> tmpjson;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入信息</span></span><br><span class="line">    Json::Value problemjson;</span><br><span class="line">    problemjson[<span class="string">&quot;_id&quot;</span>] = tmpjson[<span class="string">&quot;ProblemId&quot;</span>];</span><br><span class="line">    problemjson[<span class="string">&quot;Title&quot;</span>] = insertjson[<span class="string">&quot;Title&quot;</span>];</span><br><span class="line">    problemjson[<span class="string">&quot;Description&quot;</span>] = insertjson[<span class="string">&quot;Description&quot;</span>];</span><br><span class="line">    problemjson[<span class="string">&quot;JudgeNum&quot;</span>] = insertjson[<span class="string">&quot;JudgeNum&quot;</span>];</span><br><span class="line">    problemjson[<span class="string">&quot;TimeLimit&quot;</span>] = insertjson[<span class="string">&quot;TimeLimit&quot;</span>];</span><br><span class="line">    problemjson[<span class="string">&quot;MemoryLimit&quot;</span>] = insertjson[<span class="string">&quot;MemoryLimit&quot;</span>];</span><br><span class="line"></span><br><span class="line">    insertjson[<span class="string">&quot;ProblemId&quot;</span>] = tmpjson[<span class="string">&quot;ProblemId&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">InsertProblemDataInfo</span>(insertjson);</span><br><span class="line">    <span class="keyword">return</span> tmpjson;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::UpdateProblem</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value tmpjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateProblem</span>(updatejson);</span><br><span class="line">    <span class="keyword">if</span> (tmpjson[<span class="string">&quot;Result&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> tmpjson;</span><br><span class="line"></span><br><span class="line">    string problemid = updatejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    string DATA_PATH = PROBLEMDATAPATH + problemid;</span><br><span class="line">    <span class="comment">// 删除文件夹</span></span><br><span class="line">    string command = <span class="string">&quot;rm -rf &quot;</span> + DATA_PATH;</span><br><span class="line">    <span class="built_in">system</span>(command.<span class="built_in">data</span>());</span><br><span class="line">    <span class="comment">// 创建文件夹</span></span><br><span class="line">    <span class="built_in">InsertProblemDataInfo</span>(updatejson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tmpjson;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value tmpjson = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteProblem</span>(deletejson);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tmpjson[<span class="string">&quot;Result&quot;</span>] == <span class="string">&quot;Fail&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> tmpjson;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除数据</span></span><br><span class="line">    string DATA_PATH = PROBLEMDATAPATH + deletejson[<span class="string">&quot;ProblemId&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    string command = <span class="string">&quot;rm -rf &quot;</span> + DATA_PATH;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">system</span>(command.<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tmpjson;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">ProblemList::SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ProblemList::UpdateProblemStatusNum</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateProblemStatusNum</span>(updatejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现-Tag-模块"><a href="#实现-Tag-模块" class="headerlink" title="实现 Tag 模块"></a>实现 Tag 模块</h3><p>向 Tag.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitProblemTags</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 获取题目的所有标签</span></span><br><span class="line"><span class="function">Json::Value <span class="title">getProblemTags</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>向 Tag.h 添加变量：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Json::Value problemtags;</span><br></pre></td></tr></table></figure><p>向 Tag.cpp 中添加函数定义：</p><p>该模块直接将标签数据放在 JSON 变量中，直接返回变量即可。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Tag::InitProblemTags</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value jsonvalue = MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getProblemTags</span>();</span><br><span class="line">    problemtags[<span class="string">&quot;Tags&quot;</span>] = jsonvalue[<span class="string">&quot;values&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">Tag::getProblemTags</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> problemtags;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Control-模块-1"><a href="#Control-模块-1" class="headerlink" title="Control 模块"></a>Control 模块</h3><p>向 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------题目 Problem -------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查看题目数据</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户查询题目信息</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编辑题目</span></span><br><span class="line"><span class="function">Json::Value <span class="title">EditProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题目</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回题库</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询列表</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取标签</span></span><br><span class="line"><span class="function">Json::Value <span class="title">GetTags</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 文件中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">Control::SelectProblemInfoByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemInfoByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectProblem</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblem</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::EditProblem</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (insertjson[<span class="string">&quot;EditType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Insert&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson = ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertProblem</span>(insertjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (insertjson[<span class="string">&quot;EditType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Update&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson = ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateProblem</span>(insertjson);</span><br><span class="line">    &#125;</span><br><span class="line">    Tag::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InitProblemTags</span>();</span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteProblem</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteProblem</span>(deletejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectProblemList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectProblemListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ProblemList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectProblemListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::GetTags</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (queryjson[<span class="string">&quot;TagType&quot;</span>].<span class="built_in">asString</span>() == <span class="string">&quot;Problem&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Tag::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">getProblemTags</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 Control.cpp 的构造函数中添加对标签的初始化：</p><p><strong>注意：Control 的构造函数：Control()，析构函数：~Control()。</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化题目标签</span></span><br><span class="line">Tag::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InitProblemTags</span>();</span><br></pre></td></tr></table></figure><h3 id="HttpServer-模块-1"><a href="#HttpServer-模块-1" class="headerlink" title="HttpServer 模块"></a>HttpServer 模块</h3><p>在 HttpServer.cpp 文件的 Run 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------题目------------------</span></span><br><span class="line"><span class="comment">// 获取单个题目</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/problem&quot;</span>, doGetProblem);</span><br><span class="line"><span class="comment">// 获取题库</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/problemlist&quot;</span>, doGetProblemList);</span><br><span class="line"><span class="comment">// 管理员获取题库</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/problemlist/admin&quot;</span>, doGetProblemListByAdmin);</span><br><span class="line"><span class="comment">// 获取单个题目详细信息</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/problem/select&quot;</span>, doGetProblemInfo);</span><br><span class="line"><span class="comment">// 编辑题目 包含添加题目，修改题目(接口修改一下)</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/problem/edit&quot;</span>, doEditProblem);</span><br><span class="line"><span class="comment">// 删除题目</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/problem&quot;</span>, doDeleteProblem);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取标签</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/tags&quot;</span>, doGetTags);</span><br></pre></td></tr></table></figure><p>在 HttpServer.cpp 中添加函数定义:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回网页请求的题目描述</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetProblem</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblem start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;ProblemId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string problemid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;ProblemId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;ProblemId&quot;</span>] = problemid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectProblem</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblem end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回题库</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetProblemList</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemList start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SearchInfo&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;请求参数有误！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value serachinfo;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="comment">// 解析传入的json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SearchInfo&quot;</span>), serachinfo);</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SearchInfo&quot;</span>] = serachinfo;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectProblemList</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemList end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回管理员的题库</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetProblemListByAdmin</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemListByAdmin start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;请求参数有误！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectProblemListByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemListByAdmin end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回网页请求的题目描述</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetProblemInfo</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemInfo start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;ProblemId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;请求参数有误！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string problemid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;ProblemId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;ProblemId&quot;</span>] = problemid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectProblemInfoByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetProblemInfo end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doEditProblem</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doEditProblem start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">EditProblem</span>(jsonvalue[<span class="string">&quot;datainfo&quot;</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doEditProblem end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteProblem</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteProblem start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;ProblemId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;请求参数有误！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string problemid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;ProblemId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value deletejson;</span><br><span class="line">        deletejson[<span class="string">&quot;ProblemId&quot;</span>] = problemid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteProblem</span>(deletejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteProblem end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetTags</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetTags start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value queryjson;</span><br><span class="line">    string tagtype = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;TagType&quot;</span>);</span><br><span class="line">    queryjson[<span class="string">&quot;TagType&quot;</span>] = tagtype;</span><br><span class="line"></span><br><span class="line">    Json::Value resjson = control.<span class="built_in">GetTags</span>(queryjson);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetTags end!!!\n&quot;</span>);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>点击右侧 Web 服务：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/793d46e96f33c2104490107224a0b3fa-0" alt="图片描述"></p><p>点击题库，此时可以看见我们脚本插入的三条题目数据：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4e88c63cdb68ee3c0c9af635d7c4f2bb-0" alt="图片描述"></p><p>点击题目，可以查看题目的信息：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f2a5e8f200d373407564d7f4582cebeb-0" alt="图片描述"></p><p>登录管理员账户，点击管理员，点击题目管理，可以对题目进行管理：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/af9a19e3717e5a7ddd5d2e86f8b1d1a6-0" alt="图片描述"></p><p>点击添加题目，添加完之后 problemdata 文件夹会添加对应的测试文件和 SPJ.cpp。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/297c70a6b278392d808a846e8caedf03-0" alt="图片描述"></p><h2 id="实验总结-5"><a href="#实验总结-5" class="headerlink" title="实验总结"></a>实验总结</h2><ol><li>实现了题目模块和标签模块。</li><li>准备好 problemdata 文件夹，并放入测试用例数据和 SPJ 程序。</li><li>向数据库插入三道题目数据。</li><li>运行并测试题目模块功能。</li></ol><p><strong>注意：Control 的构造函数：Control()，析构函数：~Control()。</strong></p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code10.zip</span><br></pre></td></tr></table></figure><h1 id="7-公告模块实现"><a href="#7-公告模块实现" class="headerlink" title="7.公告模块实现"></a>7.公告模块实现</h1><h2 id="实验介绍-3"><a href="#实验介绍-3" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现公告模块。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、AnnouncementList 模块、MongoDB 模块</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/af4583c8cd897d819749c03f7b5c7ce6-0" alt="图片描述"></p><h4 id="知识点-4"><a href="#知识点-4" class="headerlink" title="知识点"></a>知识点</h4><ul><li>公告模块实现</li></ul><h2 id="实现-MongoDB-模块-2"><a href="#实现-MongoDB-模块-2" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>在 MongoDataBase.h 文件添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +++++++++++++++++++++++++Announcement 公告表++++++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加公告</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,UserId,Level)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询公告</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json([Result,Reason,_id,Title,Views,Comments,CreateTime],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询公告的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,Level)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询公告的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Title,Content,Views,Comments,CreateTime,UpdateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改公告的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateAnnouncementComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新公告</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId,Title,Content,Level)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除公告</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>在 MongoDataBase.cpp 中添加函数定义：</p><p>对公告的增删改查，比较简单。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加公告</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,UserId,Level)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_articleid;</span><br><span class="line">        string title = insertjson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = insertjson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> level = <span class="built_in">stoi</span>(insertjson[<span class="string">&quot;Level&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Level&quot;</span> &lt;&lt; level</span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = announcementcoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">result</span>().<span class="built_in">inserted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库插入失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询公告</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo[_id,Title,Views,Comments,CreateTime],TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = announcementcoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;Level&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line"></span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = announcementcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询公告的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,Level)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> announcementid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;AnnouncementId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, announcementid))&#125;);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Level&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        mongocxx::cursor cursor = announcementcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据！,可能是请求参数出错！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询公告的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Title,Content,Views,Comments,CreateTime,UpdateTime)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> announcementid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;AnnouncementId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line">        <span class="comment">// 浏览量加一</span></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line">        announcementcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, announcementid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询</span></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, announcementid))&#125;);</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        mongocxx::cursor cursor = announcementcoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据，可能是请求参数出错！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改公告的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateAnnouncementComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> articleid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;ArticleId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> num = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Num&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; num &lt;&lt; close_document;</span><br><span class="line">        announcementcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, articleid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新公告</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId,Title,Content,Level)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> announcementid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;AnnouncementId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string title = updatejson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = updatejson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int</span> level = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Level&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Level&quot;</span> &lt;&lt; level</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        announcementcoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, announcementid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除公告</span></span><br><span class="line"><span class="comment">    传入：Json(AnnouncementId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> announcementid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;AnnouncementId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection announcementcoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Announcement&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = announcementcoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, announcementid))&#125;);</span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库删除失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-AnnouncementList-模块"><a href="#实现-AnnouncementList-模块" class="headerlink" title="实现 AnnouncementList 模块"></a>实现 AnnouncementList 模块</h2><p>向 AnnouncementList.h 中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加公告</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分页查询公告</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 分页查询公告</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncementListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询公告的内容</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改评论数的数量</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateAnnouncementComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新公告</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除公告</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 AnnouncementList.cpp 中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertAnnouncement</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::SelectAnnouncementListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncement</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">AnnouncementList::UpdateAnnouncementComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateAnnouncementComments</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateAnnouncement</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">AnnouncementList::DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteAnnouncement</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块"><a href="#实现-Control-模块" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>向 Control.h 中添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------------公告---------------------------</span></span><br><span class="line">    <span class="comment">// 查询公告列表</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 管理员查询公告列表</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectAnnouncementListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询公告</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询公告 进行编辑</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入公告</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新公告</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除公告</span></span><br><span class="line">    <span class="function">Json::Value <span class="title">DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 中添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------------公告------------------------</span></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectAnnouncementList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectAnnouncementListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectAnnouncement</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncement</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectAnnouncementByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectAnnouncementByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::InsertAnnouncement</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertAnnouncement</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::UpdateAnnouncement</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateAnnouncement</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteAnnouncement</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson = AnnouncementList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteAnnouncement</span>(deletejson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当评论模块完成时，将下面注释去掉</span></span><br><span class="line">    <span class="comment">// if (resjson[&quot;Result&quot;].asString() == &quot;Success&quot;)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     Json::Value json;</span></span><br><span class="line">    <span class="comment">//     json[&quot;ArticleId&quot;] = deletejson[&quot;AnnouncementId&quot;];</span></span><br><span class="line">    <span class="comment">//     CommentList::GetInstance()-&gt;DeleteArticleComment(json);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块"><a href="#实现-HttpServer-模块" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>在 HttpServer.cpp 文件的 Run 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --------------公告--------------------</span></span><br><span class="line"><span class="comment">// 获取公告列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/announcementlist&quot;</span>, doGetAnnouncementList);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取公告列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/announcementlist/admin&quot;</span>, doGetAnnouncementListByAdmin);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取公告内容</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/announcement&quot;</span>, doGetAnnouncement);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取公告信息用于编辑</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/announcement/select&quot;</span>, doSelectAnnouncement);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户提交公告</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/announcement/insert&quot;</span>, doInsertAnnouncement);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户修改公告</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/announcement/update&quot;</span>, doUpdateAnnouncement);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户删除公告</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/announcement&quot;</span>, doDeleteAnnouncement);</span><br></pre></td></tr></table></figure><p>向 HttpServer.cpp 文件中添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------------公告------------------------------</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetAnnouncementList</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncementList start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectAnnouncementList</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncementList end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetAnnouncementListByAdmin</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncementListByAdmin start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectAnnouncementListByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncementListByAdmin end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetAnnouncement</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncement start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;AnnouncementId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string announcementid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;AnnouncementId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;AnnouncementId&quot;</span>] = announcementid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectAnnouncement</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetAnnouncement end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSelectAnnouncement</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectAnnouncement start!!!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;AnnouncementId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string announcementid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;AnnouncementId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;AnnouncementId&quot;</span>] = announcementid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectAnnouncementByEdit</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectAnnouncement end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doInsertAnnouncement</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertAnnouncement start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">InsertAnnouncement</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertAnnouncement end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doUpdateAnnouncement</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateAnnouncement start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">UpdateAnnouncement</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateAnnouncement end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteAnnouncement</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteAnnouncement start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;AnnouncementId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string announcementid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;AnnouncementId&quot;</span>);</span><br><span class="line">        Json::Value deletejson;</span><br><span class="line">        deletejson[<span class="string">&quot;AnnouncementId&quot;</span>] = announcementid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteAnnouncement</span>(deletejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteAnnouncement end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>登录管理员账户，进入管理员界面，打开公告管理，点击添加公告：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/1a573da5c2c090cab01ceeac343e85f4-0" alt="图片描述"></p><p>可以尝试编辑内容，并发布公告：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b986ba5fc41c30d7e4f1bcc09903840b-0" alt="图片描述"></p><p>点击首页进行查看发布的公告：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f4d23aaee72b6bcf929c32612bb8460f-0" alt="图片描述"></p><p>点击查看公告：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2ed6fc01fe1d2ac6601fe6a1e386e2d4-0" alt="图片描述"></p><h2 id="实验总结-6"><a href="#实验总结-6" class="headerlink" title="实验总结"></a>实验总结</h2><p>本章节主要实现公告模块，对公告进行增删改查。</p><p>公告模块、讨论模块、题解模块这三个模块实现非常类似，个别字段不同。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code11.zip</span><br></pre></td></tr></table></figure><h1 id="8-讨论模块实现"><a href="#8-讨论模块实现" class="headerlink" title="8.讨论模块实现"></a>8.讨论模块实现</h1><h2 id="实验介绍-4"><a href="#实验介绍-4" class="headerlink" title="实验介绍"></a>实验介绍</h2><p>本次实验实现讨论模块。</p><p>本次实验涉及到 HttpServer 模块、Control 模块、DiscussList 模块、MongoDB 模块</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d393b78a6f80d27a4c5d4d9bb7566483-0" alt="图片描述"></p><h4 id="知识点-5"><a href="#知识点-5" class="headerlink" title="知识点"></a>知识点</h4><ul><li>实现讨论模块</li></ul><h2 id="实现-MongoDB-模块-3"><a href="#实现-MongoDB-模块-3" class="headerlink" title="实现 MongoDB 模块"></a>实现 MongoDB 模块</h2><p>向 MongoDataBase.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +++++++++++++++++++++++++Disscuss 讨论表++++++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加讨论</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,ParentId,UserId) 如果是父讨论ParentId=0</span></span><br><span class="line"><span class="comment">    传出：Json(Result)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询讨论</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo,Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页查询讨论</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询讨论的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询讨论的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Resutl,Reason,Content,Views,Comments,CreateTime,UpdateTime,User.NickName,User.Avatar)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改讨论的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">UpdateDiscussComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新讨论</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId,Title,Content)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除讨论</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 MongoDataBase.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：添加讨论</span></span><br><span class="line"><span class="comment">    传入：Json(Title,Content,ParentId,UserId) 如果是父讨论ParentId=0</span></span><br><span class="line"><span class="comment">    传出：Json(Result)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> id = ++m_articleid;</span><br><span class="line">        string title = insertjson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = insertjson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">atoll</span>(insertjson[<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">data</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">atoll</span>(insertjson[<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>().<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span> &lt;&lt; id</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;ParentId&quot;</span> &lt;&lt; parentid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; userid</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">0</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = discusscoll.<span class="built_in">insert_one</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">result</span>().<span class="built_in">inserted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库插入失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：分页查询讨论</span></span><br><span class="line"><span class="comment">    传入：Json(SearchInfo(ParentId,UserId),Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,ArrayInfo(_id,Title,Views,Comments,CreateTime,User.Avatar,User.NickName),TotalNum)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> parentid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SearchInfo&quot;</span>][<span class="string">&quot;ParentId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int64_t</span> userid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;SearchInfo&quot;</span>][<span class="string">&quot;UserId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (parentid &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, parentid))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (userid &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;UserId&quot;</span>, userid))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (parentid == <span class="number">0</span> &amp;&amp; userid == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, <span class="number">0</span>))&#125;);</span><br><span class="line">            pipetot.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;ParentId&quot;</span>, <span class="number">0</span>))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = discusscoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = discusscoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：管理员分页查询讨论</span></span><br><span class="line"><span class="comment">    传入：Json(Page,PageSize)</span></span><br><span class="line"><span class="comment">    传出：Json(_id,Title,Views,Comments,CreateTime,UserId,User.Avatar,User.NickName)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> page = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;Page&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> pagesize = <span class="built_in">stoi</span>(queryjson[<span class="string">&quot;PageSize&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> skip = (page - <span class="number">1</span>) * pagesize;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe, pipetot;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line">        <span class="comment">// 获取总条数</span></span><br><span class="line">        pipetot.<span class="built_in">count</span>(<span class="string">&quot;TotalNum&quot;</span>);</span><br><span class="line">        mongocxx::cursor cursor = discusscoll.<span class="built_in">aggregate</span>(pipetot);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pipe.<span class="built_in">sort</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;CreateTime&quot;</span>, <span class="number">-1</span>))&#125;);</span><br><span class="line">        pipe.<span class="built_in">skip</span>(skip);</span><br><span class="line">        pipe.<span class="built_in">limit</span>(pagesize);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        cursor = discusscoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            Json::Value jsonvalue;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), jsonvalue);</span><br><span class="line">            resjson[<span class="string">&quot;ArrayInfo&quot;</span>].<span class="built_in">append</span>(jsonvalue);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询讨论的详细信息，主要是编辑时的查询</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason,Title,Content,UserId)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> discussid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;DiscussId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;);</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        mongocxx::cursor cursor = discusscoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：查询讨论的详细内容，并且将其浏览量加一</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Resutl,Reason,Title,Content,Views,Comments,CreateTime,UpdateTime,User.NickName,User.Avatar)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> discussid = <span class="built_in">stoll</span>(queryjson[<span class="string">&quot;DiscussId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line">        <span class="comment">// 浏览量加一</span></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; close_document;</span><br><span class="line">        discusscoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询Content</span></span><br><span class="line">        mongocxx::pipeline pipe;</span><br><span class="line">        pipe.<span class="built_in">match</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;);</span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;from&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;localField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UserId&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;foreignField&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;_id&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;as&quot;</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User&quot;</span>;</span><br><span class="line">        pipe.<span class="built_in">lookup</span>(document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        document.<span class="built_in">clear</span>();</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Views&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;CreateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User._id&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.Avatar&quot;</span> &lt;&lt; <span class="number">1</span></span><br><span class="line">            &lt;&lt; <span class="string">&quot;User.NickName&quot;</span> &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        pipe.<span class="built_in">project</span>(document.<span class="built_in">view</span>());</span><br><span class="line">        mongocxx::cursor cursor = discusscoll.<span class="built_in">aggregate</span>(pipe);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cursor.<span class="built_in">begin</span>() == cursor.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库未查询到数据，可能是请求参数错误！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> doc : cursor)</span><br><span class="line">        &#123;</span><br><span class="line">            reader.<span class="built_in">parse</span>(bsoncxx::<span class="built_in">to_json</span>(doc), resjson);</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：修改讨论的评论数</span></span><br><span class="line"><span class="comment">    传入：Json(ArticleId,Num)</span></span><br><span class="line"><span class="comment">    传出：bool</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MoDB::UpdateDiscussComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> discussid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;ArticleId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="type">int</span> num = <span class="built_in">stoi</span>(updatejson[<span class="string">&quot;Num&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$inc&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Comments&quot;</span> &lt;&lt; num &lt;&lt; close_document;</span><br><span class="line">        discusscoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：更新讨论</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId,Title,Content)</span></span><br><span class="line"><span class="comment">    传出；Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> discussid = <span class="built_in">stoll</span>(updatejson[<span class="string">&quot;DiscussId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line">        string title = updatejson[<span class="string">&quot;Title&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">        string content = updatejson[<span class="string">&quot;Content&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line"></span><br><span class="line">        bsoncxx::builder::stream::document document&#123;&#125;;</span><br><span class="line">        document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;$set&quot;</span> &lt;&lt; open_document</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Title&quot;</span> &lt;&lt; title.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;Content&quot;</span> &lt;&lt; content.<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; <span class="string">&quot;UpdateTime&quot;</span> &lt;&lt; <span class="built_in">GetTime</span>().<span class="built_in">data</span>()</span><br><span class="line">            &lt;&lt; close_document;</span><br><span class="line"></span><br><span class="line">        discusscoll.<span class="built_in">update_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;, document.<span class="built_in">view</span>());</span><br><span class="line"></span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    功能：删除讨论</span></span><br><span class="line"><span class="comment">    传入：Json(DiscussId)</span></span><br><span class="line"><span class="comment">    传出：Json(Result,Reason)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Json::Value <span class="title">MoDB::DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int64_t</span> discussid = <span class="built_in">stoll</span>(deletejson[<span class="string">&quot;DiscussId&quot;</span>].<span class="built_in">asString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> client = pool.<span class="built_in">acquire</span>();</span><br><span class="line">        mongocxx::collection discusscoll = (*client)[<span class="string">&quot;XDOJ&quot;</span>][<span class="string">&quot;Discuss&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> result = discusscoll.<span class="built_in">delete_one</span>(&#123;<span class="built_in">make_document</span>(<span class="built_in">kvp</span>(<span class="string">&quot;_id&quot;</span>, discussid))&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ((*result).<span class="built_in">deleted_count</span>() &lt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Fail&quot;</span>;</span><br><span class="line">            resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库删除失败！&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> resjson;</span><br><span class="line">        &#125;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;Success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;数据库异常！&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> resjson;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-DiscussList-模块"><a href="#实现-DiscussList-模块" class="headerlink" title="实现 DiscussList 模块"></a>实现 DiscussList 模块</h2><p>向 DiscussList.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加讨论</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 分页查询讨论</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 管理员分页查询</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 查询</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 查询讨论的内容</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 修改评论数的数量</span></span><br><span class="line">   <span class="function"><span class="type">bool</span> <span class="title">UpdateDiscussComments</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 更新讨论</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 删除讨论</span></span><br><span class="line">   <span class="function">Json::Value <span class="title">DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 DiscussList.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Json::Value <span class="title">DiscussList::InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertDiscuss</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscuss</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DiscussList::UpdateDiscussComments</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateDiscussComments</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateDiscuss</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">DiscussList::DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> MoDB::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteDiscuss</span>(deletejson);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-Control-模块-1"><a href="#实现-Control-模块-1" class="headerlink" title="实现 Control 模块"></a>实现 Control 模块</h2><p>向 Control.h 添加函数声明：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------------讨论-----------------------</span></span><br><span class="line"><span class="comment">// 查询题解列表</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员查询</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询题解进行编辑</span></span><br><span class="line"><span class="function">Json::Value <span class="title">SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除题解</span></span><br><span class="line"><span class="function">Json::Value <span class="title">DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span>;</span><br></pre></td></tr></table></figure><p>向 Control.cpp 添加函数定义：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ----------------------讨论----------------------------</span></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectDiscussList</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussList</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectDiscussListByAdmin</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussListByAdmin</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectDiscuss</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscuss</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::SelectDiscussByEdit</span><span class="params">(Json::Value &amp;queryjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">SelectDiscussByEdit</span>(queryjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::InsertDiscuss</span><span class="params">(Json::Value &amp;insertjson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">InsertDiscuss</span>(insertjson);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Json::Value <span class="title">Control::UpdateDiscuss</span><span class="params">(Json::Value &amp;updatejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">UpdateDiscuss</span>(updatejson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Json::Value <span class="title">Control::DeleteDiscuss</span><span class="params">(Json::Value &amp;deletejson)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Json::Value resjson = DiscussList::<span class="built_in">GetInstance</span>()-&gt;<span class="built_in">DeleteDiscuss</span>(deletejson);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当评论模块完成时，将下面注释去掉</span></span><br><span class="line">    <span class="comment">// if (resjson[&quot;Result&quot;].asString() == &quot;Success&quot;)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     Json::Value json;</span></span><br><span class="line">    <span class="comment">//     json[&quot;ArticleId&quot;] = deletejson[&quot;DiscussId&quot;];</span></span><br><span class="line">    <span class="comment">//     CommentList::GetInstance()-&gt;DeleteArticleComment(json);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">return</span> resjson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现-HttpServer-模块-1"><a href="#实现-HttpServer-模块-1" class="headerlink" title="实现 HttpServer 模块"></a>实现 HttpServer 模块</h2><p>在 HttpServer.cpp 文件的 Run 函数添加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------讨论------------------------</span></span><br><span class="line"><span class="comment">// 获取讨论列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/discusslist&quot;</span>, doGetDiscussList);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 管理员获取讨论列表</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/discusslist/admin&quot;</span>, doGetDiscussListByAdmin);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取讨论内容</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/discuss&quot;</span>, doGetDiscuss);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取讨论信息用于编辑</span></span><br><span class="line">server.<span class="built_in">Get</span>(<span class="string">&quot;/discuss/select&quot;</span>, doSelectDiscussByEdit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户提交讨论</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/discuss/insert&quot;</span>, doInsertDiscuss);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户修改讨论</span></span><br><span class="line">server.<span class="built_in">Post</span>(<span class="string">&quot;/discuss/update&quot;</span>, doUpdateDiscuss);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户删除讨论</span></span><br><span class="line">server.<span class="built_in">Delete</span>(<span class="string">&quot;/discuss&quot;</span>, doDeleteDiscuss);</span><br></pre></td></tr></table></figure><p>在 HttpServer.cpp 文件中添加函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------------讨论------------------------------</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetDiscussList</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscussList start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;SearchInfo&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Json::Value searchinfo;</span><br><span class="line">        Json::Reader reader;</span><br><span class="line">        <span class="comment">// 解析传入的json</span></span><br><span class="line">        reader.<span class="built_in">parse</span>(req.<span class="built_in">get_param_value</span>(<span class="string">&quot;SearchInfo&quot;</span>), searchinfo);</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;SearchInfo&quot;</span>] = searchinfo;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectDiscussList</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscussList end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetDiscussListByAdmin</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscussListByAdmin start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;Page&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;PageSize&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string page = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;Page&quot;</span>);</span><br><span class="line">        string pagesize = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;PageSize&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;Page&quot;</span>] = page;</span><br><span class="line">        queryjson[<span class="string">&quot;PageSize&quot;</span>] = pagesize;</span><br><span class="line">        resjson = control.<span class="built_in">SelectDiscussListByAdmin</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscussListByAdmin end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doGetDiscuss</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscuss start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;DiscussId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string discussid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;DiscussId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;DiscussId&quot;</span>] = discussid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectDiscuss</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doGetDiscuss end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSelectDiscussByEdit</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectDiscussByEdit start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;DiscussId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string discussid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;DiscussId&quot;</span>);</span><br><span class="line">        Json::Value queryjson;</span><br><span class="line">        queryjson[<span class="string">&quot;DiscussId&quot;</span>] = discussid;</span><br><span class="line">        resjson = control.<span class="built_in">SelectDiscussByEdit</span>(queryjson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doSelectDiscussByEdit end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doInsertDiscuss</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">InsertDiscuss</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doInsertSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doUpdateDiscuss</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateSolution start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value jsonvalue;</span><br><span class="line">    Json::Reader reader;</span><br><span class="line">    <span class="comment">// 解析传入的json</span></span><br><span class="line">    reader.<span class="built_in">parse</span>(req.body, jsonvalue);</span><br><span class="line">    Json::Value resjson = control.<span class="built_in">UpdateDiscuss</span>(jsonvalue);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doUpdateSolution end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doDeleteDiscuss</span><span class="params">(<span class="type">const</span> httplib::Request &amp;req, httplib::Response &amp;res)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteDiscuss start!!!\n&quot;</span>);</span><br><span class="line">    Json::Value resjson;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;DiscussId&quot;</span>) || !req.<span class="built_in">has_param</span>(<span class="string">&quot;UserId&quot;</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        resjson[<span class="string">&quot;Result&quot;</span>] = <span class="string">&quot;400&quot;</span>;</span><br><span class="line">        resjson[<span class="string">&quot;Reason&quot;</span>] = <span class="string">&quot;缺少请求参数！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        string discussid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;DiscussId&quot;</span>);</span><br><span class="line">        string userid = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;UserId&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Json::Value deletejson;</span><br><span class="line">        deletejson[<span class="string">&quot;DiscussId&quot;</span>] = discussid;</span><br><span class="line">        deletejson[<span class="string">&quot;UserId&quot;</span>] = userid;</span><br><span class="line">        resjson = control.<span class="built_in">DeleteDiscuss</span>(deletejson);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;doDeleteDiscuss end!!!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">SetResponseStatus</span>(resjson, res);</span><br><span class="line">    res.<span class="built_in">set_content</span>(resjson.<span class="built_in">toStyledString</span>(), <span class="string">&quot;json&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="运行-2"><a href="#运行-2" class="headerlink" title="运行"></a>运行</h2><p>执行下面代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启MongoDB数据库</span></span><br><span class="line">sudo mongod -f /usr/local/mongo/conf/mongo.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启前端服务</span></span><br><span class="line">sudo service nginx start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新编译后启动后端</span></span><br><span class="line">./xdoj</span><br></pre></td></tr></table></figure><p>登录账号后，点击写讨论：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/d11157c644ca5405db2790d79f79c22f-0" alt="图片描述"></p><p>编译讨论内容并点击发布：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4f3d572b2a756a28a8a3f2225caa9d4a-0" alt="图片描述"></p><p>此时可以看到讨论列表有刚刚发布的讨论：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/703627d3a679a75cf623fbebcdb59723-0" alt="图片描述"></p><p>点击进入讨论，如果是本人则会有修改和删除按钮：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/382ea9f41826e0fd6065b61d8ea57b4a-0" alt="图片描述"></p><p>点击题库中的题目，每道题目都会有独立的讨论列表：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/cc6100bbcf34326c0b7875dfd6a48d22-0" alt="图片描述"></p><p>进入管理员界面，点击讨论管理，即可管理讨论：</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/3ed1539e11e662f27fbd4599cf245365-0" alt="图片描述"></p><h2 id="实验总结-7"><a href="#实验总结-7" class="headerlink" title="实验总结"></a>实验总结</h2><p>本章节主要实现讨论模块，对讨论进行增删改查。</p><p>公告模块、讨论模块、题解模块这三个模块实现非常类似，个别字段不同。</p><p>获取本章节的代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/20638/code12.zip</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2023/10/24/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E9%98%B6%E6%AE%B5/"/>
      <url>/2023/10/24/oj%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E9%98%B6%E6%AE%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="项目设计阶段"><a href="#项目设计阶段" class="headerlink" title="项目设计阶段"></a>项目设计阶段</h1><h1 id="1-项目演示"><a href="#1-项目演示" class="headerlink" title="1.项目演示"></a>1.项目演示</h1><h2 id="技术"><a href="#技术" class="headerlink" title="技术"></a>技术</h2><ul><li>vue.js</li><li>C++</li></ul><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>OJ 是 Online Judge 系统的简称，用来在线检测程序源代码的正确性。OJ 系统能够编译并执行代码，使用预设的数据对这些程序进行测试。提交的代码一般会在受限的环境下运行，包括时间限制、内存限制、安全限制等。</p><p>本课程将会从项目设计、项目后端开发、项目前端开发和项目部署四个阶段循序渐进完成对项目的整体构建。项目采用前后端分离架构，基于模块开发，涉及到用户模块、题目模块、公告模块、讨论模块、题解模块、评论模块、测评记录模块和判题模块。</p><p>本课程前端采用 Vue.js 框架，后端采用 C++ ，数据库采用 MongoDB 和 Redis，实现了 Markdown 文本的编辑和展示、列表数据分页、题目和测评记录的多条件搜索、父子评论、Monaco Editor 代码编辑器的使用、Token 鉴权实现、缓存实现、判题（支持 C、C++、Java、Python、Javascript 和 Go 语言）等功能。</p><h3 id="效果演示"><a href="#效果演示" class="headerlink" title="效果演示"></a>效果演示</h3><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024111957858.png" alt="image-20231024111957858"></p><ul><li><p>题库界面</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112248526.png" alt="image-20231024112248526"></p></li><li><p>题目页面</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112331749.png" alt=""></p></li><li><p>测评记录列表页面</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112646933.png" alt="image-20231024112646933"></p></li><li><p>测评记录对话框</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112744216.png" alt="image-20231024112744216"></p></li><li><p>题解页面</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112849856.png" alt="image-20231024112849856"></p></li><li><p>题目编辑页面</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024112932753.png" alt="image-20231024112932753"></p></li><li><p>项目演示视频</p></li></ul><h1 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2.需求分析"></a>2.需求分析</h1><h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><h3 id="什么是oj"><a href="#什么是oj" class="headerlink" title="什么是oj"></a>什么是oj</h3><p>OJ 是 Online Judge 系统的简称，用来在线检测程序源代码的正确性。OJ 系统能够编译并执行代码，使用预设的数据对这些程序进行测试。提交的代码一般会在受限的环境下运行，包括时间限制、内存限制、安全限制等。</p><h3 id="项目特色"><a href="#项目特色" class="headerlink" title="项目特色"></a>项目特色</h3><p>简洁优雅的界面设计、支持多种编程语言评判、支持查看每个测试点的详细信息、支持题解、讨论、评论。</p><h3 id="项目页面结构图"><a href="#项目页面结构图" class="headerlink" title="项目页面结构图"></a>项目页面结构图</h3><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/07image-20231024113933128.png" alt="image-20231024113933128"></p><h3 id="一般约束"><a href="#一般约束" class="headerlink" title="一般约束"></a>一般约束</h3><ol><li>开发环境约束：<ul><li>开发工具：VSCode</li><li>开发语言：HTML5、CSS3、JavaScript、C++</li></ul></li><li>时间约束：项目开发周期为 14 个工作日，需要开发者合理规划时间</li><li>技术约束：HTML5、CSS3、JavaScript、Vue3、Axios、C++</li><li>其他约束：开发者需在完成项目需求的前提下，考虑编码规范、页面优化等因素</li></ol><h2 id="详细功能说明"><a href="#详细功能说明" class="headerlink" title="详细功能说明"></a>详细功能说明</h2><h3 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h3><h4 id="页面需求"><a href="#页面需求" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统的导航栏布局。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/fd32bfb0626b3aaa197d078fca204081-0" alt="img"></p><ol><li>通过 Vuex 来保存个人信息以及登录的状态，如果用户未登录，用户可以通过点击登录或注册按钮进行相应操作，页面效果如下。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/2d1517320fbdc393a457567b5eae9caf-0" alt="img"></p><ol><li>如果用户未登录可以通过点击导航栏右侧的注册按钮，弹出注册对话框，对话框如下。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7dc99313bf1a64edd60baf35b3bab626-0/wm" alt="img"></p><ol><li>如果用户未登录可以通过点击导航栏右侧的登录按钮，弹出登录对话框，对话框如下。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/7fe148bac1a06eafdee6aa382844e1a9-0/wm" alt="img"></p><ol><li>如果用户是登录状态，用户可以通过下拉菜单访问个人主页、设置等选项。如果是管理员，会显示管理员选项，页面效果如下。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/5d6844774750ae25c941c837976e12ec-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）"><a href="#数据动态化（接口地址与响应数据描述见接口文档）" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现用户登录、注册。</li></ol><h3 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h3><h4 id="页面需求-1"><a href="#页面需求-1" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统首页的布局。</li><li>公告列表每一项需要显示公告标题、发布时间、浏览量和评论量。</li><li>公告列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4c41c40a78ffc5b3e07b524b55dda530-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-1"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-1" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现公告列表数据的动态加载，默认加载第一页的数据。</li></ol><h3 id="公告详情页"><a href="#公告详情页" class="headerlink" title="公告详情页"></a>公告详情页</h3><h4 id="页面需求-2"><a href="#页面需求-2" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统公告详情页面的布局。</li><li>公告详情的内容需要使用 Markdown 预览组件进行显示。</li><li>通过使用 NaiveUI + UndrawUI 实现父子评论并可以分页查询。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/685cc49af0b251a38a524dd79eaa6909-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-2"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-2" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现公告详情页数据的动态加载。</li><li>通过 Axios 实现评论数据的动态加载。</li></ol><h3 id="题库页"><a href="#题库页" class="headerlink" title="题库页"></a>题库页</h3><h4 id="页面需求-3"><a href="#页面需求-3" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题库页面的布局。</li><li>题库需要添加搜索功能，可以通过题目 ID 、题目标题、题目标签搜索对应题目列表。</li><li>鼠标悬停在不同的题目列表项上，右边需要显示不同题目名字、饼图（显示提交情况的比例）。</li><li>题目列表每一项需要显示题目状态、ID、题目标题、标签、通过次数和提交次数。</li><li>题目列表需要分页展示。</li><li>右下部分需要展示所有标签。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/ecf5792508dd13c4e48cf4035749f999-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-3"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-3" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现题目列表数据的动态加载，默认加载第一页数据。</li></ol><h3 id="题目详情页"><a href="#题目详情页" class="headerlink" title="题目详情页"></a>题目详情页</h3><h4 id="页面需求-4"><a href="#页面需求-4" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题目详情页面的布局。</li><li>题目详情的内容需要使用 Markdown 预览组件进行显示。</li><li>通过 monaco-editor 组件实现代码编辑器。</li><li>编辑器下边需要动态展示代码提交状态和错误提示。</li><li>页面右边需要展示作者、时间限制、空间限制、标签，以及本题目的提交记录、题解和讨论按钮。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9292ea5ba171433f5c04d4ea49ca3da6-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-4"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-4" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现题目详情数据的动态加载。</li><li>通过 Axios 实现提交代码进行评判并返回结果。</li></ol><h3 id="测评页"><a href="#测评页" class="headerlink" title="测评页"></a>测评页</h3><h4 id="页面需求-5"><a href="#页面需求-5" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统测评页面的布局。</li><li>测评列表需要添加搜索功能，通过对题目 ID 、题目标题、测评状态、语言进行搜索测评列表。</li><li>测评列表每一项需要显示 ID、用户名、题目标题、状态、语言、运行时间、运行内存、代码长度、提交时间。</li><li>测评列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f10d307aa28375789dc0ffa69fb8ca7d-0/wm" alt="img"></p><ol><li>点击测评列表的某一项测评，需要弹出这个测评的测评详情对话框，对话框需要展示测评状态、提交代码、以及每一个测试点的详细情况，对话框如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/80683027cd607014c46af92cfc023d01-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-5"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-5" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现测评列表数据的动态加载，默认加载第一页。</li><li>通过 Axios 实现测评详情数据的动态加载。</li></ol><h3 id="讨论页"><a href="#讨论页" class="headerlink" title="讨论页"></a>讨论页</h3><h4 id="页面需求-6"><a href="#页面需求-6" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统讨论页面的布局。</li><li>讨论列表每一项需要显示用户名、用户头像、讨论标题、发布时间、浏览量和评论量。</li><li>右上角需要添加写讨论的按钮。</li><li>讨论列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/cfe313ac5f62b892b55cab7b4ac3a06c-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-6"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-6" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现讨论列表数据的动态加载，默认加载第一页。</li></ol><h3 id="讨论详情页"><a href="#讨论详情页" class="headerlink" title="讨论详情页"></a>讨论详情页</h3><h4 id="页面需求-7"><a href="#页面需求-7" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统讨论详情页面的布局。</li><li>讨论详情的内容需要使用 Markdown 预览组件进行显示。</li><li>如果是作者本人进入，需要提供修改和删除按钮。</li><li>通过使用 NaiveUI + UndrawUI 实现父子评论并可以分页查询。</li></ol><p>页面布局完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9c46d6fbec2de3d768388fada0f6f29c-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-7"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-7" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现讨论详情数据的动态加载。</li><li>通过 Axios 实现评论数据的动态加载。</li></ol><h3 id="题解页"><a href="#题解页" class="headerlink" title="题解页"></a>题解页</h3><h4 id="页面需求-8"><a href="#页面需求-8" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题解页面的布局。</li><li>题解列表每一项需要显示用户名、用户头像、题解标题、发布时间、浏览量和评论量。</li><li>右上角需要添加写题解的按钮。</li><li>题解列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f277abea80dabd8b9c1497e1a1f7ebeb-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-8"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-8" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现题解列表数据的动态加载，默认加载第一页。</li></ol><h3 id="题解详情页"><a href="#题解详情页" class="headerlink" title="题解详情页"></a>题解详情页</h3><h4 id="页面需求-9"><a href="#页面需求-9" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题解详情页面的布局。</li><li>题解详情的内容需要使用 Markdown 预览组件进行显示。</li><li>如果是作者本人进入，需要提供修改和删除按钮。</li><li>通过使用 NaiveUI + UndrawUI 实现父子评论并可以分页查询。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/9201af0dec82f3ae6a09c34196b38ec3-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-9"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-9" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现题解详情数据的动态加载。</li><li>通过 Axios 实现评论数据的动态加载。</li></ol><h3 id="排名页"><a href="#排名页" class="headerlink" title="排名页"></a>排名页</h3><h4 id="页面需求-10"><a href="#页面需求-10" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题目详情页面的布局。</li><li>用户列表每一项需要显示排名、用户头像、用户名、个性签名、通过题目数和提交次数。</li><li>前三名需要通过走马灯动态展示。</li><li>用户列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/86371ac5f6856ee0af39aa9ccca61ef1-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-10"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-10" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现用户列表数据的动态加载。</li></ol><h3 id="个人主页"><a href="#个人主页" class="headerlink" title="个人主页"></a>个人主页</h3><h4 id="页面需求-11"><a href="#页面需求-11" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题个人主页页面的布局。</li><li>右侧需要使用饼图展示用户提交次数和通过次数的比列。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/45e135dcdea8cda47b5a4002d27b1bb1-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-11"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-11" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现用户详情数据的动态加载。</li></ol><h3 id="管理员页"><a href="#管理员页" class="headerlink" title="管理员页"></a>管理员页</h3><h4 id="页面需求-12"><a href="#页面需求-12" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统管理员页面的布局。</li><li>页面左侧需要提供导航栏。</li><li>每个管理列表需要分页展示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/cbcc883f8d402adbfa15e19bd0d0afc0-0/wm" alt="img"></p><ol><li>点击题目管理，页面右侧需要显示题目管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/0f0a79e4544e416fed683acd232018c9-0/wm" alt="img"></p><ol><li>点击用户管理，页面右侧需要显示用户管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/f43d6a789b9d8b3f97569bb4ade447aa-0/wm" alt="img"></p><ol><li>点击讨论管理，页面右侧需要显示讨论管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/b8070902c2fe5695b85349bd266bcf5d-0/wm" alt="img"></p><ol><li>点击公告管理，页面右侧需要显示公告管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/4145805c12e19aaf928126d4c12bb372-0/wm" alt="img"></p><ol><li>点击题解管理，页面右侧需要显示题解管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/63429840b08689ea80e86a6fef2ace53-0/wm" alt="img"></p><ol><li>点击评论管理，页面右侧需要显示评论管理页，页面效果如下所示。</li></ol><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/c0325e2b38edbbec2994e5da05116a91-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-12"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-12" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现不同管理列表数据的动态加载，默认加载第一页。</li></ol><h3 id="题目编辑器页"><a href="#题目编辑器页" class="headerlink" title="题目编辑器页"></a>题目编辑器页</h3><h4 id="页面需求-13"><a href="#页面需求-13" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题目编辑器页面的布局。</li><li>题目内容需要使用 Markdown 编辑器组件进行编辑并实时显示。</li><li>输入样例和输出样例需要动态添加和删除。</li><li>SPJ 文件需要 switch 开关设置文件是否启用。</li><li>标签需要动态添加和删除。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/41d60d4dbdb70984cca1ad0692abe6be-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-13"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-13" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>当修改题目时，通过 Axios 实现题目详情数据的动态加载。</li><li>当添加题目时，通过 Axios 实现题目详情数据的提交。</li></ol><h3 id="个人设置页"><a href="#个人设置页" class="headerlink" title="个人设置页"></a>个人设置页</h3><h4 id="页面需求-14"><a href="#页面需求-14" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统个人设置页面的布局。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/39018c718597870fc294525def352dad-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-14"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-14" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>通过 Axios 实现用户详情数据的动态加载。</li><li>通过 Axios 实现用户详情数据的提交。</li></ol><h3 id="讨论编辑器页"><a href="#讨论编辑器页" class="headerlink" title="讨论编辑器页"></a>讨论编辑器页</h3><h4 id="页面需求-15"><a href="#页面需求-15" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统讨论编辑器页面的布局。</li><li>讨论内容需要使用 Markdown 编辑器组件进行编辑并实时显示。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/6a6a82a6c7471c5f9381715bc9babb46-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-15"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-15" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>当修改讨论时，通过 Axios 实现讨论详情数据的动态加载。</li><li>当添加讨论时，通过 Axios 实现讨论详情数据的提交。</li></ol><h3 id="公告编辑器页"><a href="#公告编辑器页" class="headerlink" title="公告编辑器页"></a>公告编辑器页</h3><h4 id="页面需求-16"><a href="#页面需求-16" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统公告编辑器页面的布局。</li><li>公告内容需要使用 Markdown 编辑器组件进行编辑并实时显示。</li><li>需要添加数字输入框来获取公告的重要程度。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/16b9666eda66ba564832a6e88081eef9-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-16"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-16" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>当修改公告时，通过 Axios 实现公告详情数据的动态加载。</li><li>当添加公告时，通过 Axios 实现公告详情数据的提交。</li></ol><h3 id="题解编辑器页"><a href="#题解编辑器页" class="headerlink" title="题解编辑器页"></a>题解编辑器页</h3><h4 id="页面需求-17"><a href="#页面需求-17" class="headerlink" title="页面需求"></a>页面需求</h4><ol><li>通过 Vue3 + ElementUI 实现 OJ 系统题目详情页面的布局。</li><li>题解内容需要使用 Markdown 编辑器组件进行编辑并实时显示。</li><li>页面需要添加 switch 开关表示题解是否公开。</li></ol><p>页面完成后，效果如下所示。</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/c04a456c37eff4534dbd43fb6dcd8274-0/wm" alt="img"></p><h4 id="数据动态化（接口地址与响应数据描述见接口文档）-17"><a href="#数据动态化（接口地址与响应数据描述见接口文档）-17" class="headerlink" title="数据动态化（接口地址与响应数据描述见接口文档）"></a>数据动态化（接口地址与响应数据描述见接口文档）</h4><ol><li>当修改题解时，通过 Axios 实现题目详情数据的动态加载。</li><li>当添加题解时，通过 Axios 实现题目详情数据的提交。</li></ol><h1 id="3-数据库设计"><a href="#3-数据库设计" class="headerlink" title="3.数据库设计"></a>3.数据库设计</h1><h2 id="数据库表设计"><a href="#数据库表设计" class="headerlink" title="数据库表设计"></a>数据库表设计</h2><p>根据需求分析，OJ 系统的主要实体包括：用户、题目、状态记录、公告、讨论、题解、评论。</p><p>各实体之间的关系如下图所示:</p><p><img src="https://doc.shiyanlou.com/courses/20638/1611178/caf5e4521281a0a1d738816dc694e522-0" alt="图片描述"></p><p>因为本项目采用的是 MongoDB 数据库，它是非关系型数据库采用文档模型。</p><p>文档模式设计的基本策略是先考虑内嵌，直接按照你的对象模型来设计你的数据模型，所以我们只需要针对每个实体创建一个对应的数据库表即可，具体如下：</p><p>注意：</p><ol><li>JSON 中不允许有注释，但是这里为了方便在后面加注释。</li><li>默认情况下，在集合中插入文档时，如果字段名中没有_id 的字段名称，则 MongoDB 将自动添加一个 ObjectId 字段并且会设置为主键，在本项目中我们自定义_id 字段为 int64_t 类型。</li></ol><p><strong>表名：User（用户表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;Avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 头像</span></span><br><span class="line">  <span class="attr">&quot;NickName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 昵称</span></span><br><span class="line">  <span class="attr">&quot;Account&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 账号</span></span><br><span class="line">  <span class="attr">&quot;PassWord&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 密码</span></span><br><span class="line">  <span class="attr">&quot;PersonalProfile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 个人简介</span></span><br><span class="line">  <span class="attr">&quot;School&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 学校</span></span><br><span class="line">  <span class="attr">&quot;Major&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 专业</span></span><br><span class="line">  <span class="attr">&quot;JoinTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 加入时间</span></span><br><span class="line">  <span class="attr">&quot;CommentLikes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// 点赞列表</span></span><br><span class="line">    <span class="string">&quot;string&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Solves&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// 解决题目列表</span></span><br><span class="line">    <span class="string">&quot;int64_t&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ACNum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// AC次数</span></span><br><span class="line">  <span class="attr">&quot;SubmitNum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 提交次数</span></span><br><span class="line">  <span class="attr">&quot;Authority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span> <span class="comment">// 权限</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：Problem（题目表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;Title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标题</span></span><br><span class="line">  <span class="attr">&quot;Description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">  <span class="attr">&quot;JudgeNum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 测试点数量</span></span><br><span class="line">  <span class="attr">&quot;SubmitNum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 提交次数</span></span><br><span class="line">  <span class="attr">&quot;CENum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// CE次数</span></span><br><span class="line">  <span class="attr">&quot;ACNum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// AC次数</span></span><br><span class="line">  <span class="attr">&quot;WANum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// WA次数</span></span><br><span class="line">  <span class="attr">&quot;RENum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// RE次数</span></span><br><span class="line">  <span class="attr">&quot;TLENum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// TLE次数</span></span><br><span class="line">  <span class="attr">&quot;MLENum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// MLE次数</span></span><br><span class="line">  <span class="attr">&quot;SENum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// SE次数</span></span><br><span class="line">  <span class="attr">&quot;UserNickName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户昵称</span></span><br><span class="line">  <span class="attr">&quot;Tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// 标签列表</span></span><br><span class="line">    <span class="string">&quot;string&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：StatusRecord（状态记录表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;ProblemId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 题目ID</span></span><br><span class="line">  <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;UserNickName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户昵称</span></span><br><span class="line">  <span class="attr">&quot;ProblemTitle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 题目标题</span></span><br><span class="line">  <span class="attr">&quot;Status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 状态</span></span><br><span class="line">  <span class="attr">&quot;RunTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 运行时间</span></span><br><span class="line">  <span class="attr">&quot;RunMemory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 运行内存</span></span><br><span class="line">  <span class="attr">&quot;Length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 代码长度</span></span><br><span class="line">  <span class="attr">&quot;Language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 语言</span></span><br><span class="line">  <span class="attr">&quot;SubmitTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 提交时间</span></span><br><span class="line">  <span class="attr">&quot;Code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 代码</span></span><br><span class="line">  <span class="attr">&quot;CompilerInfo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 编译器信息</span></span><br><span class="line">  <span class="attr">&quot;TestInfo&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// 测试点详情列表</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 状态</span></span><br><span class="line">      <span class="attr">&quot;StandardInput&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标准输入</span></span><br><span class="line">      <span class="attr">&quot;StandardOutput&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标准输出</span></span><br><span class="line">      <span class="attr">&quot;PersonalOutput&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户输出</span></span><br><span class="line">      <span class="attr">&quot;RunTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 运行时间</span></span><br><span class="line">      <span class="attr">&quot;RunMemory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span> <span class="comment">// 运行内存</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：Announcement（公告表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;Title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标题</span></span><br><span class="line">  <span class="attr">&quot;Content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">  <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;Views&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 浏览量</span></span><br><span class="line">  <span class="attr">&quot;Comments&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 评论数</span></span><br><span class="line">  <span class="attr">&quot;Level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 重要等级</span></span><br><span class="line">  <span class="attr">&quot;CreateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span><span class="punctuation">,</span> <span class="comment">// 创建时间</span></span><br><span class="line">  <span class="attr">&quot;UpdateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span> <span class="comment">// 修改时间</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：Discuss（讨论表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;Title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标题</span></span><br><span class="line">  <span class="attr">&quot;Content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">  <span class="attr">&quot;ParentId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 父ID(0或者题目ID)</span></span><br><span class="line">  <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;Views&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 浏览量</span></span><br><span class="line">  <span class="attr">&quot;Comments&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 评论数</span></span><br><span class="line">  <span class="attr">&quot;CreateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span><span class="punctuation">,</span> <span class="comment">// 创建时间</span></span><br><span class="line">  <span class="attr">&quot;UpdateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span> <span class="comment">// 修改时间</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：Solution（题解表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;Title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 标题</span></span><br><span class="line">  <span class="attr">&quot;ParentId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 父ID(题目ID)</span></span><br><span class="line">  <span class="attr">&quot;Content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">  <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;Views&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 浏览量</span></span><br><span class="line">  <span class="attr">&quot;Comments&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 评论数</span></span><br><span class="line">  <span class="attr">&quot;CreateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span><span class="punctuation">,</span> <span class="comment">// 创建时间</span></span><br><span class="line">  <span class="attr">&quot;Public&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bool&quot;</span><span class="punctuation">,</span> <span class="comment">// 是否公开</span></span><br><span class="line">  <span class="attr">&quot;UpdateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span> <span class="comment">// 修改时间</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>表名：Comment（评论表）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">  <span class="attr">&quot;ParentId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 父ID(公告ID、讨论ID、题解ID)</span></span><br><span class="line">  <span class="attr">&quot;ParentType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 父类型</span></span><br><span class="line">  <span class="attr">&quot;Content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">  <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;Likes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 点赞数</span></span><br><span class="line">  <span class="attr">&quot;CreateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span><span class="punctuation">,</span> <span class="comment">// 创建时间</span></span><br><span class="line">  <span class="attr">&quot;Child_Comments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// 子评论列表</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// ID</span></span><br><span class="line">      <span class="attr">&quot;Content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="comment">// 内容</span></span><br><span class="line">      <span class="attr">&quot;UserId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int64_t&quot;</span><span class="punctuation">,</span> <span class="comment">// 用户ID</span></span><br><span class="line">      <span class="attr">&quot;Likes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int&quot;</span><span class="punctuation">,</span> <span class="comment">// 点赞数</span></span><br><span class="line">      <span class="attr">&quot;CreateTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;time&quot;</span> <span class="comment">// 创建时间</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="4-接口文档"><a href="#4-接口文档" class="headerlink" title="4.接口文档"></a>4.接口文档</h1><h2 id="接口文档"><a href="#接口文档" class="headerlink" title="接口文档"></a>接口文档</h2><p>注意：</p><ol><li>JSON 中不允许有注释，但是这里为了方便在后面加注释。</li><li>如果是 POST 请求，请求参数放在请求体中，GET 和 DELETE 请求的请求参数是放在请求头 Url 中。</li><li>下面的 Token 参数是前端放在请求头的 Authorization 字段，后端会处理得到该参数并命名为 Token。</li></ol><h3 id="用户模块"><a href="#用户模块" class="headerlink" title="用户模块"></a>用户模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="注册用户" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">注册用户</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：向后端提交用户信息进行用户注册</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/register</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Account"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 账号</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PassWord"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 密码</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"School"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 学校</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Major"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 专业</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="登录用户" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">登录用户</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：向后端提交用户信息进行用户登录</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/login</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Account"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 账号</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PassWord"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 密码</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Info"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CommentLikes"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 点赞列表</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>    ],    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Solves"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 解决问题列表</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>    ],    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Authority"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 权限</span>  &#125;&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="通过-token-获取用户信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">通过 Token 获取用户信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：通过 Token 向后端请求用户信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/tokenlogin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Info"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CommentLikes"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 点赞列表</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>    ],    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Solves"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 解决问题列表</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>    ],    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Authority"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 权限</span>  &#125;&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取排名列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取排名列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取用户的排名列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/rank</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户列表</span>    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Rank"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 排名</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交次数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ACNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 通过的题目数</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取个人主页" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取个人主页</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取用户的个人主页信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/home</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"School"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 学校</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Major"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 专业</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"JoinTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 加入时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Solves"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 解题列表</span>    <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ACNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 通过的题目数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交次数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="修改用户信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">修改用户信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：向后端提交修改的用户信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/update</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"School"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 学校</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Major"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 专业</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取用户信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取用户信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取用户信息，用来进行修改</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user/updateinfo</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 头像</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"School"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 学校</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Major"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 专业</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取用户列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取用户列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取用户列表，用来查看和操作</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/userlist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户信息列表</span>    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 昵称</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalProfile"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 个人简介</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"School"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 学校</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Major"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 专业</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"JoinTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 加入时间</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除用户" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除用户</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除用户</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/user</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="题目模块"><a href="#题目模块" class="headerlink" title="题目模块"></a>题目模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取题目详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取题目详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取题目详细信息，用来查看题目并作答</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problem</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Description"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TimeLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 时间限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MemoryLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内存限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"JudgeNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 测试点数量</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交次数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ACNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 通过次数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserNickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>    <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取题目列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取题目列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：分页获取题目列表，用于向用户展示，可以通过 ID 、标题、标签搜索</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problemlist</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SearchInfo"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>    ]  &#125;,  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交次数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// CE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ACNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// AC数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"WANum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// WA数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// RE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TLENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// TLE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MLENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// MLE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// SE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [        <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>        <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>      ]    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取题目列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取题目列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：分页获取题目列表，用于向管理员展示</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problemlist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交次数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// CE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ACNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// AC数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"WANum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// WA数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// RE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TLENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// TLE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MLENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// MLE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SENum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// SE数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [        <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>        <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>      ]    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取题目详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取题目详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取题目详细信息，用于修改</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problem/select</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Description"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TimeLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 时间限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MemoryLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内存限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"IsSPJ"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否使用SPJ</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SPJ"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// SPJ代码</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserNickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>    <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TestInfo"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 测试用例列表</span>    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"in"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 输入</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"out"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 输出</span>    &#125;  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员修改题目" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员修改题目</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员添加或者修改题目</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problem/edit</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"datainfo"</span>: &#123;    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用datainfo包装一层</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"EditType"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 编辑类型（添加、修改）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID（添加没有ID）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Description"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"JudgeNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 测试点数量</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"IsSPJ"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否使用SPJ</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SPJ"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// SPJ代码</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserNickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TimeLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 时间限制</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MemoryLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内存限制</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>      <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>    ],    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TestInfo"</span>: [      <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 测试点列表</span>      &#123;        <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"in"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 输入</span>        <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"out"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 输出</span>      &#125;    ]  &#125;&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除题目" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除题目</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除题目</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problem</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="状态记录模块"><a href="#状态记录模块" class="headerlink" title="状态记录模块"></a>状态记录模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取状态记录列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取状态记录列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取状态记录列表，可以通过题目 ID、用户 ID、题目标题、状态和语言进行搜索</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/statusrecordlist</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SearchInfo"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemTitle"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目标题</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Status"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 状态</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Language"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 语言</span>  &#125;,  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProbleId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserNickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemTitle"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Status"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 状态</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RunTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 运行时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RunMemory"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 运行内存</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Length"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 代码文件大小</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Language"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 代码语言</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 提交时间</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取状态记录详情" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取状态记录详情</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取状态记录详情</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/statusrecord</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SubmitId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Status"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 状态</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Language"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 语言</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Code"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 代码</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CompilerInfo"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 编译器信息</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TestInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Status"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 状态</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"StandardInput"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标准输入</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"StandardOutput"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标准输出</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PersonalOutput"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户输出</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RunTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 运行时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"RunMemory"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 运行内存</span>    &#125;  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="判题模块"><a href="#判题模块" class="headerlink" title="判题模块"></a>判题模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="提交代码" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">提交代码</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：用户提交代码，系统测评后返回结果</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/problemcode</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserNickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ProblemTitle"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题目标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Code"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 代码</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Language"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 语言</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TimeLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 时间限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"MemoryLimit"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内存限制</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"JudgeNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 测试点数量</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Status"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 状态</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CompilerInfo"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 编译器信息</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"IsFirstAC"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否第一次AC</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="公告模块"><a href="#公告模块" class="headerlink" title="公告模块"></a>公告模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取公告列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取公告列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取公告列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcementlist</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取公告列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取公告列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取公告列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcementlist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取公告详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取公告详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取公告详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcement</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"AnnouncementId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 公告ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UpdateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 修改时间</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取公告详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取公告详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取公告详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcement/select</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"AnnouncementId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 公告ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Level"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 重要程度</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="添加公告" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">添加公告</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：添加公告</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcement/insert</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Level"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 重要程度</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="修改公告" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">修改公告</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：修改公告</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcement/update</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"AnnouncementId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 公告ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Level"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 重要程度</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除公告" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除公告</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除公告</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/announcement</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"AnnouncementId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 公告ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="题解模块"><a href="#题解模块" class="headerlink" title="题解模块"></a>题解模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取题解列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取题解列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取题解列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solutionlist</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SearchInfo"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID（题目ID）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  &#125;,  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取题解列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取题解列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取题解列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solutionlist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取题解详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取题解详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取题解详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solution</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SolutionId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题解ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UpdateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 修改时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取题解详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取题解详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取题解详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solution/select</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SolutionId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题解ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Public"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否公开</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="添加题解" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">添加题解</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：添加题解</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solution/insert</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Public"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否公开</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="修改题解" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">修改题解</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：修改题解</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solution/update</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SolutionId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题解ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Public"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"bool"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 是否公开</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除题解" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除题解</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除题解</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/solution</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SolutionId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 题解ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="讨论模块"><a href="#讨论模块" class="headerlink" title="讨论模块"></a>讨论模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取讨论列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取讨论列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取讨论列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discusslist</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SearchInfo"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID（题目ID）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  &#125;,  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取讨论列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取讨论列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取讨论列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discusslist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    &#125;  ],  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TotalNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 总项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取讨论详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取讨论详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取题解详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discuss</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"DiscussId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 讨论ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Views"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 浏览量</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Comments"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UpdateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 修改时间</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0].NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="管理员获取讨论详细信息" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取讨论详细信息</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取讨论详细信息</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discuss/select</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"DiscussId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 讨论ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="添加讨论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">添加讨论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：添加讨论</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discuss/insert</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="修改讨论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">修改讨论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：修改讨论</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discuss/update</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"DiscussId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 讨论ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Title"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标题</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除讨论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除讨论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除讨论</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/discuss</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"DiscussId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 讨论ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="评论模块"><a href="#评论模块" class="headerlink" title="评论模块"></a>评论模块</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 16px; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="管理员获取评论列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">管理员获取评论列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：管理员获取评论列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/commentlist/admin</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID（公告ID、题解ID、讨论ID）</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentType"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父类型（公告、题解、讨论）</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Child_Comments"</span>: [        <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 子评论列表</span>        &#123;          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>        &#125;      ]    &#125;  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取评论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取评论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取父子评论，可以是父评论列表，也可以是子评论列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/comment</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Type"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 类型（父、子）</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID（父评论ID、公告ID、题解ID、讨论ID）</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"SonNum"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 子评论个数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Page"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"PageSize"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 页项数</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">如果 Type 是 Father 表示获取父评论列表，响应参数如下：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArrayInfo"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Likes"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 点赞数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Child_Total"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 子评论总数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Child_Comments"</span>: [        <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 子评论列表</span>        &#123;          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Likes"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 点赞数</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>          <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>        &#125;      ]    &#125;  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">如果 Type 是 Son 表示获取子评论列表，响应参数如下：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Child_Total"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 子评论总数</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Child_Comments"</span>: [    &#123;      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Likes"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 点赞数</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]Avatar"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户头像</span>      <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"User[0]NickName"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户昵称</span>    &#125;  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="添加评论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">添加评论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：添加评论，可以是父评论也可以是子评论</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：POST</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/comment/insert</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Info"</span>: &#123;    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Type"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 类型</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArticleType"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 文章类型（公告、讨论、题解）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArticleId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 文章ID</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ParentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 父ID（父评论、公告ID、讨论ID、题解ID）</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Content"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 内容</span>    <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"UserId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 用户ID</span>  &#125;&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"_id"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"int64_t"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CreateTime"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 创建时间</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="删除评论" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">删除评论</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：删除评论，可以是子评论，也可以是父评论</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：DELETE</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/comment</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Token"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// Token</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"ArticleId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 文章ID</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"CommentId"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 评论ID</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Result"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>, <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 结果</span>  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Reason"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 失败原因</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details><h3 id="其他接口"><a href="#其他接口" class="headerlink" title="其他接口"></a>其他接口</h3><details open="" style="box-sizing: border-box; display: block; margin-bottom: 0px !important; margin-top: 0px;"><summary style="box-sizing: border-box; touch-action: manipulation; display: list-item; cursor: pointer; outline: none;">展开查看</summary><h4 id="获取图片" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取图片</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取图片，d+ 表示数字</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/image/(d+)</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明，直接返回图片：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"image"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"webp"</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><h4 id="获取标签列表" style="box-sizing: border-box; color: inherit; font-weight: 600; margin-bottom: 16px; margin-top: 24px; line-height: 1.25; font-size: 1em;">获取标签列表</h4><ul style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px 0px 0px 2em;"><li style="box-sizing: border-box;">接口描述：获取标签列表</li><li style="box-sizing: border-box; margin-top: 0.25em;">数据格式：JSON</li><li style="box-sizing: border-box; margin-top: 0.25em;">请求方式：GET</li><li style="box-sizing: border-box; margin-top: 0.25em;">接口 URL ：<code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; overflow-wrap: break-word; color: rgb(233, 74, 147);">http://127.0.0.1:8081/tags</code></li></ul><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">请求参数说明：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"TagType"</span>: <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span> <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 获取标签类型</span>&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre><p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0px;">响应参数说明，直接返回图片：</p><pre style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; margin-bottom: 1rem; margin-top: 0px; overflow: visible; color: rgb(209, 205, 199); display: block; position: relative; word-break: break-all; border-radius: 4px; white-space: pre-wrap;"><code class="language-json hljs" style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, Consolas, monospace; font-size: inherit; overflow-wrap: break-word; color: rgb(232, 232, 213); word-break: normal; background: rgb(25, 27, 28); display: block; overflow-x: auto; padding: 0.5em;">&#123;  <span class="hljs-attr" style="box-sizing: border-box; color: rgb(249, 53, 124);">"Tags"</span>: [    <span class="hljs-comment" style="box-sizing: border-box; color: rgb(165, 158, 146);">// 标签列表</span>    <span class="hljs-string" style="box-sizing: border-box; color: rgb(230, 219, 114);">"string"</span>  ]&#125;</code><div class="btn-copy" style="box-sizing: border-box; align-items: center; cursor: pointer; display: flex; flex-direction: column; opacity: 0; position: absolute; right: 8px; top: 8px; transition: opacity 0.3s linear 0s; white-space: normal; width: 18px; word-break: normal;"><img class="icon-copy" title="copy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAALCElEQVR4Xu2dXchlZRXH/+uiyDAV7SIm+pg+MBvxow9IpNTArFCbQrS6iKhJ+zCwspu8UKOb6MML+8BREypTCCslI6xw1IiCbMopSTCxEiSKagy8qIsVD52hSXrfs85+zrP3c/b6bTjMxbvW86z1X//fu8857569TRwogAJbKmBogwIosLUCAII7UGAbBQAEe6AAgOABFBimAGeQYbqRlUQBAEkyaNocpgCADNONrCQKAEiSQdPmMAUAZJhuZCVRAECSDJo2hykAIMN0IyuJAgCSZNC0OUwBABmmG1lJFOgGEHc/RdJuScce9joiyRx6bfMOSfea2f29Fti6rkkBcfcTJF0s6WxJu1o3y/qDFfi4mX12cPYGJ04CiLs/Q9LHJF0u6ZgN1i9T6a81sx9narj0Ojog7n6upE9KOjWb2Bve78/M7DUb3sPK5Y8KiLt/SNIXVq6ShF4U2Glmj/ZSzBh1jAaIu39A0pfGaIo9mikAIC2kdffXSbqnxdqsOZoCB8zspNF262Sj5mcQdz9R0p2Snt9Jz5QxTIGrzeyqYambmzUGINctvsrdXJWo/JtmdmFGGZoC4u6vlPTzgcI+IukPA3NJW48CZQY/MrNvrGe5zVulNSCrnj3uk3STpPvM7OHNk5OK56ZAM0DcvVwm8tjispGIbinf40aEIWY6BVoC8jZJtwVb22FmjwdjCUOB0RRoCcj1kvYEOuHMERCJkGkUaAnIAUnlK97tjiclvYSzxzTDZ9flCrQE5J+SnrakhP1m9orlZRKBAtMo0AQQd3+RpN8FWrrFzN4ZiCMEBSZRoBUgZ0q6O9ARnz8CIhEynQIAMp327LwBCgDIBgyJEqdTAECm056dN0ABANmAIVHidAoAyHTas/MGKAAgGzAkSpxOAQCZTnt23gAFUgLi7i+XVP6vyvGSXibpuA2Y1ZxLLJccPXToZWb7emk2DSDu/kZJZ0g6j5vU9WK/Lev48+JK8HvM7NYpq509IO5+uqQPS7poSqHZe7AC5bane81s7+AVKhJnDYi7f17SRyr0IbUfBQool4/99mu2gLj7TySd1s98qWQNCvxL0hvGhGSWgLi7r2EYLNGvArvM7MExypsdIO5+syQuoR/DPdPuMQokswLE3T8l6Ypp58buIynwG0kXtj6TzAYQd399uYfTSMNhmz4UKN9uXdKylDkBUm5v+uaWYrF2lwq8quUTsGYBiLu/V9INK4zvL5I+LekBSb8ysz+tkEvomhVw9yMllRtjl1d54tgqz45pehaZCyB3LR7jFhlduXvjbjP7aySYmPEVcPdV5nlQ0gvMrPy79mPjAXH3561wD9/bzOyCtavIgmtXwN2vkXRZcOF3mdnXgrErhc0BkEslXRvsmjs4BoXqIczd90sqTz9edjT7xTcHQD4n6aPLFJTEHVQCIvUU4u7nS7o9UNMvzKxcnb32Yw6AlLvBvzugzDlmVt7bcmyIAu7+dEnlyt6jlpT8qJntbNHWHAApD7svl7BvdzxhZke3EJA12yrg7t+XdM5U850DIOUGdeVGddsd+8zsrLajZPUWCrh7eezblcvWNrMmXm6yqLuPdmdFdweQZe7Z4J8DSOWDIQFkg90fKB1AACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whAAIged0f6BxAACRgk7whcwXkKEkHA2M9z8y+G4jbMsTd75Z05pI19pnZWTX7kDuNArMEpEjp7rdLOn+JrDvM7PEa6QGkRr3+c+cMSPmtXn67b3XsNbNLakcEILUK9p0/W0AWZ5H3S/qMpCOfMoarrfKzx6H1AKRvg9dWN2tAFpCcLOlUSS+U9EdJvzezH9YKByDrUrDvdWYPSGv5OYO0Vnja9QGkUn8AqRSw83QAqRwQgFQK2Hk6gFQOCEAqBew8HUAqBwQglQJ2ng4glQMCkEoBO08HkMoBAUilgJ2nA0jlgACkUsDO0wGkckAAUilg5+kAUjkgAKkUsPN0AKkcEIBUCth5OoBUDghAKgXsPB1AKgcEIJUCdp4OIJUDApBKATtPB5DKAQFIpYCdpwNI5YAApFLAztMBpHJAAFIpYOfpAFI5IACpFLDzdACpHBCAVArYeTqAVA4IQCoF7DwdQCoH5O53STp7yTKPmNmLK7cifQIF3P0aSZct2fqgmR3TojxrseiYa7r7LZLeHtjzpWb2cCCOkI4UcPf9kk5ZUtIBMzupRdlzAORaSZcGxHmPmd0UiCOkEwXc/XhJvw2Uc6eZnRuIWzlkDoBcJenKQOc/NbPTAnGEdKKAu18n6eJAOWu5S+f/22cOgJTTbzkNR44bzOx9kUBiplXA3d8k6XvBKtZ2p86n7rfxgJSG3P3XknYFxXyHmd0ajCVsAgXc/URJB4JbPynp5FafL+cCSOSbjsP1/qqkvZIeMLN/BAdBWGMF3L3covYCSZ9YYavrzSzyNmyFJf8bOhdAyle490raMUCFhyRVPYJhwJ6k/K8Cz5J0gqRnDhDmDDMrs29yzAKQxdusD0r6YhOVWLRXBb5jZm9tWdxsAFlA8m1Ju1sKxtrdKPB3Saeb2YMtK5obIM9efLh7TkvRWLsLBfaY2Y2tK5kVIIuzSHkeyS9bC8f6kypwo5ntGaOC2QGygKR8aL9f0tFjiMgeoyrwZTMrnzdHOWYJyAKSYyV9RdJbRlGSTVor8DdJF5nZD1pvdPj6swXkUJPufoWk8jpiTGHZa60KfKtc0Wtm5RF+ox6zB2RxNnn1AhLOJqPaq2qz8hfymyV9veXfOZZVmAKQw84mz5VUrvEpr52Syrdexw38A9Uybfl5XIEnFg94fUzSoVcBY/L/npAKkPi8iESB/ygAIDgBBbZRAECwBwoACB5AgWEKcAYZphtZSRQAkCSDps1hCgDIMN3ISqIAgCQZNG0OUwBAhulGVhIFACTJoGlzmAIAMkw3spIoACBJBk2bwxQAkGG6kZVEAQBJMmjaHKbAvwGyE7Iy90AbtwAAAABJRU5ErkJggg==" style="box-sizing: initial; border-style: none; vertical-align: middle; max-width: 100%; background: rgb(24, 27, 28); border-radius: 4px;"></div></pre></details>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GDB常见使用命令</title>
      <link href="/2023/09/19/GDB%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2023/09/19/GDB%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="GDB调试工具"><a href="#GDB调试工具" class="headerlink" title="GDB调试工具"></a>GDB调试工具</h1><h2 id="什么是GDB"><a href="#什么是GDB" class="headerlink" title="什么是GDB"></a>什么是GDB</h2><ul><li><p>GDB 是由 GNU 软件系统社区提供的调试工具，同 GCC 配套组成了一套完整的开发环境，GDB 是 Linux 和许多类 Unix 系统中的标准开发环境。</p></li><li><p>一般来说，GDB 主要帮助你完成下面四个方面的功能：</p></li></ul><ol><li>启动程序，可以按照自定义的要求随心所欲的运行程序</li><li>可让被调试的程序在所指定的调置的断点处停住（断点可以是条件表达式)</li><li>当程序被停住时，可以检查此时程序中所发生的事</li><li>可以改变程序，将一个 BUG 产生的影响修正从而测试其他 BUG</li></ol><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>通常，在为调试而编译时，我们会()关掉编译器的优化选项（<code>-O</code>）, 并打开调试选项(<code>-g</code>)。另外，<code>-Wall</code>在尽量不影响程序行为的情况下选项打开warning, 也可以发现许多问题，避免一些不必要的BUG。</li><li>gcc -g -Wall program.c -o program</li><li><code>-g</code> 选项的作用是在可执行文件中加入源代码的信息，比如可执行文件中第几条机器指令对应源代码的第几行，但并不是把整个源文件嵌入到可执行文件中，所以在调试时必须保证 gdb 能找到源文件。</li></ul><h2 id="GDB命令"><a href="#GDB命令" class="headerlink" title="GDB命令"></a>GDB命令</h2><h3 id="启动和退出、查看代码"><a href="#启动和退出、查看代码" class="headerlink" title="启动和退出、查看代码"></a>启动和退出、查看代码</h3><ul><li>启动和退出<br>  gdb 可执行程序<br>  quit</li><li>设置/获取参数<br>  set args 10 20<br>  show args</li><li>GDB 使用帮助<br>  help</li><li>查看文件代码<ul><li>查看当前文件代码(使用list查看代码时，文件必须与调试的程序在同一个路径中)<br>  list/l 从默认位置显示<br>  list/l 行号 从指定的行号显示<br>  list/l 函数名 从指定的函数显示</li><li>查看非当前文件代码<br>  list/l 文件名:行号<br>  list/l 文件名:函数名</li></ul></li><li>设置显示的行数<br>  show list/listsize<br>  set list/listsize 行数<h3 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h3></li><li>设置断点<br>  b/break 行号<br>  b/break 函数名<br>  b/break 文件名:行号<br>  b/break 文件名:函数</li><li>查看断点<br>  i/info b/break</li><li>删除断点<br>  d/del/delete 断点编号</li><li>设置断点无效<br>  dis/disable 断点编号</li><li>设置断点生效<br>  ena/enable 断点编号</li><li>设置条件断点（一般在循环的位置）<br>  b/break 10 if i == 5<h3 id="调试命令"><a href="#调试命令" class="headerlink" title="调试命令"></a>调试命令</h3></li><li>运行GDB程序<br>  start 程序停在第一行<br>  run 遇到断点才停</li><li>继续运行，到下一个断点停<br>  c/continue</li><li>向下执行一行代码 (不会进入函数体)<br>  n/next</li><li>变量操作<br>  p/print 变量名<br>  ptype 变量（打印变量类型）</li><li>向下单步调试（遇到函数进入函数体)<br>  s/step<br>  finish(进入函数体)</li><li>自动变量操作<br>  display num (自动打印指定变量的值)<br>  i/info display<br>  undisplay 编号</li><li>其他操作<br>  set var 变量名=变量值<br>  until （跳出循环）</li></ul>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gdb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IO与进程同步</title>
      <link href="/2023/08/25/IO%E4%B8%8E%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5/"/>
      <url>/2023/08/25/IO%E4%B8%8E%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="C-条件变量"><a href="#C-条件变量" class="headerlink" title="C++条件变量"></a>C++条件变量</h1><h2 id="面试高频指数：⭐⭐⭐⭐⭐"><a href="#面试高频指数：⭐⭐⭐⭐⭐" class="headerlink" title="面试高频指数：⭐⭐⭐⭐⭐"></a>面试高频指数：⭐⭐⭐⭐⭐</h2><ol><li><p>条件变量（<code>condition variable</code>）:<br>在<code>C</code>语言中我们使用<code>pthread_cond_wait</code>函数作为条件变量，它是由操作系统实现的条件变量，需要详细了解它的运行机制就可以了解<code>C++</code>中条件变量的实现。在<code>C++11</code>以后，我们可以使用条件变量(<code>condition_variable</code>)实现多个线程间的同步操作；当条件不满足时，相关线程被一直阻塞，直到某种条件出现，这些线程才会被唤醒。<code>C++</code>中包含的头文件<code>#include&lt;condition_variable&gt;</code>中。条件变量是利用线程间共享的全局变量进行同步的一种机制，主要包括两种动作：</p><ul><li>一个线程因等待条件变量的条件成立而挂起：</li><li>另外一个线程使<strong>条件成立</strong>从而给出线程的信号，从而唤醒被等待的线程；</li><li>为了防止竞争，条件变量的使用总是和一个互斥锁在一起；通常情况下这个锁是<code>std::mutex</code>, 并且管理这个锁只能是<code>std::unique_lock std::mutex</code>等<code>RAII</code>模板类，分别是使用以下两个方法实现：<ul><li>等待条件成立使用的<code>condition_variable</code>类成员<code>wait</code>或者<code>wait_for</code>或<code>wait_until</code>。</li><li>唤醒信号使用的是<code>condition_variable</code>类成员<code>notify_one</code>或者<code>notify_all</code>函数。<br><code>condition_variable</code>支持的函数如下：<ul><li>构造函数：它只有一个默认构造函数，拷贝构造函数和赋值符号重载均被禁止<code>condition_variable(const  condition_variable&amp;) = delete;</code>，<code>opterator= [delete]</code>;</li><li><code>wait</code>：<code>wait</code>目前支持<code>wait</code>，<code>wait_for</code>, <code>wait_until</code>等三种操作，分别对应不同的场景；</li></ul></li></ul></li><li><code>wait</code>：对应的函数原型为：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">wait</span><span class="params">(std::unique_lock&lt;std::mutex&gt;&amp; lock)</span></span></span><br></pre></td></tr></table></figure>当前线程执行时就被阻塞，直到等到被<code>notify</code>唤醒，在阻塞线程的那一刻，该函数自动调用lck.unlock()，允许其他被<code>lck</code>锁定的线程继续运行。阻塞时被一旦某个线程<code>notify</code>时， 实际可能为虚假唤醒，该函数将解除阻塞并调用<code>lck.lock()</code>，获取互斥锁。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Predicate</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span> <span class="params">(unique_lock&lt;mutex&gt;&amp; lck, Predicate pred)</span></span>;</span><br></pre></td></tr></table></figure>调用时检查<code>pred</code>，如果<code>false</code>，则阻塞线程，并且调用<code>lock.unlock()</code>，否则，继续执行。阻塞时被一旦某个线程<code>notify</code>时，实际可能为虚假唤醒，该函数将再次检查<code>pred</code>，如果为<code>true</code>，则解除阻塞并调用<code>lck.lock()</code>，获取互斥锁；否则继续阻塞线程。</li><li><code>wait_for</code>：对应的函数原型为：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> Rep, <span class="keyword">class</span> Period, <span class="keyword">class</span> Predicate&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">wait_for</span><span class="params">(std::unique_lock&lt;std::mutex&gt;&amp; lock, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">const</span> std::chrono::duration&lt;Rep, Period&gt;&amp; rel_time,</span></span></span><br><span class="line"><span class="params"><span class="function">        Predicate stop_waiting)</span></span>;</span><br></pre></td></tr></table></figure>调用时，检查两个条件是否满足：<code>stop_waiting</code>返回是否<code>true</code>, 时间是否超时，如果两个条件都不满足，则阻塞线程，并调用<code>lock.unlock()</code>，否则，到达一定等待时间或满足条件被唤醒。注意等待超过时间段后自动唤醒，判断条件一般需要使用者自己在合适的时候判断，并通过<code>notify_one()</code>或<code>notify_all()</code>唤醒，所以在使用时应当通过判断返回值来检测是其由于超时返回还是正常唤醒，即状态是否为<code>std::cv_status::timeout</code>。程序示例如下：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;atomic&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::chrono_literals;</span><br><span class="line"></span><br><span class="line">std::condition_variable cv;</span><br><span class="line">std::mutex cv_m;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">waits</span><span class="params">(<span class="type">int</span> idx)</span> </span>&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(cv_m)</span></span>;<span class="comment">//使用std::unique_lock&lt;std::mutex 来管理std::mutex</span></span><br><span class="line">    <span class="keyword">if</span> (cv.<span class="built_in">wait_for</span>(lk, idx*<span class="number">100</span>ms, []&#123;<span class="keyword">return</span> i == <span class="number">1</span>;&#125;)) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Thread&quot;</span> &lt;&lt; idx &lt;&lt; <span class="string">&quot; finished waiting. i == &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Thread&quot;</span> &lt;&lt; idx &lt;&lt; <span class="string">&quot; timed out. i == &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">signals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(<span class="number">120</span>ms);</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;Notifying...\n&quot;</span>;</span><br><span class="line">    cv.<span class="built_in">notify_all</span>();</span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(<span class="number">100</span>ms);</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(cv_m)</span></span>;</span><br><span class="line">        i = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;Notifying again...\n&quot;</span>;</span><br><span class="line">    cv.<span class="built_in">notify_all</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(waits, <span class="number">1</span>)</span>, <span class="title">t2</span><span class="params">(waits, <span class="number">2</span>)</span>, <span class="title">t3</span><span class="params">(waits, <span class="number">3</span>)</span>, <span class="title">t4</span><span class="params">(signals)</span></span>;</span><br><span class="line">    t1.<span class="built_in">join</span>();<span class="comment">//t1 等待 100ms 后被唤醒，自动超时</span></span><br><span class="line">    t2.<span class="built_in">join</span>();<span class="comment">//t2 在120ms 处被唤醒，但condition未满足，再次进入阻塞，200ms 时由于超时返回</span></span><br><span class="line">    t3.<span class="built_in">join</span>();<span class="comment">//t3 在120ms 处被唤醒，但condition未满足，再次进入阻塞，220ms时被通知，正常返回。</span></span><br><span class="line">    t4.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Thread1 timed out. i == 0</span></span><br><span class="line"><span class="comment">Notifying...</span></span><br><span class="line"><span class="comment">Thread2 timed out. i == 0</span></span><br><span class="line"><span class="comment">Notifying again...</span></span><br><span class="line"><span class="comment">Thread3 finished waiting. i == 1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><ul><li><code>wait_until</code>：对应的函数原型为：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Predicate</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">wait</span><span class="params">(unique_lock&lt;mutex&gt;&amp; lck, Predicate pred)</span></span>;</span><br></pre></td></tr></table></figure><code>wait_for</code>是通过<code>wait_until</code>实现的，到达指定截止时间或者满足条件<code>conditions</code>时线程即被唤醒。不同的是，到达时间是自动唤醒，而条件满足<code>conditions</code>时则是通过<code>notify_one()</code>或<code>notify_all()</code>唤醒，使用的时候要注意判断返回值，根据返回值确定该线程是被超时唤醒还是被其他线程<code>notify</code>正常唤醒，即状态是否为<code>std::cv_status::timeout</code>。</li><li><code>notify</code>:<pre><code>  - `notify_one` 唤醒一个阻塞的线程，唤醒线程的顺序可能是随机的，并没有特定的顺序。  - `notify_one` 程序示例如下，我们可以看到每次唤醒的顺序并不是确定的;</code></pre></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//condition_variable notify_one</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx;</span><br><span class="line">std::condition_variable produce, consume;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> cargo = <span class="number">0</span>;<span class="comment">//shared value producers and consumers</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (cargo == <span class="number">0</span>) consume.<span class="built_in">wait</span>(lck);</span><br><span class="line">    std::cout &lt;&lt; cargo &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    cargo = <span class="number">0</span>;</span><br><span class="line">    produce.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">producer</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lck</span><span class="params">(mtx)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (cargo != <span class="number">0</span>) produce.<span class="built_in">wait</span>(lck);</span><br><span class="line">    cargo = id;</span><br><span class="line">    consume.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::thread consumers[<span class="number">10</span>], producers[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">//spawn 10 consumes and 10 produces</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        consumers[i] = std::<span class="built_in">thread</span>(consumer);</span><br><span class="line">        producers[i] = std::<span class="built_in">thread</span>(producer, i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//join them back:</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        producers[i].<span class="built_in">join</span>();</span><br><span class="line">        consumers[i].<span class="built_in">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>notity_all</code>唤醒所有的线程在<code>condition_variable</code>下的线程。需要特别注意的是，可能唤醒所有阻塞的线程，但是唤醒的多个线程同一时间只能有一个线程可以持有<code>lck</code>锁，必须等待其执行<code>wait</code>之后的代码，并释放<code>lck</code>时，剩余的线程才可以运行，我们可以观察到以下程序示例，唤醒的程序都是随机的。</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::condition_variable_any cv;</span><br><span class="line">std::mutex cv_m;</span><br><span class="line"><span class="comment">//This mutex is used for three purposes</span></span><br><span class="line"><span class="comment">//1) to synchronize accesses to i </span></span><br><span class="line"><span class="comment">//2) to synchronize accesses to std::cerr</span></span><br><span class="line"><span class="comment">//3) for the condition variable cv </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">waits</span><span class="params">(<span class="type">int</span> idx)</span> </span>&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(cv_m)</span></span>;</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;Waiting... \n&quot;</span>;</span><br><span class="line">    cv.<span class="built_in">wait</span>(lk, []&#123;<span class="keyword">return</span> i == <span class="number">1</span>;&#125;);</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;thread:&quot;</span> &lt;&lt; idx &lt;&lt; <span class="string">&quot; ...finished waiting. i == 1\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">signals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(cv_m)</span></span>;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Notifying...\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cv.<span class="built_in">notify_all</span>();</span><br><span class="line"></span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">1</span>));</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(cv_m)</span></span>;</span><br><span class="line">        i = <span class="number">1</span>;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Notifying again...\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cv.<span class="built_in">notify_all</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(waits, <span class="number">1</span>)</span>, <span class="title">t2</span><span class="params">(waits, <span class="number">2</span>)</span>, <span class="title">t3</span><span class="params">(waits, <span class="number">3</span>)</span>, <span class="title">t4</span><span class="params">(signals)</span></span>;</span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();</span><br><span class="line">    t3.<span class="built_in">join</span>();</span><br><span class="line">    t4.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>虚假唤醒以及如何避免虚假唤醒：<br>当线程从等待已发出信号的条件变量中醒来，却发现它等待的条件未得到满足时，就会发生虚假唤醒，发生虚假唤醒通常是因为在发出条件变量信号和等待线程最终运行之间，另一个线程运行并更改了条件，导致<code>wait</code>的线程被唤醒后，实际条件却未满足。比如我们在<code>notify_all()</code>时多个线程都被唤醒，但此时实际共享区却只有少数几个线程可以操作，这时就会造成其他线程被虚假唤醒，可以在<code>wait</code>唤醒后再次进行检测<code>condition</code>解决虚假唤醒。</li></ol><ul><li>虚假唤醒导致的后果：之前要等待的某个条件实际上并没有符合，被唤醒的线程将可能会执行一系列非法操作。</li><li>通常的解决办法：在条件变量阻塞的代码处增加一个<code>while</code>循环，如果被唤醒就要检查一下条件是否符合，如果不符合则要再次进入阻塞等待。这样即避免了忙等待，又避免了虚假唤醒问题。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lock</span>(mutex);</span><br><span class="line"><span class="keyword">while</span> (something <span class="keyword">not</span> <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">condition_wait</span>(cond, mutex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">do</span> (something);</span><br><span class="line"><span class="built_in">unlock</span>(mutex);</span><br></pre></td></tr></table></figure></li></ul><h1 id="线程同步与异步"><a href="#线程同步与异步" class="headerlink" title="线程同步与异步"></a>线程同步与异步</h1><h2 id="面试高频指数：⭐⭐⭐⭐⭐-1"><a href="#面试高频指数：⭐⭐⭐⭐⭐-1" class="headerlink" title="面试高频指数：⭐⭐⭐⭐⭐"></a>面试高频指数：⭐⭐⭐⭐⭐</h2><p>线程同步操作：<br><code>C++</code>标准库提供了一下几种线程同步的方式：</p><ul><li>互斥量（支持超时加锁、递归加锁）；</li><li>读写锁（共享互斥量，也支持超时加锁）；</li><li>互斥量包装器(基于<code>RAII</code>的思想);</li><li>条件变量;</li><li>信号量（二元信号量、计数信号量）;</li><li><code>barrier</code>;</li><li><code>call_once</code>;</li></ul><p>不同的同步方式具有不同的使用场景和性能，实际使用时根据不同的场景选择不同的同步方式，分别就几种方式以上几种方式进行简要介绍：</p><ol><li><p>互斥量（<code>mutex</code>）:<br> 互斥量 （<code>mutex</code> ）是防止同时访问共享资源的程序对象，为避免线程更新共享变量时所出现问题，必须使用互斥量(<code>mutex</code>是<code>mutal exclusion</code>的缩写)来确保同时仅有一个线程可以访问某项共享资源。即使用互斥量来实现原子访问操作，防止多个线程对临界区同时操作而产生不一致的问题。<code>mutex</code>只有锁定（<code>locked</code>）和未锁定（<code>unlocked</code>）两种状态。任何时候，至多只有一个线程可以锁定互斥量。试图对已经锁定的互斥量再次加锁，将可能阻塞线程或者报错失败。<code>mutex</code>的底层可能封装的是操作系统<code>spinlock</code>，不同的操作系统不可能有不同的实现。<code>C++</code>中关于<code>mutex</code>的头文件为<code>#include &lt;mutex&gt;</code>。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_block</span> <span class="params">(<span class="type">int</span> n, <span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line">    mtx.<span class="built_in">lock</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;std::cout&lt;&lt; c;&#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">    mtx.<span class="built_in">unlock</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">th1</span> <span class="params">(print_block, <span class="number">50</span>, <span class="string">&#x27;*&#x27;</span>)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">th2</span> <span class="params">(print_block, <span class="number">50</span>, <span class="string">&#x27;$&#x27;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    th1.<span class="built_in">join</span>();</span><br><span class="line">    th2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">****************************************</span></span><br><span class="line"><span class="comment">$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p><code>C++</code>中还定义了<code>timed_mutex</code>： 在<code>mutex</code>的基础上增加了加锁的功能。<br><code>recursize_mutex</code>：在<code>mutex</code>的基础上增加了递归加锁的功能(此时，<code>lock()</code>函数可以在同一线程不释放锁的情况下多次调动)。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">std::recursive_mutex mtx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mtx.<span class="built_in">lock</span>();</span><br><span class="line">    mtx.<span class="built_in">unlock</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mtx.<span class="built_in">lock</span>();</span><br><span class="line">    <span class="built_in">fun1</span>();</span><br><span class="line">    mtx.<span class="built_in">unlock</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>共享互斥量：<br><code>std::shared_mutex</code>是<code>C++17</code>标准引入的，由<code>unique_lock</code>和<code>shared_lock</code>两个模板类配合<code>shared_mutex</code>使用，主要用于读写共享锁。<code>unique_lock</code>用于写入是加锁。<code>shared_lock</code>用于读取时加锁，对线工在构造时自动对<code>shared_mutex</code>加锁，析构时自动对其解锁。头文件主要包含在<code>#include &lt;shared_mutex</code>。<code>shared_mutex</code>可用于保护数据不被多个线程同时访问。与其他便于独占访问的互斥锁类型相比，<code>shared_mutex</code>具有两种访问级别：</p></li></ol><ul><li><code>shared</code>：多个线程可以共享同一个互斥锁的所有权。</li><li><code>exclusive</code>：只有一个线程可以拥有互斥锁。<br>共享互斥锁通常用于多个读取操作可以同时访问同一资源而不会导致数据竞争，但只有一个写入操作的场景。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;shared_mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadSafeCounter</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ThreadSafeCounter</span>() = <span class="keyword">default</span>;<span class="comment">//默认构造函数</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//多个线程同时读取counter计数</span></span><br><span class="line">    <span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">get</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="function">std::shared_lock <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        <span class="keyword">return</span> value_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//只有一个线程可以修改counter计数</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">std::unique_lock <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        value_++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//只有一个线程可以修改counter计数</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">reset</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">std::unique_lock <span class="title">lock</span><span class="params">(mutex_)</span></span>;</span><br><span class="line">        value_ = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">mutable</span> std::shared_mutex mutex_;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> value_ = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ThreadSafeCounter counter;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> increment_and_print = [&amp;counter]() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            counter.<span class="built_in">increment</span>();</span><br><span class="line">            std::cout &lt;&lt; std::this_thread::<span class="built_in">get_id</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; counter.<span class="built_in">get</span>() &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// Note: Writing to std::cout actually needs to be synchronized as well</span></span><br><span class="line">            <span class="comment">// by another std::mutex. This has been omitted to keep the example small.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::thread <span class="title">thread1</span><span class="params">(increment_and_print)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">thread2</span><span class="params">(increment_and_print)</span></span>;</span><br><span class="line">    </span><br><span class="line">    thread1.<span class="built_in">join</span>();</span><br><span class="line">    thread2.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">139677317637888 2</span></span><br><span class="line"><span class="comment">139677317637888 3</span></span><br><span class="line"><span class="comment">139677309245184 4</span></span><br><span class="line"><span class="comment">139677309245184 5</span></span><br><span class="line"><span class="comment">139677309245184 6</span></span><br><span class="line"><span class="comment">139677317637888 6</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>我们可以看到<code>increment</code>同时只能有一个线程对计数进行增加，但可能同时存在多个线程读取同一个计数。<code>shared_timed_mutex</code>是在<code>shared_mutex</code>的基础上增加了超时加锁功能。</li></ul><ol><li>互斥量包装器<br><code>lock_guard</code>：使用了<code>RAII</code>的机制对互斥量进行类模板封装，构造时加锁，析构时解锁。</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="type">const</span> std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// mtx is automatically released when lock goes out of scope</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>互斥量包装器对比原生的<code>mutex</code>来说，创建即加锁，作用域结束后自动析构解锁，无需手动解锁。缺点是不能中途解锁，不支持赋值和移动。在需要加锁的地方，只需要任意实例化一个<code>lock_guard</code>，调用构造函数成功上锁，出作用域则<code>lock_guard</code>对象会被销毁，调用析构函数自动解锁从而不会造成死锁，但是提供的功能单一不够灵活。</p><p><code>unique_lock</code>：<code>unique_lock</code>类模板也是采用<code>RAII</code>的方式对锁进行了封装，并且也是以独占所有权的方式管理<code>mutex</code>对象的上锁和解锁操作，即其对象之间不能发生拷贝。在构造(或移动<code>move</code>赋值)时，<code>unique_lock</code>对象需要传递一个<code>mutex</code>对象作为他的参数，新创建的<code>unique_lock</code>对象负责传入的<code>mutex</code>对象的上锁和解锁操作。使用以上类型互斥量实例化<code>unique_lock</code>对象时，自动调用构造函数上锁，<code>unique_lock</code>对象销毁时自动调用析构函数解锁，可以很方便的防止死锁问题。与<code>lock_guard</code>不同的是，<code>unique_lock</code>更加的灵活，提供了更多的成员函数：</p><ul><li>上锁/解锁操作：<code>lock</code>、<code>try_lock</code>、<code>try_lock_for</code>、<code>try_lock_until</code>和<code>unlock</code>;</li><li>修改操作：支持移动赋值、交换（<code>swap</code>：与另一个<code>unique_lock</code>对象互换所管理的互斥量所有权）、释放（<code>release</code>：返回它所管理的互斥量对象的指针，并释放所有权。）</li><li>获取属性：<code>owns_lock</code>（返回当前对象是否上了锁）、<code>operator bool()</code>  (与<code>owns_lock()</code>)的功能相同)、<code>mutex</code>（返回当前<code>unique_lock</code>所管理的互斥量的指针）。</li></ul><ol><li>条件变量(<code>condition variable</code>)：<br>在<code>C++11</code>以后，我们可以使用条件变量（<code>condition_variable</code>）实现多个线程间的同步操作；当条件不满足时，相关线程被一直阻塞，直到某种条件出现，这些线程才会被唤醒。<code>C++</code>中包含的头文件在<code>#include &lt;condition_variable</code>中。<br>条件变量是利用线程间共享的全局变量进行同步的一种机制，主要包括两个动作：</li></ol><ul><li>一个线程因等待<code>条件变量的条件成立</code>而挂起：</li><li>另外一个线程使<code>条件成立</code>从而给出唤醒线程的信号，从而唤醒被等到的线程；<br>为了防止竞争，条件变量的使用总是和一个互斥锁结合在一起；通常情况下这个锁是<code>std::mutex</code>，并且管理这个锁只能是<code>std::unique_lock std::mutex</code>等RAII模板类。分别是使用以下两个方法实现：</li><li>等待条件成立使用的是<code>condition_variable</code>类成员<code>wait</code>、<code>wait_for</code>或<code>wait_until</code>。</li><li>唤醒信号使用的是<code>condition_variable</code>类成员<code>notify_one</code>或者<code>notify_all</code>函数。<br>我们可以看到<code>wait</code>函数如下：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;Class Predicate&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">wait</span><span class="params">(std::unique_lock&lt;std::mutex&gt;&amp; lock, Predicate stop_waiting)</span></span>;</span><br></pre></td></tr></table></figure>线程会一直挂起，直到<code>stop_waiting</code>为<code>true</code>为止。程序示例如下：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"> </span><br><span class="line">std::mutex m;</span><br><span class="line">std::condition_variable cv;</span><br><span class="line">std::string data;</span><br><span class="line"><span class="type">bool</span> ready = <span class="literal">false</span>;</span><br><span class="line"><span class="type">bool</span> processed = <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">worker_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(m)</span></span>;</span><br><span class="line">    <span class="comment">// worker 线程等待 ready</span></span><br><span class="line">    cv.<span class="built_in">wait</span>(lk, []&#123;<span class="keyword">return</span> ready;&#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 唤醒执行</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Worker thread is processing data\n&quot;</span>;</span><br><span class="line">    data += <span class="string">&quot; after processing&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// processed 设置为 true, 唤醒 main 线程</span></span><br><span class="line">    processed = <span class="literal">true</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Worker thread signals data processing completed\n&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 释放锁，防止再次被唤醒。</span></span><br><span class="line">    lk.<span class="built_in">unlock</span>();</span><br><span class="line">    <span class="comment">// 唤醒 main 线程</span></span><br><span class="line">    cv.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">worker</span><span class="params">(worker_thread)</span></span>;</span><br><span class="line">    <span class="comment">// 让 worker 线程先执行，再进行唤醒，否则可能出现 ready = true 先于 worker 线程的执行</span></span><br><span class="line">    worker.<span class="built_in">detach</span>();</span><br><span class="line">    </span><br><span class="line">    data = <span class="string">&quot;Example data&quot;</span>;</span><br><span class="line">    <span class="comment">// 设置 ready 为 true, 唤醒 worker 线程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(m)</span></span>;</span><br><span class="line">        ready = <span class="literal">true</span>;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;main() signals data ready for processing\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 唤醒 worker 线程</span></span><br><span class="line">    cv.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="comment">// 等待 worker 线程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lk</span><span class="params">(m)</span></span>;</span><br><span class="line">        cv.<span class="built_in">wait</span>(lk, []&#123;<span class="keyword">return</span> processed;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Back in main(), data = &quot;</span> &lt;&lt; data &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">main() signals data ready for processing</span></span><br><span class="line"><span class="comment">worker thread signals is processing data</span></span><br><span class="line"><span class="comment">.Worker thread signals data processing completed</span></span><br><span class="line"><span class="comment">Back in main(), data = Example data after processing</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul><ol><li>信号量<br><code>C++20</code>中添加了<code>C++</code>中的信号量为二元信号量与计数信号量，二元信号量实际为计数信号量模板的特化。</li></ol><ul><li><code>binary_semphore</code>：二元信号量类似于互斥量，信号量只要0和1。</li><li><code>counting_semphore</code>：计数信号量<br>所有关于信号量的定义参考头文件<code>#include &lt;semaphore&gt;</code>, 计数信号量是一种轻量级同步原语，可以控制对共享资源的访问。与<code>std::mutex</code>不同的是，<code>counting_semphore</code>至少允许<code>LeastMaxValue</code>并发访问者对同一资源进行多个访问。<code>counting_semphore</code>包含一个由构造函数初始化的内部计数器。该计数器可以通过<code>acquire</code>获取资源访问权限，并ton过调用<code>release()</code>来释放资源从而递增计数器。当计数器为零时，调用<code>acquire()</code>时就会阻塞直到计数器增加，但是调用<code>try_acquire()</code>不阻塞;<code>try_acquire_for()</code>和<code>try_acquire_until()</code>阻塞直到计数器增加或达到超时。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;semaphore&gt;</span></span></span><br><span class="line"> </span><br><span class="line">std::binary_semaphore</span><br><span class="line">smphSignalMainToThread&#123;<span class="number">0</span>&#125;,</span><br><span class="line">smphSignalThreadToMain&#123;<span class="number">0</span>&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ThreadProc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 第一次进入阻塞</span></span><br><span class="line">smphSignalMainToThread.<span class="built_in">acquire</span>();</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;[thread] Got the signal\n&quot;</span>; <span class="comment">// response message</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::literals;</span><br><span class="line">std::this_thread::<span class="built_in">sleep_for</span>(<span class="number">3</span>s);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;[thread] Send the signal\n&quot;</span>; <span class="comment">// message</span></span><br><span class="line">    <span class="comment">// 唤醒 main 线程</span></span><br><span class="line">smphSignalThreadToMain.<span class="built_in">release</span>();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">std::thread <span class="title">thrWorker</span><span class="params">(ThreadProc)</span></span>;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;[main] Send the signal\n&quot;</span>; <span class="comment">// message</span></span><br><span class="line">    <span class="comment">// 唤醒 ThreadProc </span></span><br><span class="line">smphSignalMainToThread.<span class="built_in">release</span>();</span><br><span class="line">    <span class="comment">// main 线程阻塞</span></span><br><span class="line">smphSignalThreadToMain.<span class="built_in">acquire</span>();</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;[main] Got the signal\n&quot;</span>; <span class="comment">// response message</span></span><br><span class="line">thrWorker.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[main] Send the signal</span></span><br><span class="line"><span class="comment">[thread] Got the signal</span></span><br><span class="line"><span class="comment">[thread] Send the signal</span></span><br><span class="line"><span class="comment">[main] Got the signal</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li></ul><ol><li><code>barrier</code>：<br><code>C++ 20</code>以后支持<code>latch</code>与<code>barrier</code>，他们同样是用来线程同步。</li></ol><p><code>latch</code>：类<code>latch</code>是<code>std::pridiff_t</code>类型的向下计数器，可用来同步线程。计数器的值在创建时初始化。其内部维护者一个计数器，当计数器不为0时，所有参与者(线程)都将阻塞在等待操作处，计数为<code>0</code>时，解除阻塞。计数器不可重置或增加，故它是一次性的，不可重用。与<code>std::barrier</code>不同，<code>std::latch</code>参与线程可以多次递减。</p><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;latch&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//latch是一种倒计时的计数器，它的值在构造函数中设置，线程中可以使用</span></span><br><span class="line">    <span class="comment">//初始值为2</span></span><br><span class="line">    <span class="function">std::latch <span class="title">work_done</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    work_done.<span class="built_in">count_down</span>();<span class="comment">//以非阻塞的方式对计数器进行减1操作 接着继续往下执行</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">//work_done.wait();//当计数值不为0时，就一直阻塞，直到为0才不阻塞（不会减1操作）</span></span><br><span class="line">    <span class="comment">//std::cout &lt;&lt; &quot;waiting because the counter is nozero&quot; &lt;&lt; std::endl;</span></span><br><span class="line">    <span class="type">bool</span> ok = work_done.<span class="built_in">try_wait</span>();<span class="comment">//测试内部的计数值是否为0 如果为0则返回true 否则返回false 这时还是1 </span></span><br><span class="line">    std::cout &lt;&lt; ok &lt;&lt; std::endl;<span class="comment">//ok = 0</span></span><br><span class="line">    work_done.<span class="built_in">arrive_and_wait</span>();<span class="comment">//递减计数器并阻塞直到它到达0(这里会减1) 这里减1操作后变成0，就不会阻塞了！继续执行</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;倒计时结束&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">倒计时结束</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ul><li><p><code>barrier</code>：类似于<code>latch</code>，<strong>它会阻塞线程直到所有参与者线程都达到一个同步点，直到预期数量的线程到达设定的值则会解除阻塞</strong>。与<code>latch</code>不同的是，<strong>它是可重用的</strong>。<br>一个<code>barrier</code>的声明周期包含多个阶段，每个阶段都定义了一个同步点。一个<code>barrier</code>阶段包含：</p><ul><li>期望计数(设创建时指定的计数为<code>n</code>)，当期望计数不为<code>0</code>时，参数者将阻塞与等待操作处</li><li>当期望计数为<code>0</code>时，会执行创建<code>barrier</code>时指定的阶段完成步骤，然后解除阻塞所有阻塞于同步点的参与者线程。</li><li><p>当阶段完成步骤执行完成后，会重置期望计数为<code>n-调用arrive_and_drop()</code>的次数，然后开始下一个阶段</p><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;barrier&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//默认是初始化列表: initializer_list</span></span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> workers = &#123;<span class="string">&quot;anil&quot;</span>, <span class="string">&quot;busara&quot;</span>, <span class="string">&quot;carl&quot;</span>&#125;;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; typeid(workers).name() &lt;&lt; endl;//St16initializer_listIPKcE</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">auto</span> on_completion = []() <span class="keyword">noexcept</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    lamda函数 [] 里可接收外部参数 () 里是形参列表，可以自定义参数</span></span><br><span class="line"><span class="comment">    等价于noexcept(true) 注意: 这里括号中可以填写表达式, 值为true 则不会抛出异常，否则会抛出异常</span></span><br><span class="line"><span class="comment">    */</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">static</span> <span class="keyword">auto</span> phase = <span class="string">&quot;...done\n&quot;</span><span class="string">&quot;Cleaning up...\n&quot;</span>;</span><br><span class="line">        cout &lt;&lt; phase;</span><br><span class="line">        phase = <span class="string">&quot;...done\n&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ssize(workers): 求初始化列表中的元素个数！</span></span><br><span class="line">    <span class="comment">//barrier对象初始为3个线程同步点！</span></span><br><span class="line">    <span class="function">std::barrier <span class="title">sync_point</span><span class="params">(std::ssize(workers), on_completion)</span></span>;<span class="comment">//当ssize(workers)个线程每完成一个阶段的任务，就会执行一次on_completion函数！！！</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">auto</span> work = [&amp;](std::string name) &#123;</span><br><span class="line">        std::string product = <span class="string">&quot; &quot;</span> + name + <span class="string">&quot; worked\n&quot;</span>;<span class="comment">// anill workded</span></span><br><span class="line">        std::cout &lt;&lt; product;<span class="comment">//ok, op &lt;&lt; call is atomic</span></span><br><span class="line">        <span class="comment">//当 std::arrive_and_wait 在同步点等待时，std::arrive_and_drop 将自己从同步机制中删除</span></span><br><span class="line">        sync_point.<span class="built_in">arrive_and_wait</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//全部到达后，进行下一阶段 此时内部计数会减少1</span></span><br><span class="line">        product = <span class="string">&quot; &quot;</span> + name + <span class="string">&quot;cleaned\n&quot;</span>;<span class="comment">// anill cleaned</span></span><br><span class="line">        std::cout &lt;&lt; product;</span><br><span class="line">        sync_point.<span class="built_in">arrive_and_wait</span>();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Starting...\n&quot;</span>;</span><br><span class="line">    std::vector&lt;std::thread&gt; threads;<span class="comment">//线程对象数组</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> <span class="type">const</span>&amp; worker : workers) &#123;<span class="comment">//遍历初始化列表，然后创建线程并传入参数</span></span><br><span class="line">        threads.<span class="built_in">emplace_back</span>(work, worker);</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);<span class="comment">//每个1s实例化线程对象 当线程数小于3时，每个线程会卡在第一阶段</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; thread : threads) &#123;<span class="comment">//让主线程等待子线程结束然后回收资源</span></span><br><span class="line">        thread.<span class="built_in">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Starting...</span></span><br><span class="line"><span class="comment">这里是3个线程均执行第一阶段的任务</span></span><br><span class="line"><span class="comment"> anil worked</span></span><br><span class="line"><span class="comment"> busara worked</span></span><br><span class="line"><span class="comment"> carl worked</span></span><br><span class="line"><span class="comment">3个线程第一阶段的任务都执行完了，此时打印on_completion函数的内容</span></span><br><span class="line"><span class="comment">...done</span></span><br><span class="line"><span class="comment">Cleaning up...</span></span><br><span class="line"><span class="comment">此时内部计数会减少1。然后只需要两个线程执行就可以印on_completion了！！！</span></span><br><span class="line"><span class="comment">然后这三个线程开始执行第二阶段的任务</span></span><br><span class="line"><span class="comment"> busaracleaned</span></span><br><span class="line"><span class="comment"> carlcleaned</span></span><br><span class="line"><span class="comment"> anilcleaned</span></span><br><span class="line"><span class="comment"> 第二段任务结束后，再次打印on_completion函数的内容，因为内部是静态字符串，第二次不再执行初始化操作</span></span><br><span class="line"><span class="comment"> 直接打印第一次修改后的字符串值</span></span><br><span class="line"><span class="comment">...done</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></li></ul><ol><li><code>call_once</code><br><code>C++11</code>以后支持<code>call_once</code>。确保某个操作只被执行一次(成功执行才算), 即使是多线程环境下也确保只执行一次。<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Callable</span>, <span class="keyword">class</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">call_once</span><span class="params">(std::once_flag&amp; flag, Callable&amp;&amp; f, Args&amp;&amp;... args)</span></span>;</span><br></pre></td></tr></table></figure>如果在<code>call_once</code>被调用时，<code>flag</code>表明<code>f</code>已经被调用，则<code>call_once</code>立即返回(这种调用<code>call_once</code>称为被动)。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">std::once_flag flag1, flag2;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">template &lt;class Callable, class... Args&gt;</span></span><br><span class="line"><span class="comment">void call_once(std::once_flag&amp; flag, Callable&amp;&amp; f, Args&amp;&amp;... args);</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">simple_do_once</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;is running simple_do_once&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//这个</span></span><br><span class="line">    std::<span class="built_in">call_once</span>(flag1, []() &#123; std::cout &lt;&lt; <span class="string">&quot;simple example: called once\n&quot;</span>; &#125;);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;hhhhhh &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//所有的线程都会执行simple_do_once的函数，只是call_once这个只会被某一个线程函数执行一次！！！其他线程函数就会忽略掉这一行！！！！</span></span><br><span class="line">    <span class="function">std::thread <span class="title">st1</span><span class="params">(simple_do_once)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">st2</span><span class="params">(simple_do_once)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">st3</span><span class="params">(simple_do_once)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">st4</span><span class="params">(simple_do_once)</span></span>;</span><br><span class="line">    st1.<span class="built_in">join</span>();</span><br><span class="line">    st2.<span class="built_in">join</span>();</span><br><span class="line">    st3.<span class="built_in">join</span>();</span><br><span class="line">    st4.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h1 id="多线程异步"><a href="#多线程异步" class="headerlink" title="多线程异步"></a>多线程异步</h1><h2 id="面试高频指数：⭐⭐⭐⭐"><a href="#面试高频指数：⭐⭐⭐⭐" class="headerlink" title="面试高频指数：⭐⭐⭐⭐"></a>面试高频指数：⭐⭐⭐⭐</h2><hr><ol><li><p><code>std::thread</code></p><p>我们可以通过<code>thread</code>创建一个线程(<code>C++11</code>以后才支持<code>thread</code>标准库)，<code>thread</code>在构造相关线程对象完成后立即开始执行(<strong>实际需要等待<code>OS</code>对于线程的调用延迟</strong>)。<code>thread</code>需要配合与<code>join</code>或者<code>detach</code>配合使用，不然可能出现不可预料的后果。</p><ul><li><code>join</code> 代表阻塞当前主线程，等待当前的<code>join</code>的子线程完成后主线程才会继续</li><li><code>detach</code>表明当前子线程不阻塞主线程，且与主线程分离，子线程的运行不会影响到主线程。</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fn2</span> <span class="params">(string st2)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; st2 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fn1</span> <span class="params">(string st1)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; st1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">thr1</span><span class="params">(fn1, <span class="string">&quot;11111111\n&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">thread <span class="title">thr2</span><span class="params">(fn2, <span class="string">&quot;22222222\n&quot;</span>)</span></span>;</span><br><span class="line">    <span class="comment">//thr1.join();</span></span><br><span class="line">    <span class="comment">//thr2.join();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">当没有join或者detach时，会报如下错误</span></span><br><span class="line"><span class="comment">terminate called without an active exception</span></span><br><span class="line"><span class="comment">11111111</span></span><br><span class="line"><span class="comment">Aborted</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">否则正常打印</span></span><br><span class="line"><span class="comment">11111111</span></span><br><span class="line"><span class="comment">22222222</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>如<strong>在一个类中间，一个成员函数需要<code>异步调用</code>另一个函数的时候，需要绑定<code>this</code></strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">const</span> std::string s1, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; s1 &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; i &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">()</span> </span>&#123;<span class="comment">//类中的该成员函数调用另一个成员函数，绑定了this!!!</span></span><br><span class="line">        <span class="function">std::thread <span class="title">t1</span><span class="params">(&amp;Test::func1, <span class="keyword">this</span>, <span class="string">&quot;dog&quot;</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">        t1.<span class="built_in">join</span>();<span class="comment">//这里为join时，就会先去执行func1，执行完后再去执行fun2后续逻辑。那么结果始终是dog 0\n func2</span></span><br><span class="line">        <span class="comment">//t1.detach(); 当这里为detach打印的结果是不可预知的！！！因为fun2执行完了，这里t1对象已经被销毁了，可能执行fun1时会出现问题！！！</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;func2&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Test a;</span><br><span class="line">    a.<span class="built_in">func2</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>std::async</code></p></li></ol><blockquote><p>我们进行异步编程时，需要得到子进程的计算结果，常见的手段是我们可以通过<strong>共享变量或者消息队列</strong>的方式告知另一个线程当前的计算结果，但是操作和实现都比较麻烦，同时还要考虑线程间的互斥问题。<code>C++11</code>中提供了一个相对简单的异步接口<code>std::async</code>，通过这个接口可以简单地创建线程并通过<code>std::future</code>中获取结果，极大的方便了<code>C++</code>多线程编程。<strong><code>std::async</code>适合于需要取得结果的异步线程</strong>。<code>C++11</code>中的<code>std::async</code>是个模板函数。<code>std::async</code>异步调用函数，<strong>在某个时候以<code>Args</code>作为参数(可变长参数)调用函数，无需等待函数执行完成就可返回，返回结果是个<code>std::future</code>对象。函数返回的值可通过<code>std::future</code>对象的<code>get</code>成员函数获取。一旦完成函数的执行，共享状态将包含函数返回的值并<code>ready</code>。</strong></p></blockquote><p>​        <code>async</code>使用的函数原型和参数说明如下:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(C++11 起)（C++17 前）</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Functon</span>, <span class="keyword">class</span>... Args&gt;</span><br><span class="line">std::future&lt;std::<span class="type">result_of_t</span>&lt;std::<span class="built_in">decay_t</span>&lt;Function&gt;(std::<span class="type">decay_t</span>&lt;Args&gt;...)&gt;&gt;</span><br><span class="line">    <span class="built_in">async</span>(Function&amp;&amp; f, Args&amp;&amp;... args);</span><br><span class="line"></span><br><span class="line"><span class="comment">//(C++11 起) (C++17 前)</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">Function</span>, <span class="keyword">class</span>... Args&gt;</span><br><span class="line">std::future&lt;std::<span class="type">result_of_t</span>&lt;std::<span class="built_in">decay_t</span>&lt;Function&gt;(std::<span class="type">decay_t</span>&lt;Args&gt;...)&gt;&gt;</span><br><span class="line">    <span class="built_in">async</span>(std::launch policy, Function&amp;&amp; f, Args&amp;&amp;... args);</span><br></pre></td></tr></table></figure><ul><li><p>第一个参数是<code>std::async</code>的启动策略类型有以下两种方式：<code>async</code>允许调用者选择特定的启动策略：</p><ul><li><p><code>std::launch::async</code>：</p><blockquote><p><strong>在调用<code>async</code>就开始创建线程</strong>，该函数由线程异步调用，并且将其返回值与共享状态的访问点同步。</p></blockquote></li><li><p><code>std::launch::deferred</code>：</p><blockquote><p><strong>延迟启动线程，在访问共享状态时该线程才启动</strong>。<strong>对函数的调用将推迟到返回的<code>std::future</code>的共享状态被访问时</strong>（即使用<code>std::future</code>的<code>wait</code>或<code>get</code>函数）。如果<code>get</code>或<code>wait</code>没有被调用，函数就绝对不会执行。</p></blockquote></li></ul></li><li><p>参数<code>Function</code></p><blockquote><p>可以为函数指针、成员指针、任何类型的可移动构造的函数对象，也可以匿名函数<code>lambda</code>。<strong><code>Function</code>的返回值或异常存储在共享状态以供异步的<code>std::future</code>对象检索</strong>。<strong><code>std::future</code>对象可以通过<code>wait</code>或<code>get</code>函数获取函数的返回值。</strong></p></blockquote></li></ul><ul><li><p>参数<code>Args</code></p><blockquote><p>传递给函数<code>Function</code>调用的参数，它们的类型应是可移动构造的。我们可以用多线程程序分为子任务，用子任务求解。</p></blockquote><p>示例如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将一个任务分成若干个小任务去执行，每个小任务用新的线程来处理！！！</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">parallel_sum</span><span class="params">(RandomIt beg, RandomIt end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> len = end - beg;</span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">1000</span>) </span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">accumulate</span>(beg, end, <span class="number">0</span>);<span class="comment">//当规模小于1000时，就去累加该区间的部分和</span></span><br><span class="line"></span><br><span class="line">    RandomIt mid = beg + len / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> handle = std::<span class="built_in">async</span>(std::launch::async,</span><br><span class="line">                             parallel_sum&lt;RandomIt&gt;, mid, end);<span class="comment">//当规模大于1000时，则划分一半开启一个新的线程来处理，如果还是大于1000，则新线程又会创建新的线程来处理</span></span><br><span class="line">    <span class="type">int</span> sum = <span class="built_in">parallel_sum</span>(beg, mid);<span class="comment">//计算开始到中间的一半规模的求和。如果规模还是很大，还会创建新的线程来计算较小的和！！！</span></span><br><span class="line">    <span class="keyword">return</span> sum + handle.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//同上代码逻辑！！！ 递归+多线程！！！</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">parallel_min</span><span class="params">(RandomIt beg, RandomIt end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> len = end - beg;</span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">1000</span>) </span><br><span class="line">        <span class="keyword">return</span> *(std::<span class="built_in">min_element</span>(beg, end));</span><br><span class="line"></span><br><span class="line">    RandomIt mid = beg + len / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> handle = std::<span class="built_in">async</span>(std::launch::async,</span><br><span class="line">                             parallel_min&lt;RandomIt&gt;, mid, end);</span><br><span class="line">    <span class="type">int</span> ans = <span class="built_in">parallel_min</span>(beg, mid);</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">min</span>(ans, handle.<span class="built_in">get</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(<span class="number">10000</span>)</span></span>;</span><br><span class="line">    <span class="built_in">iota</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">1</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;The sum is &quot;</span> &lt;&lt; <span class="built_in">parallel_sum</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>()) &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;The min elemnet is &quot;</span> &lt;&lt; <span class="built_in">parallel_min</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>()) &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol><li><p><code>std::future</code></p><p><strong>通常与<code>std::promise</code>一起使用</strong>：作用是在一个<strong>线程<code>t1</code>中保存一个类型<code>Typename T</code>的值</strong>，<strong>可供相绑定的<code>std::future</code>对象在另一个线程<code>t2</code>中获取</strong></p><blockquote><p><code>std::future</code>提供了一种访问线程异步操作结果的机器。从字面意思来看，<code>future</code>表示未来，<code>std::async</code>返回结果即为一个<code>future</code>。在实际工程项目中，一个异步操作我们是不可能马上就获取操作结果的，只能是在未来的某个时候获取，但是我们可以同步等待的方式来获取结果，可以通过查询<code>future</code>的状态(<code>future_status</code>)来获取异步操作的结果。<code>future_status</code>有三种状态：</p></blockquote><ul><li><p><code>deferred</code>： 异步操作还没开始</p></li><li><p><code>ready</code>：异步操作已经完成</p></li><li><p><code>timeout</code>：异常操作超时</p><blockquote><p>获取<code>future</code>结果有三种方式：<code>get</code>、<code>wait</code>、<code>wait_for</code>，其中</p><p><strong><code>get</code>等待异步操作结束并返回结果</strong></p><p><strong><code>wait</code>只是等待异步操作完成，没有返回值</strong></p><p><strong><code>wait_for</code>是超时等待返回结果</strong></p></blockquote></li></ul></li></ol><pre><code> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//future from async </span></span><br><span class="line">    <span class="comment">//使用std::async创建匿名函数的线程函数</span></span><br><span class="line">    std::future&lt;<span class="type">int</span>&gt; f1 = std::<span class="built_in">async</span>(std::launch::async, [] &#123; <span class="keyword">return</span> <span class="number">8</span>; &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//future from a promise</span></span><br><span class="line">    std::promise&lt;<span class="type">int</span>&gt; p;<span class="comment">//确定要在一个线程中设置的值类型为int类型 这个用于传入一个线程，并且在线程里设置值</span></span><br><span class="line">    std::future&lt;<span class="type">int</span>&gt; f2 = p.<span class="built_in">get_future</span>();<span class="comment">//将future对象绑定！！！</span></span><br><span class="line">    <span class="comment">//这个用于另外一个线程，用于获取与该对应绑定的int类型值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//这个将p传入匿名函数创建的线程中，并设置值为9</span></span><br><span class="line">    std::<span class="built_in">thread</span>([&amp;p] &#123; p.<span class="built_in">set_value_at_thread_exit</span>(<span class="number">9</span>); &#125;).<span class="built_in">detach</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Waiting...&quot;</span> &lt;&lt; std::flush;</span><br><span class="line">    <span class="comment">//等待f1和f2两个异步线程执行完</span></span><br><span class="line">    f1.<span class="built_in">wait</span>();</span><br><span class="line">    f2.<span class="built_in">wait</span>();</span><br><span class="line">    <span class="comment">//分别打印每个异步线程返回的结果</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Done!\nResults are: &quot;</span> &lt;&lt; f1.<span class="built_in">get</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; f2.<span class="built_in">get</span>() &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> **std::future与std::promise** <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> T = std::function&lt;<span class="built_in">int</span>(<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&amp;)&gt;;</span><br><span class="line"><span class="comment">//typedef std::function&lt;int(int, int, int&amp;) T;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun1</span><span class="params">(std::promise&lt;<span class="type">int</span>&gt;&amp; p)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;thread fun1 is running...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">seconds</span>(<span class="number">5</span>));</span><br><span class="line">    p.<span class="built_in">set_value</span>(<span class="number">999</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">(std::future&lt;<span class="type">int</span>&gt;&amp; f)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;thread fun2 is running...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;waitting for f.get()&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="comment">//这里会先被执行到，接下来会阻塞在get这里</span></span><br><span class="line">    <span class="comment">//因为fun1在5s过后才会设置值，因此这里会等待！！！</span></span><br><span class="line">    <span class="keyword">auto</span> v = f.<span class="built_in">get</span>();</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;f.get() = &quot;</span> &lt;&lt; v &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::promise&lt;<span class="type">int</span>&gt; p;<span class="comment">//定义一个用来保存int的变量</span></span><br><span class="line">    std::future&lt;<span class="type">int</span>&gt; f = p.<span class="built_in">get_future</span>();<span class="comment">//绑定p和f p.set_value() =&gt; f.get()</span></span><br><span class="line">    </span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(fun1, std::ref(p))</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(fun2, std::ref(f))</span></span>;</span><br><span class="line">    </span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();</span><br><span class="line">    <span class="comment">//主线程等待子线程运行完才继续执行主线程逻辑</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">thread fun1 is running...</span></span><br><span class="line"><span class="comment">thread fun2 is running...</span></span><br><span class="line"><span class="comment">waitting for f.get()</span></span><br><span class="line"><span class="comment">f.get() = 999</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></code></pre><h1 id="IO操作"><a href="#IO操作" class="headerlink" title="IO操作"></a>IO操作</h1><h2 id="面试高频指数：⭐⭐⭐"><a href="#面试高频指数：⭐⭐⭐" class="headerlink" title="面试高频指数：⭐⭐⭐"></a>面试高频指数：⭐⭐⭐</h2><hr><p><code>C++</code>保持与<code>C</code>兼容，因此也保留支持<code>printf</code>和<code>scanf</code>进行输出和输入的方法。<code>C++</code>具有面向对象的特性，引入了新的输入输出。<code>C++</code>通过<code>I/O</code>类库来实现丰富的<code>I/O</code>功能。在<code>C++</code>中，输入和输出以字节序列或更通常称为<code>stream</code>的形式执行。</p><ul><li>输入流（<code>inputstream</code>）：如果字节流的方向是从设备(例如键盘)到主存，那么这个过程称为输入。</li><li>输出流（<code>outputstream</code>）：如果字节流的方向相反，即从主存到设备(显示屏)，那么这个过程称为输出。</li></ul><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/071661515629-ypuTEg-6_1_1.png" alt=""></p><p><code>C++</code>采用了面向对象的思想对所有涉及<code>I/O</code>的操作进行了统一的封装，涉及到<code>I/O</code>操作的主要由<code>&lt;iostream&gt;, &lt;iomanip&gt;, &lt;fstream&gt;</code>三个头文件组成，<code>stream</code>是其行为由类定义的对象，其中主要的类的继承关系如下图所示：</p><p><img src="https://cdn.staticaly.com/gh/Horn-JoJo/pic_bed@main/2023/071661515645-WNnqbw-6_1_2.png" alt=""></p><p><code>C++</code>中的<code>Streams</code>对象主要分为三种类型：</p><ul><li><code>istream</code>：这种类型的流对象只能从流中执行输入操作</li><li><code>ostream</code>：这种对象只能用于输出操作</li><li><code>iostream</code>：可用于输入和输出操作</li></ul><ol><li><p>标准输入输出</p><ul><li>标准输出流(<code>cout</code>)：通常标准输出设备是显示器。<code>C++ cout</code>语句是<code>ostream</code>类的实例。它用于在标准输出设备上产生输出。需要在屏幕上显示的数据使用插入运算符(<code>&lt;&lt;</code>)插入到标准输出流(<code>cout</code>)中。</li><li>标准输入流(<code>cin</code>)：通常计算机中的输入设备是键盘。<code>C++ cin</code>语句是<code>istream</code>类的实例，用于从标准输入设备(通常是键盘)读取输入。提取运算符(<code>&gt;&gt;</code>)与对象<code>cin</code>一起用于读取输入。提取运算符从使用键盘输入的对象<code>cin</code>中提取数据。</li></ul></li><li><p><code>I/O</code>重定向</p><ul><li><p>获取<code>A</code>的流缓冲区并将其存储在某处</p></li><li><p>将<code>A</code>的流缓冲区设置为<code>B</code>的流缓冲区</p></li><li><p>如果需要将<code>A</code>的流缓冲区重置为其先前流缓冲区</p><p>我们可以使用函数<code>ios::rdbuf()</code>来执行一下两个操作</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stream_object.<span class="built_in">rdbuf</span>();<span class="comment">//获取返回指向stream_object的流缓冲区的指针</span></span><br><span class="line">stream_object.<span class="built_in">rdbuf</span>(streambuf *p);<span class="comment">//将流缓冲区设置为p指向的</span></span><br></pre></td></tr></table></figure></li></ul><p>以下为程序示例：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fstream file;</span><br><span class="line">    file.<span class="built_in">open</span>(<span class="string">&quot;cout.txt&quot;</span>, ios::out);</span><br><span class="line">    string line;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存cin和cout的缓冲区buffer</span></span><br><span class="line">    streambuf* stream_buf_cout = cout.<span class="built_in">rdbuf</span>();</span><br><span class="line">    streambuf* stream_buf_cin = cin.<span class="built_in">rdbuf</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取文件file的缓冲区buffer </span></span><br><span class="line">    streambuf* stream_buf_file = file.<span class="built_in">rdbuf</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cout 重定向输出到文件file</span></span><br><span class="line">    cout.<span class="built_in">rdbuf</span>(stream_buf_file);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The cout is redirected to file&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//恢复重定</span></span><br><span class="line">    cout.<span class="built_in">rdbuf</span>(stream_buf_cout);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;hello world!!!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>C/C++</code>如何清除输入缓冲区</p><blockquote><p>所有标准输入和标准输出都包含一个输入和输入缓冲区。在标准<code>C/C++</code>中，流被缓冲，例如在标准输入的情况下，当我们按下键盘上的键时，它不会发送到您的程序，而是由操作系统发送到缓冲区，直到进程调度时才会将其分配该程序(理解输了很多次，过了一段时间后才显示)。</p><p>在各种情况下，可能需要清除不需要的缓冲区，以便在所需的程序中立即获取下一个输入，而不是在前一个变量的缓冲区中。比如<code>C</code>遇到<code>scanf()</code>后，需要输入字符数组或字符，<code>C++</code>遇到<code>cin</code>语句后，需要输入字符数组或字符。当我们从键盘获取一个字符串时，我们需要清除输入缓冲区，否则所需的输入被前一个变量的缓冲区占用。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">char</span> ch[<span class="number">80</span>];</span><br><span class="line">    cin &gt;&gt; a;</span><br><span class="line">    cin.<span class="built_in">getline</span>(ch,<span class="number">80</span>);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码没有正确打印出字符串<code>ch</code>的值，原因是缓冲区被占用。<code>\n</code>字符保留在缓冲区中，并作为下一个输入读取，因此我们在需要在输入<code>ch</code>之前，将缓冲区进行清除。</p><ul><li>使用<code>cin.ignore</code>：</li><li>使用<code>cin.ignore(numeric_limits::max(), &#39;\n&#39;)</code>，在<code>cin</code>语句之后丢弃输入流中的所有内容，包括换行符。</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">char</span> ch[<span class="number">80</span>];</span><br><span class="line">    cin &gt;&gt; a;</span><br><span class="line">    cin.<span class="built_in">ignore</span>(numeric_limits&lt;streamsize&gt;::<span class="built_in">max</span>(), <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    cin.<span class="built_in">getline</span>(ch, <span class="number">80</span>);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>使用<code>cin&gt;&gt;ws</code>：</p><p>在<code>cin</code>语句之后输入<code>cin&gt;&gt;ws</code>告诉编译器忽略缓冲区丢弃字符串或字符数组实际内容之前的所有空格。</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">char</span> ch[<span class="number">80</span>];</span><br><span class="line">    cin &gt;&gt; a;</span><br><span class="line">    cin &gt;&gt; ws;</span><br><span class="line">    cin.<span class="built_in">getline</span>(ch, <span class="number">80</span>);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> 面试突破 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IO与进程同步 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux系统背景&amp;系统架设</title>
      <link href="/2023/08/24/linux/"/>
      <url>/2023/08/24/linux/</url>
      
        <content type="html"><![CDATA[<h1 id="计算机组成"><a href="#计算机组成" class="headerlink" title="计算机组成"></a>计算机组成</h1><h2 id="硬件部分"><a href="#硬件部分" class="headerlink" title="硬件部分"></a>硬件部分</h2><ul><li>CPU(运算器、控制器)</li><li>存储器（内存、硬盘）</li><li>输入设备（键盘、鼠标）</li><li>输出设备（显示器）</li></ul><h2 id="软件部分"><a href="#软件部分" class="headerlink" title="软件部分"></a>软件部分</h2><ul><li>操作系统<ul><li>windows：对硬件要求低。商业软件</li><li>unix：对硬件要求高，商业软件</li><li>linux：对硬件要求低，开源免费<ul><li>开源免费</li><li>系统迭代更新</li><li>系统性能稳定</li><li>安全性高</li><li>多任务多应用</li><li>耗资源少</li><li>内核小</li><li>应用领域广泛</li><li>使用及入门简单</li></ul></li></ul></li><li>软件程序</li><li>数据库系统</li></ul><h1 id="linux发行版"><a href="#linux发行版" class="headerlink" title="linux发行版"></a>linux发行版</h1><ol><li>Red Hat Linux</li><li><strong>CentOS（专为为企业社区开发的， 服务器领域基本用的是centOS）</strong></li><li>Ubuntu（程序员爱用）</li><li>SUSE Linux</li><li>Fodora Linux</li><li>Rocky Linux</li><li>Debian Linux</li><li>Kail Linux(黑客同学爱用)</li></ol><h2 id="linux磁盘分区"><a href="#linux磁盘分区" class="headerlink" title="linux磁盘分区"></a>linux磁盘分区</h2><p>查看磁盘分区 ：<code>fdisk -l</code></p><ul><li>MBR方式引导<br>主分区至少有1个，最多4个，单个分区不能超过2TB</li><li>GPT方式引导<br>主分区没有上限，但是Windows限制为128个</li></ul><h1 id="系统部署"><a href="#系统部署" class="headerlink" title="系统部署"></a>系统部署</h1><blockquote><p>CentOS7 8.x系统安装</p><ul><li>VMware软件安装和部署</li><li>CentOS7 8.x镜像下载</li><li>创建虚拟的计算机硬件平台</li><li>安装linux系统&amp;设置linux分区<ul><li>设置分区：<ul><li>根路径：/ (生产环境给40GB)  </li><li>boot路径：/boot </li><li>data路径： /data </li><li>/swap（很多生产环境中设为0）</li></ul></li></ul></li><li>设置Linux Root 用户密码</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sizeof和strlen的区别</title>
      <link href="/2023/08/23/sizeof%E5%92%8Cstrlen%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2023/08/23/sizeof%E5%92%8Cstrlen%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h2 id="面试高频指数：⭐⭐⭐⭐⭐"><a href="#面试高频指数：⭐⭐⭐⭐⭐" class="headerlink" title="面试高频指数：⭐⭐⭐⭐⭐"></a>面试高频指数：⭐⭐⭐⭐⭐</h2><ul><li><code>strlen</code>是头文件<code>&lt;cstring&gt;</code>中的函数，<code>sizeof</code>是<code>C++</code>中的运算符。<strong><code>strlen</code>测量的是字符串的实际长度</strong>（源代码如下），以<code>\\0</code>结束，而<strong><code>sizeof</code>测量的是对象或者表达式类型占用的字节大小</strong>。<code>strlen</code>源代码如下：</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">strlen</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="type">size_t</span> length = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (*str++) </span><br><span class="line">        ++length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>举例<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> arr[<span class="number">10</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">strlen</span>(arr) &lt;&lt; endl;<span class="comment">//5字节</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;<span class="comment">//10字节</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>若字符数组arr作为参数的形参，<code>sizeof(arr)</code> 中 ·arr·被当作字符指针来处理。<code>strlen(str)</code> 中<code>arr</code>依然是字符数组，从下述程序的运行结果中就可以看出。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">size_of</span><span class="params">(<span class="type">char</span> arr[])</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;<span class="comment">// warning: &#x27;sizeof&#x27; on array function parameter &#x27;arr&#x27;will return size of &#x27;char*&#x27; .</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">strlen</span>(arr) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> arr[<span class="number">20</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="built_in">size_of</span>(arr);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><ul><li>两者的不同之处<ul><li><code>strlen</code>本身是库函数，因此在程序运行过程中，计算长度；而<code>sizeof</code>是在编译时计算长度；<code>sizeof</code>的参数可以是类型，也可以是变量，且必须是完整类型；<code>strlen</code>的参数必须是<code>char *</code>类型的变量。</li><li><code>sizeof</code>接受的参数可以是对象也可以是表达式，但是<strong><code>sizeof(expression)</code>在运行时不会对接受的表达式进行计算，编译器只会推导表达式的类型从而计算占用的字节大小</strong>；而<strong><code>strlen</code>是一个函数，如果接受表达式则会对表达式进行运算。</strong></li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span> (++x) &lt;&lt; endl;<span class="comment">//不会对表达式进行计算！！！！ 4</span></span><br><span class="line">    cout &lt;&lt; x &lt;&lt; endl; <span class="comment">//5</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">char</span> *s = <span class="string">&quot;12345678&quot;</span>;</span><br><span class="line">    <span class="type">char</span> *p = s;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">strlen</span>(++p) &lt;&lt; endl;<span class="comment">//7</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, p);<span class="comment">//&quot;2345678&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>对于<code>C99</code>中结构体允许最后一个变量为不定长数组，<code>sizeof</code>则不计算空间。</strong></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">flexarray</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">int</span> array[]; <span class="comment">/* Flexible array member; must be last element of struct */</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%ld&#x27;\n&quot;</span>, <span class="built_in">sizeof</span> (<span class="keyword">struct</span> flexarray));<span class="comment">// 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>总结</strong>：<br>1.sizeof是c++自带的运算符，strlen()是<cstring>库里的函数<br>2.sizeof在编辑阶段计算长度，strlen()在程序执行阶段计算长度<br>3.sizeof可以接收的参数可以是数据类型（int,long,char<em> 指针等）和表达式，不会计算表达式的值,结果是表达式数据类型的占位长度。strlen()参数是char</em>类型变量，会把表达式计算出来。<br>4.strlen()不会计算’\0’,sizeof会计算。</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> 面试突破 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 关键字和关键库函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux高并发服务器开发</title>
      <link href="/2023/08/19/linux%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91/"/>
      <url>/2023/08/19/linux%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<blockquote><ol><li>进程间通信的方式？</li><li>僵尸进程、孤儿进程</li><li>线程同步怎么解决？</li><li>大端和小端的区别？</li><li>IO多路复用有哪些方式？区别？</li><li>静态库跟共享库的制作以及使用</li><li>滑动窗口的机制</li><li>TCP三次握手、四次挥手</li><li>TCP和UDP的区别</li></ol></blockquote><h1 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h1><hr><div class="markmap-container" style="height:undefined">  <svg data="{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:1,&quot;p&quot;:{&quot;lines&quot;:[0,1]},&quot;v&quot;:&quot;linux高并发服务器开发&quot;,&quot;c&quot;:[{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[1,2]},&quot;v&quot;:&quot;第一章 linux系统编程入门&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[2,3]},&quot;v&quot;:&quot;第二章 linux多进程开发&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[3,4]},&quot;v&quot;:&quot;第三章 linux多线程开发&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[4,5]},&quot;v&quot;:&quot;第四章 linux网络编程&quot;},{&quot;t&quot;:&quot;heading&quot;,&quot;d&quot;:2,&quot;p&quot;:{&quot;lines&quot;:[5,6]},&quot;v&quot;:&quot;第五章 项目实战和总结&quot;}]}"></svg></div><h1 id="linux环境开发搭建"><a href="#linux环境开发搭建" class="headerlink" title="linux环境开发搭建"></a>linux环境开发搭建</h1><h2 id="linux环境开发搭建-1"><a href="#linux环境开发搭建-1" class="headerlink" title="linux环境开发搭建"></a>linux环境开发搭建</h2><ol><li>安装linux系统</li><li>安装xshell、xftp</li><li>安装Visual Studio Code</li></ol><ul><li>生成ssh密钥：<code>ssh-keygen -t rsa</code></li><li>添加授权密钥：<code>vim anthorized_keys</code> 然后添加对应的授权的公钥</li></ul><h2 id="GCC"><a href="#GCC" class="headerlink" title="GCC"></a>GCC</h2><ul><li>代码编译过程<br><img src="https://article.biliimg.com/bfs/article/4c504497fac5ba6a6828b7957373906c838d3a67.png" alt="image-20230821191355193"></li></ul><h3 id="预处理"><a href="#预处理" class="headerlink" title="预处理"></a>预处理</h3><p><code>gcc main.c -E -o -main.i</code> ：宏替换以及展开头文件</p><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p><code>gcc main.i -S  -o main.s</code>：编译成汇编代码</p><h3 id="汇编"><a href="#汇编" class="headerlink" title="汇编"></a>汇编</h3><p><code>gcc main.s -c main.o</code>： 将汇编代码编译成二进制目标文件, 不能执行，因为可能还需要启动代码、库代码、以及其他目标代码通过链接器然后最终链接成可执行程序。</p><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p><code>gcc main.o -o main</code> ： 将二进制代码与所需要的库文件合并，生成最终的可执行代码。</p><p><strong>注意：汇编和链接可以通过<code>-s</code>直接来合并汇编和链接阶段。 </strong></p><h3 id="gcc-与-g-的区别"><a href="#gcc-与-g-的区别" class="headerlink" title="gcc 与 g++的区别"></a>gcc 与 g++的区别</h3><blockquote><p>gcc 和 g++ 都是GNU的编译器</p><ul><li><strong>误区1</strong>:  gcc 只能编译c代码，g++只能编译g++代码。(这是错误的说法！！！)<ul><li>后缀为c的文件，gcc当作c程序，g++当作c++程序</li><li>后缀为cpp的文件，两者都会当成c++程序</li><li>编译阶段，g++会调用gcc。对于c++代码，两者是等价的，但是gcc不能自动和c++程序使用的库链接，所以通常使用g++来完成编译链接。<strong>这给了一个错误，cpp程序只能由g++编译链接。</strong></li></ul></li></ul></blockquote><ul><li><p><strong>误区二</strong>：gcc不会定义_cplusplus 宏，而g++会(这是错误的！！！)</p><ul><li>实际上，这个宏是告诉编译器要将其编译成c语法还是cpp语法</li><li>如上所述，如果后续后缀为c，并且采用gcc编译，则该宏是未定义的，否则<strong>如果是cpp程序，则使用gcc编译的时候，会定义这样的宏！！！</strong>(编译汇编阶段！！！)</li></ul></li><li><p><strong>误区三</strong>：编译只能用gcc, 链接只能用g++（这是错误的！！！）</p><ul><li>应该这样说会更好：编译可以用g++/gcc，而链接可以用g++ 或者gcc -lstd++（<strong>手动链接stdc++库</strong>）</li><li>gcc 命令不能自动和c++程序使用的库链接，所以通常使用g++来完成链接。<strong>但在编译汇编阶段，g++会自动调用gcc,两者等价</strong></li></ul></li></ul><h3 id="常见参数选项"><a href="#常见参数选项" class="headerlink" title="常见参数选项"></a>常见参数选项</h3><ol><li>-E：预处理</li><li>-S:：编译</li><li>-c：汇编</li><li>-s：汇编链接</li><li>-o：重命名或者链接</li><li>-g：调试</li><li>-w：不显示警告信息</li><li>-Wall：生成所有警告信息</li><li>-On：n可以取0~3, 编译的优化级别从低到高，-O0表示没有优化，-O1时缺省值，-O3优化级别最高（优化可以提高逆向工程难度）</li><li>-D：程序编译的时候，指定一个宏, (这个宏是在程序中定义的：<code>#ifdef DEBUG #endif</code>)</li><li>-I：指定包含头文件目录</li><li>-L 指定包含的库文件路径</li><li>-l+库名：链接阶段链接该库文件</li><li>-fPIC/fpic：生成与位置无关的代码</li><li>-shared：生成目标共享文件，通常用在建立共享库时</li><li>-std：指定c方言：如：-std=c99，gcc默认的方言是GNU C</li></ol><h2 id="静态库的制作和使用"><a href="#静态库的制作和使用" class="headerlink" title="静态库的制作和使用"></a>静态库的制作和使用</h2><h2 id="动态库的制作和使用"><a href="#动态库的制作和使用" class="headerlink" title="动态库的制作和使用"></a>动态库的制作和使用</h2><h2 id="静态库和动态库的对比"><a href="#静态库和动态库的对比" class="headerlink" title="静态库和动态库的对比"></a>静态库和动态库的对比</h2><h2 id="makefile"><a href="#makefile" class="headerlink" title="makefile"></a>makefile</h2><h2 id="GDB调试"><a href="#GDB调试" class="headerlink" title="GDB调试"></a>GDB调试</h2>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 高并发服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计模式</title>
      <link href="/2023/08/19/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/08/19/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="单例模式及实现"><a href="#单例模式及实现" class="headerlink" title="单例模式及实现"></a>单例模式及实现</h1><h2 id="面试指数：⭐⭐⭐⭐⭐"><a href="#面试指数：⭐⭐⭐⭐⭐" class="headerlink" title="面试指数：⭐⭐⭐⭐⭐"></a>面试指数：⭐⭐⭐⭐⭐</h2><p><strong>单例模式</strong>：保证类的实例化对象仅有一个，并且提供一个他的全局访问点。<br><strong>应用场景</strong>：</p><ul><li>表示文件系统的类，一个操作系统一定是只有一个文件系统的，因此文件系统的类的实例只有一个。</li><li>打印机打印程序的实例，一台计算机可以连接好几台打印机，但是计算机的打印程序只有一个，就可以通过单例模式来避免两个打印作业同时输出到打印机。<br><strong>实现方式</strong>：<br>单例模式可以通过全局或者静态变量的形式实现，这样比较简单，但是这样会影响封装性，难以保证别的代码不会对全局变量造成影响。</li><li><strong>默认的构造函数、拷贝构造函数、赋值构造函数声明为私有的</strong>，这样禁止在类的外部创建该对象；</li><li>全局访问点也要定义或<strong>静态类型的成员函数</strong>, 没有参数，返回该类的指针类型。因为使用实例化对象的时候是通过类直接调用该函数，并不是先创建一个该类的对象，通过对象调用。</li></ul><p>不安全的实现方式：<br>原因：考虑两个线程同时调用<code>getInstance</code>方法，并且同时检测到<code>instance</code>是<code>NULL</code>, 两个线程会同时实例化对象，不符合单例模式的要求。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> Singleton * instance;</span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line">    Singleton&amp; opterator=(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> Singleton * <span class="built_in">getInstance</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><br>分类：</p><ul><li>懒汉模式：直到第一次用到类的实例时才去实例化，上面是懒汉实现。</li><li>饿汉模式：类定义的时候就实例化。</li></ul><p>线程安全的懒汉模式实现：<br>方法：<code>加锁</code><br>存在的问题：每次判断实例对象是否为空，都要被锁定，如果是多线程的话，就会造成大量线程被阻塞。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>  <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">pthread_mutex_t</span> mutex;</span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;</span><br><span class="line">        <span class="built_in">pthread_mutex_init</span>(&amp;mutex, <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line">    Singleton&amp; opterator=(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* <span class="built_in">getInstance</span>() &#123;</span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;mutex);</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;mutex);</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::intance = <span class="literal">NULL</span>;</span><br><span class="line"><span class="type">pthread_mutex_t</span> Singleton::mutex;</span><br></pre></td></tr></table></figure><br>方法：<strong>内部静态变量</strong>，在全局访问点<code>getInstance</code>中定义静态实例。<br><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">pthread_mutex_t</span> mutex;</span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;</span><br><span class="line">        <span class="built_in">pthread_mutex_init</span>(&amp;mutex, <span class="literal">NULL</span>);<span class="comment">//其实这里没有用到</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp; tmp);</span><br><span class="line">    Singleton&amp; opterator=(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* <span class="built_in">getInstance</span>() &#123;</span><br><span class="line">        <span class="type">static</span> Singleton instance;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">pthread_mutex_t</span> Singleton::mutex;</span><br></pre></td></tr></table></figure><br>饿汉模式的实现：<br>饿汉模式本身就是线程安全的不用加锁。<br><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* instance;</span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton&amp; tmp) &#123;&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="built_in">Singleton</span>() &#123;&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* <span class="built_in">getInstance</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br></pre></td></tr></table></figure><br><strong>总结</strong>：</p><ul><li>单例模式就是只能有一个实例，并且通过全局的或者静态的方式实现(如类中的静态类)</li><li>单例模式分为懒汉模式(只有用的时候才去创建)和饿汉模式（不管用不用直接创建）<ul><li>懒汉模式本身不安全，需要加锁，但是也会存在一些问题</li><li>饿汉模式本身是安全的，直接一开始就在类外创建类中的静态类实例。</li></ul></li></ul><h1 id="工厂模式以及实现"><a href="#工厂模式以及实现" class="headerlink" title="工厂模式以及实现"></a>工厂模式以及实现</h1><h2 id="面试指数：⭐⭐⭐⭐"><a href="#面试指数：⭐⭐⭐⭐" class="headerlink" title="面试指数：⭐⭐⭐⭐"></a>面试指数：⭐⭐⭐⭐</h2><p><strong>工厂模式</strong>：包括简单工厂模式、抽象工厂模式、工厂方法模式。<br><strong>简单工厂模式</strong>：主要用于创建对象，用一个工厂来根据输入的条件产生不同的类，然后根据不同类的虚函数得到不同的效果。<br><strong>工厂方法模式</strong>：修正了简单工厂模式中不遵守开放封闭原则。把选择判断移到了客户端去实现，如果想添加新功能就不用修改原来的类，直接修改客户端即可。<br><strong>抽象工厂模式</strong>：定义了一个创建一系列相关或相互依赖的接口，而无需指定他们的具体类。</p><h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h2><ul><li>主要用于创建对象。用一个工厂来根据输入的条件产生不同的类， 然后根据不同类的虚函数得到不同的结果。</li><li><p><strong>应用场景</strong>：<br>  适用于针对不同情况创建不同类时，只需传入工厂类的参数即可，无需了解具体实现方法。例如：计算器中对于同样的输入，执行不同的操作，如加减乘除。<br>  <img src="https://pic.leetcode-cn.com/1661310698-GtQGFs-7_3_1.png" alt="如图所示"></p></li><li><p><strong>实现方式</strong>：</p>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"> <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Here is the product class</span></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Operation</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="type">int</span> val1, val2;</span><br><span class="line">     <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="type">double</span> res = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">return</span> res;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Add_Operation</span> : <span class="keyword">public</span> Operation &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> val1 + val2;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Sub_Operation</span> : <span class="keyword">public</span> Operation &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> val1 - val2;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Mul_Operation</span> : <span class="keyword">public</span> Operation &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> val1 * val2;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Div_Operation</span> : <span class="keyword">public</span> Operation &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> val1 / val2;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here is the Factory class</span></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="function"><span class="type">static</span> Operation* <span class="title">CreateProduct</span><span class="params">(<span class="type">char</span> op)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">switch</span>(op) &#123;</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">ADD_Opeartion</span>();</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Sub_Opeartion</span>();</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Mul_Opeartion</span>();</span><br><span class="line">         <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Div_Opeartion</span>();</span><br><span class="line"></span><br><span class="line">         <span class="keyword">default</span>:</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">ADD_Opeartion</span>();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="type">int</span> a, b;</span><br><span class="line">     cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">     Operation *p = Factory::<span class="built_in">CreateProduct</span>(<span class="string">&#x27;+);</span></span><br><span class="line"><span class="string">     p-&gt;val1 = a;</span></span><br><span class="line"><span class="string">     p-&gt;val2 = b;</span></span><br><span class="line"><span class="string">     cout &lt;&lt; p-&gt;GetResult() &lt;&lt; endl;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">     p = Factory::CreateProduct(&#x27;</span>-);</span><br><span class="line">     p-&gt;val1 = a;</span><br><span class="line">     p-&gt;val2 = b;</span><br><span class="line">     cout &lt;&lt; p-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">     p = Factory::<span class="built_in">CreateProduct</span>(<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">     p-&gt;val1 = a;</span><br><span class="line">     p-&gt;val2 = b;</span><br><span class="line">     cout &lt;&lt; p-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">     p = Factory::<span class="built_in">CreateProduct</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">     p-&gt;val1 = a;</span><br><span class="line">     p-&gt;val2 = b;</span><br><span class="line">     cout &lt;&lt; p-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><blockquote><p>修正了简单工厂模式中不遵守开放封闭原则。把选择判断移动到了客户端去实现，如果想添加新功能就不用修改原来的类，直接修改客户端即可。</p></blockquote></li><li><p><strong>应用场景</strong>：</p><ul><li>一个类不知道他所需要的对象的类：在工厂方法模式中，客户端不需要知道具体产品类的类名，只需要知道所对应的工厂即可，具体的产品对象由具体工厂类创建；客户端知道创建具体产品的工厂类。</li><li>一个类通过其派生类来指定创建哪个对象：在工厂方法模式中，对于抽象工厂类只需要提供一个创建产品的接口，而由其派生类来确定具体要创建的对象，利用面向对象的多态性和里式代换规则，在程序运行时，派生类对象将覆盖父类对象，从而使得系统更容易扩展。</li><li>将创建对象的任务委托给工厂派生类中的某一个，客户端在使用时可以无须关心是哪一个工厂派生类创建产品派生类，需要时再动态绑定，可将具体工厂类的类名存储在配置文件中或数据库中。<br><img src="https://pic.leetcode-cn.com/1661310755-vFtGMk-7_3_2.png" alt="pic"></li><li><p>实现方式</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Here is the product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Operation</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> val1, val2;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">double</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add_Operation</span>: <span class="keyword">public</span> Operation &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 + val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub_Operation</span>: <span class="keyword">public</span> Operation &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 - val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mul_Operation</span>: <span class="keyword">public</span> Operation &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 * val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Div_Operation</span>: <span class="keyword">public</span> Operation &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 / val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//虚基类：工厂类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation* <span class="title">CreateProduct</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation* <span class="title">CreateProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Add_Operation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation* <span class="title">CreateProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Sub_Operation;      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mul_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation* <span class="title">CreateProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Mul_Operation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Div_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation* <span class="title">CreateProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Div_Operation</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    Add_Factory *p_fac = <span class="keyword">new</span> <span class="built_in">Add_Factory</span>();</span><br><span class="line">    Operation* p_pro = p_fac-&gt;<span class="built_in">CreateProduct</span>();</span><br><span class="line">    p_pro-&gt;val1 = a;</span><br><span class="line">    p_pro-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Mul_Factory *p_fac1 = <span class="keyword">new</span> <span class="built_in">Mul_Factory</span>();</span><br><span class="line">    Operation* p_pro1 = p_fac1-&gt;<span class="built_in">CreateProduct</span>();</span><br><span class="line">    p_pro1-&gt;val1 = a;</span><br><span class="line">    p_pro1-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro1-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Sub_Factory *p_fac2 = <span class="keyword">new</span> <span class="built_in">Sub_Factory</span>();</span><br><span class="line">    Operation* p_pro2 = p_fac2-&gt;<span class="built_in">CreateProduct</span>();</span><br><span class="line">    p_pro2-&gt;val1 = a;</span><br><span class="line">    p_pro2-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro2-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    Div_Factory *p_fac3 = <span class="keyword">new</span> <span class="built_in">Div_Factory</span>();</span><br><span class="line">    Operation* p_pro3 = p_fac3-&gt;<span class="built_in">CreateProduct</span>();</span><br><span class="line">    p_pro3-&gt;val1 = a;</span><br><span class="line">    p_pro3-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro3-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h2><blockquote><p>定义了一个创建一系列相关或相互依赖的接口，而无需指定他们的具体类。</p></blockquote></li></ul></li><li><p>应用场景：</p><ul><li>一个系统不应当依赖于产品类实例如何被创建、组合和表达的细节，这对于所有类型的工厂模式都是重要的。</li><li>系统中有多于一个的产品族，而每次只使用其中某一产品族。</li><li>属于同一个产品族的产品将在一起使用，这一约束必须在系统的设计中体现出来。</li><li>产品等级结构稳定，设计完成之后，不会像系统中增加新的产品等级结构或者删除已有的产品等级结构。<br><img src="https://pic.leetcode-cn.com/1661310791-KLoZet-7_3_3.png" alt="pic"></li></ul></li><li><p>实现方式：</p>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Here is the product class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Operation_Pos</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> val1, val2;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">double</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add_Operation_Pos</span>: <span class="keyword">public</span> Operation_Pos &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 + val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub_Operation_Pos</span>: <span class="keyword">public</span> Operation_Pos &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 - val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mul_Operation_Pos</span>: <span class="keyword">public</span> Operation_Pos &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 * val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Div_Operation_Pos</span>: <span class="keyword">public</span> Operation_Pos &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span> * val1 / val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*=====================================================*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Operation_Neg</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> val1, val2;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">double</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add_Operation_Neg</span>: <span class="keyword">public</span> Operation_Neg &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -(val1 + val2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub_Operation_Neg</span>: <span class="keyword">public</span> Operation_Neg &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -(val1 - val2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mul_Operation_Neg</span>: <span class="keyword">public</span> Operation_Neg &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -(val1 * val2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Div_Operation_Neg</span>: <span class="keyword">public</span> Operation_Neg &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">GetResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -(<span class="number">1.0</span> * val1 / val2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Here is factory class: 虚基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation_Pos* <span class="title">CreateProduct_Pos</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> Operation_Neg* <span class="title">CreateProduct_Neg</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Add_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Operation_Pos* <span class="title">CreateProduct_Pos</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Add_Operation_Pos</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Operation_Neg* <span class="title">CreateProduct_Neg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Add_Operation_Neg</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Operation_Pos* <span class="title">CreateProduct_Pos</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Sub_Operation_Pos</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Operation_Neg* <span class="title">CreateProduct_Neg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Sub_Operation_Neg</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mut_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Operation_Pos* <span class="title">CreateProduct_Pos</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Mul_Operation_Pos</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Operation_Neg* <span class="title">CreateProduct_Neg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Mul_Operation_Neg</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Div_Factory</span>: <span class="keyword">public</span> Factory &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Operation_Pos* <span class="title">CreateProduct_Pos</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Div_Operation_Pos</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Operation_Neg* <span class="title">CreateProduct_Neg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Div_Operation_Neg</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    </span><br><span class="line">    Add_Factory* p_fac = <span class="keyword">new</span> <span class="built_in">Add_Factory</span>();</span><br><span class="line">    Operation_Pos* p_pro = p_fac-&gt;<span class="built_in">CreateProduct_Pos</span>();</span><br><span class="line">    p_pro-&gt;val1 = a;</span><br><span class="line">    p_pro-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;<span class="comment">//8</span></span><br><span class="line"></span><br><span class="line">    Div_Factory* p_fac1 = <span class="keyword">new</span> <span class="built_in">Div_Factory</span>();</span><br><span class="line">    Operation_Neg* p_pro1 = p_fac1-&gt;<span class="built_in">CreateProduct_Neg</span>();</span><br><span class="line">    p_pro1-&gt;val1 = a;</span><br><span class="line">    p_pro1-&gt;val2 = b;</span><br><span class="line">    cout &lt;&lt; p_pro1-&gt;<span class="built_in">GetResult</span>() &lt;&lt; endl;<span class="comment">//-(3 / 5) = -0.6</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>总结</strong>：</p></li><li>简单工厂模式：一个工厂负责所有的产品创建，要创建某个产品时，需要明确告诉工厂要创建哪个具体产品，然后工厂再去创建，当需要新增产品时，<strong>需要去修改工厂类对应的源代码</strong>。</li><li>工厂方法模式：一个工厂只负责创建一个具体的产品，要创建某个产品时，只要找到对应的工厂即可，用该工厂创建。<strong>当需要新产品时，无需修改工厂源代码，而是新增对应的具体工厂即可</strong>。</li><li>抽象工厂模式：在简单工厂模式和工厂方法模式中，一个工厂族只能创建一类产品；<strong>当要新增产品类时，则需要新增工厂族。在抽象工厂中，一个工厂族能创建多个产品类。当要新增产品类时，只需新增对应的产品方法即可</strong>。(相对于工厂方法模式：这里相当于扩展了每个工厂能过创建多个类似的产品。)</li></ul><h1 id="观察者模式以及实现"><a href="#观察者模式以及实现" class="headerlink" title="观察者模式以及实现"></a>观察者模式以及实现</h1><h2 id="面试指数：⭐⭐⭐"><a href="#面试指数：⭐⭐⭐" class="headerlink" title="面试指数：⭐⭐⭐"></a>面试指数：⭐⭐⭐</h2><p><strong>观察者模式</strong>：定义一种一（被观察者）对多（观察者）的关系，让多个观察对象同时监听一个被观察对象，被观察对象发生状态变化时，会通知所有的观察对象，使他们能够更新自己的状态。<br>观察者模式中存在两种角色：</p><ul><li><strong>观察者</strong>：内部会包含被观察者对象，当被观察者对象的状态发生变化时，更新自己的状态。（接收通知更新状态）</li><li><strong>被观察者</strong>：内部包含了所有观察者对象，当状态发生变化时通知所有的观察者更新自己的状态。（发送通知）</li><li><strong>应用场景</strong>：<ul><li>当一个对象的改变需要同时改变其他对象，且不知道有多少对象有待改变时，应该考虑使用观察者模式；</li><li>一个抽象模型有两个方面，其中一方面依赖于另一方面，这时可以用观察者模式将这两者封装在独立的对象中使它们各自独立的改变和复用。</li></ul></li><li><strong>实现方式</strong>：</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span>;<span class="comment">//类的声明！！！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//观察者基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    string name;<span class="comment">//观察者的名字</span></span><br><span class="line">    Subject* sub;<span class="comment">//被观察者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//构造函数：初始化 姓名和被观察者对象</span></span><br><span class="line">    <span class="built_in">Observer</span>(string name, Subject* sub) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;name = name;</span><br><span class="line">        <span class="keyword">this</span>-&gt;sub = sub;<span class="comment">//构造函数来实例化sub</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> </span>= <span class="number">0</span>;<span class="comment">//虚函数，留给子类实现</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类：股票观察者（摸鱼）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StockObserver</span>: <span class="keyword">public</span> Observer &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//子类构造方法继承父类的实现逻辑</span></span><br><span class="line">    <span class="built_in">StockObserver</span>(string name, Subject* sub) : <span class="built_in">Observer</span>(name, sub) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">()</span></span>;<span class="comment">//放到类外实现</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类：NBA观察者(摸鱼)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NBAObserver</span>: <span class="keyword">public</span> Observer &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">NBAObserver</span>(string name, Subject* sub) : <span class="built_in">Observer</span>(name, sub) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">()</span></span>;<span class="comment">//放到类外实现</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//被观察者基类 （内部存了所有的观察者对象，以便状态发生变化时，给观察者发通知）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    list&lt;Observer*&gt; observers;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string action;<span class="comment">//被观察者对象的动作状态</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">attach</span><span class="params">(Observer*)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">detach</span><span class="params">(Observer*)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">notify</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//被观察者子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Secretary</span>: <span class="keyword">public</span> Subject &#123;</span><br><span class="line">    <span class="comment">//添加观察者</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">attach</span><span class="params">(Observer* observer)</span> </span>&#123;</span><br><span class="line">        observers.<span class="built_in">push_back</span>(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//删除观察者</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">detach</span><span class="params">(Observer* observer)</span> </span>&#123;</span><br><span class="line">        list&lt;Observer*&gt;::iterator iter = observers.<span class="built_in">begin</span>();</span><br><span class="line">        <span class="keyword">while</span> (iter != observers.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*iter) == observer) &#123;</span><br><span class="line">                observers.<span class="built_in">erase</span>(iter);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++iter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//被观察者通知观察者：调用观察者的方法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">notify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        list&lt;Observer*&gt;::iterator iter = observers.<span class="built_in">begin</span>();</span><br><span class="line">        <span class="keyword">while</span> (iter != observers.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            (*iter)-&gt;<span class="built_in">update</span>();</span><br><span class="line">            ++iter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">StockObserver::update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; <span class="string">&quot;收到消息 &quot;</span> &lt;&lt; sub-&gt;action &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">if</span> (sub-&gt;action == <span class="string">&quot;梁所长来了!&quot;</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;我马上关闭股票，装作很认真的样子!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">NBAObserver::update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; name &lt;&lt; <span class="string">&quot;收到消息 &quot;</span> &lt;&lt; sub-&gt;action &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">if</span> (sub-&gt;action == <span class="string">&quot;梁所长来了!&quot;</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;我马上关闭NBA，装作很认真的样子!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Subject* dwq = <span class="keyword">new</span> <span class="built_in">Secretary</span>();<span class="comment">//实例化了一个被观察者所长</span></span><br><span class="line">    Observer* xs = <span class="keyword">new</span> <span class="built_in">NBAObserver</span>(<span class="string">&quot;xiaoshuai&quot;</span>, dwq);<span class="comment">//实例化了一个观察者，并且添加了对应的被观察对象</span></span><br><span class="line">    Observer* zy = <span class="keyword">new</span> <span class="built_in">NBAObserver</span>(<span class="string">&quot;zouyue&quot;</span>, dwq);<span class="comment">//同上</span></span><br><span class="line">    Observer* lm = <span class="keyword">new</span> <span class="built_in">StockObserver</span>(<span class="string">&quot;limin&quot;</span>, dwq);<span class="comment">//同上</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//所长添加</span></span><br><span class="line">    dwq-&gt;<span class="built_in">attach</span>(xs);</span><br><span class="line">    dwq-&gt;<span class="built_in">attach</span>(zy);</span><br><span class="line">    dwq-&gt;<span class="built_in">attach</span>(lm);</span><br><span class="line"></span><br><span class="line">    dwq-&gt;action = <span class="string">&quot;去吃饭了!&quot;</span>;</span><br><span class="line">    dwq-&gt;<span class="built_in">notify</span>();</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    dwq-&gt;action = <span class="string">&quot;梁所长来了!&quot;</span>;</span><br><span class="line">    dwq-&gt;<span class="built_in">notify</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="常见设计模式"><a href="#常见设计模式" class="headerlink" title="常见设计模式"></a>常见设计模式</h1><h2 id="面试指数：⭐⭐⭐-1"><a href="#面试指数：⭐⭐⭐-1" class="headerlink" title="面试指数：⭐⭐⭐"></a>面试指数：⭐⭐⭐</h2><p>《大话设计模式》一书中提到<code>24</code>种设计模式，这24种设计模式没必要面面俱到，但一定要深入了解其中的几种，最好结合自己在实际开发中的例子进行深入的了解。</p><p>设计模式有<code>6</code>大设计原则：</p><ol><li>单一职责原则：就一个类而言，应该仅有一个引起它变化的原因。</li><li>开放封闭原则：软件实体可以扩展，但是不可修改。及面对需求，对程序的改动可以通过增加代码来完成，但是不能改动现有的代码。</li><li>里氏代换原则：一个软件实体如果使用的是一个基类，那么一定适用于派生类。即在软件中，把基类替换成派生类，程序的行为没有变化。</li><li>依赖倒转原则：抽象不应该依赖细节，细节应该依赖抽象。即针对接口编程，不要针对实现编程。</li><li>迪米特原则：如果两个类不直接通信，那么这两个类就不应当发生直接的相互作用。如果一个类需要调用另外一个类的某个方法的话，可以通过第三个类来转发这个调用。</li><li>接口隔离原则：每个接口中不存在派生类用不到却必须实现的方法，如果不然，就要将接口拆分，使用多个隔离的接口。</li></ol><p>设计模式分为三类：</p><ol><li>创造型模式：单例模式、工厂模式、建造者模式、原型模式</li><li>结构型模式：适配器模式、桥接模式、外观模式、组合模式、装饰模式、享元模式、代理模式</li><li>行为型模式： 责任链模式、命令模式、解释器模式、迭代器模式、中介者模式、备忘录模式、观察者模式、状态模式、策略模式、模板方法模式、访问者模式。</li></ol><p>以下是常见的几种设计模式：</p><ol><li>单例模式：保证一个类只有一个实例，并提供一个访问它的全局访问点</li><li>工厂模式：包括简单工厂模式、抽象工厂模式、工厂方法模式。<ul><li>简单工厂模式：主要用于创建对象。用一个工厂来根据输入的条件产生不同的类，然后根据不同类的虚函数得到不同的结果。</li><li>工厂方法模式： 修正了简单工厂模式中不遵守开放封闭原则。把选择判断移动到了客户端实现，如果想添加新功能就不用修改原来的类，直接修改客户端即可。</li><li>抽象工厂模式：定义了一个创建一系列相关或相互依赖的接口，而无需指定他们的具体类。</li></ul></li><li>观察者模式：定义了一种一对多的关系，让多个观察对象同时监听一个主题对象，主体对象发生变化时，会通知所有的观察者，使他们能够更新自己。</li><li>装饰模式：动态的给一个对象添加一个额外的职责，就增加功能来说，装饰模式比生成派生类更灵活。</li></ol>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
          <category> 面试突破 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成长日记</title>
      <link href="/2023/08/16/%E7%9B%AE%E6%A0%87%E6%B8%85%E5%8D%95/"/>
      <url>/2023/08/16/%E7%9B%AE%E6%A0%87%E6%B8%85%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<div class="note primary simple"><ul><li><div class='checkbox green'><input type="checkbox" />          <p>拥有健康的身体</p>          </div></li><li><div class='checkbox green'><input type="checkbox" />          <p>基础算法学习</p>          </div></li><li><div class='checkbox green'><input type="checkbox" />          <p>剑指offer3刷</p>          </div></li><li><div class='checkbox green'><input type="checkbox" />          <p>牛客项目</p>          </div></li><li><div class='checkbox green'><input type="checkbox" />          <p>过年前看完电影50部</p>          </div></li><li><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>          <p>leetcode竞赛分达到1500+</p>          </div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/Horn-JoJo/pic_bed@main/2023/07image-20231107224347319.png"/></div></div></li><li><div class='checkbox yellow'><input type="checkbox" />          <p>leetcode竞赛分达到1600+</p>          </div></li></ul></div> <div class="timeline  red"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11月：每个人都是孤独的! 所以要心怀感恩</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-29 第一周总结与规划</p></div></div><div class='timeline-item-content'><ul><li>算法：小有成就，终于上1500了。继续加油，跟紧灵神，稳上大分！！！先刷基础算法精讲。</li><li>项目：还没能有一个熟练的项目，后续加把劲！！！这个要重视起来</li><li>剑指offer+面试突破再刷！！！</li><li>开启实践！！！每周至少一面。</li></ul></div></div></div><div class="timeline green"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>要学会接收不同的意见</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-29 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>周赛307Q1Q2+春招题目n题</li><li>剑指offer三刷  螺旋矩阵</li></ul></li><li>健康</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-28 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>79双周赛Q3学习</li><li>剑指offer三刷  队列的最大值</li></ul></li><li>健康<ul><li>坚持keep的第61天</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-27 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>二分学习</li><li>剑指offer三刷 滑动窗口最大值</li></ul></li><li>健康<ul><li>坚持keep的第60天</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-26 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>二分学习</li><li>剑指offer三刷 优化最小栈</li></ul></li><li>健康<ul><li>坚持keep的第59天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-25 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>剑指offer三刷, 完成栈与队列2题</li></ul></li><li>健康<ul><li>坚持keep的第58天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>练字10min</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-24 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>剑指offer三刷, 完结双指针专题</li><li>周赛上分了！！！</li></ul></li><li>健康</li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-22 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>acwing学习了floyd算法+复习快排和归并排序+学习css</li><li>面试突破学习到volatile</li><li>剑指offer三刷到<code>复杂链表的复制</code></li></ul></li><li>健康<ul><li>坚持keep的第57天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>练字10min</li></ul></li><li>娱乐<ul><li>咒术回战2p</li></ul></li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-21 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>学习筛质数</li><li>338周赛Q1Q2Q4学习</li><li>面试突破学习const关键字</li></ul></li><li>健康</li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>练字10min</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-20 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题</li><li>牛客知识库打卡</li></ul></li><li>健康</li></ol><ul><li>keep的第56天</li></ul><ol><li>社交</li><li>认知<ul><li>电影：心灵捕手</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-19 学习</p></div></div><div class='timeline-item-content'><ol><li><p>学习</p><ul><li>完成每日一题+学习树形dp</li><li>牛客知识库打卡</li><li>牛客项目-gdb学习</li><li>复习和学习图论spfa算法</li></ul></li><li><p>健康</p></li></ol><ul><li>keep的第55天</li></ul><ol><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>更新日记</li><li>早起洗漱</li><li>练字10min</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-18 学习</p></div></div><div class='timeline-item-content'><ol><li>学习<ul><li>完成每日一题+学习树形dp</li><li>牛客知识库打卡</li><li>复习图论djkstra,bellman_ford,spfa算法</li><li>剑指offer<code>反转链表</code></li></ul></li><li>健康</li></ol><ul><li>keep的第54天</li></ul><ol><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>更新日记</li><li>早起洗漱</li><li>练字10min</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-17 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>复习了剑指offer<code>从尾巴到头打印链表</code>、<code>反转链表</code></li><li>Q4学习</li><li>周赛学习了Q1Q2</li><li>html标签学习完结+bellman_ford算法学习</li></ul></li><li>健康</li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-16 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>学习dijkstra算法学习+学习了html标签</li></ul></li><li>健康</li><li>社交</li><li>认知</li><li>习惯</li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-15 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>复习了剑指offer<code>将字符串转化为数字</code>使用状态机来解决</li><li>复习了acwing单链表实现+有向图的拓扑序列+学习了了html标签</li></ul></li><li>健康<ul><li>keep第53天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐<ul><li>呪术廻戦看了2集</li></ul></li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-14 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题+158周赛Q1Q2</li><li>牛客知识库打卡</li><li>复习了剑指offer<code>将字符串转化为数字</code></li><li></li></ul></li><li>健康<ul><li>keep第52天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-13 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题+337周赛Q1Q2</li><li>牛客知识库打卡并且学习了项目makefile</li><li>acwing复习了浮点型二分查找</li></ul></li><li>健康<ul><li>keep第51天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-12 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题+周赛27Q1Q2Q3</li><li>牛客知识库打卡并且学习了项目，库的制作完结</li><li>acwing复习了二分查找</li><li>面试突破学习完static章节</li></ul></li><li>健康<ul><li>keep第50天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-11 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡并且学习了项目</li><li>acwing 复习了逆序对的数量</li><li>剑指offer复习表示数值的字符串</li><li>面试突破继续看static章节</li></ul></li><li>健康<ul><li>keep第49天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li><strong> 多放松眼睛</strong></li><li><strong>多增加点思维认知学习时间</strong> </li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-10 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>acwing 复习了归并排序+差分数组</li><li>参加周赛并掌握了前三题</li></ul></li><li>健康<ul><li>keep第48天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li><li>收拾房间</li></ul></li><li>娱乐<ul><li>三集魔禁</li></ul></li><li>提升</li><li>改进<ul><li>多放松眼睛</li><li>多增加点思维认知学习时间</li></ul></li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-09 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>牛客项目学习到静态库使用</li></ul></li><li>健康<ul><li>休息一天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li><li>早起洗漱</li></ul></li><li>娱乐<ul><li>两集魔禁 + 咒术回战</li></ul></li><li>提升</li><li>改进</li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li><li>又玩了了游戏！！！</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-08 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成Q1Q2Q3(343)</li><li>牛客知识库打卡</li><li>牛客项目学习到静态库制作</li><li>C++面试突破：C和C++static的作用</li><li>acwing复习到第k个数</li><li>剑指offer <code>从头到尾打印链表</code>过了</li></ul></li><li>健康<ul><li>坚持keep第47天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li></ul></li><li>娱乐<ul><li>两集魔禁 + 咒术回战</li></ul></li><li>提升</li><li>改进</li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-07 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成Q1Q2</li><li>大疆面试第二题</li><li>牛客知识库打卡</li><li>C++面试突破 c++17新特性</li><li>acwing复习快速排序</li><li>剑指offer从尾到头打印链表</li></ul></li><li>健康<ul><li>坚持keep第46天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li></ul></li><li>娱乐<ul><li>两集魔禁</li></ul></li><li>提升</li><li>改进</li><li>坏习惯<ul><li>睁眼刷b站</li><li>边学习边看视频</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-06 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成Q1Q2</li><li>大疆面试题第一题+第二题的对应的周赛第一题</li><li>牛客知识库打卡</li></ul></li><li>健康</li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li></ul></li><li>娱乐</li><li>提升</li><li>改进</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-05 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer三刷两题</li><li>面试突破c++新特性到<strong>初始化列表</strong></li></ul></li><li>健康<ul><li>坚持keep的第45天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>每日练字10min</li><li>更新日记</li></ul></li><li>娱乐</li><li>提升</li><li>改进<ul><li>明天在习惯上添加一个acwing基础代码练习</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-04 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>剑指offer二刷完结</li></ul></li><li>健康<ul><li>坚持keep的第44天</li></ul></li><li>社交</li><li>认知<ul><li>教父：要对自己的家人有责任感</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li><li>更新日记</li></ul></li><li>娱乐</li><li>提升</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-03 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛Q1Q2</li><li>周赛Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>圆圈中最后剩下的数字</code></li><li>面试突破：编译与链接-&gt;和include的区别</li></ul></li><li>健康<ul><li>坚持keep的第43天</li></ul></li><li>社交</li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li><li>更新日记</li></ul></li><li>娱乐<ul><li>玩游戏玩了n把（不玩了额）</li></ul></li><li>提升</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-02 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>和为s的连续正数序列</code></li><li>面试突破：智能指针的创建和应用-&gt;智能指针的创建</li></ul></li><li>健康<ul><li>坚持keep的第42天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了3把</li></ul></li><li>提升<ul><li>更新博客</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-09-01 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>剪绳子I、II</code></li><li>面试突破：c++内存管理-&gt;内存对齐</li><li>找到了github的awesome的C++项目</li></ul></li><li>健康<ul><li>坚持keep的第41天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了3把</li></ul></li><li>提升<ul><li>更新博客</li></ul></li></ol></div></div></div><hr><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>慢慢来就会快</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-31 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>数组中出现次数超过一半的数字</code></li></ul></li><li>健康<ul><li>坚持keep的第40天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知<ul><li>看了影评血观音，感悟就是你怎么对待别人，别人会怎么对待你。</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了5把</li></ul></li><li>提升<ul><li>更新博客</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-30 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛39场Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>数组中数字出现的次数II</code></li></ul></li><li>健康<ul><li>坚持keep的第39天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了n把。。。</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-29 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成周赛81场Q1Q2</li><li>牛客知识库打卡</li><li>剑指offer-<code>数组中数字出现的次数</code></li></ul></li><li>健康<ul><li>坚持keep的第38天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字5min</li><li>练习键盘打字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了4把</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-28 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成每日一题</li><li>牛客知识库打卡</li><li>剑指offer-<code>二进制中1的个数</code></li></ul></li><li>健康<ul><li>坚持keep的第37天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知<ul><li>学习了《富有的习惯》书评</li></ul></li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li><li>每日练字5min</li><li>练习键盘打字10min</li></ul></li><li>娱乐<ul><li>玩游戏玩了三个小时</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-27 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运IO与进程同步（完结但是还是不懂原理）</li></ul></li><li>健康<ul><li>坚持keep的第36天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-26 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运IO与进程同步（没有搬完）</li></ul></li><li>健康<ul><li>坚持keep的第35天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-25 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运IO与进程同步（没有搬完）</li></ul></li><li>健康<ul><li>坚持keep的第34天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>习惯<ul><li>早起放歌</li><li>早起洗漱</li></ul></li><li>娱乐<ul><li>看了咒术回战2</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-24 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运sizeof和strlen的区别</li></ul></li><li>健康<ul><li>坚持keep的第33天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>娱乐</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-23 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运设计模式之观察者模式以及常见设计者模式</li></ul></li><li>健康<ul><li>坚持keep的第32天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知-人与人之间的差距其实是执行力！！！</li><li>娱乐</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-22 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li><code>礼物的最大价值</code> 和 <code>把数字翻译成字符串</code>Rust实现完结</li><li>完成今天周赛的前两题</li><li>牛客知识库打卡</li><li>学习并搬运设计模式之工厂模式</li></ul></li><li>健康<ul><li>坚持keep的第31天</li></ul></li><li>社交<ul><li>和盆友聊天</li></ul></li><li>认知</li><li>娱乐</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-21 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li><code>股票的最大利润</code>Rust实现完结</li><li>力扣周赛只做了一题。</li><li>牛客知识库打卡</li><li>学习环形缓冲区</li></ul></li><li>健康<ul><li>坚持keep的第30天</li></ul></li><li>社交<ul><li>跟盆友聊天。</li></ul></li><li>认知<ul><li>无</li></ul></li><li>娱乐<ul><li>看了雾山五行，非常震撼！！！</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-20 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li><code>连续子数组的最大和</code>Rust实现完结</li><li>力扣周赛只做了一题。</li><li>牛客知识库打卡</li></ul></li></ol><ul><li>今天摆了大烂。。。</li></ul></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-19 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li><code>股票的最大利润</code> + <code>不用加减乘除做加法</code>问题Rust实现完结</li><li>设计模式学习-单例模式，明天把数据库加上！</li><li>牛客知识库打卡</li><li>牛客项目linux高并发服务器学习</li><li>跟盆友讨论环形缓冲区</li></ul></li><li>健康<ul><li>坚持keep的第29天</li></ul></li><li>社交<ul><li>跟盆友聊天</li></ul></li><li>认知<ul><li>无，明天看一部电影</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-18 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li><code>青蛙跳台阶</code>问题Rust实现完结</li><li>算法学习八皇后问题 + 八数码</li><li>环形缓冲区进一步了解，是操作系统中一种重要的数据结构</li><li>明天开始额外加数据库学习 + 设计模式学习 + 牛客知识库打卡</li></ul></li><li>健康<ul><li>坚持keep的第28天</li></ul></li><li>社交<ul><li>跟盆友聊天</li></ul></li><li>认知<ul><li>看了稚晖君的智元机器人发布会</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-17 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>剑指offer <code>斐波那契数列</code> rust版完结 + <code>青蛙跳台阶</code>问题Rust实现进行中</li><li>初步了解环形缓存缓冲区的本质，以及应用场景。</li><li>打字练习</li></ul></li><li>健康<ul><li>坚持keep的第27天</li></ul></li><li>社交<ul><li>跟盆友聊天</li></ul></li><li>认知<ul><li>看了一会小米演讲，收获了一个启发。(明天继续看)<ul><li><strong>很多事情和遇到的问题都是别人经历或者解决过的。这时不要一个人单打独斗，需要别人的帮助！！！！</strong></li></ul></li></ul></li><li>反思<ul><li>我效率慢吗？<ul><li>上午做了啥？<ul><li>keep锻炼（8点多醒，但是耍手机刷了很多才开始动一直拖到了9点半左右）</li><li>剑指offer  二刷学习，上午没有完成昨天的Rust翻译</li></ul></li><li>中午做了啥？<ul><li>跟盆友聊了天</li><li>睡了午觉</li><li>看小米演讲（看了一会，并没有看完）</li></ul></li><li>下午做了啥？<ul><li>完成了昨天的剑指offer题目 + 今天的<code>青蛙跳台阶</code>问题二刷</li></ul></li><li>晚上做了啥？<ul><li>今天的<code>青蛙跳台阶</code>问题二刷</li><li>环境缓冲区学习。</li></ul></li></ul></li><li>回答：慢<ul><li>一件事情拖了很久</li><li>碎片时间莫名其妙的就没了，刷视频去了？？？！！！（要注意关注自己的手机了）</li></ul></li><li>措施：<ul><li><strong>早上不刷视频，直接起来运动</strong></li><li><strong>跟盆友聊天时间固定在吃饭或者晚上休息前1小时</strong></li></ul></li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-16 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>编译通过了一个简单C++项目并上传到了自己的仓库中。</li><li>每日一题 + 剑指offer <code>斐波那契数列</code> rust学习</li><li>明天学习哈环形缓冲区 + 算法 + 设计模式</li></ul></li><li>健康<ul><li>坚持keep的第26天</li></ul></li><li>社交<ul><li>跟盆友聊天</li></ul></li><li>认知<ul><li>无学习(明天学习点相关的)</li></ul></li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023-08-15 找工作中</p></div></div><div class='timeline-item-content'><ol><li>找工作<ul><li>学习了柔性数组。</li><li>初步了解了nginx。</li></ul></li><li>健康<ul><li>坚持keep的第25天</li></ul></li><li>社交<ul><li>跟盆友聊天</li></ul></li><li>认知<ul><li>无学习</li></ul></li></ol></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 目标清单 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ngnix初识</title>
      <link href="/2023/08/15/ngnix/"/>
      <url>/2023/08/15/ngnix/</url>
      
        <content type="html"><![CDATA[<h1 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h1><ul><li>web服务器、反向代理服务器，通过代理的方式，使得所有的服务器公用一个公网IP, 并且能响应请求。外部都是访问同一个公网IP, 内部的是一个子网IP。这个代理的结点，就是nginx。</li></ul><h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><ul><li>正/反向代理<ul><li>正向代理：自己浏览器被vpn代理了</li><li>反向代理：服务器被代理了</li></ul></li><li>负载均衡：作为多个服务器机器的总管，能够根据不同机器的运算能力分配合适的任务。</li><li>动静分离：动态数据和静态数据组织起来，发送给浏览器</li></ul><h1 id="nginx与apache的区别"><a href="#nginx与apache的区别" class="headerlink" title="nginx与apache的区别"></a>nginx与apache的区别</h1><ul><li>apache先于nginx出现特点是用户一个请求，服务器就会创建一个线程去处理。并发量不会很高，做不到并发量超过一万C1K。select/poll技术</li><li>nginx架构性能都比apache好。使用了epoll技术.C1M（百万并发量）</li></ul><h1 id="nginx工程上的实践"><a href="#nginx工程上的实践" class="headerlink" title="nginx工程上的实践"></a>nginx工程上的实践</h1><ol><li>起到转发的作用<br><img src="https://article.biliimg.com/bfs/article/e4775a28e665b8f74664dab2394f7511bd6839f5.png" alt="image-20230815221558967"></li></ol><ul><li>为每个请求加上时间戳。GET/POST/DELETE/HEAD， 在nginx上面加上一个模块</li><li>为每一个请求加上MD5, 在nginx上做。</li><li>为每个网页<div>加上一个广告。在nginx做成一个广告的模块</li></ul><p>现实问题：公司老板得罪了自己手下的工程师，工程师直到了自己服务器的接口。工程师攻击公司的服务器，包了几个网吧，不断的发送http请求，使得真实的用户访问时就很慢或者访问不了。这时候你会如何处理？</p><p>解决办法：在nginx上处理，设定一个限制，规定一个IP发送的请求，规定每1s中只响应一次。</p><p><strong>后续还需学习：模块开发，运维部署，nginx源码学习</strong></p>]]></content>
      
      
      <categories>
          
          <category> web服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>柔性数组</title>
      <link href="/2023/08/15/%E6%9F%94%E6%80%A7%E6%95%B0%E7%BB%84/"/>
      <url>/2023/08/15/%E6%9F%94%E6%80%A7%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<blockquote><p>柔性数组（flexible array member）, 也叫“伸缩数组”或“不定长数组”，是一种c语言中常用的技术，用于结构体的末尾声明一个数组成员，该数组成员的大小可以在运行时动态分配和调整，而不需要在编译时就确定大小。</p></blockquote><h1 id="为什么会出现柔性数组？"><a href="#为什么会出现柔性数组？" class="headerlink" title="为什么会出现柔性数组？"></a>为什么会出现柔性数组？</h1><blockquote><p>传统上，c语言中的数组大小必须在编译时就已知，就在一些情况下会限制数据结构的灵活性，特别是在需要动态调整的大小的情况下。<strong>柔性数组通过结构体末尾声明一个数组成员来解决这个问题，从而在结构体内部创建一个变长的数据缓冲区。</strong></p></blockquote><h1 id="柔性数组的特点"><a href="#柔性数组的特点" class="headerlink" title="柔性数组的特点"></a>柔性数组的特点</h1><ol><li>声明：柔性数组<strong>只能用于结构体中</strong>，并且<strong>必须是结构体的最后一个成员</strong></li><li>分配：柔性数组的内存分配通常是动态内存分配函数(如<code>malloc</code>)在运行时进行的，根据需要分配适当大小的内存空间。</li><li>使用：柔性数组可以向普通数组一样使用，通过索引访问数组元素。访问数组元素时，可以使用结构体的起始地址加上柔性数组的偏移量来计算内存位置。</li><li>大小：柔性数组的大小是在运行时决定的，因此可以根据需要调整数组的大小。</li></ol><p><code>注意：</code></p><ul><li><strong>未实例化的含有柔性数组的结构体大小=除了柔性数组的其他字节大小之和。如果除了柔性数组成员外，没有其他成员，则sizeof(结构体) = 0.</strong></li><li><strong>实例化柔性数组对应的大小需要手动计算（包含类的部分+柔性数组的部分)，而不能用sizeof来计算。</strong></li><li><strong>柔性数组只能用于动态分配，因为需要运行时分配额外的内存来存储数组数据。在栈上或静态内存分配中，柔性数组是不允许的。</strong></li></ul><p><strong>优势：在不浪费空间的情况下实现变长数据结构。这对于需要存储不定数量的元素，但又不想预先分配足够大的内存空间的情况非常有用。</strong></p><p>示例<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">FlexArrayStruct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">    <span class="type">int</span> data[];</span><br><span class="line">&#125;FlexArray;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> arrLength = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//实例化的包含柔性数组的结构体大小需要手动计算大小。不能用sizeof来计算！！！</span></span><br><span class="line">    FlexArray* myArray = (FlexArray*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(FlexArray) + arrLength * <span class="keyword">sizeof</span> (<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">NULL</span> != myArray) &#123;</span><br><span class="line">        myArray -&gt;length = arrLength;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; myArray-&gt;length;  i++) &#123;</span><br><span class="line">            myArray-&gt;data[i] = i * <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; myArray-&gt;length;  i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;myArray[%d] = %d\n&quot;</span>, i, myArray-&gt;data[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">free</span>(myArray);</span><br><span class="line">    myArray = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> nginx内存池 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>字节（内存）对齐</title>
      <link href="/2023/08/13/%E8%AE%A1%E7%AE%97%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F/"/>
      <url>/2023/08/13/%E8%AE%A1%E7%AE%97%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="一、一般字节对齐"><a href="#一、一般字节对齐" class="headerlink" title="一、一般字节对齐"></a>一、一般字节对齐</h1><blockquote><p>各个数据类型需要按照一定规则存放到存储单元中，相邻的数据并不一定是连续的紧紧挨在一起的，两个object之间可能会有空隙。这个空隙是padding。**<br>变量存的起始地址必须具备某种特性-‘对齐’，如4字节的int类型的起始地址，应该位于4字节的边界上，即起始地址能被4整除。</p></blockquote><p><strong>为什么需要字节对齐?</strong></p><ul><li>不同硬件平台的对存储空间的处理上存在不同。</li><li>尽可能保证一次取数的完整性，以便提升访问数据性能。</li></ul><p><strong>一般规则</strong></p><ul><li>补充(自然对齐与非自然对齐)<ul><li>自然对齐：对于标量类型，如char，int, 指针等等，其alignof等于sizeof，称作自然对齐。</li><li>非自然对齐<pre><code><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">alignof</span>(arr) != <span class="built_in">sizeof</span>(arr);<span class="comment">//前者为4字节，后者为40字节</span></span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><ol><li><strong>填充padding, 使得保证下一个数据类型T的起始地址能够整除alignof(T): 换句话说，起始位置必须是alignof(T)的整数倍。</strong></li><li><strong>自然对齐下，结构体的alignment等于其成员中最大的alignment。（最大的alignment在不同机器同一个类型取值可能不同）</strong></li><li><strong>结构体的sizeof等于其成员中最大的alignment的整数倍(这个通常是用来确定最后一个元素的字节数大小)。</strong></li></ol><h2 id="eg1"><a href="#eg1" class="headerlink" title="eg1"></a>eg1</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">bool</span> c;<span class="number">1</span>-&gt;<span class="number">2</span></span><br><span class="line"><span class="type">short</span> b;<span class="number">2</span></span><br><span class="line"><span class="type">bool</span> a;<span class="number">1</span>-&gt;<span class="number">2</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>32位：6字节；64位：6字节</code><br><strong>解释：满足每个元素的起始位置是当前元素的aligement的整数倍；满足结构体的sizeof等于其成员中最大的aligement的整数倍-这是里2的整数倍</strong></p><h2 id="eg2"><a href="#eg2" class="headerlink" title="eg2"></a>eg2</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">bool</span> c;<span class="number">1</span>-&gt;<span class="number">4</span></span><br><span class="line"><span class="type">int</span> b;<span class="number">4</span></span><br><span class="line"><span class="type">bool</span> a;<span class="number">1</span>-&gt;<span class="number">4</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>32位：12字节，64位：12字节</code></p><p><strong>解释：满足每个元素的起始位置是当前元素的aligement的整数倍；满足结构体的sizeof等于其成员中最大的aligement的整数倍-这是里4的整数倍</strong></p><h2 id="eg3"><a href="#eg3" class="headerlink" title="eg3"></a>eg3</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">bool</span> c;<span class="comment">//1-&gt;4  保证与后面的int类型数据对齐(保证数据下一个数据类型起始位置是对应数据类型的整数倍)</span></span><br><span class="line"><span class="type">int</span> b;<span class="comment">//4 </span></span><br><span class="line"><span class="type">bool</span> a;<span class="comment">//1-&gt;4 (1-&gt;8)</span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> d;<span class="comment">//8</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>32位：20字节；64位：24字节</code><br><strong>解释：满足每个元素的起始位置是当前元素的aligement的整数倍；满足结构体的sizeof等于其成员中最大的aligement的整数倍（32位 alignof(long long） = 4;64位 alignof(long long) = 8)</strong></p><h1 id="二、-含有位域的字节对齐"><a href="#二、-含有位域的字节对齐" class="headerlink" title="二、 含有位域的字节对齐"></a>二、 含有位域的字节对齐</h1><ul><li><p><strong>MSVC: 需要满足每个类型的起始位置都是对应类型的alignment的整数倍</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">bit_field</span> &#123;</span><br><span class="line">    <span class="type">short</span> a;<span class="comment">//MSVC: 2字节</span></span><br><span class="line">    <span class="type">char</span> b;<span class="comment">//MSVC: 需要字节对齐，保证下面int c的起始位置是alignof(int)的整数倍，需要填充1字节</span></span><br><span class="line">    <span class="type">int</span> c:<span class="number">1</span>;<span class="comment">//MSVC: 4字节，使用1位，剩余31位</span></span><br><span class="line">    <span class="type">char</span> d:<span class="number">4</span>;<span class="comment">//MSVC: 需要字节对齐，保证下面short e的起始位置是alignof(short)的整数倍, 需要填充1字节 使用4位，剩余12位</span></span><br><span class="line">    <span class="type">short</span> e:<span class="number">7</span>;<span class="comment">//MSVC: 2字节 </span></span><br><span class="line">    <span class="comment">//MAVC: 已经是alignof(int)的整数倍</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><strong>clang|gcc: 在存储的时候不需要满足每个类型起始位置的是其对应的alignment的整数倍。只需要在最后补充字节保证结构体是最大alignment的整数倍</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">bit_field1</span> &#123;</span><br><span class="line">    <span class="type">short</span> a;<span class="comment">//clang|gcc: 2字节</span></span><br><span class="line">    <span class="type">char</span> b;<span class="comment">//clang|gcc: 1字节，不用字节对齐</span></span><br><span class="line">    <span class="type">int</span> c:<span class="number">1</span>;<span class="comment">//clang|gcc: 分配1字节，使用了1比特位，剩余7比特位。</span></span><br><span class="line">    <span class="type">char</span> d:<span class="number">4</span>;<span class="comment">//clang|gcc: 上述分配空间剩余的比特位能够存储下来4比特位，剩余3比特位</span></span><br><span class="line">    <span class="type">short</span> e:<span class="number">7</span>;<span class="comment">//clang|gcc：上述剩余的比特位不能装下7个比特位，因此开辟新的一字节来存储，使用7比特位，剩余1比特位</span></span><br><span class="line">    <span class="comment">//2 + 1 + 1 + 1 = 5字节，为了保证结构体大小是alignof(int)的整数倍，因此补充3字节对齐</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h1 id="三、类的字节对齐"><a href="#三、类的字节对齐" class="headerlink" title="三、类的字节对齐"></a>三、类的字节对齐</h1><ul><li><strong>空类：大小为1字节</strong></li><li><strong>含有多个基类的子类的字节对齐：按照继承的顺序依次罗列出对应类的成员，然后按照字节对齐规则去计算</strong></li></ul><h2 id="eg4"><a href="#eg4" class="headerlink" title="eg4"></a>eg4</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">bool</span> c;<span class="comment">//1-&gt;4 保证是int的起始地址是alignof(int)的整数倍</span></span><br><span class="line">    <span class="type">int</span> a;<span class="comment">//4</span></span><br><span class="line">    <span class="type">bool</span> b;<span class="comment">//1-&gt;4 保证是最大alignof(int)的整数倍</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//按照上述一的方式进行分析即可：均为12字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>: <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C类字节大小 = A的成员字节大小+C的成员字节大小(也需要遵循字节对齐原则)</span></span><br><span class="line"><span class="comment">//A的成员：没有成员就不算字节大小</span></span><br><span class="line"><span class="comment">//C的自己成员：虚函数表对应的vptr,32位：字节；64位：8字节</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//32位：4字节；64位：8字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>: <span class="keyword">public</span> B, <span class="keyword">public</span> C&#123;&#125;;</span><br><span class="line"><span class="comment">//D类字节大小 = B类成员大小+ C类成员大小(A类型成员大小+C类自身成员大小)</span></span><br><span class="line"><span class="comment">//按照顺序列出成员，按照字节对齐的方式来计算</span></span><br><span class="line">D&#123;</span><br><span class="line"><span class="comment">//B类的成员</span></span><br><span class="line"><span class="type">bool</span> c;<span class="comment">//1-&gt;4</span></span><br><span class="line"><span class="type">int</span> a;<span class="comment">//4</span></span><br><span class="line"><span class="type">bool</span> b;</span><br><span class="line"><span class="comment">//32位机器 保证下一个指针的地址是alignof(指针)整数倍：1-&gt;4</span></span><br><span class="line"><span class="comment">//64位机器 保证下一个指针的地址是alignof(指针)整数倍：1-&gt;8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span> </span>= <span class="number">0</span>;<span class="comment">//C类自己的</span></span><br><span class="line"><span class="comment">//32位：4字节；64位：8字节</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当为32位机器时，大小为4 + 4 + 4 + 4 = 16字节 按照最大的alignof(指针)的整数倍对齐</span></span><br><span class="line"><span class="comment">//当为64位机器时，大小为4 + 4 + 8 + 8 = 24字节 按照最大的alignof(指针)的整数倍对齐</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(A) &lt;&lt; endl;<span class="comment">// 1 1</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(B) &lt;&lt; endl;<span class="comment">// 12 12</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(C) &lt;&lt; endl;<span class="comment">// 4 8</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(D) &lt;&lt; endl;<span class="comment">// 16 24</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三、静态成员变量不计算类所占内存的大小"><a href="#三、静态成员变量不计算类所占内存的大小" class="headerlink" title="三、静态成员变量不计算类所占内存的大小"></a>三、静态成员变量不计算类所占内存的大小</h1><ul><li><strong>由于类的静态成员变量编译时被分配到静态/全局区，静态成员变量是属于类的，所有对象共有一份，不计入类的内存空间</strong></li></ul><h1 id="四、函数不占存储空间-虚函数之外"><a href="#四、函数不占存储空间-虚函数之外" class="headerlink" title="四、函数不占存储空间(虚函数之外)"></a>四、函数不占存储空间(虚函数之外)</h1><blockquote><p>除了虚函数之外！！！并且不管虚函数有多少个，都只需要一个指针(维护虚函数表的指针)就够了！！！）<br>C++中成员函数和非成员函数都是放在代码区的，其中一般成员函数，友元函数，内联函数，以及静态成员函数都不计入类的存储空间</p></blockquote><p><strong>原因：编译系统中，数据和函数是分开存放的，函数放在代码区，数据主要放在栈区或者堆区，静态/全局区以及常量区), 实例化不同对象时，只给数据分配空间，各个对象调用函数时都能跳转到（内联函数除外）找到函数在代码区的入口执行。可以节省拷贝多份代码的空间.</strong></p><h2 id="构造函数："><a href="#构造函数：" class="headerlink" title="构造函数："></a>构造函数：</h2><ul><li>构造函数没有返回值，包括void.</li><li>可以定义多个构造函数，称为构造函数的重载</li><li>构造函数可以在对象创建时自动执行，无需显示调用</li><li>构造函数可以初始化成员变量、分配资源等初始化操作</li><li>默认构造函数是在没有显示定义构造函数时由编译器提供的</li><li>如果定义了任何构造函数，编译器将不再提供默认构造函数</li></ul><h2 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h2><blockquote><p>特殊的成员函数，用在对象销毁（生命周期结束）时执行清理操作，在销毁对象时自动被调用。（避免资源泄漏和内存泄漏等问题）<br>格式：~+类名<br>如果没有显示定义析构函数，编译器默认提供一个析构函数，但如果你定义了任何一个析构函数，编译器将不再提供默认析构函数。</p></blockquote><ul><li>析构函数没有返回值，包括void</li><li>可以定义一个析构函数，不能重载多个析构函数</li><li>析构函数在对象销毁时自动执行，无需显示调用</li><li>析构函数用于释放资源，清理操作等。</li><li>默认析构函数是在没有显示定义析构函数时由编译器提供的</li><li>如果定义了析构函数，编译器将不再提供默认的析构函数</li></ul><h2 id="虚函数"><a href="#虚函数" class="headerlink" title="虚函数"></a>虚函数</h2><blockquote><p>虚函数是C++中实现多态性的关键机制之一。它允许在基类中声明一个函数为虚函数，然后在派生类中。重写（覆盖）这个虚函数。通过这种方式，当通过基类的指针或者引用调用虚函数时，实际上会根据对象的实际类型（运行时类型）来调用相应的派生类函数，实现了多态性。</p></blockquote><ul><li>要声明一个虚函数，需要在虚函数声明前加上·virtual·关键字。派生类中如果要重写基类中的虚函数，需要在函数前也加上<code>virtual</code>关键字，并保持函数签名一致。        </li><li>声明虚函数需要在函数声明前加上<code>virtual</code>关键字。</li><li>派生类中重要基类的虚函数，需要保持函数签名一致，并在函数前也加上<code>virtual</code>关键字(这是可选的，但建议显示以提高代码可读性)</li><li>通过基类的指针或引用调用虚函数时，会根据对象的实际类型来调用相应的派生类函数，这是运行时动态绑定的结果。</li><li>虚函数允许我们在多态的情况下更灵活地处理对象，提高代码的可扩展性和可维护性。</li></ul><h2 id="友元函数："><a href="#友元函数：" class="headerlink" title="友元函数："></a>友元函数：</h2><ul><li>在类内部中实现函数声明并且参数本类对象来进行传递</li><li>在类外中实现对类的操作的操作逻辑（可以修改私有变量和调用私有函数！！！）</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Myclass</span> &#123;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;hello from Myclass!: a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="comment">//声明一个友元函数</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">print</span><span class="params">(Myclass&amp; obj)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义友元函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(Myclass&amp; obj)</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;hello form print() function!&quot;</span> &lt;&lt; endl;</span><br><span class="line">obj.a = <span class="number">666</span>;<span class="comment">//修改对象的私有变量</span></span><br><span class="line">obj.<span class="built_in">print</span>();<span class="comment">//调用对象的私有方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Myclass obj;</span><br><span class="line"><span class="comment">//obj.print();私有成员函数不能直接访问</span></span><br><span class="line"><span class="built_in">print</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="内联函数"><a href="#内联函数" class="headerlink" title="内联函数"></a>内联函数</h2><blockquote><p>内联函数的逻辑会在编译时将函数内部的逻辑被复制到调用位置，直接进行计算，而不是通过函数调用<br>内联函数（声明和定义都要加inline）也是存放在代码区。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">add</span>(<span class="number">12</span>, <span class="number">34</span>) &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="静态成员函数"><a href="#静态成员函数" class="headerlink" title="静态成员函数"></a>静态成员函数</h2><ul><li>定义在类内部的、不依赖于类的任何对象的函数。</li><li>它们可以在不创建类对象的情况下调用，通常用于表示类的操作</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Myclass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;hello C++ world&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Myclass::<span class="built_in">printMessage</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="五、自定义对齐字节大小"><a href="#五、自定义对齐字节大小" class="headerlink" title="五、自定义对齐字节大小"></a>五、自定义对齐字节大小</h1><ul><li>完全可以按照第字节对齐规则的方式去推出来！！！<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta"># <span class="keyword">pragma</span> pack(16)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(A) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//对齐系数：       1    4 + 8 + 1 = 13</span></span><br><span class="line">    <span class="comment">//对齐系数:        2    4 + 8 + 2 = 14</span></span><br><span class="line">    <span class="comment">//x86默认对齐系数：4    4 + 8 + 4 = 16</span></span><br><span class="line">    <span class="comment">//x64默认对齐系数：8    8 + 8 + 8 = 24</span></span><br><span class="line">    <span class="comment">//对齐系数：       16   8 + 8 + 8 = 24 </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> nginx内存池 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字节对齐 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客搭建教程(1)</title>
      <link href="/2023/08/08/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-1/"/>
      <url>/2023/08/08/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-1/</url>
      
        <content type="html"><![CDATA[<h1 id="环境安装"><a href="#环境安装" class="headerlink" title="环境安装"></a>环境安装</h1><ul><li><p>github账号</p></li><li><p>node</p></li><li><p>git</p></li><li><p>hexo</p></li><li><p>文本编辑器</p></li></ul><h2 id="github账号注册与创建仓库"><a href="#github账号注册与创建仓库" class="headerlink" title="github账号注册与创建仓库"></a>github账号注册与创建仓库</h2><p><a href="https://github.com/">GitHub</a></p><p><strong>注册完成后，点击右上角的<code>+</code>按钮，选择<code>New repository</code>，创建一个<code>&lt;用户名&gt;.github.io</code>的仓库</strong></p><h2 id="node安装"><a href="#node安装" class="headerlink" title="node安装"></a>node安装</h2><p><a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a></p><p><img src="https://article.biliimg.com/bfs/article/756596c14731643480d8d2fd9d4c57d4eb4174d9.png" alt="image-20230807111622221"></p><ul><li><p>验证安装是否成功</p><ul><li>win+r：输入node -v进行验证，如果出现版本信息则安装成功</li></ul></li><li><p>npm换源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li></ul><h2 id="git安装"><a href="#git安装" class="headerlink" title="git安装"></a>git安装</h2><p><a href="https://npm.taobao.org/mirrors/git-for-windows/">https://npm.taobao.org/mirrors/git-for-windows/</a></p><p><strong>配置用户名和邮箱</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;你的用户名&quot;</span><br><span class="line">git config --global user.email &quot;你的邮箱&quot;</span><br></pre></td></tr></table></figure><h3 id="验证是否配置成功"><a href="#验证是否配置成功" class="headerlink" title="验证是否配置成功"></a>验证是否配置成功</h3><p><code>git config -l</code></p><h2 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h2 id="文本编辑器-Vscode"><a href="#文本编辑器-Vscode" class="headerlink" title="文本编辑器(Vscode)"></a>文本编辑器(Vscode)</h2><h1 id="git与github相连接"><a href="#git与github相连接" class="headerlink" title="git与github相连接"></a>git与github相连接</h1><p>指向以下命令生成ssh公钥，此公钥用于自己的git能够连接到自己的github账户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;你的邮箱&quot;</span><br></pre></td></tr></table></figure><p>之后打开c盘用户文件夹下的.ssh文件夹，会看到id_rsa.pub</p><p><img src="https://bu.dusays.com/2022/05/14/627e87126fc59.png" alt="img"></p><p>记事本打开公钥（id_rsa.pub），复制里面的内容，然后开始在github中配置ssh密钥</p><p>进入github，点击右上角头像 选择<code>settings</code>，进入设置页后选择 <code>SSH and GPG keys</code>，名字随便起，公钥填到<code>Key</code>那一栏</p><p>测试连接</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><h1 id="初始化Hexo项目"><a href="#初始化Hexo项目" class="headerlink" title="初始化Hexo项目"></a>初始化Hexo项目</h1><p>在博客路径下指向命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog(项目名)</span><br></pre></td></tr></table></figure><p>进入博客目录安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blog</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure><p>博客目录说明</p><p>[node_modules]：依赖包</p><p>[scaffolds]：生成文章的一写模板</p><p>[source]：用来存放文章</p><p>[themes]：主题</p><p>[.npmignore]：发布时忽略的文件</p><p>[_config.landscape.yml]：主题的配置文件</p><p>[config.yml]：博客的配置文件</p><p>[package.json]：项目名称、描述、版本、运行和开发等信息 </p><p>项目启动：<code>hexo s</code></p><p>查看本地服务博客：<a href="http://localhost:4000/">http://localhost:4000/</a> ，如果出现以下效果，则说明博客构建成功了</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>​    挂载本地博客到github pages上</p><ol><li><p>安装 hexo-deployer-git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>修改_config.yml文件</p><p>在blog-demo目录下的_config.yml，就是整个Hexo框架的配置文件了。可以在里面修改大部分的配置。详细可参考官方的<a href="https://hexo.io/zh-cn/docs/configuration">配置描述</a>。<br>修改最后一行的配置，将repository修改为你自己的github项目地址即可，还有分支要改为<code>main</code>代表主分支（注意缩进）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:misaka20005/misaka20005.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure></li><li><p>修改好配置后，运行如下命令，将代码部署到 GitHub（Hexo三连）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASH终端</span><br><span class="line">hexo clean; hexo generate; hexo deploy  // VSCODE终端</span><br></pre></td></tr></table></figure><ul><li>hexo clean：删除之前生成的文件，若未生成过静态文件，可忽略此命令。</li><li>hexo generate：生成静态文章，可以用<code>hexo g</code>缩写</li><li>hexo deploy：部署文章，可以用<code>hexo d</code>缩写</li></ul><p>如果出现了deploy done,则说明部署成功了。</p><p>然后过一段时间，再去访问<a href="https://misaka20005.github.io，就可以看到博客内容了。">https://misaka20005.github.io，就可以看到博客内容了。</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>剑指offer</title>
      <link href="/2023/07/30/%E5%89%91%E6%8C%87offer/"/>
      <url>/2023/07/30/%E5%89%91%E6%8C%87offer/</url>
      
        <content type="html"><![CDATA[<div class="tabs" id="剑指offer"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#剑指offer-1">字符串</button></li><li class="tab"><button type="button" data-href="#剑指offer-2">链表</button></li><li class="tab"><button type="button" data-href="#剑指offer-3">双指针</button></li><li class="tab"><button type="button" data-href="#剑指offer-4">栈与队列</button></li><li class="tab"><button type="button" data-href="#剑指offer-5">模拟</button></li><li class="tab"><button type="button" data-href="#剑指offer-6">查找算法</button></li><li class="tab"><button type="button" data-href="#剑指offer-7">搜索与回溯算法</button></li><li class="tab"><button type="button" data-href="#剑指offer-8">分治算法</button></li><li class="tab"><button type="button" data-href="#剑指offer-9">排序</button></li><li class="tab"><button type="button" data-href="#剑指offer-10">动态规划</button></li><li class="tab"><button type="button" data-href="#剑指offer-11">位运算</button></li><li class="tab"><button type="button" data-href="#剑指offer-12">数学</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="剑指offer-1"><h1 id="剑指-Offer-05-替换空格"><a href="#剑指-Offer-05-替换空格" class="headerlink" title="剑指 Offer 05. 替换空格"></a><a href="https://leetcode.cn/problems/ti-huan-kong-ge-lcof/?envType=study-plan-v2&amp;envId=coding-interviews">剑指 Offer 05. 替换空格</a></h1><h2 id="方法1：原地修改"><a href="#方法1：原地修改" class="headerlink" title="方法1：原地修改"></a>方法1：原地修改</h2><h3 id="实现1：使用库函数replace"><a href="#实现1：使用库函数replace" class="headerlink" title="实现1：使用库函数replace"></a>实现1：使用库函数replace</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">replaceSpace</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (s.<span class="built_in">find</span>(<span class="string">&quot; &quot;</span>) != <span class="number">-1</span>) s.<span class="built_in">replace</span>(s.<span class="built_in">find</span>(<span class="string">&quot; &quot;</span>), <span class="number">1</span>, <span class="string">&quot;%20&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="实现2：双指针"><a href="#实现2：双指针" class="headerlink" title="实现2：双指针"></a>实现2：双指针</h3><ul><li>首先线性扫描统计愿串中的所有空格。记作count</li><li>然后增大原串的大小。</li><li>然后倒序进行遍历，i指针指向原串的最后一个位置，j指针指向s串扩充后的最后一个位置。如果当前遍历的s[i]串不为空格，则直接复制到相应的s[j]位置。否则需要将s[j - 2]、s[j - 1]、s[j]对应位置填充‘%’、‘2’、‘0’这3个字符，然后j -= 2.<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">replaceSpace</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>, len = s.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s)</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27; &#x27;</span>) count++;</span><br><span class="line"></span><br><span class="line">        s.<span class="built_in">resize</span>(len + <span class="number">2</span> * count);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = len - <span class="number">1</span>, j = s.<span class="built_in">size</span>() - <span class="number">1</span>; i &lt; j; i--, j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] != <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">                s[j] = s[i];</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                s[j - <span class="number">2</span>] = <span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">                s[j - <span class="number">1</span>] = <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">                s[j] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                j -= <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="方法2：直接遍历"><a href="#方法2：直接遍历" class="headerlink" title="方法2：直接遍历"></a>方法2：直接遍历</h2><blockquote><p>需要准备一个空间较大的答案字符串ans, 然后直接线性扫描s串的同时，判断当前的字符是否为空格，如果为空格的话，则需要连续地在答案字符中添加”%20”， 否则直接拷贝当前的字符</p></blockquote></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">replaceSpace</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        string ans = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> c : s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27; &#x27;</span>) ans += <span class="string">&quot;%20&quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> ans += c;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="剑指-Offer-58-II-左旋转字符串"><a href="#剑指-Offer-58-II-左旋转字符串" class="headerlink" title="剑指 Offer 58 - II. 左旋转字符串"></a><a href="https://leetcode.cn/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/description/?envType=study-plan-v2&amp;envId=coding-interviews">剑指 Offer 58 - II. 左旋转字符串</a></h1><h2 id="方法1：直接使用substr函数来拼接"><a href="#方法1：直接使用substr函数来拼接" class="headerlink" title="方法1：直接使用substr函数来拼接"></a>方法1：直接使用substr函数来拼接</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">reverseLeftWords</span><span class="params">(string s, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s.<span class="built_in">substr</span>(n) + s.<span class="built_in">substr</span>(<span class="number">0</span>, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="方法2：两次遍历"><a href="#方法2：两次遍历" class="headerlink" title="方法2：两次遍历"></a>方法2：两次遍历</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">reverseLeftWords</span><span class="params">(string s, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        string ans = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n; i &lt; s.<span class="built_in">size</span>(); i++)</span><br><span class="line">            ans += s[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            ans += s[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>使用求余优化成一次遍历<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">reverseLeftWords</span><span class="params">(string s, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        string ans = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n; i &lt; n + s.<span class="built_in">size</span>(); i++)</span><br><span class="line">            ans += s[i % s.<span class="built_in">size</span>()];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="方法3：3次翻转"><a href="#方法3：3次翻转" class="headerlink" title="方法3：3次翻转"></a>方法3：3次翻转</h2><blockquote><p> eg：将abcdefg 按照n = 2得到最终的串cdefgab？<br>    设字符串长度为len</p><ol><li>整个字符串进行翻转：gfedcba</li><li>翻转前len - n个字符：cdefgba</li><li>翻转后n个字符：cdefgab</li></ol></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">reverseLeftWords</span><span class="params">(string s, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">begin</span>() + s.<span class="built_in">size</span>() - n);</span><br><span class="line">        <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>() + s.<span class="built_in">size</span>() - n, s.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="剑指-Offer-20-表示数值的字符串"><a href="#剑指-Offer-20-表示数值的字符串" class="headerlink" title="剑指 Offer 20. 表示数值的字符串"></a><a href="https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/?envType=study-plan-v2&amp;envId=coding-interviews">剑指 Offer 20. 表示数值的字符串</a></h1><h2 id="方法1：模拟-分类讨论"><a href="#方法1：模拟-分类讨论" class="headerlink" title="方法1：模拟+分类讨论"></a>方法1：模拟+分类讨论</h2><blockquote><p> 一个完整的加入可选项的最完整字符串如下：</p><ul><li>“(空格) (+/-) 小数/整数 (e/E) (+/-) (整数) (空格)”<ul><li>小数合法的3种形式<ul><li>“1.”(小数点有一位数，然后小数点)</li><li>“1.1”(小数点有一位数，然后小数点)</li><li>“.1”(一个小数点以及至少一位数)</li></ul></li><li>整数的合法形式<ul><li>6(至少一位数)<br>思路：可以先将对答案不造成影响的可选内容给去掉。比如空格。然后再对照合法字符串的字符顺序队输入串从左往右依次判断当前字符出现了某个特定字符，然后在此情况下，什么情况不合法，然后直接排除，如果再整个过程中都没有出现不合法的情况，则最后返回true.<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.去掉空格</span></span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>, j = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; s[i] == <span class="string">&#x27; &#x27;</span>) i++;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j &amp;&amp; s[j] == <span class="string">&#x27; &#x27;</span>) j--;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; j) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        s = s.<span class="built_in">substr</span>(i, j - i + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.如果存在正负号，则需要去掉，因为正负号是可选的！</span></span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">&#x27;+&#x27;</span> || s[<span class="number">0</span>] == <span class="string">&#x27;-&#x27;</span>) s = s.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//排除正负符号后可能只有小数点&quot;.&quot;这时候是不合法的，直接返回</span></span><br><span class="line">        <span class="keyword">if</span> (s.<span class="built_in">empty</span>() || (s[<span class="number">0</span>] == <span class="string">&#x27;.&#x27;</span> &amp;&amp; s.<span class="built_in">size</span>() == <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.剩下的部分就是&quot;小数/整数 (e/E) (+/-) (整数)&quot;</span></span><br><span class="line">        <span class="comment">//可能出现的字符有：&#x27;.&#x27;, &#x27;0&#x27;-&#x27;9&#x27;, &#x27;e/E&#x27;, &#x27;+/-&#x27;</span></span><br><span class="line">        <span class="type">int</span> e = <span class="number">0</span>, dot = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;9&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&#x27;.&#x27;</span>) &#123;<span class="comment">//小数点可能优先出现(属于小数部分)</span></span><br><span class="line">                dot++;</span><br><span class="line">                <span class="comment">//小数点是在小数部分中需要的，并且只能有一个，如果出现大于或者等于</span></span><br><span class="line">                <span class="comment">//2次的情况，则不合法</span></span><br><span class="line">                <span class="comment">//小数点是在eE符号的前面，因此如果e已经出现了，则也不合法。</span></span><br><span class="line">                <span class="keyword">if</span> (dot &gt; <span class="number">1</span> || e) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">&#x27;e&#x27;</span> || s[i] == <span class="string">&#x27;E&#x27;</span>) &#123;</span><br><span class="line">                e++;</span><br><span class="line">                <span class="comment">//1).当&#x27;e&#x27;或&#x27;E&#x27;出现两次及以上时，则不合法</span></span><br><span class="line">                <span class="comment">//2).如果第一个字符就是&#x27;e/E&#x27;, 则不合法</span></span><br><span class="line">                <span class="comment">//3).如果最后一个字母是&#x27;E/e&#x27;, 则不合法</span></span><br><span class="line">                <span class="keyword">if</span> (e &gt; <span class="number">1</span> || (i == <span class="number">0</span>) || (i + <span class="number">1</span>) == s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//4).当e出现在第1个位置，并且前一个位置为小数点时，则不合法</span></span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">1</span> &amp;&amp; s[i - <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//5).当e出现在倒数第2个位置，并且最后一个位置为正负号时，则不合法</span></span><br><span class="line">                <span class="keyword">if</span> (s[i + <span class="number">1</span>] == <span class="string">&#x27;+&#x27;</span> || s[i + <span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i + <span class="number">2</span> == s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    <span class="comment">//跳过正负号</span></span><br><span class="line">                    i++;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//出现了其他类型的字符，则直接不合法！！！</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></blockquote><h2 id="方法2：利用FSM来解"><a href="#方法2：利用FSM来解" class="headerlink" title="方法2：利用FSM来解"></a>方法2：利用FSM来解</h2><h3 id="如果对FSM还很陌生，可以参考来加深理解FSM的简单编程应用"><a href="#如果对FSM还很陌生，可以参考来加深理解FSM的简单编程应用" class="headerlink" title="如果对FSM还很陌生，可以参考来加深理解FSM的简单编程应用"></a>如果对FSM还很陌生，可以参考来加深理解<a href="https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/solutions/2324990/cong-jian-dan-wen-ti-pan-duan-shi-fou-yo-o7kk/">FSM的简单编程应用</a></h3><blockquote><p> 一个完整的加入可选项的最完整字符串如下：</p><ul><li>“(空格) (+/-) 小数/整数 (e/E) (+/-) (整数) (空格)”</li><li>确定状态(从0开逐一表示状态)<br>0.开始的空格<br>1.正负号(给小数或者整数的)<br>2.小数前的数字<br>3.小数点及小数点后的数字(因为小数点后可以没有数字也合法)<br>4.当小数点前为空格时，小数点及小数点后的数字(没有2,3状态时的情况，实际跟2,3是并列的，有它没我，有我没它)<br>5.幂符号<br>6.给幂的正负符号<br>7.幂符号后的数字<br>8.结尾的空格</li><li>画状态转移图(此处参考K神的图)</li></ul></blockquote><p><img src="https://pic.leetcode.cn/1688051432-BIfolL-参考fsm判断字符串是否为合法数字.png" alt="参考fsm判断字符串是否为合法数字.png"></p><pre><code>- 由此可知当最后状态如果处在为2,3,7,8状态时，则说明是合法数字字符串。</code></pre><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> unordered_map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; um;</span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;<span class="type">char</span>, <span class="type">int</span>&gt; pci;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isNumber</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//根据状态转移图初始化状态转移表</span></span><br><span class="line">        <span class="comment">//这里为啥这么定义可以参考上述提到FSM简单应用的编程例子</span></span><br><span class="line">        vector&lt;um&gt; state = &#123;</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">0</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">1</span>), <span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>), <span class="built_in">pci</span>(<span class="string">&#x27;.&#x27;</span>, <span class="number">4</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>), <span class="built_in">pci</span>(<span class="string">&#x27;.&#x27;</span>, <span class="number">4</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>), <span class="built_in">pci</span>(<span class="string">&#x27;.&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;e&#x27;</span>, <span class="number">5</span>), <span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;e&#x27;</span>, <span class="number">5</span>), <span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">3</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">6</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">7</span>), <span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">8</span>)&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> st = <span class="number">0</span>;<span class="comment">//初始状态</span></span><br><span class="line">        <span class="type">char</span> t;<span class="comment">//设置某一类字符结合的标志</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> c : s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>) </span><br><span class="line">                t = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                t = <span class="string">&#x27;s&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;e&#x27;</span> || c == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">                t = <span class="string">&#x27;e&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;.&#x27;</span> || c == <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">                t = c;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                t = <span class="string">&#x27;?&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (state[st].<span class="built_in">count</span>(t) == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            </span><br><span class="line">            st = (<span class="type">int</span>)state[st][t];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> st == <span class="number">2</span> || st == <span class="number">3</span> || st == <span class="number">7</span> || st == <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="剑指-Offer-67-把字符串转换成整数"><a href="#剑指-Offer-67-把字符串转换成整数" class="headerlink" title="剑指 Offer 67. 把字符串转换成整数"></a><a href="https://leetcode.cn/problems/ba-zi-fu-chuan-zhuan-huan-cheng-zheng-shu-lcof/?envType=study-plan-v2&amp;envId=coding-interviews">剑指 Offer 67. 把字符串转换成整数</a></h1><h2 id="方法1：模拟"><a href="#方法1：模拟" class="headerlink" title="方法1：模拟"></a>方法1：模拟</h2><blockquote><p>首先跳过空格，然后跳过正负符号，并且记录正负性，计算数值<br>的绝对值，最后确定正负，然后边界处理</p><ul><li>注意：INT_MAX：2147483647 , 因为不能超出2147483647，所以当ans计算的位数与最大值的位数差1时，当还有数字字符并且ans &gt; 214748364时这时直接根据符号返回最大值或者最小值(因为ans * 10 已经越界了)，当还有数字字符并且ans = 214748364时，这时需要考虑当前数字字符是否满足要求，如果已经大于最大值最后一位数字，则再ans的话也就溢出了，因此直接返回最大值或最小值。<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">strToInt</span><span class="params">(string str)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.去掉行首空格</span></span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; str.<span class="built_in">size</span>() &amp;&amp; str[i] == <span class="string">&#x27; &#x27;</span>) i++; </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.如果有符号就记录符号</span></span><br><span class="line">        <span class="type">int</span> sign = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (str[i] == <span class="string">&#x27;+&#x27;</span>) i++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;-&#x27;</span>) i++, sign = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.如果出现了非数字，则直接退出，否则就累加数字</span></span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//整数最大值2147483647 / 10 = 214748364</span></span><br><span class="line">        <span class="comment">//ans 不能超过214748364(x), 其中x&lt;=7</span></span><br><span class="line">        <span class="type">int</span> border = INT_MAX / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; str.<span class="built_in">size</span>() &amp;&amp; str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ans &gt; border || ans == border &amp;&amp; str[i] &gt; <span class="string">&#x27;7&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> sign == <span class="number">-1</span> ? INT_MIN : INT_MAX;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = ans * <span class="number">10</span> + (str[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sign * ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></blockquote><h2 id="方法2：FSM"><a href="#方法2：FSM" class="headerlink" title="方法2：FSM"></a>方法2：FSM</h2><blockquote><p>定义状态：程序每时每刻都有一个状态s, 每次从序列中输入一个字符c，并根据字符c转移到到下一个状态s’。因此，只需要建立一个覆盖所有情况的从s与c映射到s’ 的表格即可解决题目中的问题。</p><ul><li>处于空格的状态</li><li>处于符号的状态</li><li>处于数字的状态</li><li>返回状态</li></ul><p>画状态转移图<br><img src="https://pic.leetcode.cn/1688140756-DEOVEz-strtoint.png" alt="strtoint.png"><br><a href="https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/solutions/2324990/cong-jian-dan-wen-ti-pan-duan-shi-fou-yo-o7kk/">FSM不好理解，可以从这个简单例子来加深对FSM的理解</a><br><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">strToInt</span><span class="params">(string str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">typedef</span> unordered_map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; um;</span><br><span class="line">        <span class="keyword">typedef</span> pair&lt;<span class="type">char</span>, <span class="type">int</span>&gt; pci;</span><br><span class="line">        vector&lt;um&gt; state = &#123;</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">0</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">1</span>), <span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>), <span class="built_in">pci</span>(<span class="string">&#x27;o&#x27;</span>, <span class="number">3</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;o&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>)&#125;, </span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;o&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">2</span>)&#125;,</span><br><span class="line">            um&#123;<span class="built_in">pci</span>(<span class="string">&#x27; &#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;s&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;d&#x27;</span>, <span class="number">3</span>), <span class="built_in">pci</span>(<span class="string">&#x27;o&#x27;</span>, <span class="number">3</span>)&#125;,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> sign = <span class="number">1</span>, st = <span class="number">0</span>, ans = <span class="number">0</span>, border = INT_MAX / <span class="number">10</span>;</span><br><span class="line">        <span class="type">char</span> t;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> c : str) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27; &#x27;</span>) </span><br><span class="line">                t = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;-&#x27;</span>) </span><br><span class="line">                t = <span class="string">&#x27;s&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>) </span><br><span class="line">                t = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> t = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            st = state[st][t];</span><br><span class="line">            <span class="keyword">if</span> (st == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ans &gt; border || (ans == border &amp;&amp; c &gt; <span class="string">&#x27;7&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> sign == <span class="number">1</span> ? INT_MAX : INT_MIN;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans = ans * <span class="number">10</span> + (c - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (st == <span class="number">1</span>) &#123;</span><br><span class="line">                sign = c == <span class="string">&#x27;+&#x27;</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (st == <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sign * ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">class Automaton &#123;</span><br><span class="line">    typedef unordered_map&lt;char, int&gt; um;</span><br><span class="line">    typedef pair&lt;char, int&gt; pci;</span><br><span class="line">    vector&lt;um&gt; state = &#123;</span><br><span class="line">        um&#123;pci(&#x27; &#x27;, 0), pci(&#x27;s&#x27;, 1), pci(&#x27;d&#x27;, 2), pci(&#x27;o&#x27;, 3)&#125;,</span><br><span class="line">        um&#123;pci(&#x27; &#x27;, 3), pci(&#x27;s&#x27;, 3), pci(&#x27;o&#x27;, 3), pci(&#x27;d&#x27;, 2)&#125;, </span><br><span class="line">        um&#123;pci(&#x27; &#x27;, 3), pci(&#x27;s&#x27;, 3), pci(&#x27;o&#x27;, 3), pci(&#x27;d&#x27;, 2)&#125;,</span><br><span class="line">        um&#123;pci(&#x27; &#x27;, 3), pci(&#x27;s&#x27;, 3), pci(&#x27;d&#x27;, 3), pci(&#x27;o&#x27;, 3)&#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    char get_nst(char c) &#123;</span><br><span class="line">        if (c == &#x27; &#x27;) return &#x27; &#x27;;</span><br><span class="line">        if (c == &#x27;+&#x27; or c == &#x27;-&#x27;) return &#x27;s&#x27;;</span><br><span class="line">        if (c &gt;= &#x27;0&#x27; &amp;&amp; c &lt;= &#x27;9&#x27;) return &#x27;d&#x27;;</span><br><span class="line">        else return &#x27;o&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">public:</span><br><span class="line">    int sign = 1, st = 0, ans = 0, border = INT_MAX / 10;</span><br><span class="line">    bool end = false;</span><br><span class="line">    void get(char c) &#123;</span><br><span class="line">        if (end == true) return;</span><br><span class="line">        st = state[st][get_nst(c)];</span><br><span class="line">        if (st == 2) &#123;</span><br><span class="line">            if (ans &gt; border || (ans == border &amp;&amp; c &gt; &#x27;7&#x27;)) &#123;</span><br><span class="line">                ans = (sign == 1) ? INT_MAX : INT_MIN;</span><br><span class="line">                end = true;</span><br><span class="line">                return;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                ans = ans * 10 + (c - &#x27;0&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (st == 1) &#123;</span><br><span class="line">            sign = (c == &#x27;+&#x27;) ? 1 : -1;</span><br><span class="line">        &#125; else if (st == 3) &#123;</span><br><span class="line">            end = true;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int strToInt(string str) &#123;</span><br><span class="line">        Automaton automaton;</span><br><span class="line">        for (auto c : str) &#123;    </span><br><span class="line">            automaton.get(c);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (automaton.ans == INT_MIN) </span><br><span class="line">            return automaton.ans;</span><br><span class="line">        else return automaton.sign * automaton.ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-2"><h1 id="剑指-Offer-06-从尾到头打印链表"><a href="#剑指-Offer-06-从尾到头打印链表" class="headerlink" title="剑指 Offer 06. 从尾到头打印链表"></a><a href="https://leetcode.cn/problems/cong-wei-dao-tou-da-yin-lian-biao-lcof/?envType=study-plan-v2&amp;envId=coding-interviews">剑指 Offer 06. 从尾到头打印链表</a></h1><h2 id="方法1：递推（迭代）-分步"><a href="#方法1：递推（迭代）-分步" class="headerlink" title="方法1：递推（迭代）+分步"></a>方法1：递推（迭代）+分步</h2><ul><li>每遍历一个结点，就存储值到数组中</li><li>最后再翻转数组(可以直接stl库函数， 也可以使用双指针来实现自己实现翻转函数)<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">reversePrint</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (head != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(head-&gt;val);</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">reverse</span>(ans.<span class="built_in">begin</span>(), ans.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="方法2：递归"><a href="#方法2：递归" class="headerlink" title="方法2：递归"></a>方法2：递归</h2><h3 id="实现1：分步"><a href="#实现1：分步" class="headerlink" title="实现1：分步"></a>实现1：分步</h3></li><li>每递归一层就记录当前的值到数组中</li><li>翻转数组<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">reversePrint</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line"></span><br><span class="line">        function&lt;<span class="type">void</span>(ListNode*)&gt; dfs = [&amp;](ListNode* node) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            ans.<span class="built_in">push_back</span>(node-&gt;val);<span class="comment">//先计算值</span></span><br><span class="line">            <span class="built_in">dfs</span>(node-&gt;next);</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">dfs</span>(head);</span><br><span class="line">        <span class="built_in">reverse</span>(ans.<span class="built_in">begin</span>(), ans.<span class="built_in">end</span>());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="实现2：一步到位，无需翻转"><a href="#实现2：一步到位，无需翻转" class="headerlink" title="实现2：一步到位，无需翻转"></a>实现2：一步到位，无需翻转</h3></li><li>注意：递结束，归开始才进行真正的操作：添加值到数组中(系统栈弹栈过程中)<figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">reversePrint</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line"></span><br><span class="line">        function&lt;<span class="type">void</span>(ListNode*)&gt; dfs = [&amp;](ListNode* node) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node == <span class="literal">NULL</span>) <span class="keyword">return</span>;<span class="comment">//递结束条件</span></span><br><span class="line"></span><br><span class="line">            <span class="built_in">dfs</span>(node-&gt;next);</span><br><span class="line">            ans.<span class="built_in">push_back</span>(node-&gt;val);<span class="comment">//递结束后，归的过程中会执行该代码！！！</span></span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">dfs</span>(head);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="方法3：用栈模拟递归一步到位"><a href="#方法3：用栈模拟递归一步到位" class="headerlink" title="方法3：用栈模拟递归一步到位"></a>方法3：用栈模拟递归一步到位</h2><ul><li><strong>注意：递归本质在程序动态执行过程中就是系统栈来维护的</strong><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">reversePrint</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//压栈：对应递归的递</span></span><br><span class="line">        <span class="keyword">while</span> (head != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            stk.<span class="built_in">push</span>(head-&gt;val);</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//弹栈过程中，才真正的进行添加操作(对应递归的归)</span></span><br><span class="line">        <span class="keyword">while</span> (stk.<span class="built_in">size</span>() != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">auto</span> x = stk.<span class="built_in">top</span>();</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            ans.<span class="built_in">push_back</span>(x);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-6"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-7"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-8"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-9"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-10"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-11"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="剑指offer-12"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 算法面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语法学习</title>
      <link href="/2023/07/30/CPlusPlus%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
      <url>/2023/07/30/CPlusPlus%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="C-语法学习"><a href="#C-语法学习" class="headerlink" title="C++语法学习"></a>C++语法学习</h1><h2 id="C-基础入门"><a href="#C-基础入门" class="headerlink" title="C++基础入门"></a>C++基础入门</h2><h3 id="1-C-初识"><a href="#1-C-初识" class="headerlink" title="1. C++初识"></a>1. C++初识</h3><h4 id="1-1-第一个c-c程序：输出hello-world"><a href="#1-1-第一个c-c程序：输出hello-world" class="headerlink" title="1.1 第一个c++c程序：输出hello world!!!"></a>1.1 第一个c++c程序：输出hello world!!!</h4><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;hello world!!!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-注释"><a href="#1-2-注释" class="headerlink" title="1.2 注释"></a>1.2 注释</h4><ul><li>单行注释：<code>//</code></li><li>多行注释：<code>/**/</code><h4 id="1-3-变量"><a href="#1-3-变量" class="headerlink" title="1.3 变量"></a>1.3 变量</h4></li><li>意义：给一段指定的内存空间取别名，方便操作这段内存</li><li>语法：<code>数据类型 变量名 初始值;</code><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">10</span>;在一个大小为<span class="number">4</span>字节的空间存储数字<span class="number">10</span>，这段空间的起始地址为a</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h4 id="1-4-常量"><a href="#1-4-常量" class="headerlink" title="1.4 常量"></a>1.4 常量</h4></li><li>作用：用于记录程序中不可更改的数据</li><li>C++定义常量方式：<ul><li><code>#define 宏常量：#define 常量名 常量值</code><ul><li>通常文件上方定义，表示一个常量</li></ul></li><li>const修饰的变量const数据类型 变量名 = 常量值<ul><li>通常在变量前加关键字const, 修饰该变量为常量，不可更改(告知编译器) </li></ul></li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> day 7</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h4 id="1-5-关键字"><a href="#1-5-关键字" class="headerlink" title="1.5 关键字"></a>1.5 关键字</h4><ul><li>作用：关键字是C++预先保留的单词(标识符)</li><li><strong>在定义变量名或者常量名的时候，不要用关键字</strong></li></ul><div class="table-container"><table><thead><tr><th>asm</th><th>do</th><th>if</th><th>return</th><th>typedef</th></tr></thead><tbody><tr><td>auto</td><td>double</td><td>inline</td><td>short</td><td>typeid</td></tr><tr><td>bool</td><td>dynamic_cast</td><td>int</td><td>signed</td><td>typename</td></tr><tr><td>break</td><td>else</td><td>long</td><td>sizeof</td><td>union</td></tr><tr><td>case</td><td>enum</td><td>mutable</td><td>static</td><td>unsigned</td></tr><tr><td>catch</td><td>explicit</td><td>namespace</td><td>static_cast</td><td>using</td></tr><tr><td>char</td><td>export</td><td>new</td><td>struct</td><td>virtual</td></tr><tr><td>class</td><td>extern</td><td>operator</td><td>switch</td><td>void</td></tr><tr><td>const</td><td>false</td><td>private</td><td>template</td><td>volatile</td></tr><tr><td>const_cast</td><td>float</td><td>protected</td><td>this</td><td>wchar_t</td></tr><tr><td>continue</td><td>for</td><td>public</td><td>throw</td><td>while</td></tr><tr><td>default</td><td>friend</td><td>register</td><td>true</td><td></td></tr><tr><td>delete</td><td>goto</td><td>reinterpret_cast</td><td>try</td></tr></tbody></table></div><p><code>提示：在给常量或者变量起名称时候，不要用C++关键字，否则会产生歧义。</code></p><h4 id="1-6-标识符命名规则"><a href="#1-6-标识符命名规则" class="headerlink" title="1.6 标识符命名规则"></a>1.6 标识符命名规则</h4><p><strong>作用</strong>: C++规定给标识符（变量、常量）命名时，有一套自己的规则</p><ul><li>标识符不能是关键字</li><li>标识符只能由字母、数字、下划线组成</li><li>第一个字符必须为字母或下划线</li><li>标识符中字母区分大小写<blockquote><p>建议：给标识符命名时，争取做到见名知意的效果，方便自己和他人的阅读</p></blockquote></li></ul><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="type">int</span> = <span class="number">10</span>;<span class="comment">//错误</span></span><br><span class="line">    <span class="type">int</span> <span class="number">1223</span>adb = <span class="number">40</span>;<span class="comment">//错误</span></span><br><span class="line">    <span class="type">int</span> aa = <span class="number">10</span>;</span><br><span class="line">    cout &lt;&lt; AA &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2. 数据类型"></a>2. 数据类型</h3><p>C++规定在创建一个变量或者常量时，必须要指定出相应的数据类型，否则无法给变量分配内存</p><h4 id="2-1-整型"><a href="#2-1-整型" class="headerlink" title="2.1 整型"></a>2.1 整型</h4><p><strong>作用</strong>：整型变量表示的是整数类型的数据<br>C++中能够表示整形的类型有以下几种方式，<strong>区别在于</strong>所占内存空间不同：</p><div class="table-container"><table><thead><tr><th>数据类型</th><th>占用空间</th><th>取值范围</th></tr></thead><tbody><tr><td>short(短整型)</td><td>2字节</td><td>(-2^15~2^15-1)</td></tr><tr><td>int(整型)</td><td>4字节</td><td>(-2^31~2^31-1)</td></tr><tr><td>long(长整型)</td><td>Windows为4字节，Linux为子4字节(32位)，8字节(32位)</td><td>(-2^31~2^31-1)</td></tr><tr><td>long long(长长整型)</td><td>8字节</td><td>(-2^63~2^63-1)</td></tr></tbody></table></div><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">short</span> d = <span class="number">8</span>;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">long</span> b = <span class="number">40</span>;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> c = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;d = &quot;</span> &lt;&lt; d &lt;&lt; endl;<span class="comment">//(-32768~32767) d = 32768, 输出为-32768</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-sizeof关键字"><a href="#2-2-sizeof关键字" class="headerlink" title="2.2 sizeof关键字"></a>2.2 sizeof关键字</h4><p><strong>作用</strong>：利用sizeof关键字可以统计数据类型所占空间大小<br><strong>语法</strong>：<code>sizeof(数据类型 / 变量)</code><br><strong>示例</strong>：<br><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">short</span> d = <span class="number">8</span>;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">long</span> b = <span class="number">40</span>;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> c = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//(-32768~32767) d = 32768, 输出为-32768</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;d占用空间内存= &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(d) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;a占用空间内存= &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(a) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;b占用空间内存= &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(b) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;c占用空间内存= &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(c) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><code>总结：short &lt; int &lt;= long &lt;= long long</code></p><h4 id="2-3-实型-浮点型"><a href="#2-3-实型-浮点型" class="headerlink" title="2.3 实型(浮点型)"></a>2.3 实型(浮点型)</h4><p><strong>作用</strong>：用于表示小数</p><p>浮点型变量分为两种：</p><ol><li>单精度float</li><li>双精度double</li></ol><p>两者的<strong>区别</strong>在于表示的数字范围不同。</p><div class="table-container"><table><thead><tr><th>数据类型</th><th>占用空间</th><th>有效数字范围</th></tr></thead><tbody><tr><td>float</td><td>4字节</td><td>7位有效数字</td></tr><tr><td>double</td><td>8字节</td><td>16-56位有效数字</td></tr></tbody></table></div><p><strong>示例</strong>：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">float</span> f1 = <span class="number">3.1415925f</span>;</span><br><span class="line">    <span class="type">double</span> d1 = <span class="number">3.1415925</span><span class="comment">//编辑器默认把小数当成高精度，并且默认会显示6位有效数字</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; f1 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; d2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;float 占用空间：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">float</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;double 占用空间：&quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">double</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//科学计数法</span></span><br><span class="line">    <span class="type">float</span> f2 = <span class="number">2e2</span>;<span class="comment">//3 * 10 ^ 2</span></span><br><span class="line">    cout &lt;&lt; f2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> f3 = <span class="number">2e-2</span><span class="comment">//2 * 0.1 ^ 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="2-4-字符型"><a href="#2-4-字符型" class="headerlink" title="2.4 字符型"></a>2.4 字符型</h4><p><strong>作用</strong>：字符变量用于显示单个字符<br><strong>语法</strong>：`char ch = ‘a’;</p><blockquote><p>注意1：C和C++字符串变量中用于显示单个字符<br>注意2：单引号只能有一个字符，不可以是字符串</p></blockquote><ul><li>C和C++中字符串变量只占用一个字节</li><li>字符串变量并不是把字符放到内存中存储，而是将对应的ASCII编码放到存储单元中</li></ul><p><strong>示例</strong>：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 字符型创建变量方式</span></span><br><span class="line">    <span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符型变量所占的内存大小</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符型变量常见的错误</span></span><br><span class="line">    <span class="type">char</span> ch1 = <span class="string">&#x27;abs&#x27;</span>;<span class="comment">//错误，单引号中只能存放一个字符</span></span><br><span class="line">    <span class="type">char</span> ch2 = <span class="string">&quot;a&quot;</span>;<span class="comment">//错误，必须是单引号</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 字符型变量的ASCII编码值</span></span><br><span class="line">    cout &lt;&lt; (<span class="type">int</span>)ch &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// a-97</span></span><br><span class="line">    <span class="comment">// A-65</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ASCII可显示字符<br>可显示字符编号从32-126（0x20-0x7E）， 共95个字符<br><img src="https://www.runoob.com/wp-content/uploads/2022/03/ascii-1-1.png" alt="可显示字符"></p><p>控制字符<br>ASCII控制字符的编号范围是0-31和127（0x00-0x1F和0x7F），共33个字符<br><img src="https://www.runoob.com/wp-content/uploads/2022/03/ascii-2-1.png" alt="控制字符"></p><h4 id="2-5-转义字符"><a href="#2-5-转义字符" class="headerlink" title="2.5 转义字符"></a>2.5 转义字符</h4><p><strong>作用</strong>：用于表示一些不能显示出来的ASCII字符<br>现阶段我们常用的转移字符有：<code>\t \\ \n</code></p><div class="table-container"><table><thead><tr><th>转义字符</th><th>含义</th><th>有效数字范ASCII码值（十进制）</th></tr></thead><tbody><tr><td>\a</td><td>警报</td><td>007</td></tr><tr><td>\b</td><td>退格（BS），将当前位置移到前一列</td><td>008</td></tr><tr><td>\f</td><td>换页(FF)，将当前位置移动到下页开头</td><td>012</td></tr><tr><td><strong>\n</strong></td><td><strong>换行（LF），将当前位置移动到下行开头</strong></td><td><strong>010</strong></td></tr><tr><td>\r</td><td>回车（CR），将当前位置移动到本行开头</td><td>013</td></tr><tr><td><strong>\t</strong></td><td><strong>水平制表（HT），跳到下一个tab位置</strong></td><td><strong>009</strong></td></tr><tr><td>\v</td><td>竖直制表（VT）</td><td>011</td></tr><tr><td>\ \</td><td><strong>代表一个反斜杠”\”</strong></td><td><strong>092</strong></td></tr><tr><td>\ ‘</td><td>代表一个单引号（撇号）字符</td><td>039</td></tr><tr><td>\ “</td><td>代表一个双引号字符</td><td>034</td></tr><tr><td>\ ?</td><td>代表一个问号</td><td>063</td></tr><tr><td>\ 0</td><td>数字0</td><td>000</td></tr><tr><td>\ddd</td><td>八进制转义字符，d范围0~7</td><td>3位八进制</td></tr><tr><td>\xhh</td><td>十六进制转义字符，范围0~9, a~f, A~F</td><td>3位十六进制</td></tr></tbody></table></div><h2 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h2><h2 id="提高"><a href="#提高" class="headerlink" title="提高"></a>提高</h2>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 语法 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
